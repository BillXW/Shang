1                                        ;
2                                        ;       annotate version 1.03
3                                        ;
4                                        ; **************************************************
5                                        ; **************************************************
6                                                  section opt_adpcm_v4_c
7                                                  opt     so,nomd
8                                                  page    132,66,3,3
9                                        ;*** DSP56000/1 Motorola 1.03 GNU 1.37.1
10        P:0000                                   org     p:
11                                                 global  FE_STATES
12        X:0000                                   org     x:
13                                       FE_STATES
14        X:0000                                   dc      0
15        X:0001                                   dc      0
16        X:0002                                   dc      0
17        X:0003                                   dc      0
18        X:0004                                   dc      0
19        X:0005                                   dc      0
20        X:0006                                   dc      0
21        X:0007                                   dc      0
22        X:0008                                   dc      0
23        X:0009                                   dc      0
24        X:000A                                   dc      0
25        X:000B                                   dc      0
26        X:000C                                   dc      0
27        X:000D                                   dc      0
28        X:000E                                   dc      0
29        X:000F                                   dc      0
30        X:0010                                   dc      0
31        X:0011                                   dc      0
32        X:0012                                   dc      0
33        X:0013                                   dc      0
34        X:0014                                   dc      0
35        X:0015                                   dc      0
36        X:0016                                   dc      0
37        X:0017                                   dc      0
38        X:0018                                   dc      0
39        X:0019                                   dc      0
40        X:001A                                   dc      0
41        X:001B                                   dc      0
42        X:001C                                   dc      0
43        X:001D                                   dc      0
44                                                 global  FD_STATES
45                                       FD_STATES
46        X:001E                                   dc      0
47        X:001F                                   dc      0
48        X:0020                                   dc      0
49        X:0021                                   dc      0
50        X:0022                                   dc      0
51        X:0023                                   dc      0
52        X:0024                                   dc      0
53        X:0025                                   dc      0
54        X:0026                                   dc      0
55        X:0027                                   dc      0
56        X:0028                                   dc      0
57        X:0029                                   dc      0
58        X:002A                                   dc      0
59        X:002B                                   dc      0
60        X:002C                                   dc      0
61        X:002D                                   dc      0
62        X:002E                                   dc      0
63        X:002F                                   dc      0
64        X:0030                                   dc      0
65        X:0031                                   dc      0
66        X:0032                                   dc      0
67        X:0033                                   dc      0
68        X:0034                                   dc      0
69        X:0035                                   dc      0
70        X:0036                                   dc      0
71        X:0037                                   dc      0
72        X:0038                                   dc      0
73        X:0039                                   dc      0
74        X:003A                                   dc      0
75        X:003B                                   dc      0
76        P:0000                                   org     p:
77                                                 global  Ff_mult
78                                       Ff_mult
79                                       ; **************************************************
80                                       ; /*
81                                       ;  * opt_adpcm.c
82                                       ;  * Handwritten version of an optimized ADPCM transcoder applying the
83                                       ;  * CCITT recommendation G.721
84                                       ;  *
85                                       ;  * For our purposes the algorithem has been retimed (a few delays have been
86                                       ;  * moved around). But apart from that the algorithem matches the CCITT's.
87                                       ;  * So for further documentation of the source refer to the recommendation.
88                                       ;  *
89                                       ;  * Compile flags:
90                                       ;  * __SIMULATION__ : use to get a file for run56sim
91                                       ;  * __DOWNLOAD__:    use to get a file for the S56X board
92                                       ;  * __MNECOUNT__:    use to count mnemonics
93                                       ;  *
94                                       ;  * 3-NOV-93 Juan Martinez and Chris Schlaeger
95                                       ;  * 
96                                       ;  * VERSION 1.4
97                                       ;  */
98                                       ; 
99                                       ; #include <stdio.h>
100                                      ; 
101                                      ; #define FALSE 0
102                                      ; #define TRUE (!FALSE)
103                                      ; 
104                                      ; FILE* istrm;
105                                      ; FILE* ostrm;
106                                      ; int   ExitFlag;
107                                      ; 
108                                      ; /* global signals */
109                                      ; unsigned int A_2, AL, D, I, SD, S_E, SL, SP, TDP;
110                                      ; 
111                                      ; typedef struct
112                                      ; {
113                                      ;   int DQ, T, Y, YL, DQ2, DQ3, DQ4, DQ5, DQ6, DQ7, PK1, PK2, SR2,
114                                      ;       A1, A2, SE, SEZ, t_dr, LAST_TR, DMS, DML, AP, Y_L, LAST_Y;
115                                      ;   unsigned int B[6];
116                                      ; } STATES;
117                                      ; 
118                                      ; /* ENCODER states */
119                                      ; STATES E_STATES = { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 };
120                                      ; 
121                                      ; /* DECODER states */
122                                      ; STATES D_STATES = { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 };
123                                      ; 
124                                      ; #define LSHIFT(a, b)  ((b) < 0 ? (a) << -(b) : (a) >> (b))
125                                      ; #define SIGNBIT(a, b) ((a) & (1 << (b)) ? 1 : 0)
126                                      ; #define MSB(a, b)     { register unsigned int tmp = (a); ;                         (b) = 
0; while(tmp) {tmp >>= 1; (b)++; }}
127                                      ;  
128                                      ; unsigned int f_mult(unsigned int An, unsigned int SRn)
129                                      ; {
130                                      ;   register int  EXP;
131                                      ;   register unsigned int WAnMANT;
132                                      ;   int                   AnS, AnMANT;
133                                      ;   unsigned int          MAG;
134                                      ; 
135                                      ;   AnS = SIGNBIT(An, 15);
136                                      ; **************************************************
137       P:0000 70F400  [4 -        4]            move              #65533,n0
                 00FFFD
138       P:0002 605E00  [2 -        6]            move              r0,x:(r6)+
139       P:0003 205E00  [2 -        8]            move              (r6)+
140       P:0004 22D000  [2 -       10]            move              r6,r0
141       P:0005 205E00  [2 -       12]            move              (r6)+
142       P:0006 515E00  [2 -       14]            move              b0,x:(r6)+
143       P:0007 555E00  [2 -       16]            move              b1,x:(r6)+
144       P:0008 445E00  [2 -       18]            move              x0,x:(r6)+
145       P:0009 44F400  [4 -       22]            move              #>32768,x0
                 008000
146       P:000B 455E00  [2 -       24]            move              x1,x:(r6)+
147       P:000C 465E00  [2 -       26]            move              y0,x:(r6)+
148       P:000D 475E00  [2 -       28]            move              y1,x:(r6)+
149       P:000E 56E800  [4 -       32]            move              x:(r0+n0),a
150       P:000F 200046  [2 -       34]            and     x0,a
151       P:0010 218E00  [2 -       36]            move              a1,a
152       P:0011 2A0000  [2 -       38]            move              #0,a2
153       P:0012 200003  [2 -       40]            tst     a
154       P:0013 0AF0AA  [6 -       46]            jeq     L2
                 000019
155       P:0015 47F400  [4 -       50]            move              #>1,y1
                 000001
156       P:0017 0AF080  [6 -       56]            jmp     L3
                 00001A
157                                      L2
158       P:0019 270000  [2 -       58]            move              #0,y1
159                                      L3
160                                      ; **************************************************
161                                      ;   MAG = AnS ? (16384 - (An >> 2)) & 8191 : An >> 2;
162                                      ; **************************************************
163       P:001A 200079  [2 -       60]            tfr     y1,b
164       P:001B 20000B  [2 -       62]            tst     b
165       P:001C 0AF0AA  [6 -       68]            jeq     L4
                 00002B
166       P:001E 70F400  [4 -       72]            move              #65533,n0
                 00FFFD
167       P:0020 44F400  [4 -       76]            move              #>8191,x0
                 001FFF
168       P:0022 56E800  [4 -       80]            move              x:(r0+n0),a
169       P:0023 57F423  [4 -       84]            lsr     a         #>16384,b
                 004000
170       P:0025 200023  [2 -       86]            lsr     a
171       P:0026 20001C  [2 -       88]            sub     a,b
172       P:0027 20004E  [2 -       90]            and     x0,b
173       P:0028 21AF00  [2 -       92]            move              b1,b
174       P:0029 0AF080  [6 -       98]            jmp     L18
                 000030
175                                      L4
176       P:002B 70F400  [4 -      102]            move              #65533,n0
                 00FFFD
177       P:002D 57E800  [4 -      106]            move              x:(r0+n0),b
178       P:002E 20002B  [2 -      108]            lsr     b
179       P:002F 20002B  [2 -      110]            lsr     b
180                                      L18
181                                      ; **************************************************
182                                      ;   MSB(MAG, EXP);
183                                      ; **************************************************
184       P:0030 250000  [2 -      112]            move              #0,x1
185       P:0031 556000  [2 -      114]            move              b1,x:(r0)
186       P:0032 56E000  [2 -      116]            move              x:(r0),a
187       P:0033 2A0000  [2 -      118]            move              #0,a2
188       P:0034 200003  [2 -      120]            tst     a
189       P:0035 0AF0AA  [6 -      126]            jeq     L17
                 00003F
190       P:0037 44F400  [4 -      130]            move              #>1,x0
                 000001
191                                      L8
192       P:0039 000023  [2 -      132]            lsr     a         #0,a2
193       P:003A 200069  [2 -      134]            tfr     x1,b
194       P:003B 200048  [2 -      136]            add     x0,b
195       P:003C 21A503  [2 -      138]            tst     a         b1,x1
196       P:003D 0AF0A2  [6 -      144]            jne     L8
                 000039
197                                      L17
198                                      ; **************************************************
199                                      ;   AnMANT = MAG ? LSHIFT(MAG, EXP - 6) : 1 << 5;
200                                      ; **************************************************
201       P:003F 57E000  [2 -      146]            move              x:(r0),b
202       P:0040 2B0000  [2 -      148]            move              #0,b2
203       P:0041 20000B  [2 -      150]            tst     b
204       P:0042 0AF0AA  [6 -      156]            jeq     L9
                 000060
205       P:0044 56F469  [4 -      160]            tfr     x1,b      #>16777210,a
                 FFFFFA
206       P:0046 200018  [2 -      162]            add     a,b
207       P:0047 200001  [2 -      164]            tfr     b,a
208       P:0048 200003  [2 -      166]            tst     a
209       P:0049 0AF0A1  [6 -      172]            jge     L11
                 000054
210       P:004B 57E036  [2 -      174]            neg     a         x:(r0),b
211       P:004C 200003  [2 -      176]            tst     a
212       P:004D 0AF0AA  [6 -      182]            jeq     L20
                 000051
213       P:004F 06CE20  [4 -      186]            rep     a
214       P:0050 20003B  [2 -      188]            lsl     b
215                                      L20
216       P:0051 556000  [2 -      190]            move              b1,x:(r0)
217       P:0052 0AF080  [6 -      196]            jmp     L10
                 000063
218                                      L11
219       P:0054 56F469  [4 -      200]            tfr     x1,b      #>16777210,a
                 FFFFFA
220       P:0056 200018  [2 -      202]            add     a,b
221       P:0057 57E001  [2 -      204]            tfr     b,a       x:(r0),b
222       P:0058 200003  [2 -      206]            tst     a
223       P:0059 0AF0AA  [6 -      212]            jeq     L21
                 00005D
224       P:005B 06CE20  [4 -      216]            rep     a
225       P:005C 20002B  [2 -      218]            lsr     b
226                                      L21
227       P:005D 556000  [2 -      220]            move              b1,x:(r0)
228       P:005E 0AF080  [6 -      226]            jmp     L10
                 000063
229                                      L9
230       P:0060 46F400  [4 -      230]            move              #>32,y0
                 000020
231       P:0062 466000  [2 -      232]            move              y0,x:(r0)
232                                      L10
233                                      ; **************************************************
234                                      ;   EXP += ((SRn >> 6) & 15);
235                                      ; **************************************************
236       P:0063 70F400  [4 -      236]            move              #65532,n0
                 00FFFC
237       P:0065 56E800  [4 -      240]            move              x:(r0+n0),a
238       P:0066 0606A0  [4 -      244]            rep     #6
239       P:0067 200023  [2 -      246]            lsr     a
240                                      ; **************************************************
241                                      ;   WAnMANT = (((SRn & 63) * AnMANT) + 48) >> 4;
242                                      ; **************************************************
243       P:0068 46E069  [2 -      248]            tfr     x1,b      x:(r0),y0
244       P:0069 44F400  [4 -      252]            move              #>15,x0
                 00000F
245       P:006B 44F446  [4 -      256]            and     x0,a      #>63,x0
                 00003F
246       P:006D 218E00  [2 -      258]            move              a1,a
247       P:006E 56F418  [4 -      262]            add     a,b       #>48,a
                 000030
248       P:0070 21C800  [2 -      264]            move              a,a0
249       P:0071 21A532  [2 -      266]            asl     a         b1,x1
250       P:0072 57E800  [4 -      270]            move              x:(r0+n0),b
251       P:0073 20004E  [2 -      272]            and     x0,b
252       P:0074 21AF00  [2 -      274]            move              b1,b
253       P:0075 21A400  [2 -      276]            move              b1,x0
254       P:0076 2000D2  [2 -      278]            mac     +x0,y0,a
255       P:0077 200022  [2 -      280]            asr     a
256       P:0078 210E00  [2 -      282]            move              a0,a
257       P:0079 200009  [2 -      284]            tfr     a,b
258       P:007A 0604A0  [4 -      288]            rep     #4
259       P:007B 20002B  [2 -      290]            lsr     b
260                                      ; **************************************************
261                                      ;   MAG = LSHIFT(WAnMANT, 19 - EXP) & 32767;
262                                      ; **************************************************
263       P:007C 56F400  [4 -      294]            move              #>19,a
                 000013
264       P:007E 556064  [2 -      296]            sub     x1,a      b1,x:(r0)
265       P:007F 200003  [2 -      298]            tst     a
266       P:0080 0AF0A1  [6 -      304]            jge     L13
                 00008A
267       P:0082 200036  [2 -      306]            neg     a
268       P:0083 200003  [2 -      308]            tst     a
269       P:0084 0AF0AA  [6 -      314]            jeq     L22
                 000088
270       P:0086 06CE20  [4 -      318]            rep     a
271       P:0087 20003B  [2 -      320]            lsl     b
272                                      L22
273       P:0088 0AF080  [6 -      326]            jmp     L19
                 000093
274                                      L13
275       P:008A 57E000  [2 -      328]            move              x:(r0),b
276       P:008B 56F400  [4 -      332]            move              #>19,a
                 000013
277       P:008D 200064  [2 -      334]            sub     x1,a
278       P:008E 200003  [2 -      336]            tst     a
279       P:008F 0AF0AA  [6 -      342]            jeq     L23
                 000093
280       P:0091 06CE20  [4 -      346]            rep     a
281       P:0092 20002B  [2 -      348]            lsr     b
282                                      L23
283                                      L19
284                                      ; **************************************************
285                                      ;   return ((SRn >> 10) ^ AnS ? (65536 - MAG) & 65535 : MAG);
286                                      ; **************************************************
287       P:0093 70F400  [4 -      352]            move              #65532,n0
                 00FFFC
288       P:0095 44F400  [4 -      356]            move              #>32767,x0
                 007FFF
289       P:0097 556000  [2 -      358]            move              b1,x:(r0)
290       P:0098 57E000  [2 -      360]            move              x:(r0),b
291       P:0099 20004E  [2 -      362]            and     x0,b
292       P:009A 21AF00  [2 -      364]            move              b1,b
293       P:009B 556000  [2 -      366]            move              b1,x:(r0)
294       P:009C 56E800  [4 -      370]            move              x:(r0+n0),a
295       P:009D 060AA0  [4 -      374]            rep     #10
296       P:009E 200023  [2 -      376]            lsr     a
297       P:009F 200073  [2 -      378]            eor     y1,a
298       P:00A0 218E00  [2 -      380]            move              a1,a
299       P:00A1 2A0000  [2 -      382]            move              #0,a2
300       P:00A2 200003  [2 -      384]            tst     a
301       P:00A3 0AF0AA  [6 -      390]            jeq     L15
                 0000AF
302       P:00A5 44F400  [4 -      394]            move              #>65535,x0
                 00FFFF
303       P:00A7 46E000  [2 -      396]            move              x:(r0),y0
304       P:00A8 56F400  [4 -      400]            move              #>65536,a
                 010000
305       P:00AA 200054  [2 -      402]            sub     y0,a
306       P:00AB 200046  [2 -      404]            and     x0,a
307       P:00AC 218E00  [2 -      406]            move              a1,a
308       P:00AD 0AF080  [6 -      412]            jmp     L16
                 0000B0
309                                      L15
310       P:00AF 56E000  [2 -      414]            move              x:(r0),a
311                                      L16
312                                      ; **************************************************
313                                      ; }
314                                      ; **************************************************
315       P:00B0 205603  [2 -      416]            tst     a         (r6)-
316       P:00B1 47D600  [2 -      418]            move              x:(r6)-,y1
317       P:00B2 46D600  [2 -      420]            move              x:(r6)-,y0
318       P:00B3 45D600  [2 -      422]            move              x:(r6)-,x1
319       P:00B4 44D600  [2 -      424]            move              x:(r6)-,x0
320       P:00B5 57D600  [2 -      426]            move              x:(r6)-,b
321       P:00B6 51E600  [2 -      428]            move              x:(r6),b0
322       P:00B7 205600  [2 -      430]            move              (r6)-
323       P:00B8 205600  [2 -      432]            move              (r6)-
324       P:00B9 205600  [2 -      434]            move              (r6)-
325       P:00BA 60E600  [2 -      436]            move              x:(r6),r0
326       P:00BB 00000C  [4 -      440]            rts
327    
328                                                global  Fadpt_predict
329                                      Fadpt_predict
330       P:00BC 605E00  [2 -      442]            move              r0,x:(r6)+
331       P:00BD 055E3C  [2 -      444]            move              ssh,x:(r6)+
332                                      ; **************************************************
333                                      ; **************************************************
334                                      ; **************************************************
335                                      ; 
336                                      ; void adpt_predict(STATES *S)
337                                      ; {
338                                      ;   /*
339                                      ;    * adaptive predictor
340                                      ;    *
341                                      ;    * Input signals:  DQ, T
342                                      ;    * Output signals: S_E, A_2
343                                      ;    */
344                                      ; 
345                                      ;   register int EXP;
346                                      ;   register unsigned int MAG;
347                                      ;   unsigned int DQS, DQI, DQSEZ, PK0; 
348                                      ;   int SR1;
349                                      ;   int A1S, AP;
350                                      ;   int A2R;
351                                      ;   int WA1, WA2;
352                                      ;   int MANT; 
353                                      ;   int BP[6];
354                                      ; 
355                                      ;   /* ADDC */
356                                      ;   DQS = SIGNBIT(S->DQ, 14);
357                                      ; **************************************************
358       P:00BE 70F400  [4 -      448]            move              #65533,n0
                 00FFFD
359       P:00C0 3E1500  [2 -      450]            move              #21,n6
360       P:00C1 22D000  [2 -      452]            move              r6,r0
361       P:00C2 204E00  [2 -      454]            move              (r6)+n6
362       P:00C3 515E00  [2 -      456]            move              b0,x:(r6)+
363       P:00C4 555E00  [2 -      458]            move              b1,x:(r6)+
364       P:00C5 445E00  [2 -      460]            move              x0,x:(r6)+
365       P:00C6 44F400  [4 -      464]            move              #>16384,x0
                 004000
366       P:00C8 455E00  [2 -      466]            move              x1,x:(r6)+
367       P:00C9 465E00  [2 -      468]            move              y0,x:(r6)+
368       P:00CA 475E00  [2 -      470]            move              y1,x:(r6)+
369       P:00CB 615E00  [2 -      472]            move              r1,x:(r6)+
370       P:00CC 625E00  [2 -      474]            move              r2,x:(r6)+
371       P:00CD 635E00  [2 -      476]            move              r3,x:(r6)+
372       P:00CE 645E00  [2 -      478]            move              r4,x:(r6)+
373       P:00CF 64E800  [4 -      482]            move              x:(r0+n0),r4
374       P:00D0 56E400  [2 -      484]            move              x:(r4),a
375       P:00D1 200046  [2 -      486]            and     x0,a
376       P:00D2 218E00  [2 -      488]            move              a1,a
377       P:00D3 200003  [2 -      490]            tst     a
378       P:00D4 0AF0AA  [6 -      496]            jeq     L25
                 0000DA
379       P:00D6 47F400  [4 -      500]            move              #>1,y1
                 000001
380       P:00D8 0AF080  [6 -      506]            jmp     L115
                 0000DB
381                                      L25
382       P:00DA 270000  [2 -      508]            move              #0,y1
383                                      L115
384                                      ; **************************************************
385                                      ;   DQI = DQS ? 65536 - (S->DQ & 16383) : S->DQ;
386                                      ; **************************************************
387       P:00DB 380700  [2 -      510]            move              #7,n0
388       P:00DC 476800  [4 -      514]            move              y1,x:(r0+n0)
389       P:00DD 57E800  [4 -      518]            move              x:(r0+n0),b
390       P:00DE 2B0000  [2 -      520]            move              #0,b2
391       P:00DF 20000B  [2 -      522]            tst     b
392       P:00E0 0AF0AA  [6 -      528]            jeq     L27
                 0000EE
393       P:00E2 380800  [2 -      530]            move              #8,n0
394       P:00E3 56E400  [2 -      532]            move              x:(r4),a
395       P:00E4 57F400  [4 -      536]            move              #>65536,b
                 010000
396       P:00E6 44F400  [4 -      540]            move              #>16383,x0
                 003FFF
397       P:00E8 200046  [2 -      542]            and     x0,a
398       P:00E9 218E00  [2 -      544]            move              a1,a
399       P:00EA 20001C  [2 -      546]            sub     a,b
400       P:00EB 556800  [4 -      550]            move              b1,x:(r0+n0)
401       P:00EC 0AF080  [6 -      556]            jmp     L28
                 0000F1
402                                      L27
403       P:00EE 380800  [2 -      558]            move              #8,n0
404       P:00EF 47E400  [2 -      560]            move              x:(r4),y1
405       P:00F0 476800  [4 -      564]            move              y1,x:(r0+n0)
406                                      L28
407                                      ; **************************************************
408                                      ;   MAG = S->SEZ & (1 << 14) ? (1 << 15) + S->SEZ : S->SEZ;
409                                      ; **************************************************
410       P:00F1 381300  [2 -      566]            move              #19,n0
411       P:00F2 3C1000  [2 -      568]            move              #16,n4
412       P:00F3 44F400  [4 -      572]            move              #>16384,x0
                 004000
413       P:00F5 47EC00  [4 -      576]            move              x:(r4+n4),y1
414       P:00F6 476879  [4 -      580]            tfr     y1,b      y1,x:(r0+n0)
415       P:00F7 20004E  [2 -      582]            and     x0,b
416       P:00F8 21AF00  [2 -      584]            move              b1,b
417       P:00F9 20000B  [2 -      586]            tst     b
418       P:00FA 0AF0AA  [6 -      592]            jeq     L29
                 000103
419       P:00FC 57E800  [4 -      596]            move              x:(r0+n0),b
420       P:00FD 47F400  [4 -      600]            move              #>32768,y1
                 008000
421       P:00FF 200078  [2 -      602]            add     y1,b
422       P:0100 556800  [4 -      606]            move              b1,x:(r0+n0)
423       P:0101 0AF080  [6 -      612]            jmp     L30
                 000107
424                                      L29
425       P:0103 381300  [2 -      614]            move              #19,n0
426       P:0104 3C1000  [2 -      616]            move              #16,n4
427       P:0105 47EC00  [4 -      620]            move              x:(r4+n4),y1
428       P:0106 476800  [4 -      624]            move              y1,x:(r0+n0)
429                                      L30
430                                      ; **************************************************
431                                      ;   DQSEZ = (DQI + MAG) & 65535;
432                                      ; **************************************************
433                                      ; **************************************************
434                                      ;   PK0 = DQSEZ >> 15;
435                                      ; **************************************************
436       P:0107 380800  [2 -      626]            move              #8,n0
437       P:0108 44F400  [4 -      630]            move              #>65535,x0
                 00FFFF
438       P:010A 57E800  [4 -      634]            move              x:(r0+n0),b
439       P:010B 381300  [2 -      636]            move              #19,n0
440       P:010C 47E800  [4 -      640]            move              x:(r0+n0),y1
441       P:010D 380978  [2 -      642]            add     y1,b      #9,n0
442       P:010E 20004E  [2 -      644]            and     x0,b
443       P:010F 21AF00  [2 -      646]            move              b1,b
444       P:0110 556800  [4 -      650]            move              b1,x:(r0+n0)
445       P:0111 060FA0  [4 -      654]            rep     #15
446       P:0112 20002B  [2 -      656]            lsr     b
447                                      ; **************************************************
448                                      ;   WA2 = DQSEZ ? 0 : 1;
449                                      ; **************************************************
450       P:0113 380A00  [2 -      658]            move              #10,n0
451       P:0114 556800  [4 -      662]            move              b1,x:(r0+n0)
452       P:0115 380900  [2 -      664]            move              #9,n0
453       P:0116 57E800  [4 -      668]            move              x:(r0+n0),b
454       P:0117 2B0000  [2 -      670]            move              #0,b2
455       P:0118 20000B  [2 -      672]            tst     b
456       P:0119 0AF0AA  [6 -      678]            jeq     L31
                 00011E
457       P:011B 270000  [2 -      680]            move              #0,y1
458       P:011C 0AF080  [6 -      686]            jmp     L116
                 000120
459                                      L31
460       P:011E 47F400  [4 -      690]            move              #>1,y1
                 000001
461                                      L116
462                                      ; **************************************************
463                                      ;   
464                                      ;   /* ADDB */
465                                      ;   DQI = DQS ? 65536 - (S->DQ & 16383) : S->DQ;
466                                      ; **************************************************
467       P:0120 380E00  [2 -      692]            move              #14,n0
468       P:0121 476800  [4 -      696]            move              y1,x:(r0+n0)
469       P:0122 380700  [2 -      698]            move              #7,n0
470       P:0123 57E800  [4 -      702]            move              x:(r0+n0),b
471       P:0124 2B0000  [2 -      704]            move              #0,b2
472       P:0125 20000B  [2 -      706]            tst     b
473       P:0126 0AF0AA  [6 -      712]            jeq     L33
                 000134
474       P:0128 380800  [2 -      714]            move              #8,n0
475       P:0129 56E400  [2 -      716]            move              x:(r4),a
476       P:012A 57F400  [4 -      720]            move              #>65536,b
                 010000
477       P:012C 44F400  [4 -      724]            move              #>16383,x0
                 003FFF
478       P:012E 200046  [2 -      726]            and     x0,a
479       P:012F 218E00  [2 -      728]            move              a1,a
480       P:0130 20001C  [2 -      730]            sub     a,b
481       P:0131 556800  [4 -      734]            move              b1,x:(r0+n0)
482       P:0132 0AF080  [6 -      740]            jmp     L34
                 000137
483                                      L33
484       P:0134 380800  [2 -      742]            move              #8,n0
485       P:0135 47E400  [2 -      744]            move              x:(r4),y1
486       P:0136 476800  [4 -      748]            move              y1,x:(r0+n0)
487                                      L34
488                                      ; **************************************************
489                                      ;   MAG = S->SE & (1 << 14) ? (1 << 15) + S->SE : S->SE;
490                                      ; **************************************************
491       P:0137 381300  [2 -      750]            move              #19,n0
492       P:0138 3C0F00  [2 -      752]            move              #15,n4
493       P:0139 44F400  [4 -      756]            move              #>16384,x0
                 004000
494       P:013B 47EC00  [4 -      760]            move              x:(r4+n4),y1
495       P:013C 476879  [4 -      764]            tfr     y1,b      y1,x:(r0+n0)
496       P:013D 20004E  [2 -      766]            and     x0,b
497       P:013E 21AF00  [2 -      768]            move              b1,b
498       P:013F 20000B  [2 -      770]            tst     b
499       P:0140 0AF0AA  [6 -      776]            jeq     L35
                 000149
500       P:0142 57E800  [4 -      780]            move              x:(r0+n0),b
501       P:0143 47F400  [4 -      784]            move              #>32768,y1
                 008000
502       P:0145 200078  [2 -      786]            add     y1,b
503       P:0146 556800  [4 -      790]            move              b1,x:(r0+n0)
504       P:0147 0AF080  [6 -      796]            jmp     L36
                 00014D
505                                      L35
506       P:0149 381300  [2 -      798]            move              #19,n0
507       P:014A 3C0F00  [2 -      800]            move              #15,n4
508       P:014B 47EC00  [4 -      804]            move              x:(r4+n4),y1
509       P:014C 476800  [4 -      808]            move              y1,x:(r0+n0)
510                                      L36
511                                      ; **************************************************
512                                      ;   DQSEZ = (DQI + MAG) & 65535;
513                                      ; **************************************************
514                                      ; **************************************************
515                                      ;   
516                                      ;   /* FLOATB */
517                                      ;   MAG = SIGNBIT(DQSEZ, 15) ? (65536 - DQSEZ) & 32767 : DQSEZ;
518                                      ; **************************************************
519       P:014D 380800  [2 -      810]            move              #8,n0
520       P:014E 44F400  [4 -      814]            move              #>65535,x0
                 00FFFF
521       P:0150 57E800  [4 -      818]            move              x:(r0+n0),b
522       P:0151 381300  [2 -      820]            move              #19,n0
523       P:0152 47E800  [4 -      824]            move              x:(r0+n0),y1
524       P:0153 380978  [2 -      826]            add     y1,b      #9,n0
525       P:0154 44F44E  [4 -      830]            and     x0,b      #>32768,x0
                 008000
526       P:0156 21AF00  [2 -      832]            move              b1,b
527       P:0157 55684E  [4 -      836]            and     x0,b      b1,x:(r0+n0)
528       P:0158 21AF00  [2 -      838]            move              b1,b
529       P:0159 2B0000  [2 -      840]            move              #0,b2
530       P:015A 20000B  [2 -      842]            tst     b
531       P:015B 0AF0AA  [6 -      848]            jeq     L37
                 000169
532       P:015D 47E800  [4 -      852]            move              x:(r0+n0),y1
533       P:015E 381300  [2 -      854]            move              #19,n0
534       P:015F 44F400  [4 -      858]            move              #>32767,x0
                 007FFF
535       P:0161 57F400  [4 -      862]            move              #>65536,b
                 010000
536       P:0163 20007C  [2 -      864]            sub     y1,b
537       P:0164 20004E  [2 -      866]            and     x0,b
538       P:0165 21AF00  [2 -      868]            move              b1,b
539       P:0166 556800  [4 -      872]            move              b1,x:(r0+n0)
540       P:0167 0AF080  [6 -      878]            jmp     L38
                 00016D
541                                      L37
542       P:0169 380900  [2 -      880]            move              #9,n0
543       P:016A 47E800  [4 -      884]            move              x:(r0+n0),y1
544       P:016B 381300  [2 -      886]            move              #19,n0
545       P:016C 476800  [4 -      890]            move              y1,x:(r0+n0)
546                                      L38
547                                      ; **************************************************
548                                      ;   MSB(MAG, EXP);
549                                      ; **************************************************
550       P:016D 381300  [2 -      892]            move              #19,n0
551       P:016E 47E800  [4 -      896]            move              x:(r0+n0),y1
552       P:016F 381400  [2 -      898]            move              #20,n0
553       P:0170 476800  [4 -      902]            move              y1,x:(r0+n0)
554       P:0171 380600  [2 -      904]            move              #6,n0
555       P:0172 270000  [2 -      906]            move              #0,y1
556       P:0173 476800  [4 -      910]            move              y1,x:(r0+n0)
557       P:0174 381300  [2 -      912]            move              #19,n0
558       P:0175 57E800  [4 -      916]            move              x:(r0+n0),b
559       P:0176 2B0000  [2 -      918]            move              #0,b2
560       P:0177 20000B  [2 -      920]            tst     b
561       P:0178 0AF0AA  [6 -      926]            jeq     L114
                 00018A
562       P:017A 44F400  [4 -      930]            move              #>1,x0
                 000001
563                                      L43
564       P:017C 381400  [2 -      932]            move              #20,n0
565       P:017D 57E800  [4 -      936]            move              x:(r0+n0),b
566       P:017E 20002B  [2 -      938]            lsr     b
567       P:017F 556800  [4 -      942]            move              b1,x:(r0+n0)
568       P:0180 380600  [2 -      944]            move              #6,n0
569       P:0181 57E800  [4 -      948]            move              x:(r0+n0),b
570       P:0182 200048  [2 -      950]            add     x0,b
571       P:0183 556800  [4 -      954]            move              b1,x:(r0+n0)
572       P:0184 381400  [2 -      956]            move              #20,n0
573       P:0185 57E800  [4 -      960]            move              x:(r0+n0),b
574       P:0186 2B0000  [2 -      962]            move              #0,b2
575       P:0187 20000B  [2 -      964]            tst     b
576       P:0188 0AF0A2  [6 -      970]            jne     L43
                 00017C
577                                      L114
578                                      ; **************************************************
579                                      ;   MANT = MAG ? (MAG << 6) >> EXP : 1 << 5;
580                                      ; **************************************************
581       P:018A 381300  [2 -      972]            move              #19,n0
582       P:018B 57E800  [4 -      976]            move              x:(r0+n0),b
583       P:018C 2B0000  [2 -      978]            move              #0,b2
584       P:018D 20000B  [2 -      980]            tst     b
585       P:018E 0AF0AA  [6 -      986]            jeq     L44
                 00019D
586       P:0190 0606A0  [4 -      990]            rep     #6
587       P:0191 20003B  [2 -      992]            lsl     b
588       P:0192 380600  [2 -      994]            move              #6,n0
589       P:0193 56E800  [4 -      998]            move              x:(r0+n0),a
590       P:0194 200003  [2 -     1000]            tst     a
591       P:0195 0AF0AA  [6 -     1006]            jeq     L127
                 000199
592       P:0197 06CE20  [4 -     1010]            rep     a
593       P:0198 20002B  [2 -     1012]            lsr     b
594                                      L127
595       P:0199 380F00  [2 -     1014]            move              #15,n0
596       P:019A 556800  [4 -     1018]            move              b1,x:(r0+n0)
597       P:019B 0AF080  [6 -     1024]            jmp     L45
                 0001A1
598                                      L44
599       P:019D 380F00  [2 -     1026]            move              #15,n0
600       P:019E 47F400  [4 -     1030]            move              #>32,y1
                 000020
601       P:01A0 476800  [4 -     1034]            move              y1,x:(r0+n0)
602                                      L45
603                                      ; **************************************************
604                                      ;   SR1 = ((DQSEZ >> 15) << 10) + (EXP << 6) + MANT;
605                                      ; **************************************************
606       P:01A1 380900  [2 -     1036]            move              #9,n0
607       P:01A2 57E800  [4 -     1040]            move              x:(r0+n0),b
608       P:01A3 060FA0  [4 -     1044]            rep     #15
609       P:01A4 20002B  [2 -     1046]            lsr     b
610       P:01A5 060AA0  [4 -     1050]            rep     #10
611       P:01A6 20003B  [2 -     1052]            lsl     b
612       P:01A7 381400  [2 -     1054]            move              #20,n0
613       P:01A8 556800  [4 -     1058]            move              b1,x:(r0+n0)
614       P:01A9 380600  [2 -     1060]            move              #6,n0
615       P:01AA 57E800  [4 -     1064]            move              x:(r0+n0),b
616       P:01AB 0606A0  [4 -     1068]            rep     #6
617       P:01AC 20003A  [2 -     1070]            asl     b
618                                      ; **************************************************
619                                      ;   
620                                      ;   /* UPA2 */
621                                      ;   WA1 = PK0 ^ S->PK1;                     /* WA1 = PKS1 */
622                                      ; **************************************************
623                                      ; **************************************************
624                                      ;   MAG = PK0 ^ S->PK2 ? 114688 : 16384;    /* MAG = UGA2A */
625                                      ; **************************************************
626       P:01AD 3C0A00  [2 -     1072]            move              #10,n4
627       P:01AE 381300  [2 -     1074]            move              #19,n0
628       P:01AF 21AF00  [2 -     1076]            move              b1,b
629       P:01B0 21A700  [2 -     1078]            move              b1,y1
630       P:01B1 556800  [4 -     1082]            move              b1,x:(r0+n0)
631       P:01B2 381400  [2 -     1084]            move              #20,n0
632       P:01B3 57E800  [4 -     1088]            move              x:(r0+n0),b
633       P:01B4 380F78  [2 -     1090]            add     y1,b      #15,n0
634       P:01B5 47E800  [4 -     1094]            move              x:(r0+n0),y1
635       P:01B6 380B78  [2 -     1096]            add     y1,b      #11,n0
636       P:01B7 556800  [4 -     1100]            move              b1,x:(r0+n0)
637       P:01B8 380A00  [2 -     1102]            move              #10,n0
638       P:01B9 44EC00  [4 -     1106]            move              x:(r4+n4),x0
639       P:01BA 3C0B00  [2 -     1108]            move              #11,n4
640       P:01BB 57E800  [4 -     1112]            move              x:(r0+n0),b
641       P:01BC 380D4B  [2 -     1114]            eor     x0,b      #13,n0
642       P:01BD 21AF00  [2 -     1116]            move              b1,b
643       P:01BE 556800  [4 -     1120]            move              b1,x:(r0+n0)
644       P:01BF 380A00  [2 -     1122]            move              #10,n0
645       P:01C0 44EC00  [4 -     1126]            move              x:(r4+n4),x0
646       P:01C1 57E800  [4 -     1130]            move              x:(r0+n0),b
647       P:01C2 20004B  [2 -     1132]            eor     x0,b
648       P:01C3 21AF00  [2 -     1134]            move              b1,b
649       P:01C4 2B0000  [2 -     1136]            move              #0,b2
650       P:01C5 20000B  [2 -     1138]            tst     b
651       P:01C6 0AF0AA  [6 -     1144]            jeq     L46
                 0001CC
652       P:01C8 47F400  [4 -     1148]            move              #>114688,y1
                 01C000
653       P:01CA 0AF080  [6 -     1154]            jmp     L117
                 0001CE
654                                      L46
655       P:01CC 47F400  [4 -     1158]            move              #>16384,y1
                 004000
656                                      L117
657                                      ; **************************************************
658                                      ;   A1S = SIGNBIT(S->A1, 15);
659                                      ; **************************************************
660       P:01CE 3C0D00  [2 -     1160]            move              #13,n4
661       P:01CF 381300  [2 -     1162]            move              #19,n0
662       P:01D0 44F400  [4 -     1166]            move              #>32768,x0
                 008000
663       P:01D2 476800  [4 -     1170]            move              y1,x:(r0+n0)
664       P:01D3 56EC00  [4 -     1174]            move              x:(r4+n4),a
665       P:01D4 200046  [2 -     1176]            and     x0,a
666       P:01D5 218E00  [2 -     1178]            move              a1,a
667       P:01D6 200003  [2 -     1180]            tst     a
668       P:01D7 0AF0AA  [6 -     1186]            jeq     L48
                 0001DD
669       P:01D9 47F400  [4 -     1190]            move              #>1,y1
                 000001
670       P:01DB 0AF080  [6 -     1196]            jmp     L118
                 0001DE
671                                      L48
672       P:01DD 270000  [2 -     1198]            move              #0,y1
673                                      L118
674                                      ; **************************************************
675                                      ;   EXP = A1S ? (S->A1 >= 57345 ? (S->A1 << 2) & 131071 : 24577 << 2) :
676                                      ;               (S->A1 <= 8191 ? S->A1 << 2 : 8191 << 2); 
677                                      ; **************************************************
678       P:01DE 380C00  [2 -     1200]            move              #12,n0
679       P:01DF 476800  [4 -     1204]            move              y1,x:(r0+n0)
680       P:01E0 57E800  [4 -     1208]            move              x:(r0+n0),b
681       P:01E1 20000B  [2 -     1210]            tst     b
682       P:01E2 0AF0AA  [6 -     1216]            jeq     L50
                 0001FB
683       P:01E4 381000  [2 -     1218]            move              #16,n0
684       P:01E5 3C0D00  [2 -     1220]            move              #13,n4
685       P:01E6 47EC00  [4 -     1224]            move              x:(r4+n4),y1
686       P:01E7 476800  [4 -     1228]            move              y1,x:(r0+n0)
687       P:01E8 57E800  [4 -     1232]            move              x:(r0+n0),b
688       P:01E9 47F400  [4 -     1236]            move              #>57344,y1
                 00E000
689       P:01EB 20007D  [2 -     1238]            cmp     y1,b
690       P:01EC 0AF0AF  [6 -     1244]            jle     L52
                 0001F7
691       P:01EE 38063A  [2 -     1246]            asl     b         #6,n0
692       P:01EF 44F43A  [4 -     1250]            asl     b         #>131071,x0
                 01FFFF
693       P:01F1 21AF00  [2 -     1252]            move              b1,b
694       P:01F2 20004E  [2 -     1254]            and     x0,b
695       P:01F3 21AF00  [2 -     1256]            move              b1,b
696       P:01F4 556800  [4 -     1260]            move              b1,x:(r0+n0)
697       P:01F5 0AF080  [6 -     1266]            jmp     L51
                 00020C
698                                      L52
699       P:01F7 47F400  [4 -     1270]            move              #>98308,y1
                 018004
700       P:01F9 0AF080  [6 -     1276]            jmp     L119
                 00020A
701                                      L50
702       P:01FB 3C0D00  [2 -     1278]            move              #13,n4
703       P:01FC 47EC00  [4 -     1282]            move              x:(r4+n4),y1
704       P:01FD 47F479  [4 -     1286]            tfr     y1,b      #>8191,y1
                 001FFF
705       P:01FF 20007D  [2 -     1288]            cmp     y1,b
706       P:0200 0AF0A7  [6 -     1294]            jgt     L54
                 000208
707       P:0202 38063A  [2 -     1296]            asl     b         #6,n0
708       P:0203 20003A  [2 -     1298]            asl     b
709       P:0204 21AF00  [2 -     1300]            move              b1,b
710       P:0205 556800  [4 -     1304]            move              b1,x:(r0+n0)
711       P:0206 0AF080  [6 -     1310]            jmp     L51
                 00020C
712                                      L54
713       P:0208 47F400  [4 -     1314]            move              #>32764,y1
                 007FFC
714                                      L119
715       P:020A 380600  [2 -     1316]            move              #6,n0
716       P:020B 476800  [4 -     1320]            move              y1,x:(r0+n0)
717                                      L51
718                                      ; **************************************************
719                                      ;   EXP = WA1 == 1 ? EXP : (131072 - EXP) & 131071;
720                                      ; **************************************************
721       P:020C 380D00  [2 -     1322]            move              #13,n0
722       P:020D 47F400  [4 -     1326]            move              #>1,y1
                 000001
723       P:020F 57E800  [4 -     1330]            move              x:(r0+n0),b
724       P:0210 20007D  [2 -     1332]            cmp     y1,b
725       P:0211 0AF0AA  [6 -     1338]            jeq     L57
                 00021D
726       P:0213 380600  [2 -     1340]            move              #6,n0
727       P:0214 44F400  [4 -     1344]            move              #>131071,x0
                 01FFFF
728       P:0216 47E800  [4 -     1348]            move              x:(r0+n0),y1
729       P:0217 57F400  [4 -     1352]            move              #>131072,b
                 020000
730       P:0219 20007C  [2 -     1354]            sub     y1,b
731       P:021A 55684E  [4 -     1358]            and     x0,b      b1,x:(r0+n0)
732       P:021B 21AF00  [2 -     1360]            move              b1,b
733       P:021C 556800  [4 -     1364]            move              b1,x:(r0+n0)
734                                      L57
735                                      ; **************************************************
736                                      ;   MAG = ((MAG + EXP) & 131071) >> 7;
737                                      ; **************************************************
738       P:021D 381300  [2 -     1366]            move              #19,n0
739       P:021E 44F400  [4 -     1370]            move              #>131071,x0
                 01FFFF
740       P:0220 57E800  [4 -     1374]            move              x:(r0+n0),b
741       P:0221 380600  [2 -     1376]            move              #6,n0
742       P:0222 47E800  [4 -     1380]            move              x:(r0+n0),y1
743       P:0223 200078  [2 -     1382]            add     y1,b
744       P:0224 20004E  [2 -     1384]            and     x0,b
745       P:0225 21AF00  [2 -     1386]            move              b1,b
746       P:0226 0607A0  [4 -     1390]            rep     #7
747       P:0227 20002B  [2 -     1392]            lsr     b
748                                      ; **************************************************
749                                      ;   EXP = WA2 == 1 ? 0 : (MAG & (1 << 9) ? MAG + 64512 : MAG);
750                                      ; **************************************************
751       P:0228 381300  [2 -     1394]            move              #19,n0
752       P:0229 47F400  [4 -     1398]            move              #>1,y1
                 000001
753       P:022B 556800  [4 -     1402]            move              b1,x:(r0+n0)
754       P:022C 380E00  [2 -     1404]            move              #14,n0
755       P:022D 57E800  [4 -     1408]            move              x:(r0+n0),b
756       P:022E 20007D  [2 -     1410]            cmp     y1,b
757       P:022F 0AF0A2  [6 -     1416]            jne     L58
                 000234
758       P:0231 270000  [2 -     1418]            move              #0,y1
759       P:0232 0AF080  [6 -     1424]            jmp     L120
                 000248
760                                      L58
761       P:0234 381300  [2 -     1426]            move              #19,n0
762       P:0235 44F400  [4 -     1430]            move              #>512,x0
                 000200
763       P:0237 56E800  [4 -     1434]            move              x:(r0+n0),a
764       P:0238 200046  [2 -     1436]            and     x0,a
765       P:0239 218E00  [2 -     1438]            move              a1,a
766       P:023A 2A0000  [2 -     1440]            move              #0,a2
767       P:023B 200003  [2 -     1442]            tst     a
768       P:023C 0AF0AA  [6 -     1448]            jeq     L60
                 000246
769       P:023E 57E800  [4 -     1452]            move              x:(r0+n0),b
770       P:023F 380600  [2 -     1454]            move              #6,n0
771       P:0240 47F400  [4 -     1458]            move              #>64512,y1
                 00FC00
772       P:0242 200078  [2 -     1460]            add     y1,b
773       P:0243 556800  [4 -     1464]            move              b1,x:(r0+n0)
774       P:0244 0AF080  [6 -     1470]            jmp     L59
                 00024A
775                                      L60
776       P:0246 381300  [2 -     1472]            move              #19,n0
777       P:0247 47E800  [4 -     1476]            move              x:(r0+n0),y1
778                                      L120
779       P:0248 380600  [2 -     1478]            move              #6,n0
780       P:0249 476800  [4 -     1482]            move              y1,x:(r0+n0)
781                                      L59
782                                      ; **************************************************
783                                      ;   MANT = SIGNBIT(S->A2, 15) ? 65536 - ((S->A2 >> 7) + 65024) :
784                                      ;                              65536 - (S->A2 >> 7);
785                                      ; **************************************************
786       P:024A 381300  [2 -     1484]            move              #19,n0
787       P:024B 3C0E00  [2 -     1486]            move              #14,n4
788       P:024C 44F400  [4 -     1490]            move              #>32768,x0
                 008000
789       P:024E 47EC00  [4 -     1494]            move              x:(r4+n4),y1
790       P:024F 476879  [4 -     1498]            tfr     y1,b      y1,x:(r0+n0)
791       P:0250 20004E  [2 -     1500]            and     x0,b
792       P:0251 21AF00  [2 -     1502]            move              b1,b
793       P:0252 20000B  [2 -     1504]            tst     b
794       P:0253 0AF0AA  [6 -     1510]            jeq     L62
                 00025E
795       P:0255 56E800  [4 -     1514]            move              x:(r0+n0),a
796       P:0256 218E00  [2 -     1516]            move              a1,a
797       P:0257 0607A0  [4 -     1520]            rep     #7
798       P:0258 200022  [2 -     1522]            asr     a
799       P:0259 57F400  [4 -     1526]            move              #>512,b
                 000200
800       P:025B 218E00  [2 -     1528]            move              a1,a
801       P:025C 0AF080  [6 -     1534]            jmp     L121
                 000266
802                                      L62
803       P:025E 3C0E00  [2 -     1536]            move              #14,n4
804       P:025F 56EC00  [4 -     1540]            move              x:(r4+n4),a
805       P:0260 218E00  [2 -     1542]            move              a1,a
806       P:0261 0607A0  [4 -     1546]            rep     #7
807       P:0262 200022  [2 -     1548]            asr     a
808       P:0263 57F400  [4 -     1552]            move              #>65536,b
                 010000
809       P:0265 218E00  [2 -     1554]            move              a1,a
810                                      L121
811                                      ; **************************************************
812                                      ;   EXP = (S->A2 + EXP + MANT) & 65535;
813                                      ; **************************************************
814                                      ; **************************************************
815                                      ; 
816                                      ;   /* LIMC */
817                                      ;   AP = 32768 <= EXP && EXP <= 53248 ? 53248 :
818                                      ;        12288 <= EXP && EXP <= 32767 ? 12288 : EXP;
819                                      ; **************************************************
820       P:0266 3C0E1C  [2 -     1556]            sub     a,b       #14,n4
821       P:0267 380F00  [2 -     1558]            move              #15,n0
822       P:0268 44F400  [4 -     1562]            move              #>65535,x0
                 00FFFF
823       P:026A 556800  [4 -     1566]            move              b1,x:(r0+n0)
824       P:026B 381400  [2 -     1568]            move              #20,n0
825       P:026C 47EC00  [4 -     1572]            move              x:(r4+n4),y1
826       P:026D 476800  [4 -     1576]            move              y1,x:(r0+n0)
827       P:026E 380600  [2 -     1578]            move              #6,n0
828       P:026F 57E800  [4 -     1582]            move              x:(r0+n0),b
829       P:0270 380F78  [2 -     1584]            add     y1,b      #15,n0
830       P:0271 47E800  [4 -     1588]            move              x:(r0+n0),y1
831       P:0272 380678  [2 -     1590]            add     y1,b      #6,n0
832       P:0273 47F44E  [4 -     1594]            and     x0,b      #>32767,y1
                 007FFF
833       P:0275 21AF00  [2 -     1596]            move              b1,b
834       P:0276 55687D  [4 -     1600]            cmp     y1,b      b1,x:(r0+n0)
835       P:0277 0AF0AF  [6 -     1606]            jle     L66
                 000281
836       P:0279 44F400  [4 -     1610]            move              #>53248,x0
                 00D000
837       P:027B 20004D  [2 -     1612]            cmp     x0,b
838       P:027C 0AF0A7  [6 -     1618]            jgt     L66
                 000281
839       P:027E 208500  [2 -     1620]            move              x0,x1
840       P:027F 0AF080  [6 -     1626]            jmp     L67
                 000293
841                                      L66
842       P:0281 380600  [2 -     1628]            move              #6,n0
843       P:0282 47F400  [4 -     1632]            move              #>12287,y1
                 002FFF
844       P:0284 57E800  [4 -     1636]            move              x:(r0+n0),b
845       P:0285 20007D  [2 -     1638]            cmp     y1,b
846       P:0286 0AF0AF  [6 -     1644]            jle     L68
                 000291
847       P:0288 47F400  [4 -     1648]            move              #>32767,y1
                 007FFF
848       P:028A 20007D  [2 -     1650]            cmp     y1,b
849       P:028B 0AF0A7  [6 -     1656]            jgt     L68
                 000291
850       P:028D 45F400  [4 -     1660]            move              #>12288,x1
                 003000
851       P:028F 0AF080  [6 -     1666]            jmp     L67
                 000293
852                                      L68
853       P:0291 380600  [2 -     1668]            move              #6,n0
854       P:0292 45E800  [4 -     1672]            move              x:(r0+n0),x1
855                                      L67
856                                      ; **************************************************
857                                      ;   
858                                      ;   /* TRIGB */
859                                      ;   A2R = S->T ? 0 : AP;
860                                      ; **************************************************
861       P:0293 205C00  [2 -     1674]            move              (r4)+
862       P:0294 56D400  [2 -     1676]            move              x:(r4)-,a
863       P:0295 200003  [2 -     1678]            tst     a
864       P:0296 0AF0AA  [6 -     1684]            jeq     L70
                 00029B
865       P:0298 260000  [2 -     1686]            move              #0,y0
866       P:0299 0AF080  [6 -     1692]            jmp     L71
                 00029C
867                                      L70
868       P:029B 20A600  [2 -     1694]            move              x1,y0
869                                      L71
870                                      ; **************************************************
871                                      ;   
872                                      ;   /* UPA1 */
873                                      ;   MANT = A1S ? (65536 - ((S->A1 >> 8) + 65280)):
874                                      ;                (65536 - (S->A1 >> 8));
875                                      ; **************************************************
876       P:029C 380C00  [2 -     1696]            move              #12,n0
877       P:029D 57E800  [4 -     1700]            move              x:(r0+n0),b
878       P:029E 20000B  [2 -     1702]            tst     b
879       P:029F 0AF0AA  [6 -     1708]            jeq     L72
                 0002AB
880       P:02A1 3C0D00  [2 -     1710]            move              #13,n4
881       P:02A2 56EC00  [4 -     1714]            move              x:(r4+n4),a
882       P:02A3 218E00  [2 -     1716]            move              a1,a
883       P:02A4 0608A0  [4 -     1720]            rep     #8
884       P:02A5 200022  [2 -     1722]            asr     a
885       P:02A6 57F400  [4 -     1726]            move              #>256,b
                 000100
886       P:02A8 218E00  [2 -     1728]            move              a1,a
887       P:02A9 0AF080  [6 -     1734]            jmp     L122
                 0002B3
888                                      L72
889       P:02AB 3C0D00  [2 -     1736]            move              #13,n4
890       P:02AC 56EC00  [4 -     1740]            move              x:(r4+n4),a
891       P:02AD 218E00  [2 -     1742]            move              a1,a
892       P:02AE 0608A0  [4 -     1746]            rep     #8
893       P:02AF 200022  [2 -     1748]            asr     a
894       P:02B0 57F400  [4 -     1752]            move              #>65536,b
                 010000
895       P:02B2 218E00  [2 -     1754]            move              a1,a
896                                      L122
897                                      ; **************************************************
898                                      ;   EXP = (S->A1 + ((WA2 == 1 ? 0 : (WA1 ? 65344 : 192)) + MANT)) & 65535;
899                                      ; **************************************************
900       P:02B3 380F1C  [2 -     1756]            sub     a,b       #15,n0
901       P:02B4 47F400  [4 -     1760]            move              #>1,y1
                 000001
902       P:02B6 556800  [4 -     1764]            move              b1,x:(r0+n0)
903       P:02B7 44E800  [4 -     1768]            move              x:(r0+n0),x0
904       P:02B8 380E00  [2 -     1770]            move              #14,n0
905       P:02B9 57E800  [4 -     1774]            move              x:(r0+n0),b
906       P:02BA 20007D  [2 -     1776]            cmp     y1,b
907       P:02BB 0AF0AA  [6 -     1782]            jeq     L74
                 0002CD
908       P:02BD 380D00  [2 -     1784]            move              #13,n0
909       P:02BE 57E800  [4 -     1788]            move              x:(r0+n0),b
910       P:02BF 20000B  [2 -     1790]            tst     b
911       P:02C0 0AF0AA  [6 -     1796]            jeq     L75
                 0002C6
912       P:02C2 47F400  [4 -     1800]            move              #>65344,y1
                 00FF40
913       P:02C4 0AF080  [6 -     1806]            jmp     L123
                 0002C8
914                                      L75
915       P:02C6 47F400  [4 -     1810]            move              #>192,y1
                 0000C0
916                                      L123
917       P:02C8 381449  [2 -     1812]            tfr     x0,b      #20,n0
918       P:02C9 476800  [4 -     1816]            move              y1,x:(r0+n0)
919       P:02CA 47E800  [4 -     1820]            move              x:(r0+n0),y1
920       P:02CB 200078  [2 -     1822]            add     y1,b
921       P:02CC 21A400  [2 -     1824]            move              b1,x0
922                                      L74
923                                      ; **************************************************
924                                      ;   
925                                      ;   /* FMULT */
926                                      ;   WA2 = f_mult(A2R, S->SR2); 
927                                      ; **************************************************
928       P:02CD 380649  [2 -     1826]            tfr     x0,b      #6,n0
929       P:02CE 3C0D00  [2 -     1828]            move              #13,n4
930       P:02CF 44F400  [4 -     1832]            move              #>65535,x0
                 00FFFF
931       P:02D1 47EC00  [4 -     1836]            move              x:(r4+n4),y1
932       P:02D2 3C0C78  [2 -     1838]            add     y1,b      #12,n4
933       P:02D3 20004E  [2 -     1840]            and     x0,b
934       P:02D4 21AF00  [2 -     1842]            move              b1,b
935       P:02D5 556800  [4 -     1846]            move              b1,x:(r0+n0)
936       P:02D6 381400  [2 -     1848]            move              #20,n0
937       P:02D7 47EC00  [4 -     1852]            move              x:(r4+n4),y1
938       P:02D8 476800  [4 -     1856]            move              y1,x:(r0+n0)
939       P:02D9 475E00  [2 -     1858]            move              y1,x:(r6)+
940       P:02DA 465E00  [2 -     1860]            move              y0,x:(r6)+
941       P:02DB 0BF080  [6 -     1866]            jsr     Ff_mult
                 000000
942                                      ; **************************************************
943                                      ;  
944                                      ;   /* LIMD */
945                                      ;   MAG = (15360 + 65536 - AP) & 65535;
946                                      ; **************************************************
947                                      ; **************************************************
948                                      ;   S->A1 = (AP + 65536 - 15360) & 65535;
949                                      ; **************************************************
950                                      ; **************************************************
951                                      ;   AP = 32768 <= EXP && EXP <=  S->A1 ? S->A1 :
952                                      ;        MAG <= EXP && EXP <= 32767 ? MAG : EXP;
953                                      ; **************************************************
954       P:02DD 3C0D00  [2 -     1868]            move              #13,n4
955       P:02DE 380E00  [2 -     1870]            move              #14,n0
956       P:02DF 47F400  [4 -     1874]            move              #>50176,y1
                 00C400
957       P:02E1 57F400  [4 -     1878]            move              #>80896,b
                 013C00
958       P:02E3 54686C  [4 -     1882]            sub     x1,b      a1,x:(r0+n0)
959       P:02E4 38134E  [2 -     1884]            and     x0,b      #19,n0
960       P:02E5 21AF00  [2 -     1886]            move              b1,b
961       P:02E6 556869  [4 -     1890]            tfr     x1,b      b1,x:(r0+n0)
962       P:02E7 381278  [2 -     1892]            add     y1,b      #18,n0
963       P:02E8 20564E  [2 -     1894]            and     x0,b      (r6)-
964       P:02E9 21AF00  [2 -     1896]            move              b1,b
965       P:02EA 21A700  [2 -     1898]            move              b1,y1
966       P:02EB 556800  [4 -     1902]            move              b1,x:(r0+n0)
967       P:02EC 380600  [2 -     1904]            move              #6,n0
968       P:02ED 476C00  [4 -     1908]            move              y1,x:(r4+n4)
969       P:02EE 57E800  [4 -     1912]            move              x:(r0+n0),b
970       P:02EF 47F400  [4 -     1916]            move              #>32767,y1
                 007FFF
971       P:02F1 20567D  [2 -     1918]            cmp     y1,b      (r6)-
972       P:02F2 0AF0AF  [6 -     1924]            jle     L77
                 0002FC
973       P:02F4 381200  [2 -     1926]            move              #18,n0
974       P:02F5 47E800  [4 -     1930]            move              x:(r0+n0),y1
975       P:02F6 20007D  [2 -     1932]            cmp     y1,b
976       P:02F7 0AF0A7  [6 -     1938]            jgt     L77
                 0002FC
977       P:02F9 45E800  [4 -     1942]            move              x:(r0+n0),x1
978       P:02FA 0AF080  [6 -     1948]            jmp     L78
                 000310
979                                      L77
980       P:02FC 381300  [2 -     1950]            move              #19,n0
981       P:02FD 57E800  [4 -     1954]            move              x:(r0+n0),b
982       P:02FE 380600  [2 -     1956]            move              #6,n0
983       P:02FF 2B0000  [2 -     1958]            move              #0,b2
984       P:0300 56E800  [4 -     1962]            move              x:(r0+n0),a
985       P:0301 2A0000  [2 -     1964]            move              #0,a2
986       P:0302 20000D  [2 -     1966]            cmp     a,b
987       P:0303 0AF0A7  [6 -     1972]            jgt     L79
                 00030E
988       P:0305 47F400  [4 -     1976]            move              #>32767,y1
                 007FFF
989       P:0307 200075  [2 -     1978]            cmp     y1,a
990       P:0308 0AF0A7  [6 -     1984]            jgt     L79
                 00030E
991       P:030A 381300  [2 -     1986]            move              #19,n0
992       P:030B 45E800  [4 -     1990]            move              x:(r0+n0),x1
993       P:030C 0AF080  [6 -     1996]            jmp     L78
                 000310
994                                      L79
995       P:030E 380600  [2 -     1998]            move              #6,n0
996       P:030F 45E800  [4 -     2002]            move              x:(r0+n0),x1
997                                      L78
998                                      ; **************************************************
999                                      ;   
1000                                     ;   /* TRIGB */
1001                                     ;   S->A1 = S->T ? 0 : AP;
1002                                     ; **************************************************
1003      P:0310 205C00  [2 -     2004]            move              (r4)+
1004      P:0311 56D400  [2 -     2006]            move              x:(r4)-,a
1005      P:0312 200003  [2 -     2008]            tst     a
1006      P:0313 0AF0AA  [6 -     2014]            jeq     L81
                 000318
1007      P:0315 240000  [2 -     2016]            move              #0,x0
1008      P:0316 0AF080  [6 -     2022]            jmp     L82
                 000319
1009                                     L81
1010      P:0318 20A400  [2 -     2024]            move              x1,x0
1011                                     L82
1012                                     ; **************************************************
1013                                     ;   
1014                                     ;   /* FMULT */
1015                                     ;   WA1 = f_mult(S->A1, SR1);
1016                                     ; **************************************************
1017      P:0319 380B00  [2 -     2026]            move              #11,n0
1018      P:031A 3C0D00  [2 -     2028]            move              #13,n4
1019      P:031B 446C00  [4 -     2032]            move              x0,x:(r4+n4)
1020      P:031C 47E800  [4 -     2036]            move              x:(r0+n0),y1
1021      P:031D 475E00  [2 -     2038]            move              y1,x:(r6)+
1022      P:031E 445E00  [2 -     2040]            move              x0,x:(r6)+
1023      P:031F 0BF080  [6 -     2046]            jsr     Ff_mult
                 000000
1024                                     ; **************************************************
1025                                     ;   
1026                                     ;   /* FLOATA */
1027                                     ;   MAG = S->DQ & 16383;
1028                                     ; **************************************************
1029                                     ; **************************************************
1030                                     ;   MSB(MAG, EXP);
1031                                     ; **************************************************
1032      P:0321 380D00  [2 -     2048]            move              #13,n0
1033      P:0322 44F400  [4 -     2052]            move              #>16383,x0
                 003FFF
1034      P:0324 546800  [4 -     2056]            move              a1,x:(r0+n0)
1035      P:0325 381300  [2 -     2058]            move              #19,n0
1036      P:0326 47E400  [2 -     2060]            move              x:(r4),y1
1037      P:0327 205679  [2 -     2062]            tfr     y1,b      (r6)-
1038      P:0328 20564E  [2 -     2064]            and     x0,b      (r6)-
1039      P:0329 21AF00  [2 -     2066]            move              b1,b
1040      P:032A 21A700  [2 -     2068]            move              b1,y1
1041      P:032B 2B0000  [2 -     2070]            move              #0,b2
1042      P:032C 55680B  [4 -     2074]            tst     b         b1,x:(r0+n0)
1043      P:032D 381400  [2 -     2076]            move              #20,n0
1044      P:032E 476800  [4 -     2080]            move              y1,x:(r0+n0)
1045      P:032F 380600  [2 -     2082]            move              #6,n0
1046      P:0330 270000  [2 -     2084]            move              #0,y1
1047      P:0331 476800  [4 -     2088]            move              y1,x:(r0+n0)
1048      P:0332 0AF0AA  [6 -     2094]            jeq     L113
                 000344
1049      P:0334 44F400  [4 -     2098]            move              #>1,x0
                 000001
1050                                     L85
1051      P:0336 381400  [2 -     2100]            move              #20,n0
1052      P:0337 57E800  [4 -     2104]            move              x:(r0+n0),b
1053      P:0338 20002B  [2 -     2106]            lsr     b
1054      P:0339 556800  [4 -     2110]            move              b1,x:(r0+n0)
1055      P:033A 380600  [2 -     2112]            move              #6,n0
1056      P:033B 57E800  [4 -     2116]            move              x:(r0+n0),b
1057      P:033C 200048  [2 -     2118]            add     x0,b
1058      P:033D 556800  [4 -     2122]            move              b1,x:(r0+n0)
1059      P:033E 381400  [2 -     2124]            move              #20,n0
1060      P:033F 57E800  [4 -     2128]            move              x:(r0+n0),b
1061      P:0340 2B0000  [2 -     2130]            move              #0,b2
1062      P:0341 20000B  [2 -     2132]            tst     b
1063      P:0342 0AF0A2  [6 -     2138]            jne     L85
                 000336
1064                                     L113
1065                                     ; **************************************************
1066                                     ;   MANT = MAG ? (MAG << 6) >> EXP : 1 << 5;
1067                                     ; **************************************************
1068      P:0344 381300  [2 -     2140]            move              #19,n0
1069      P:0345 57E800  [4 -     2144]            move              x:(r0+n0),b
1070      P:0346 2B0000  [2 -     2146]            move              #0,b2
1071      P:0347 20000B  [2 -     2148]            tst     b
1072      P:0348 0AF0AA  [6 -     2154]            jeq     L86
                 000357
1073      P:034A 0606A0  [4 -     2158]            rep     #6
1074      P:034B 20003B  [2 -     2160]            lsl     b
1075      P:034C 380600  [2 -     2162]            move              #6,n0
1076      P:034D 56E800  [4 -     2166]            move              x:(r0+n0),a
1077      P:034E 200003  [2 -     2168]            tst     a
1078      P:034F 0AF0AA  [6 -     2174]            jeq     L128
                 000353
1079      P:0351 06CE20  [4 -     2178]            rep     a
1080      P:0352 20002B  [2 -     2180]            lsr     b
1081                                     L128
1082      P:0353 380F00  [2 -     2182]            move              #15,n0
1083      P:0354 556800  [4 -     2186]            move              b1,x:(r0+n0)
1084      P:0355 0AF080  [6 -     2192]            jmp     L87
                 00035B
1085                                     L86
1086      P:0357 380F00  [2 -     2194]            move              #15,n0
1087      P:0358 47F400  [4 -     2198]            move              #>32,y1
                 000020
1088      P:035A 476800  [4 -     2202]            move              y1,x:(r0+n0)
1089                                     L87
1090                                     ; **************************************************
1091                                     ;   DQSEZ = (DQS << 10) + (EXP << 6) + MANT;
1092                                     ; **************************************************
1093      P:035B 380700  [2 -     2204]            move              #7,n0
1094      P:035C 57E800  [4 -     2208]            move              x:(r0+n0),b
1095      P:035D 060AA0  [4 -     2212]            rep     #10
1096      P:035E 20003B  [2 -     2214]            lsl     b
1097      P:035F 381400  [2 -     2216]            move              #20,n0
1098      P:0360 556800  [4 -     2220]            move              b1,x:(r0+n0)
1099      P:0361 380600  [2 -     2222]            move              #6,n0
1100      P:0362 57E800  [4 -     2226]            move              x:(r0+n0),b
1101      P:0363 0606A0  [4 -     2230]            rep     #6
1102      P:0364 20003A  [2 -     2232]            asl     b
1103                                     ; **************************************************
1104                                     ;   
1105                                     ;   /* XOR */
1106                                     ;   BP[0] = DQS ^ (S->DQ2 >> 10);
1107                                     ; **************************************************
1108      P:0365 3C0400  [2 -     2234]            move              #4,n4
1109      P:0366 381300  [2 -     2236]            move              #19,n0
1110      P:0367 21AF00  [2 -     2238]            move              b1,b
1111      P:0368 21A700  [2 -     2240]            move              b1,y1
1112      P:0369 556800  [4 -     2244]            move              b1,x:(r0+n0)
1113      P:036A 381400  [2 -     2246]            move              #20,n0
1114      P:036B 57E800  [4 -     2250]            move              x:(r0+n0),b
1115      P:036C 380F78  [2 -     2252]            add     y1,b      #15,n0
1116      P:036D 47E800  [4 -     2256]            move              x:(r0+n0),y1
1117      P:036E 380978  [2 -     2258]            add     y1,b      #9,n0
1118      P:036F 556800  [4 -     2262]            move              b1,x:(r0+n0)
1119      P:0370 47EC00  [4 -     2266]            move              x:(r4+n4),y1
1120      P:0371 200079  [2 -     2268]            tfr     y1,b
1121      P:0372 21AF00  [2 -     2270]            move              b1,b
1122      P:0373 060AA0  [4 -     2274]            rep     #10
1123      P:0374 20002A  [2 -     2276]            asr     b
1124                                     ; **************************************************
1125                                     ;   BP[1] = DQS ^ (S->DQ3 >> 10);
1126                                     ; **************************************************
1127      P:0375 3C0500  [2 -     2278]            move              #5,n4
1128      P:0376 380700  [2 -     2280]            move              #7,n0
1129      P:0377 21AF00  [2 -     2282]            move              b1,b
1130      P:0378 21A400  [2 -     2284]            move              b1,x0
1131      P:0379 57E800  [4 -     2288]            move              x:(r0+n0),b
1132      P:037A 20004B  [2 -     2290]            eor     x0,b
1133      P:037B 21AF00  [2 -     2292]            move              b1,b
1134      P:037C 21A700  [2 -     2294]            move              b1,y1
1135      P:037D 476000  [2 -     2296]            move              y1,x:(r0)
1136      P:037E 47EC00  [4 -     2300]            move              x:(r4+n4),y1
1137      P:037F 200079  [2 -     2302]            tfr     y1,b
1138      P:0380 21AF00  [2 -     2304]            move              b1,b
1139      P:0381 060AA0  [4 -     2308]            rep     #10
1140      P:0382 20002A  [2 -     2310]            asr     b
1141                                     ; **************************************************
1142                                     ;   BP[2] = DQS ^ (S->DQ4 >> 10);
1143                                     ; **************************************************
1144      P:0383 3C0600  [2 -     2312]            move              #6,n4
1145      P:0384 21AF00  [2 -     2314]            move              b1,b
1146      P:0385 21A400  [2 -     2316]            move              b1,x0
1147      P:0386 57E800  [4 -     2320]            move              x:(r0+n0),b
1148      P:0387 20584B  [2 -     2322]            eor     x0,b      (r0)+
1149      P:0388 21AF00  [2 -     2324]            move              b1,b
1150      P:0389 21A700  [2 -     2326]            move              b1,y1
1151      P:038A 475000  [2 -     2328]            move              y1,x:(r0)-
1152      P:038B 47EC00  [4 -     2332]            move              x:(r4+n4),y1
1153      P:038C 200079  [2 -     2334]            tfr     y1,b
1154      P:038D 21AF00  [2 -     2336]            move              b1,b
1155      P:038E 060AA0  [4 -     2340]            rep     #10
1156      P:038F 20002A  [2 -     2342]            asr     b
1157                                     ; **************************************************
1158                                     ;   BP[3] = DQS ^ (S->DQ5 >> 10);
1159                                     ; **************************************************
1160      P:0390 3C0700  [2 -     2344]            move              #7,n4
1161      P:0391 21AF00  [2 -     2346]            move              b1,b
1162      P:0392 21A400  [2 -     2348]            move              b1,x0
1163      P:0393 57E800  [4 -     2352]            move              x:(r0+n0),b
1164      P:0394 38024B  [2 -     2354]            eor     x0,b      #2,n0
1165      P:0395 21AF00  [2 -     2356]            move              b1,b
1166      P:0396 21A700  [2 -     2358]            move              b1,y1
1167      P:0397 476800  [4 -     2362]            move              y1,x:(r0+n0)
1168      P:0398 47EC00  [4 -     2366]            move              x:(r4+n4),y1
1169      P:0399 200079  [2 -     2368]            tfr     y1,b
1170      P:039A 21AF00  [2 -     2370]            move              b1,b
1171      P:039B 060AA0  [4 -     2374]            rep     #10
1172      P:039C 20002A  [2 -     2376]            asr     b
1173                                     ; **************************************************
1174                                     ;   BP[4] = DQS ^ (S->DQ6 >> 10);
1175                                     ; **************************************************
1176      P:039D 3C0800  [2 -     2378]            move              #8,n4
1177      P:039E 380700  [2 -     2380]            move              #7,n0
1178      P:039F 21AF00  [2 -     2382]            move              b1,b
1179      P:03A0 21A400  [2 -     2384]            move              b1,x0
1180      P:03A1 57E800  [4 -     2388]            move              x:(r0+n0),b
1181      P:03A2 38034B  [2 -     2390]            eor     x0,b      #3,n0
1182      P:03A3 21AF00  [2 -     2392]            move              b1,b
1183      P:03A4 21A700  [2 -     2394]            move              b1,y1
1184      P:03A5 476800  [4 -     2398]            move              y1,x:(r0+n0)
1185      P:03A6 47EC00  [4 -     2402]            move              x:(r4+n4),y1
1186      P:03A7 200079  [2 -     2404]            tfr     y1,b
1187      P:03A8 21AF00  [2 -     2406]            move              b1,b
1188      P:03A9 060AA0  [4 -     2410]            rep     #10
1189      P:03AA 20002A  [2 -     2412]            asr     b
1190                                     ; **************************************************
1191                                     ;   BP[5] = DQS ^ (S->DQ7 >> 10);
1192                                     ; **************************************************
1193      P:03AB 3C0900  [2 -     2414]            move              #9,n4
1194      P:03AC 380700  [2 -     2416]            move              #7,n0
1195      P:03AD 21AF00  [2 -     2418]            move              b1,b
1196      P:03AE 21A400  [2 -     2420]            move              b1,x0
1197      P:03AF 57E800  [4 -     2424]            move              x:(r0+n0),b
1198      P:03B0 38044B  [2 -     2426]            eor     x0,b      #4,n0
1199      P:03B1 21AF00  [2 -     2428]            move              b1,b
1200      P:03B2 21A700  [2 -     2430]            move              b1,y1
1201      P:03B3 476800  [4 -     2434]            move              y1,x:(r0+n0)
1202      P:03B4 47EC00  [4 -     2438]            move              x:(r4+n4),y1
1203      P:03B5 200079  [2 -     2440]            tfr     y1,b
1204      P:03B6 21AF00  [2 -     2442]            move              b1,b
1205      P:03B7 060AA0  [4 -     2446]            rep     #10
1206      P:03B8 20002A  [2 -     2448]            asr     b
1207                                     ; **************************************************
1208                                     ;   
1209                                     ;   /* UPB */
1210                                     ;   MANT = S->DQ & 16383;
1211                                     ; **************************************************
1212                                     ; **************************************************
1213                                     ;   for (EXP = 0; EXP < 6; EXP++)
1214                                     ; **************************************************
1215      P:03B9 3B1800  [2 -     2450]            move              #24,n3
1216      P:03BA 380700  [2 -     2452]            move              #7,n0
1217      P:03BB 221200  [2 -     2454]            move              r0,r2
1218      P:03BC 229300  [2 -     2456]            move              r4,r3
1219      P:03BD 45F400  [4 -     2460]            move              #>65535,x1
                 00FFFF
1220      P:03BF 21AF00  [2 -     2462]            move              b1,b
1221      P:03C0 21A400  [2 -     2464]            move              b1,x0
1222      P:03C1 57E800  [4 -     2468]            move              x:(r0+n0),b
1223      P:03C2 38054B  [2 -     2470]            eor     x0,b      #5,n0
1224      P:03C3 21AF00  [2 -     2472]            move              b1,b
1225      P:03C4 21A700  [2 -     2474]            move              b1,y1
1226      P:03C5 44F400  [4 -     2478]            move              #>16383,x0
                 003FFF
1227      P:03C7 476800  [4 -     2482]            move              y1,x:(r0+n0)
1228      P:03C8 381400  [2 -     2484]            move              #20,n0
1229      P:03C9 47E400  [2 -     2486]            move              x:(r4),y1
1230      P:03CA 476879  [4 -     2490]            tfr     y1,b      y1,x:(r0+n0)
1231      P:03CB 380F4E  [2 -     2492]            and     x0,b      #15,n0
1232      P:03CC 21AF00  [2 -     2494]            move              b1,b
1233      P:03CD 44F400  [4 -     2498]            move              #>1,x0
                 000001
1234      P:03CF 270000  [2 -     2500]            move              #0,y1
1235      P:03D0 556800  [4 -     2504]            move              b1,x:(r0+n0)
1236      P:03D1 380600  [2 -     2506]            move              #6,n0
1237      P:03D2 204B00  [2 -     2508]            move              (r3)+n3
1238      P:03D3 476800  [4 -     2512]            move              y1,x:(r0+n0)
1239      P:03D4 060680  [6 -     2518]            do      #6,L112
                 000427
1240                                     L97
1241                                     ; **************************************************
1242                                     ;   {
1243                                     ;     DQS = MANT ? (BP[EXP] ? 65408 : 128) : 0;
1244                                     ; **************************************************
1245      P:03D6 380F00  [2 -     2520]            move              #15,n0
1246      P:03D7 57E800  [4 -     2524]            move              x:(r0+n0),b
1247      P:03D8 20000B  [2 -     2526]            tst     b
1248      P:03D9 0AF0AA  [6 -     2532]            jeq     L91
                 0003EA
1249      P:03DB 56E200  [2 -     2534]            move              x:(r2),a
1250      P:03DC 200003  [2 -     2536]            tst     a
1251      P:03DD 0AF0AA  [6 -     2542]            jeq     L93
                 0003E3
1252      P:03DF 47F400  [4 -     2546]            move              #>65408,y1
                 00FF80
1253      P:03E1 0AF080  [6 -     2552]            jmp     L124
                 0003E5
1254                                     L93
1255      P:03E3 47F400  [4 -     2556]            move              #>128,y1
                 000080
1256                                     L124
1257      P:03E5 381400  [2 -     2558]            move              #20,n0
1258      P:03E6 476800  [4 -     2562]            move              y1,x:(r0+n0)
1259      P:03E7 47E800  [4 -     2566]            move              x:(r0+n0),y1
1260      P:03E8 0AF080  [6 -     2572]            jmp     L125
                 0003EB
1261                                     L91
1262      P:03EA 270000  [2 -     2574]            move              #0,y1
1263                                     L125
1264                                     ; **************************************************
1265                                     ;     DQS += S->B[EXP] & (1 << 15) ? (65536 - ((S->B[EXP] >> 8) + 65280)) :
1266                                     ;                                    (65536 - (S->B[EXP] >> 8));
1267                                     ; **************************************************
1268      P:03EB 391800  [2 -     2576]            move              #24,n1
1269      P:03EC 381400  [2 -     2578]            move              #20,n0
1270      P:03ED 228F00  [2 -     2580]            move              r4,b
1271      P:03EE 476800  [4 -     2584]            move              y1,x:(r0+n0)
1272      P:03EF 47E800  [4 -     2588]            move              x:(r0+n0),y1
1273      P:03F0 380700  [2 -     2590]            move              #7,n0
1274      P:03F1 476800  [4 -     2594]            move              y1,x:(r0+n0)
1275      P:03F2 380600  [2 -     2596]            move              #6,n0
1276      P:03F3 47E800  [4 -     2600]            move              x:(r0+n0),y1
1277      P:03F4 381378  [2 -     2602]            add     y1,b      #19,n0
1278      P:03F5 21B100  [2 -     2604]            move              b1,r1
1279      P:03F6 47E900  [4 -     2608]            move              x:(r1+n1),y1
1280      P:03F7 476879  [4 -     2612]            tfr     y1,b      y1,x:(r0+n0)
1281      P:03F8 47F400  [4 -     2616]            move              #>32768,y1
                 008000
1282      P:03FA 20007E  [2 -     2618]            and     y1,b
1283      P:03FB 21AF00  [2 -     2620]            move              b1,b
1284      P:03FC 2B0000  [2 -     2622]            move              #0,b2
1285      P:03FD 20000B  [2 -     2624]            tst     b
1286      P:03FE 0AF0AA  [6 -     2630]            jeq     L95
                 000408
1287      P:0400 57E800  [4 -     2634]            move              x:(r0+n0),b
1288      P:0401 0608A0  [4 -     2638]            rep     #8
1289      P:0402 20002B  [2 -     2640]            lsr     b
1290      P:0403 21A700  [2 -     2642]            move              b1,y1
1291      P:0404 57F400  [4 -     2646]            move              #>256,b
                 000100
1292      P:0406 0AF080  [6 -     2652]            jmp     L126
                 00040F
1293                                     L95
1294      P:0408 47E300  [2 -     2654]            move              x:(r3),y1
1295      P:0409 200079  [2 -     2656]            tfr     y1,b
1296      P:040A 0608A0  [4 -     2660]            rep     #8
1297      P:040B 20002B  [2 -     2662]            lsr     b
1298      P:040C 21A700  [2 -     2664]            move              b1,y1
1299      P:040D 57F400  [4 -     2668]            move              #>65536,b
                 010000
1300                                     L126
1301                                     ; **************************************************
1302                                     ;     BP[EXP] = (S->B[EXP] + DQS) & 65535;
1303                                     ; **************************************************
1304                                     ; **************************************************
1305                                     ; **************************************************
1306      P:040F 38147C  [2 -     2670]            sub     y1,b      #20,n0
1307      P:0410 556800  [4 -     2674]            move              b1,x:(r0+n0)
1308      P:0411 380700  [2 -     2676]            move              #7,n0
1309      P:0412 57E800  [4 -     2680]            move              x:(r0+n0),b
1310      P:0413 381400  [2 -     2682]            move              #20,n0
1311      P:0414 47E800  [4 -     2686]            move              x:(r0+n0),y1
1312      P:0415 380778  [2 -     2688]            add     y1,b      #7,n0
1313      P:0416 556800  [4 -     2692]            move              b1,x:(r0+n0)
1314      P:0417 381400  [2 -     2694]            move              #20,n0
1315      P:0418 47E300  [2 -     2696]            move              x:(r3),y1
1316      P:0419 200078  [2 -     2698]            add     y1,b
1317      P:041A 20006E  [2 -     2700]            and     x1,b
1318      P:041B 21AF00  [2 -     2702]            move              b1,b
1319      P:041C 21A700  [2 -     2704]            move              b1,y1
1320      P:041D 556800  [4 -     2708]            move              b1,x:(r0+n0)
1321      P:041E 380600  [2 -     2710]            move              #6,n0
1322      P:041F 226F00  [2 -     2712]            move              r3,b
1323      P:0420 476248  [2 -     2714]            add     x0,b      y1,x:(r2)
1324      P:0421 21B300  [2 -     2716]            move              b1,r3
1325      P:0422 224F00  [2 -     2718]            move              r2,b
1326      P:0423 200048  [2 -     2720]            add     x0,b
1327      P:0424 21B200  [2 -     2722]            move              b1,r2
1328      P:0425 57E800  [4 -     2726]            move              x:(r0+n0),b
1329      P:0426 200048  [2 -     2728]            add     x0,b
1330      P:0427 556800  [4 -     2732]            move              b1,x:(r0+n0)
1331                                     L112
1332                                     ; **************************************************
1333                                     ;   }
1334                                     ;   
1335                                     ;   /* TRIGB */
1336                                     ;   if (S->T)
1337                                     ; **************************************************
1338      P:0428 205C00  [2 -     2734]            move              (r4)+
1339      P:0429 56D400  [2 -     2736]            move              x:(r4)-,a
1340      P:042A 200003  [2 -     2738]            tst     a
1341      P:042B 0AF0AA  [6 -     2744]            jeq     L98
                 000433
1342                                     ; **************************************************
1343                                     ;     for (EXP = 0; EXP < 6; EXP++)
1344                                     ; **************************************************
1345      P:042D 221100  [2 -     2746]            move              r0,r1
1346      P:042E 240000  [2 -     2748]            move              #0,x0
1347      P:042F 060680  [6 -     2754]            do      #6,L110
                 000431
1348                                     L102
1349                                     ; **************************************************
1350                                     ;       BP[EXP] = 0;
1351                                     ; **************************************************
1352                                     ; **************************************************
1353                                     ; **************************************************
1354      P:0431 445900  [2 -     2756]            move              x0,x:(r1)+
1355                                     L110
1356      P:0432 000000  [2 -     2758]            nop
1357                                     L98
1358                                     ; **************************************************
1359                                     ;   
1360                                     ;   /* FMULT */
1361                                     ;   DQI  = f_mult(BP[0], DQSEZ);
1362                                     ; **************************************************
1363      P:0433 380900  [2 -     2760]            move              #9,n0
1364      P:0434 61F400  [4 -     2764]            move              #Ff_mult,r1
                 000000
1365      P:0436 47E800  [4 -     2768]            move              x:(r0+n0),y1
1366      P:0437 475E00  [2 -     2770]            move              y1,x:(r6)+
1367      P:0438 47E000  [2 -     2772]            move              x:(r0),y1
1368      P:0439 475E00  [2 -     2774]            move              y1,x:(r6)+
1369      P:043A 0BE180  [4 -     2778]            jsr     (r1)
1370                                     ; **************************************************
1371                                     ;   MAG  = f_mult(BP[1], S->DQ2);
1372                                     ; **************************************************
1373      P:043B 3C0400  [2 -     2780]            move              #4,n4
1374      P:043C 380800  [2 -     2782]            move              #8,n0
1375      P:043D 205600  [2 -     2784]            move              (r6)-
1376      P:043E 546800  [4 -     2788]            move              a1,x:(r0+n0)
1377      P:043F 57E800  [4 -     2792]            move              x:(r0+n0),b
1378      P:0440 47EC00  [4 -     2796]            move              x:(r4+n4),y1
1379      P:0441 205800  [2 -     2798]            move              (r0)+
1380      P:0442 205600  [2 -     2800]            move              (r6)-
1381      P:0443 475E00  [2 -     2802]            move              y1,x:(r6)+
1382      P:0444 47D000  [2 -     2804]            move              x:(r0)-,y1
1383      P:0445 475E00  [2 -     2806]            move              y1,x:(r6)+
1384      P:0446 0BE180  [4 -     2810]            jsr     (r1)
1385                                     ; **************************************************
1386                                     ;   MANT = f_mult(BP[2], S->DQ3);
1387                                     ; **************************************************
1388      P:0447 3C0500  [2 -     2812]            move              #5,n4
1389      P:0448 381300  [2 -     2814]            move              #19,n0
1390      P:0449 205600  [2 -     2816]            move              (r6)-
1391      P:044A 546800  [4 -     2820]            move              a1,x:(r0+n0)
1392      P:044B 380200  [2 -     2822]            move              #2,n0
1393      P:044C 47EC00  [4 -     2826]            move              x:(r4+n4),y1
1394      P:044D 205600  [2 -     2828]            move              (r6)-
1395      P:044E 475E00  [2 -     2830]            move              y1,x:(r6)+
1396      P:044F 47E800  [4 -     2834]            move              x:(r0+n0),y1
1397      P:0450 475E00  [2 -     2836]            move              y1,x:(r6)+
1398      P:0451 0BE180  [4 -     2840]            jsr     (r1)
1399                                     ; **************************************************
1400                                     ;   A1S  = f_mult(BP[3], S->DQ4);
1401                                     ; **************************************************
1402      P:0452 3C0600  [2 -     2842]            move              #6,n4
1403      P:0453 380F00  [2 -     2844]            move              #15,n0
1404      P:0454 205600  [2 -     2846]            move              (r6)-
1405      P:0455 546800  [4 -     2850]            move              a1,x:(r0+n0)
1406      P:0456 380300  [2 -     2852]            move              #3,n0
1407      P:0457 47EC00  [4 -     2856]            move              x:(r4+n4),y1
1408      P:0458 205600  [2 -     2858]            move              (r6)-
1409      P:0459 475E00  [2 -     2860]            move              y1,x:(r6)+
1410      P:045A 47E800  [4 -     2864]            move              x:(r0+n0),y1
1411      P:045B 475E00  [2 -     2866]            move              y1,x:(r6)+
1412      P:045C 0BE180  [4 -     2870]            jsr     (r1)
1413                                     ; **************************************************
1414                                     ;   AP   = f_mult(BP[4], S->DQ5);
1415                                     ; **************************************************
1416      P:045D 3C0700  [2 -     2872]            move              #7,n4
1417      P:045E 380C00  [2 -     2874]            move              #12,n0
1418      P:045F 205600  [2 -     2876]            move              (r6)-
1419      P:0460 546800  [4 -     2880]            move              a1,x:(r0+n0)
1420      P:0461 380400  [2 -     2882]            move              #4,n0
1421      P:0462 47EC00  [4 -     2886]            move              x:(r4+n4),y1
1422      P:0463 205600  [2 -     2888]            move              (r6)-
1423      P:0464 475E00  [2 -     2890]            move              y1,x:(r6)+
1424      P:0465 47E800  [4 -     2894]            move              x:(r0+n0),y1
1425      P:0466 475E00  [2 -     2896]            move              y1,x:(r6)+
1426      P:0467 0BE180  [4 -     2900]            jsr     (r1)
1427                                     ; **************************************************
1428                                     ;   EXP  = f_mult(BP[5], S->DQ6);
1429                                     ; **************************************************
1430      P:0468 380500  [2 -     2902]            move              #5,n0
1431      P:0469 3C0800  [2 -     2904]            move              #8,n4
1432      P:046A 218500  [2 -     2906]            move              a1,x1
1433      P:046B 47EC00  [4 -     2910]            move              x:(r4+n4),y1
1434      P:046C 205600  [2 -     2912]            move              (r6)-
1435      P:046D 205600  [2 -     2914]            move              (r6)-
1436      P:046E 475E00  [2 -     2916]            move              y1,x:(r6)+
1437      P:046F 47E800  [4 -     2920]            move              x:(r0+n0),y1
1438      P:0470 475E00  [2 -     2922]            move              y1,x:(r6)+
1439      P:0471 0BE180  [4 -     2926]            jsr     (r1)
1440                                     ; **************************************************
1441                                     ;   
1442                                     ;   /* ACCUM */
1443                                     ;   DQS = (DQI + MAG + MANT + A1S + AP + EXP) & 65535;
1444                                     ; **************************************************
1445                                     ; **************************************************
1446                                     ;   S->SEZ = DQS >> 1;
1447                                     ; **************************************************
1448                                     ; **************************************************
1449                                     ;   S_E = S->SE = ((DQS + WA2 + WA1) & 65535) >> 1;
1450                                     ; **************************************************
1451                                     ; **************************************************
1452                                     ;   
1453                                     ;   /* STATE update */
1454                                     ;   S->PK2 = S->PK1;
1455                                     ; **************************************************
1456                                     ; **************************************************
1457                                     ;   S->PK1 = PK0;
1458                                     ; **************************************************
1459      P:0472 3C1000  [2 -     2928]            move              #16,n4
1460      P:0473 380600  [2 -     2930]            move              #6,n0
1461      P:0474 44F400  [4 -     2934]            move              #>65535,x0
                 00FFFF
1462      P:0476 546800  [4 -     2938]            move              a1,x:(r0+n0)
1463      P:0477 381300  [2 -     2940]            move              #19,n0
1464      P:0478 205600  [2 -     2942]            move              (r6)-
1465      P:0479 47E800  [4 -     2946]            move              x:(r0+n0),y1
1466      P:047A 380F78  [2 -     2948]            add     y1,b      #15,n0
1467      P:047B 205600  [2 -     2950]            move              (r6)-
1468      P:047C 47E800  [4 -     2954]            move              x:(r0+n0),y1
1469      P:047D 380C78  [2 -     2956]            add     y1,b      #12,n0
1470      P:047E 47E800  [4 -     2960]            move              x:(r0+n0),y1
1471      P:047F 380678  [2 -     2962]            add     y1,b      #6,n0
1472      P:0480 200068  [2 -     2964]            add     x1,b
1473      P:0481 47E800  [4 -     2968]            move              x:(r0+n0),y1
1474      P:0482 380778  [2 -     2970]            add     y1,b      #7,n0
1475      P:0483 20004E  [2 -     2972]            and     x0,b
1476      P:0484 21AF00  [2 -     2974]            move              b1,b
1477      P:0485 55682B  [4 -     2978]            lsr     b         b1,x:(r0+n0)
1478      P:0486 21A700  [2 -     2980]            move              b1,y1
1479      P:0487 476C00  [4 -     2984]            move              y1,x:(r4+n4)
1480      P:0488 3C0F00  [2 -     2986]            move              #15,n4
1481      P:0489 57E800  [4 -     2990]            move              x:(r0+n0),b
1482      P:048A 380E00  [2 -     2992]            move              #14,n0
1483      P:048B 47E800  [4 -     2996]            move              x:(r0+n0),y1
1484      P:048C 380D78  [2 -     2998]            add     y1,b      #13,n0
1485      P:048D 47E800  [4 -     3002]            move              x:(r0+n0),y1
1486      P:048E 381478  [2 -     3004]            add     y1,b      #20,n0
1487      P:048F 20004E  [2 -     3006]            and     x0,b
1488      P:0490 21AF00  [2 -     3008]            move              b1,b
1489      P:0491 20002B  [2 -     3010]            lsr     b
1490      P:0492 21A700  [2 -     3012]            move              b1,y1
1491      P:0493 476C00  [4 -     3016]            move              y1,x:(r4+n4)
1492      P:0494 3C0A00  [2 -     3018]            move              #10,n4
1493      P:0495 477000  [4 -     3022]            move              y1,x:FS_E
                 00006A
1494      P:0497 47EC00  [4 -     3026]            move              x:(r4+n4),y1
1495      P:0498 3C0B00  [2 -     3028]            move              #11,n4
1496      P:0499 476800  [4 -     3032]            move              y1,x:(r0+n0)
1497      P:049A 380A00  [2 -     3034]            move              #10,n0
1498      P:049B 476C00  [4 -     3038]            move              y1,x:(r4+n4)
1499      P:049C 3C0A00  [2 -     3040]            move              #10,n4
1500      P:049D 47E800  [4 -     3044]            move              x:(r0+n0),y1
1501      P:049E 476C00  [4 -     3048]            move              y1,x:(r4+n4)
1502                                     ; **************************************************
1503                                     ;   S->SR2 = SR1;
1504                                     ; **************************************************
1505                                     ; **************************************************
1506                                     ;   A_2 = S->A2 = A2R;
1507                                     ; **************************************************
1508                                     ; **************************************************
1509                                     ; 
1510                                     ;   for (EXP = 0; EXP < 6; EXP++)
1511                                     ; **************************************************
1512      P:049F 3A1800  [2 -     3050]            move              #24,n2
1513      P:04A0 3C0C00  [2 -     3052]            move              #12,n4
1514      P:04A1 380B00  [2 -     3054]            move              #11,n0
1515      P:04A2 221100  [2 -     3056]            move              r0,r1
1516      P:04A3 229200  [2 -     3058]            move              r4,r2
1517      P:04A4 47E800  [4 -     3062]            move              x:(r0+n0),y1
1518      P:04A5 44F400  [4 -     3066]            move              #>1,x0
                 000001
1519      P:04A7 476C00  [4 -     3070]            move              y1,x:(r4+n4)
1520      P:04A8 3C0E00  [2 -     3072]            move              #14,n4
1521      P:04A9 204A00  [2 -     3074]            move              (r2)+n2
1522      P:04AA 466C00  [4 -     3078]            move              y0,x:(r4+n4)
1523      P:04AB 467000  [4 -     3082]            move              y0,x:FA_2
                 00006F
1524      P:04AD 060680  [6 -     3088]            do      #6,L108
                 0004B5
1525                                     L106
1526                                     ; **************************************************
1527                                     ;     S->B[EXP] = BP[EXP];
1528                                     ; **************************************************
1529                                     ; **************************************************
1530                                     ; **************************************************
1531      P:04AF 381400  [2 -     3090]            move              #20,n0
1532      P:04B0 224F00  [2 -     3092]            move              r2,b
1533      P:04B1 47D948  [2 -     3094]            add     x0,b      x:(r1)+,y1
1534      P:04B2 476800  [4 -     3098]            move              y1,x:(r0+n0)
1535      P:04B3 476200  [2 -     3100]            move              y1,x:(r2)
1536      P:04B4 21B200  [2 -     3102]            move              b1,r2
1537      P:04B5 000000  [2 -     3104]            nop
1538                                     L108
1539                                     ; **************************************************
1540                                     ; 
1541                                     ;   S->DQ7 = S->DQ6;
1542                                     ; **************************************************
1543                                     ; **************************************************
1544                                     ;   S->DQ6 = S->DQ5;
1545                                     ; **************************************************
1546                                     ; **************************************************
1547                                     ;   S->DQ5 = S->DQ4;
1548                                     ; **************************************************
1549                                     ; **************************************************
1550                                     ;   S->DQ4 = S->DQ3;
1551                                     ; **************************************************
1552                                     ; **************************************************
1553                                     ;   S->DQ3 = S->DQ2;
1554                                     ; **************************************************
1555                                     ; **************************************************
1556                                     ;   S->DQ2 = DQSEZ;
1557                                     ; **************************************************
1558                                     ; **************************************************
1559                                     ; }
1560                                     ; **************************************************
1561      P:04B6 381400  [2 -     3106]            move              #20,n0
1562      P:04B7 3C0800  [2 -     3108]            move              #8,n4
1563      P:04B8 205600  [2 -     3110]            move              (r6)-
1564      P:04B9 47EC00  [4 -     3114]            move              x:(r4+n4),y1
1565      P:04BA 3C0900  [2 -     3116]            move              #9,n4
1566      P:04BB 476C00  [4 -     3120]            move              y1,x:(r4+n4)
1567      P:04BC 3C0700  [2 -     3122]            move              #7,n4
1568      P:04BD 47EC00  [4 -     3126]            move              x:(r4+n4),y1
1569      P:04BE 3C0800  [2 -     3128]            move              #8,n4
1570      P:04BF 476C00  [4 -     3132]            move              y1,x:(r4+n4)
1571      P:04C0 3C0600  [2 -     3134]            move              #6,n4
1572      P:04C1 47EC00  [4 -     3138]            move              x:(r4+n4),y1
1573      P:04C2 3C0700  [2 -     3140]            move              #7,n4
1574      P:04C3 476C00  [4 -     3144]            move              y1,x:(r4+n4)
1575      P:04C4 3C0500  [2 -     3146]            move              #5,n4
1576      P:04C5 47EC00  [4 -     3150]            move              x:(r4+n4),y1
1577      P:04C6 3C0600  [2 -     3152]            move              #6,n4
1578      P:04C7 476C00  [4 -     3156]            move              y1,x:(r4+n4)
1579      P:04C8 3C0400  [2 -     3158]            move              #4,n4
1580      P:04C9 47EC00  [4 -     3162]            move              x:(r4+n4),y1
1581      P:04CA 3C0500  [2 -     3164]            move              #5,n4
1582      P:04CB 476800  [4 -     3168]            move              y1,x:(r0+n0)
1583      P:04CC 380900  [2 -     3170]            move              #9,n0
1584      P:04CD 476C00  [4 -     3174]            move              y1,x:(r4+n4)
1585      P:04CE 3C0400  [2 -     3176]            move              #4,n4
1586      P:04CF 47E800  [4 -     3180]            move              x:(r0+n0),y1
1587      P:04D0 476C00  [4 -     3184]            move              y1,x:(r4+n4)
1588      P:04D1 64D600  [2 -     3186]            move              x:(r6)-,r4
1589      P:04D2 63D600  [2 -     3188]            move              x:(r6)-,r3
1590      P:04D3 62D600  [2 -     3190]            move              x:(r6)-,r2
1591      P:04D4 61D600  [2 -     3192]            move              x:(r6)-,r1
1592      P:04D5 47D600  [2 -     3194]            move              x:(r6)-,y1
1593      P:04D6 46D600  [2 -     3196]            move              x:(r6)-,y0
1594      P:04D7 45D600  [2 -     3198]            move              x:(r6)-,x1
1595      P:04D8 44D600  [2 -     3200]            move              x:(r6)-,x0
1596      P:04D9 57D600  [2 -     3202]            move              x:(r6)-,b
1597      P:04DA 51E600  [2 -     3204]            move              x:(r6),b0
1598      P:04DB 205000  [2 -     3206]            move              (r0)-
1599      P:04DC 05D03C  [2 -     3208]            move              x:(r0)-,ssh
1600      P:04DD 221600  [2 -     3210]            move              r0,r6
1601      P:04DE 60E000  [2 -     3212]            move              x:(r0),r0
1602      P:04DF 00000C  [4 -     3216]            rts
1603   
1604      X:003C                                   org     x:
1605                                     F___qtab0
1606      X:003C                                   dc      2048
1607      X:003D                                   dc      4
1608      X:003E                                   dc      135
1609      X:003F                                   dc      213
1610      X:0040                                   dc      273
1611      X:0041                                   dc      323
1612      X:0042                                   dc      373
1613      X:0043                                   dc      425
1614      X:0044                                   dc      425
1615      X:0045                                   dc      373
1616      X:0046                                   dc      323
1617      X:0047                                   dc      273
1618      X:0048                                   dc      213
1619      X:0049                                   dc      135
1620      X:004A                                   dc      4
1621      X:004B                                   dc      2048
1622      P:04E0                                   org     p:
1623                                               global  Fiadpt_quant
1624                                     Fiadpt_quant
1625                                     ; **************************************************
1626                                     ; **************************************************
1627                                     ; **************************************************
1628                                     ; 
1629                                     ; void iadpt_quant(STATES* S)
1630                                     ; {
1631                                     ;   /*
1632                                     ;    * inverse adaptive quantizer
1633                                     ;    * 
1634                                     ;    * Input signals:  I, Y
1635                                     ;    * Output signals: DQ
1636                                     ;    */
1637                                     ;  
1638                                     ;   static int qtab[] =
1639                                     ;   {
1640                                     ;     2048, 4, 135, 213, 273, 323, 373, 425,
1641                                     ;     425, 373, 323, 273, 213, 135, 4, 2048,
1642                                     ;   } ;
1643                                     ;   register int DQL;
1644                                     ; 
1645                                     ;   /* RECONST and ADDA */
1646                                     ;   DQL = (qtab[I] + (S->Y >> 2)) & 4095;
1647                                     ; **************************************************
1648                                     ; **************************************************
1649                                     ; 
1650                                     ;   /* ANTILOG */
1651                                     ;   S->DQ = ((I & (1 << 3)) * (1 << 11)) +
1652                                     ;           (DQL & (1 << 11) ? 0 :
1653                                     ;           (((1 << 7) + (DQL & 127)) << 7) >>
1654                                     ;           (14 - ((DQL >> 7) & 15)));
1655                                     ; **************************************************
1656      P:04E0 3A0200  [2 -     3218]            move              #2,n2
1657      P:04E1 70F400  [4 -     3222]            move              #65533,n0
                 00FFFD
1658      P:04E3 3E0300  [2 -     3224]            move              #3,n6
1659      P:04E4 605E00  [2 -     3226]            move              r0,x:(r6)+
1660      P:04E5 205E00  [2 -     3228]            move              (r6)+
1661      P:04E6 22D000  [2 -     3230]            move              r6,r0
1662      P:04E7 204E00  [2 -     3232]            move              (r6)+n6
1663      P:04E8 515E00  [2 -     3234]            move              b0,x:(r6)+
1664      P:04E9 555E00  [2 -     3236]            move              b1,x:(r6)+
1665      P:04EA 445E00  [2 -     3238]            move              x0,x:(r6)+
1666      P:04EB 455E00  [2 -     3240]            move              x1,x:(r6)+
1667      P:04EC 465E00  [2 -     3242]            move              y0,x:(r6)+
1668      P:04ED 615E00  [2 -     3244]            move              r1,x:(r6)+
1669      P:04EE 61F400  [4 -     3248]            move              #F___qtab0,r1
                 00003C
1670      P:04F0 625E00  [2 -     3250]            move              r2,x:(r6)+
1671      P:04F1 62E800  [4 -     3254]            move              x:(r0+n0),r2
1672      P:04F2 56F000  [4 -     3258]            move              x:FI,a
                 00006C
1673      P:04F4 46EA00  [4 -     3262]            move              x:(r2+n2),y0
1674      P:04F5 222F00  [2 -     3264]            move              r1,b
1675      P:04F6 200018  [2 -     3266]            add     a,b
1676      P:04F7 21B159  [2 -     3268]            tfr     y0,b      b1,r1
1677      P:04F8 21AF00  [2 -     3270]            move              b1,b
1678      P:04F9 44E12A  [2 -     3272]            asr     b         x:(r1),x0
1679      P:04FA 20002A  [2 -     3274]            asr     b
1680      P:04FB 21AF00  [2 -     3276]            move              b1,b
1681      P:04FC 44F448  [4 -     3280]            add     x0,b      #>4095,x0
                 000FFF
1682      P:04FE 44F44E  [4 -     3284]            and     x0,b      #>8,x0
                 000008
1683      P:0500 21AF46  [2 -     3286]            and     x0,a      b1,b
1684      P:0501 218E00  [2 -     3288]            move              a1,a
1685      P:0502 218500  [2 -     3290]            move              a1,x1
1686      P:0503 44F400  [4 -     3294]            move              #>2048,x0
                 000800
1687      P:0505 5560A8  [2 -     3296]            mpy     +x0,x1,b  b1,x:(r0)
1688      P:0506 20582A  [2 -     3298]            asr     b         (r0)+
1689      P:0507 212F00  [2 -     3300]            move              b0,b
1690      P:0508 555000  [2 -     3302]            move              b1,x:(r0)-
1691      P:0509 56E000  [2 -     3304]            move              x:(r0),a
1692      P:050A 200046  [2 -     3306]            and     x0,a
1693      P:050B 218E00  [2 -     3308]            move              a1,a
1694      P:050C 200003  [2 -     3310]            tst     a
1695      P:050D 0AF0AA  [6 -     3316]            jeq     L130
                 000512
1696      P:050F 200013  [2 -     3318]            clr     a
1697      P:0510 0AF080  [6 -     3324]            jmp     L131
                 000531
1698                                     L130
1699      P:0512 46F400  [4 -     3328]            move              #>128,y0
                 000080
1700      P:0514 56E000  [2 -     3330]            move              x:(r0),a
1701      P:0515 44F400  [4 -     3334]            move              #>127,x0
                 00007F
1702      P:0517 200046  [2 -     3336]            and     x0,a
1703      P:0518 218E00  [2 -     3338]            move              a1,a
1704      P:0519 200050  [2 -     3340]            add     y0,a
1705      P:051A 0607A0  [4 -     3344]            rep     #7
1706      P:051B 200032  [2 -     3346]            asl     a
1707      P:051C 57E000  [2 -     3348]            move              x:(r0),b
1708      P:051D 21AF00  [2 -     3350]            move              b1,b
1709      P:051E 218E00  [2 -     3352]            move              a1,a
1710      P:051F 0607A0  [4 -     3356]            rep     #7
1711      P:0520 20002A  [2 -     3358]            asr     b
1712      P:0521 44F400  [4 -     3362]            move              #>15,x0
                 00000F
1713      P:0523 21AF00  [2 -     3364]            move              b1,b
1714      P:0524 20004E  [2 -     3366]            and     x0,b
1715      P:0525 21AF00  [2 -     3368]            move              b1,b
1716      P:0526 21A600  [2 -     3370]            move              b1,y0
1717      P:0527 57F400  [4 -     3374]            move              #>14,b
                 00000E
1718      P:0529 20005C  [2 -     3376]            sub     y0,b
1719      P:052A 20000B  [2 -     3378]            tst     b
1720      P:052B 0AF0AA  [6 -     3384]            jeq     L132
                 000531
1721      P:052D 218E00  [2 -     3386]            move              a1,a
1722      P:052E 06CF20  [4 -     3390]            rep     b
1723      P:052F 200022  [2 -     3392]            asr     a
1724      P:0530 218E00  [2 -     3394]            move              a1,a
1725                                     L132
1726                                     L131
1727                                     ; **************************************************
1728                                     ; }
1729                                     ; **************************************************
1730      P:0531 205600  [2 -     3396]            move              (r6)-
1731      P:0532 205800  [2 -     3398]            move              (r0)+
1732      P:0533 57D000  [2 -     3400]            move              x:(r0)-,b
1733      P:0534 205018  [2 -     3402]            add     a,b       (r0)-
1734      P:0535 205001  [2 -     3404]            tfr     b,a       (r0)-
1735      P:0536 546200  [2 -     3406]            move              a1,x:(r2)
1736      P:0537 62D600  [2 -     3408]            move              x:(r6)-,r2
1737      P:0538 61D600  [2 -     3410]            move              x:(r6)-,r1
1738      P:0539 46D600  [2 -     3412]            move              x:(r6)-,y0
1739      P:053A 45D600  [2 -     3414]            move              x:(r6)-,x1
1740      P:053B 44D600  [2 -     3416]            move              x:(r6)-,x0
1741      P:053C 57D600  [2 -     3418]            move              x:(r6)-,b
1742      P:053D 51E600  [2 -     3420]            move              x:(r6),b0
1743      P:053E 221600  [2 -     3422]            move              r0,r6
1744      P:053F 60E000  [2 -     3424]            move              x:(r0),r0
1745      P:0540 00000C  [4 -     3428]            rts
1746   
1747                                               global  Ftone_detector
1748                                     Ftone_detector
1749                                     ; **************************************************
1750                                     ; **************************************************
1751                                     ; **************************************************
1752                                     ; 
1753                                     ; void tone_detector(STATES* S)
1754                                     ; {
1755                                     ;   /*
1756                                     ;    * tone detector
1757                                     ;    *
1758                                     ;    * Input signals:  DQ, A_2, YL
1759                                     ;    * Output signals: T, TDP;
1760                                     ;    */
1761                                     ; 
1762                                     ;   register int tmp; 
1763                                     ;   register int t_d; 
1764                                     ; 
1765                                     ;   /* partial band signal detection */
1766                                     ;   TDP = ((A_2 > 32769) && (A_2 < 53761)) ? 1 : 0 ; 
1767                                     ; **************************************************
1768      P:0541 70F400  [4 -     3432]            move              #65533,n0
                 00FFFD
1769      P:0543 3E0300  [2 -     3434]            move              #3,n6
1770      P:0544 56F400  [4 -     3438]            move              #>32769,a
                 008001
1771      P:0546 2A0000  [2 -     3440]            move              #0,a2
1772      P:0547 605E00  [2 -     3442]            move              r0,x:(r6)+
1773      P:0548 205E00  [2 -     3444]            move              (r6)+
1774      P:0549 22D000  [2 -     3446]            move              r6,r0
1775      P:054A 204E00  [2 -     3448]            move              (r6)+n6
1776      P:054B 515E00  [2 -     3450]            move              b0,x:(r6)+
1777      P:054C 555E00  [2 -     3452]            move              b1,x:(r6)+
1778      P:054D 445E00  [2 -     3454]            move              x0,x:(r6)+
1779      P:054E 455E00  [2 -     3456]            move              x1,x:(r6)+
1780      P:054F 615E00  [2 -     3458]            move              r1,x:(r6)+
1781      P:0550 61E800  [4 -     3462]            move              x:(r0+n0),r1
1782      P:0551 45F000  [4 -     3466]            move              x:FA_2,x1
                 00006F
1783      P:0553 200069  [2 -     3468]            tfr     x1,b
1784      P:0554 2B0000  [2 -     3470]            move              #0,b2
1785      P:0555 20000D  [2 -     3472]            cmp     a,b
1786      P:0556 0AF0AF  [6 -     3478]            jle     L134
                 000563
1787      P:0558 2B0000  [2 -     3480]            move              #0,b2
1788      P:0559 56F400  [4 -     3484]            move              #>53760,a
                 00D200
1789      P:055B 2A0000  [2 -     3486]            move              #0,a2
1790      P:055C 20000D  [2 -     3488]            cmp     a,b
1791      P:055D 0AF0A7  [6 -     3494]            jgt     L134
                 000563
1792      P:055F 56F400  [4 -     3498]            move              #>1,a
                 000001
1793      P:0561 0AF080  [6 -     3504]            jmp     L135
                 000564
1794                                     L134
1795      P:0563 200013  [2 -     3506]            clr     a
1796                                     L135
1797                                     ; **************************************************
1798                                     ;   
1799                                     ;   /* take last (t_dr) */
1800                                     ;   t_d = (S->t_dr);
1801                                     ; **************************************************
1802                                     ; **************************************************
1803                                     ;   
1804                                     ;   /* calcutale new  (S->t_dr)  */
1805                                     ;   /* TRIGB Function */
1806                                     ;   S->t_dr = S->LAST_TR ? 0 : TDP; 
1807                                     ; **************************************************
1808      P:0564 391100  [2 -     3508]            move              #17,n1
1809      P:0565 547000  [4 -     3512]            move              a1,x:FTDP
                 000067
1810      P:0567 45E900  [4 -     3516]            move              x:(r1+n1),x1
1811      P:0568 391200  [2 -     3518]            move              #18,n1
1812      P:0569 205800  [2 -     3520]            move              (r0)+
1813      P:056A 455000  [2 -     3522]            move              x1,x:(r0)-
1814      P:056B 56E900  [4 -     3526]            move              x:(r1+n1),a
1815      P:056C 200003  [2 -     3528]            tst     a
1816      P:056D 0AF0AA  [6 -     3534]            jeq     L136
                 000572
1817      P:056F 200013  [2 -     3536]            clr     a
1818      P:0570 0AF080  [6 -     3542]            jmp     L137
                 000574
1819                                     L136
1820      P:0572 56F000  [4 -     3546]            move              x:FTDP,a
                 000067
1821                                     L137
1822                                     ; **************************************************
1823                                     ;   
1824                                     ;   S->LAST_TR = S->YL >> 15; /* (*LAST_TR)  is used here as a temporary variable */
1825                                     ; **************************************************
1826      P:0574 391100  [2 -     3548]            move              #17,n1
1827      P:0575 546900  [4 -     3552]            move              a1,x:(r1+n1)
1828      P:0576 390300  [2 -     3554]            move              #3,n1
1829      P:0577 56E900  [4 -     3558]            move              x:(r1+n1),a
1830      P:0578 218E00  [2 -     3560]            move              a1,a
1831      P:0579 060FA0  [4 -     3564]            rep     #15
1832      P:057A 200022  [2 -     3566]            asr     a
1833                                     ; **************************************************
1834                                     ;   
1835                                     ;   tmp = ((S->LAST_TR) > 8) ? 31 << 9 :
1836                                     ;         (32 + ((S->LAST_TR << 5) & 31)) << S->LAST_TR; 
1837                                     ; **************************************************
1838      P:057B 391200  [2 -     3568]            move              #18,n1
1839      P:057C 57F400  [4 -     3572]            move              #>8,b
                 000008
1840      P:057E 218E00  [2 -     3574]            move              a1,a
1841      P:057F 546905  [4 -     3578]            cmp     b,a       a1,x:(r1+n1)
1842      P:0580 0AF0AF  [6 -     3584]            jle     L138
                 000587
1843      P:0582 45F400  [4 -     3588]            move              #>15872,x1
                 003E00
1844      P:0584 456000  [2 -     3590]            move              x1,x:(r0)
1845      P:0585 0AF080  [6 -     3596]            jmp     L139
                 00059B
1846                                     L138
1847      P:0587 391200  [2 -     3598]            move              #18,n1
1848      P:0588 56E900  [4 -     3602]            move              x:(r1+n1),a
1849      P:0589 0605A0  [4 -     3606]            rep     #5
1850      P:058A 200032  [2 -     3608]            asl     a
1851      P:058B 57E900  [4 -     3612]            move              x:(r1+n1),b
1852      P:058C 45F400  [4 -     3616]            move              #>32,x1
                 000020
1853      P:058E 44F400  [4 -     3620]            move              #>31,x0
                 00001F
1854      P:0590 218E00  [2 -     3622]            move              a1,a
1855      P:0591 200046  [2 -     3624]            and     x0,a
1856      P:0592 218E00  [2 -     3626]            move              a1,a
1857      P:0593 200060  [2 -     3628]            add     x1,a
1858      P:0594 20000B  [2 -     3630]            tst     b
1859      P:0595 0AF0AA  [6 -     3636]            jeq     L142
                 00059A
1860      P:0597 06CF20  [4 -     3640]            rep     b
1861      P:0598 200032  [2 -     3642]            asl     a
1862      P:0599 218E00  [2 -     3644]            move              a1,a
1863                                     L142
1864      P:059A 546000  [2 -     3646]            move              a1,x:(r0)
1865                                     L139
1866                                     ; **************************************************
1867                                     ;   
1868                                     ;   S->LAST_TR = S->T = (((S->DQ & 16383) > (tmp + (tmp >> 1)) >> 1) 
1869                                     ;                     && (t_d == 1)) ? 1 : 0;
1870                                     ; **************************************************
1871      P:059B 57E000  [2 -     3648]            move              x:(r0),b
1872      P:059C 21AF00  [2 -     3650]            move              b1,b
1873      P:059D 44F42A  [4 -     3654]            asr     b         #>16383,x0
                 003FFF
1874      P:059F 21AF00  [2 -     3656]            move              b1,b
1875      P:05A0 21A500  [2 -     3658]            move              b1,x1
1876      P:05A1 57E000  [2 -     3660]            move              x:(r0),b
1877      P:05A2 56E168  [2 -     3662]            add     x1,b      x:(r1),a
1878      P:05A3 21AF46  [2 -     3664]            and     x0,a      b1,b
1879      P:05A4 218E2A  [2 -     3666]            asr     b         a1,a
1880      P:05A5 21AF00  [2 -     3668]            move              b1,b
1881      P:05A6 21A500  [2 -     3670]            move              b1,x1
1882      P:05A7 200065  [2 -     3672]            cmp     x1,a
1883      P:05A8 0AF0AF  [6 -     3678]            jle     L140
                 0005B1
1884      P:05AA 56F400  [4 -     3682]            move              #>1,a
                 000001
1885      P:05AC 205800  [2 -     3684]            move              (r0)+
1886      P:05AD 57D000  [2 -     3686]            move              x:(r0)-,b
1887      P:05AE 20000D  [2 -     3688]            cmp     a,b
1888      P:05AF 0AF0AA  [6 -     3694]            jeq     L141
                 0005B2
1889                                     L140
1890      P:05B1 200013  [2 -     3696]            clr     a
1891                                     L141
1892                                     ; **************************************************
1893                                     ; }
1894                                     ; **************************************************
1895      P:05B2 391200  [2 -     3698]            move              #18,n1
1896      P:05B3 205000  [2 -     3700]            move              (r0)-
1897      P:05B4 205000  [2 -     3702]            move              (r0)-
1898      P:05B5 205600  [2 -     3704]            move              (r6)-
1899      P:05B6 205900  [2 -     3706]            move              (r1)+
1900      P:05B7 545100  [2 -     3708]            move              a1,x:(r1)-
1901      P:05B8 546900  [4 -     3712]            move              a1,x:(r1+n1)
1902      P:05B9 61D600  [2 -     3714]            move              x:(r6)-,r1
1903      P:05BA 45D600  [2 -     3716]            move              x:(r6)-,x1
1904      P:05BB 44D600  [2 -     3718]            move              x:(r6)-,x0
1905      P:05BC 57D600  [2 -     3720]            move              x:(r6)-,b
1906      P:05BD 51E600  [2 -     3722]            move              x:(r6),b0
1907      P:05BE 221600  [2 -     3724]            move              r0,r6
1908      P:05BF 60E000  [2 -     3726]            move              x:(r0),r0
1909      P:05C0 00000C  [4 -     3730]            rts
1910   
1911      X:004C                                   org     x:
1912                                     F___F1
1913      X:004C                                   dc      0
1914      X:004D                                   dc      0
1915      X:004E                                   dc      0
1916      X:004F                                   dc      1
1917      X:0050                                   dc      1
1918      X:0051                                   dc      1
1919      X:0052                                   dc      3
1920      X:0053                                   dc      7
1921      P:05C1                                   org     p:
1922                                               global  Fspeed_control
1923                                     Fspeed_control
1924                                     ; **************************************************
1925                                     ; **************************************************
1926                                     ; **************************************************
1927                                     ; 
1928                                     ; void speed_control(STATES* S)
1929                                     ; {
1930                                     ;   /*
1931                                     ;    * speed control
1932                                     ;    *
1933                                     ;    * Input signals:  T, TDP, I, Y
1934                                     ;    * Output signals: AL
1935                                     ;    */
1936                                     ; 
1937                                     ;   static int F[] = { 0, 0, 0, 1, 1, 1, 3, 7 };
1938                                     ;   register unsigned int FI, tmp ; 
1939                                     ; 
1940                                     ;   /* FUNTCF */
1941                                     ;   FI = F[(I >> 3 ? (15 - I) : I) & 7] ; 
1942                                     ; **************************************************
1943      P:05C1 70F400  [4 -     3734]            move              #65533,n0
                 00FFFD
1944      P:05C3 3E0300  [2 -     3736]            move              #3,n6
1945      P:05C4 605E00  [2 -     3738]            move              r0,x:(r6)+
1946      P:05C5 205E00  [2 -     3740]            move              (r6)+
1947      P:05C6 22D000  [2 -     3742]            move              r6,r0
1948      P:05C7 204E00  [2 -     3744]            move              (r6)+n6
1949      P:05C8 515E00  [2 -     3746]            move              b0,x:(r6)+
1950      P:05C9 555E00  [2 -     3748]            move              b1,x:(r6)+
1951      P:05CA 445E00  [2 -     3750]            move              x0,x:(r6)+
1952      P:05CB 455E00  [2 -     3752]            move              x1,x:(r6)+
1953      P:05CC 465E00  [2 -     3754]            move              y0,x:(r6)+
1954      P:05CD 615E00  [2 -     3756]            move              r1,x:(r6)+
1955      P:05CE 625E00  [2 -     3758]            move              r2,x:(r6)+
1956      P:05CF 62E800  [4 -     3762]            move              x:(r0+n0),r2
1957      P:05D0 380200  [2 -     3764]            move              #2,n0
1958      P:05D1 46F000  [4 -     3768]            move              x:FI,y0
                 00006C
1959      P:05D3 466851  [4 -     3772]            tfr     y0,a      y0,x:(r0+n0)
1960      P:05D4 0603A0  [4 -     3776]            rep     #3
1961      P:05D5 200023  [2 -     3778]            lsr     a
1962      P:05D6 2A0000  [2 -     3780]            move              #0,a2
1963      P:05D7 200003  [2 -     3782]            tst     a
1964      P:05D8 0AF0AA  [6 -     3788]            jeq     L144
                 0005DF
1965      P:05DA 56F400  [4 -     3792]            move              #>15,a
                 00000F
1966      P:05DC 200054  [2 -     3794]            sub     y0,a
1967      P:05DD 0AF080  [6 -     3800]            jmp     L145
                 0005E1
1968                                     L144
1969      P:05DF 56F000  [4 -     3804]            move              x:FI,a
                 00006C
1970                                     L145
1971                                     ; **************************************************
1972                                     ; 
1973                                     ;   /* FILTA */
1974                                     ;   tmp = ((FI << 9) + 8192 - S->DMS) & 8191;              /* tmp => DIF */
1975                                     ; **************************************************
1976      P:05E1 61F400  [4 -     3808]            move              #F___F1,r1
                 00004C
1977      P:05E3 44F400  [4 -     3812]            move              #>7,x0
                 000007
1978      P:05E5 222F46  [2 -     3814]            and     x0,a      r1,b
1979      P:05E6 218E00  [2 -     3816]            move              a1,a
1980      P:05E7 200018  [2 -     3818]            add     a,b
1981      P:05E8 21B100  [2 -     3820]            move              b1,r1
1982      P:05E9 46E100  [2 -     3822]            move              x:(r1),y0
1983      P:05EA 466059  [2 -     3824]            tfr     y0,b      y0,x:(r0)
1984      P:05EB 0609A0  [4 -     3828]            rep     #9
1985      P:05EC 20003B  [2 -     3830]            lsl     b
1986                                     ; **************************************************
1987                                     ;   tmp >>= 5;
1988                                     ; **************************************************
1989      P:05ED 3A1300  [2 -     3832]            move              #19,n2
1990      P:05EE 44F400  [4 -     3836]            move              #>16769024,x0
                 FFE000
1991      P:05F0 56EA00  [4 -     3840]            move              x:(r2+n2),a
1992      P:05F1 44F440  [4 -     3844]            add     x0,a      #>8191,x0
                 001FFF
1993      P:05F3 20001C  [2 -     3846]            sub     a,b
1994      P:05F4 20004E  [2 -     3848]            and     x0,b
1995      P:05F5 21AF00  [2 -     3850]            move              b1,b
1996      P:05F6 0605A0  [4 -     3854]            rep     #5
1997      P:05F7 20002B  [2 -     3856]            lsr     b
1998                                     ; **************************************************
1999                                     ;   if (tmp & (1 << 7))
2000                                     ; **************************************************
2001      P:05F8 44F401  [4 -     3860]            tfr     b,a       #>128,x0
                 000080
2002      P:05FA 205846  [2 -     3862]            and     x0,a      (r0)+
2003      P:05FB 218E00  [2 -     3864]            move              a1,a
2004      P:05FC 2A0000  [2 -     3866]            move              #0,a2
2005      P:05FD 555003  [2 -     3868]            tst     a         b1,x:(r0)-
2006      P:05FE 0AF0AA  [6 -     3874]            jeq     L146
                 000604
2007                                     ; **************************************************
2008                                     ;     tmp = tmp + 3840;                                    /* tmp => DIFSX */
2009                                     ; **************************************************
2010      P:0600 56F400  [4 -     3878]            move              #>3840,a
                 000F00
2011      P:0602 205818  [2 -     3880]            add     a,b       (r0)+
2012      P:0603 555000  [2 -     3882]            move              b1,x:(r0)-
2013                                     L146
2014                                     ; **************************************************
2015                                     ;   S->DMS = (tmp + S->DMS) & 4095;
2016                                     ; **************************************************
2017                                     ; **************************************************
2018                                     ; 
2019                                     ;   /* FILTB */
2020                                     ;   tmp = ((FI << 11) + 32768 - S->DML) & 32767;           /* tmp => DIF */
2021                                     ; **************************************************
2022      P:0604 3A1300  [2 -     3884]            move              #19,n2
2023      P:0605 44F400  [4 -     3888]            move              #>4095,x0
                 000FFF
2024      P:0607 56EA00  [4 -     3892]            move              x:(r2+n2),a
2025      P:0608 205800  [2 -     3894]            move              (r0)+
2026      P:0609 57D000  [2 -     3896]            move              x:(r0)-,b
2027      P:060A 200018  [2 -     3898]            add     a,b
2028      P:060B 200001  [2 -     3900]            tfr     b,a
2029      P:060C 200046  [2 -     3902]            and     x0,a
2030      P:060D 218E00  [2 -     3904]            move              a1,a
2031      P:060E 546A00  [4 -     3908]            move              a1,x:(r2+n2)
2032      P:060F 57E000  [2 -     3910]            move              x:(r0),b
2033      P:0610 060BA0  [4 -     3914]            rep     #11
2034      P:0611 20003B  [2 -     3916]            lsl     b
2035                                     ; **************************************************
2036                                     ;   tmp >>= 7;
2037                                     ; **************************************************
2038      P:0612 3A1400  [2 -     3918]            move              #20,n2
2039      P:0613 44F400  [4 -     3922]            move              #>16744448,x0
                 FF8000
2040      P:0615 56EA00  [4 -     3926]            move              x:(r2+n2),a
2041      P:0616 44F440  [4 -     3930]            add     x0,a      #>32767,x0
                 007FFF
2042      P:0618 20001C  [2 -     3932]            sub     a,b
2043      P:0619 20004E  [2 -     3934]            and     x0,b
2044      P:061A 21AF00  [2 -     3936]            move              b1,b
2045      P:061B 0607A0  [4 -     3940]            rep     #7
2046      P:061C 20002B  [2 -     3942]            lsr     b
2047                                     ; **************************************************
2048                                     ;   if (tmp & (1 << 7))
2049                                     ; **************************************************
2050      P:061D 44F401  [4 -     3946]            tfr     b,a       #>128,x0
                 000080
2051      P:061F 205846  [2 -     3948]            and     x0,a      (r0)+
2052      P:0620 218E00  [2 -     3950]            move              a1,a
2053      P:0621 2A0000  [2 -     3952]            move              #0,a2
2054      P:0622 555003  [2 -     3954]            tst     a         b1,x:(r0)-
2055      P:0623 0AF0AA  [6 -     3960]            jeq     L147
                 000629
2056                                     ; **************************************************
2057                                     ;     tmp = tmp + 16128;                                   /* tmp => DIFSX */
2058                                     ; **************************************************
2059      P:0625 56F400  [4 -     3964]            move              #>16128,a
                 003F00
2060      P:0627 205818  [2 -     3966]            add     a,b       (r0)+
2061      P:0628 555000  [2 -     3968]            move              b1,x:(r0)-
2062                                     L147
2063                                     ; **************************************************
2064                                     ;   S->DML = (tmp + S->DML) & 16383;
2065                                     ; **************************************************
2066                                     ; **************************************************
2067                                     ; 
2068                                     ;   /* SUBTC */
2069                                     ;   tmp = ((S->DMS << 2) + 32768 - S->DML) & 32767;        /* tmp => DIF */
2070                                     ; **************************************************
2071                                     ; **************************************************
2072                                     ;   if (tmp & (1 << 14))
2073                                     ; **************************************************
2074      P:0629 380200  [2 -     3970]            move              #2,n0
2075      P:062A 3A1400  [2 -     3972]            move              #20,n2
2076      P:062B 44F400  [4 -     3976]            move              #>16744448,x0
                 FF8000
2077      P:062D 56EA00  [4 -     3980]            move              x:(r2+n2),a
2078      P:062E 45F400  [4 -     3984]            move              #>16383,x1
                 003FFF
2079      P:0630 205800  [2 -     3986]            move              (r0)+
2080      P:0631 57D000  [2 -     3988]            move              x:(r0)-,b
2081      P:0632 200018  [2 -     3990]            add     a,b
2082      P:0633 200001  [2 -     3992]            tfr     b,a
2083      P:0634 200066  [2 -     3994]            and     x1,a
2084      P:0635 218E00  [2 -     3996]            move              a1,a
2085      P:0636 546A40  [4 -     4000]            add     x0,a      a1,x:(r2+n2)
2086      P:0637 3A1300  [2 -     4002]            move              #19,n2
2087      P:0638 44F400  [4 -     4006]            move              #>32767,x0
                 007FFF
2088      P:063A 46EA00  [4 -     4010]            move              x:(r2+n2),y0
2089      P:063B 466859  [4 -     4014]            tfr     y0,b      y0,x:(r0+n0)
2090      P:063C 20583A  [2 -     4016]            asl     b         (r0)+
2091      P:063D 20003A  [2 -     4018]            asl     b
2092      P:063E 21AF00  [2 -     4020]            move              b1,b
2093      P:063F 20001C  [2 -     4022]            sub     a,b
2094      P:0640 44F44E  [4 -     4026]            and     x0,b      #>16384,x0
                 004000
2095      P:0642 21AF00  [2 -     4028]            move              b1,b
2096      P:0643 555001  [2 -     4030]            tfr     b,a       b1,x:(r0)-
2097      P:0644 200046  [2 -     4032]            and     x0,a
2098      P:0645 218E00  [2 -     4034]            move              a1,a
2099      P:0646 2A0000  [2 -     4036]            move              #0,a2
2100      P:0647 200003  [2 -     4038]            tst     a
2101      P:0648 0AF0AA  [6 -     4044]            jeq     L148
                 000653
2102                                     ; **************************************************
2103                                     ;     tmp = (32768 - tmp) & 16383;                         /* tmp => DIFM */
2104                                     ; **************************************************
2105      P:064A 56F400  [4 -     4048]            move              #>32768,a
                 008000
2106      P:064C 205800  [2 -     4050]            move              (r0)+
2107      P:064D 46D000  [2 -     4052]            move              x:(r0)-,y0
2108      P:064E 205854  [2 -     4054]            sub     y0,a      (r0)+
2109      P:064F 545009  [2 -     4056]            tfr     a,b       a1,x:(r0)-
2110      P:0650 20586E  [2 -     4058]            and     x1,b      (r0)+
2111      P:0651 21AF00  [2 -     4060]            move              b1,b
2112      P:0652 555000  [2 -     4062]            move              b1,x:(r0)-
2113                                     L148
2114                                     ; **************************************************
2115                                     ;   FI = ((S->Y > 1535) && (tmp < (S->DML >> 3)) && (TDP == 0)) ? 0 : 1;
2116                                     ; **************************************************
2117      P:0653 3A0200  [2 -     4064]            move              #2,n2
2118      P:0654 57F400  [4 -     4068]            move              #>1535,b
                 0005FF
2119      P:0656 56EA00  [4 -     4072]            move              x:(r2+n2),a
2120      P:0657 200005  [2 -     4074]            cmp     b,a
2121      P:0658 0AF0AF  [6 -     4080]            jle     L149
                 000670
2122      P:065A 3A1400  [2 -     4082]            move              #20,n2
2123      P:065B 56EA00  [4 -     4086]            move              x:(r2+n2),a
2124      P:065C 218E00  [2 -     4088]            move              a1,a
2125      P:065D 0603A0  [4 -     4092]            rep     #3
2126      P:065E 200022  [2 -     4094]            asr     a
2127      P:065F 218E00  [2 -     4096]            move              a1,a
2128      P:0660 2A0000  [2 -     4098]            move              #0,a2
2129      P:0661 205800  [2 -     4100]            move              (r0)+
2130      P:0662 57D000  [2 -     4102]            move              x:(r0)-,b
2131      P:0663 2B0000  [2 -     4104]            move              #0,b2
2132      P:0664 20000D  [2 -     4106]            cmp     a,b
2133      P:0665 0AF0A1  [6 -     4112]            jge     L149
                 000670
2134      P:0667 56F000  [4 -     4116]            move              x:FTDP,a
                 000067
2135      P:0669 2A0000  [2 -     4118]            move              #0,a2
2136      P:066A 200003  [2 -     4120]            tst     a
2137      P:066B 0AF0A2  [6 -     4126]            jne     L149
                 000670
2138      P:066D 260000  [2 -     4128]            move              #0,y0
2139      P:066E 0AF080  [6 -     4134]            jmp     L157
                 000672
2140                                     L149
2141      P:0670 46F400  [4 -     4138]            move              #>1,y0
                 000001
2142                                     L157
2143                                     ; **************************************************
2144                                     ; 
2145                                     ;   /* FILTC */
2146                                     ;   tmp = ((FI << 9) + 2048 - S->AP) & 2047;               /* tmp => DIF */ 
2147                                     ; **************************************************
2148      P:0672 466000  [2 -     4140]            move              y0,x:(r0)
2149      P:0673 57E000  [2 -     4142]            move              x:(r0),b
2150      P:0674 0609A0  [4 -     4146]            rep     #9
2151      P:0675 20003B  [2 -     4148]            lsl     b
2152                                     ; **************************************************
2153                                     ;   tmp = (tmp >> 4) + (tmp >> 10 ? 896 : 0);              /* tmp => DIFSX */
2154                                     ; **************************************************
2155      P:0676 3A1500  [2 -     4150]            move              #21,n2
2156      P:0677 44F400  [4 -     4154]            move              #>16775168,x0
                 FFF800
2157      P:0679 56EA00  [4 -     4158]            move              x:(r2+n2),a
2158      P:067A 44F440  [4 -     4162]            add     x0,a      #>2047,x0
                 0007FF
2159      P:067C 20581C  [2 -     4164]            sub     a,b       (r0)+
2160      P:067D 20004E  [2 -     4166]            and     x0,b
2161      P:067E 21AF00  [2 -     4168]            move              b1,b
2162      P:067F 555001  [2 -     4170]            tfr     b,a       b1,x:(r0)-
2163      P:0680 0604A0  [4 -     4174]            rep     #4
2164      P:0681 20002B  [2 -     4176]            lsr     b
2165      P:0682 380200  [2 -     4178]            move              #2,n0
2166      P:0683 556800  [4 -     4182]            move              b1,x:(r0+n0)
2167      P:0684 060AA0  [4 -     4186]            rep     #10
2168      P:0685 200023  [2 -     4188]            lsr     a
2169      P:0686 2A0000  [2 -     4190]            move              #0,a2
2170      P:0687 200003  [2 -     4192]            tst     a
2171      P:0688 0AF0AA  [6 -     4198]            jeq     L151
                 00068E
2172      P:068A 56F400  [4 -     4202]            move              #>896,a
                 000380
2173      P:068C 0AF080  [6 -     4208]            jmp     L152
                 00068F
2174                                     L151
2175      P:068E 200013  [2 -     4210]            clr     a
2176                                     L152
2177                                     ; **************************************************
2178                                     ;   tmp = (tmp + S->AP) & 1023;                            /* tmp => APP */
2179                                     ; **************************************************
2180                                     ; **************************************************
2181                                     ; 
2182                                     ;   /* TRIGA */
2183                                     ;   S->AP = S->T ? 256 : tmp; 
2184                                     ; **************************************************
2185      P:068F 3A1500  [2 -     4212]            move              #21,n2
2186      P:0690 380200  [2 -     4214]            move              #2,n0
2187      P:0691 44F400  [4 -     4218]            move              #>1023,x0
                 0003FF
2188      P:0693 57E800  [4 -     4222]            move              x:(r0+n0),b
2189      P:0694 56EA18  [4 -     4226]            add     a,b       x:(r2+n2),a
2190      P:0695 205A18  [2 -     4228]            add     a,b       (r2)+
2191      P:0696 20584E  [2 -     4230]            and     x0,b      (r0)+
2192      P:0697 21AF00  [2 -     4232]            move              b1,b
2193      P:0698 555000  [2 -     4234]            move              b1,x:(r0)-
2194      P:0699 56D200  [2 -     4236]            move              x:(r2)-,a
2195      P:069A 200003  [2 -     4238]            tst     a
2196      P:069B 0AF0AA  [6 -     4244]            jeq     L153
                 0006A1
2197      P:069D 46F400  [4 -     4248]            move              #>256,y0
                 000100
2198      P:069F 0AF080  [6 -     4254]            jmp     L158
                 0006A3
2199                                     L153
2200      P:06A1 205800  [2 -     4256]            move              (r0)+
2201      P:06A2 46D000  [2 -     4258]            move              x:(r0)-,y0
2202                                     L158
2203                                     ; **************************************************
2204                                     ; 
2205                                     ;   /* LIMA */
2206                                     ;   AL = (S->AP > 255) ? 64 : S->AP >> 2; 
2207                                     ; **************************************************
2208      P:06A3 3A1500  [2 -     4260]            move              #21,n2
2209      P:06A4 380200  [2 -     4262]            move              #2,n0
2210      P:06A5 56F400  [4 -     4266]            move              #>255,a
                 0000FF
2211      P:06A7 466800  [4 -     4270]            move              y0,x:(r0+n0)
2212      P:06A8 46E800  [4 -     4274]            move              x:(r0+n0),y0
2213      P:06A9 466A59  [4 -     4278]            tfr     y0,b      y0,x:(r2+n2)
2214      P:06AA 20000D  [2 -     4280]            cmp     a,b
2215      P:06AB 0AF0AF  [6 -     4286]            jle     L155
                 0006B1
2216      P:06AD 56F400  [4 -     4290]            move              #>64,a
                 000040
2217      P:06AF 0AF080  [6 -     4296]            jmp     L156
                 0006B7
2218                                     L155
2219      P:06B1 3A1500  [2 -     4298]            move              #21,n2
2220      P:06B2 56EA00  [4 -     4302]            move              x:(r2+n2),a
2221      P:06B3 218E00  [2 -     4304]            move              a1,a
2222      P:06B4 200022  [2 -     4306]            asr     a
2223      P:06B5 200022  [2 -     4308]            asr     a
2224      P:06B6 218E00  [2 -     4310]            move              a1,a
2225                                     L156
2226                                     ; **************************************************
2227                                     ; }
2228                                     ; **************************************************
2229      P:06B7 205000  [2 -     4312]            move              (r0)-
2230      P:06B8 205000  [2 -     4314]            move              (r0)-
2231      P:06B9 205600  [2 -     4316]            move              (r6)-
2232      P:06BA 547000  [4 -     4320]            move              a1,x:FAL
                 00006E
2233      P:06BC 62D600  [2 -     4322]            move              x:(r6)-,r2
2234      P:06BD 61D600  [2 -     4324]            move              x:(r6)-,r1
2235      P:06BE 46D600  [2 -     4326]            move              x:(r6)-,y0
2236      P:06BF 45D600  [2 -     4328]            move              x:(r6)-,x1
2237      P:06C0 44D600  [2 -     4330]            move              x:(r6)-,x0
2238      P:06C1 57D600  [2 -     4332]            move              x:(r6)-,b
2239      P:06C2 51E600  [2 -     4334]            move              x:(r6),b0
2240      P:06C3 221600  [2 -     4336]            move              r0,r6
2241      P:06C4 60E000  [2 -     4338]            move              x:(r0),r0
2242      P:06C5 00000C  [4 -     4342]            rts
2243   
2244      X:0054                                   org     x:
2245                                     F___W2
2246      X:0054                                   dc      4084
2247      X:0055                                   dc      18
2248      X:0056                                   dc      41
2249      X:0057                                   dc      64
2250      X:0058                                   dc      112
2251      X:0059                                   dc      198
2252      X:005A                                   dc      255
2253      X:005B                                   dc      1122
2254      P:06C6                                   org     p:
2255                                               global  Fscale_factor
2256                                     Fscale_factor
2257                                     ; **************************************************
2258                                     ; **************************************************
2259                                     ; **************************************************
2260                                     ; 
2261                                     ; void scale_factor(STATES* S)
2262                                     ; {
2263                                     ;   /*
2264                                     ;    * scale factor adaptation
2265                                     ;    *
2266                                     ;    * Input signals:  AL, I
2267                                     ;    * Output signals: YL, Y
2268                                     ;    */
2269                                     ; 
2270                                     ;   static int W[] = 
2271                                     ;   {
2272                                     ;     4084, 18, 41, 64, 112, 198, 255, 1122
2273                                     ;   } ; 
2274                                     ;   register unsigned int TMP, YUP, YLP;
2275                                     ;  
2276                                     ;   /* FUNCTW */
2277                                     ;   TMP = W[(I >> 3) ? (15 - I) & 7 : I & 7];
2278                                     ; **************************************************
2279      P:06C6 70F400  [4 -     4346]            move              #65533,n0
                 00FFFD
2280      P:06C8 3E0300  [2 -     4348]            move              #3,n6
2281      P:06C9 605E00  [2 -     4350]            move              r0,x:(r6)+
2282      P:06CA 205E00  [2 -     4352]            move              (r6)+
2283      P:06CB 22D000  [2 -     4354]            move              r6,r0
2284      P:06CC 204E00  [2 -     4356]            move              (r6)+n6
2285      P:06CD 515E00  [2 -     4358]            move              b0,x:(r6)+
2286      P:06CE 555E00  [2 -     4360]            move              b1,x:(r6)+
2287      P:06CF 445E00  [2 -     4362]            move              x0,x:(r6)+
2288      P:06D0 455E00  [2 -     4364]            move              x1,x:(r6)+
2289      P:06D1 615E00  [2 -     4366]            move              r1,x:(r6)+
2290      P:06D2 625E00  [2 -     4368]            move              r2,x:(r6)+
2291      P:06D3 62E800  [4 -     4372]            move              x:(r0+n0),r2
2292      P:06D4 380200  [2 -     4374]            move              #2,n0
2293      P:06D5 45F000  [4 -     4378]            move              x:FI,x1
                 00006C
2294      P:06D7 456861  [4 -     4382]            tfr     x1,a      x1,x:(r0+n0)
2295      P:06D8 0603A0  [4 -     4386]            rep     #3
2296      P:06D9 200023  [2 -     4388]            lsr     a
2297      P:06DA 2A0000  [2 -     4390]            move              #0,a2
2298      P:06DB 200003  [2 -     4392]            tst     a
2299      P:06DC 0AF0AA  [6 -     4398]            jeq     L160
                 0006E3
2300      P:06DE 56F400  [4 -     4402]            move              #>15,a
                 00000F
2301      P:06E0 200064  [2 -     4404]            sub     x1,a
2302      P:06E1 0AF080  [6 -     4410]            jmp     L171
                 0006E5
2303                                     L160
2304      P:06E3 56F000  [4 -     4414]            move              x:FI,a
                 00006C
2305                                     L171
2306                                     ; **************************************************
2307                                     ;   
2308                                     ;   /* FILTD */
2309                                     ;   TMP = ((TMP << 5) + 131072 - S->LAST_Y) & 131071;
2310                                     ; **************************************************
2311      P:06E5 61F400  [4 -     4418]            move              #F___W2,r1
                 000054
2312      P:06E7 44F400  [4 -     4422]            move              #>7,x0
                 000007
2313      P:06E9 222F46  [2 -     4424]            and     x0,a      r1,b
2314      P:06EA 218E00  [2 -     4426]            move              a1,a
2315      P:06EB 200018  [2 -     4428]            add     a,b
2316      P:06EC 21B100  [2 -     4430]            move              b1,r1
2317      P:06ED 45E100  [2 -     4432]            move              x:(r1),x1
2318      P:06EE 200069  [2 -     4434]            tfr     x1,b
2319      P:06EF 0605A0  [4 -     4438]            rep     #5
2320      P:06F0 20003B  [2 -     4440]            lsl     b
2321                                     ; **************************************************
2322                                     ;   TMP >>= 5;
2323                                     ; **************************************************
2324      P:06F1 3A1700  [2 -     4442]            move              #23,n2
2325      P:06F2 44F400  [4 -     4446]            move              #>16646144,x0
                 FE0000
2326      P:06F4 56EA00  [4 -     4450]            move              x:(r2+n2),a
2327      P:06F5 44F440  [4 -     4454]            add     x0,a      #>131071,x0
                 01FFFF
2328      P:06F7 20001C  [2 -     4456]            sub     a,b
2329      P:06F8 20004E  [2 -     4458]            and     x0,b
2330      P:06F9 21AF00  [2 -     4460]            move              b1,b
2331      P:06FA 0605A0  [4 -     4464]            rep     #5
2332      P:06FB 20002B  [2 -     4466]            lsr     b
2333                                     ; **************************************************
2334                                     ;   YUP = (TMP >> 11) ? TMP + 4096 : TMP;
2335                                     ; **************************************************
2336      P:06FC 380201  [2 -     4468]            tfr     b,a       #2,n0
2337      P:06FD 556800  [4 -     4472]            move              b1,x:(r0+n0)
2338      P:06FE 060BA0  [4 -     4476]            rep     #11
2339      P:06FF 200023  [2 -     4478]            lsr     a
2340      P:0700 2A0000  [2 -     4480]            move              #0,a2
2341      P:0701 200003  [2 -     4482]            tst     a
2342      P:0702 0AF0AA  [6 -     4488]            jeq     L162
                 00070A
2343      P:0704 56F400  [4 -     4492]            move              #>4096,a
                 001000
2344      P:0706 200018  [2 -     4494]            add     a,b
2345      P:0707 556000  [2 -     4496]            move              b1,x:(r0)
2346      P:0708 0AF080  [6 -     4502]            jmp     L163
                 00070D
2347                                     L162
2348      P:070A 380200  [2 -     4504]            move              #2,n0
2349      P:070B 45E800  [4 -     4508]            move              x:(r0+n0),x1
2350      P:070C 456000  [2 -     4510]            move              x1,x:(r0)
2351                                     L163
2352                                     ; **************************************************
2353                                     ;   YUP = (YUP + S->LAST_Y) & 8191;
2354                                     ; **************************************************
2355                                     ; **************************************************
2356                                     ;   
2357                                     ;   /* LIMB */
2358                                     ;   if ((((YUP + 11264) & 16383) >> 13) == 0)
2359                                     ; **************************************************
2360      P:070D 3A1700  [2 -     4512]            move              #23,n2
2361      P:070E 57E000  [2 -     4514]            move              x:(r0),b
2362      P:070F 56EA00  [4 -     4518]            move              x:(r2+n2),a
2363      P:0710 44F418  [4 -     4522]            add     a,b       #>8191,x0
                 001FFF
2364      P:0712 56F44E  [4 -     4526]            and     x0,b      #>11264,a
                 002C00
2365      P:0714 21AF00  [2 -     4528]            move              b1,b
2366      P:0715 44F400  [4 -     4532]            move              #>16383,x0
                 003FFF
2367      P:0717 556018  [2 -     4534]            add     a,b       b1,x:(r0)
2368      P:0718 200001  [2 -     4536]            tfr     b,a
2369      P:0719 200046  [2 -     4538]            and     x0,a
2370      P:071A 218E00  [2 -     4540]            move              a1,a
2371      P:071B 060DA0  [4 -     4544]            rep     #13
2372      P:071C 200023  [2 -     4546]            lsr     a
2373      P:071D 2A0000  [2 -     4548]            move              #0,a2
2374      P:071E 200003  [2 -     4550]            tst     a
2375      P:071F 0AF0A2  [6 -     4556]            jne     L164
                 000724
2376                                     ; **************************************************
2377                                     ;     YUP = 5120;
2378                                     ; **************************************************
2379      P:0721 45F400  [4 -     4560]            move              #>5120,x1
                 001400
2380      P:0723 456000  [2 -     4562]            move              x1,x:(r0)
2381                                     L164
2382                                     ; **************************************************
2383                                     ;   if ((((YUP + 15840) & 16383) >> 13))
2384                                     ; **************************************************
2385      P:0724 44F400  [4 -     4566]            move              #>16383,x0
                 003FFF
2386      P:0726 57E000  [2 -     4568]            move              x:(r0),b
2387      P:0727 56F400  [4 -     4572]            move              #>15840,a
                 003DE0
2388      P:0729 200018  [2 -     4574]            add     a,b
2389      P:072A 200001  [2 -     4576]            tfr     b,a
2390      P:072B 200046  [2 -     4578]            and     x0,a
2391      P:072C 218E00  [2 -     4580]            move              a1,a
2392      P:072D 060DA0  [4 -     4584]            rep     #13
2393      P:072E 200023  [2 -     4586]            lsr     a
2394      P:072F 2A0000  [2 -     4588]            move              #0,a2
2395      P:0730 200003  [2 -     4590]            tst     a
2396      P:0731 0AF0AA  [6 -     4596]            jeq     L165
                 000736
2397                                     ; **************************************************
2398                                     ;     YUP = 544;
2399                                     ; **************************************************
2400      P:0733 45F400  [4 -     4600]            move              #>544,x1
                 000220
2401      P:0735 456000  [2 -     4602]            move              x1,x:(r0)
2402                                     L165
2403                                     ; **************************************************
2404                                     ;   
2405                                     ;   /* FILTE */
2406                                     ;   TMP = (YUP + ((1048576 - S->Y_L) >> 6)) & 16383;
2407                                     ; **************************************************
2408      P:0736 3A1600  [2 -     4604]            move              #22,n2
2409      P:0737 56F400  [4 -     4608]            move              #>1048576,a
                 100000
2410      P:0739 45EA00  [4 -     4612]            move              x:(r2+n2),x1
2411      P:073A 200064  [2 -     4614]            sub     x1,a
2412      P:073B 218E00  [2 -     4616]            move              a1,a
2413      P:073C 0606A0  [4 -     4620]            rep     #6
2414      P:073D 200022  [2 -     4622]            asr     a
2415                                     ; **************************************************
2416                                     ;   if (TMP & (1 << 13))
2417                                     ; **************************************************
2418      P:073E 380200  [2 -     4624]            move              #2,n0
2419      P:073F 57E000  [2 -     4626]            move              x:(r0),b
2420      P:0740 44F400  [4 -     4630]            move              #>16383,x0
                 003FFF
2421      P:0742 218E00  [2 -     4632]            move              a1,a
2422      P:0743 200018  [2 -     4634]            add     a,b
2423      P:0744 44F44E  [4 -     4638]            and     x0,b      #>8192,x0
                 002000
2424      P:0746 21AF00  [2 -     4640]            move              b1,b
2425      P:0747 556801  [4 -     4644]            tfr     b,a       b1,x:(r0+n0)
2426      P:0748 200046  [2 -     4646]            and     x0,a
2427      P:0749 218E00  [2 -     4648]            move              a1,a
2428      P:074A 2A0000  [2 -     4650]            move              #0,a2
2429      P:074B 200003  [2 -     4652]            tst     a
2430      P:074C 0AF0AA  [6 -     4658]            jeq     L166
                 000752
2431                                     ; **************************************************
2432                                     ;     TMP = TMP + 507904;
2433                                     ; **************************************************
2434      P:074E 56F400  [4 -     4662]            move              #>507904,a
                 07C000
2435      P:0750 200018  [2 -     4664]            add     a,b
2436      P:0751 556800  [4 -     4668]            move              b1,x:(r0+n0)
2437                                     L166
2438                                     ; **************************************************
2439                                     ;   YLP = (TMP + S->Y_L) & 524287;
2440                                     ; **************************************************
2441                                     ; **************************************************
2442                                     ;   
2443                                     ;   /* MIX */
2444                                     ;   TMP = (YUP + 16384 - (S->Y_L >> 6)) & 16383;
2445                                     ; **************************************************
2446      P:0752 380200  [2 -     4670]            move              #2,n0
2447      P:0753 3A1600  [2 -     4672]            move              #22,n2
2448      P:0754 57E800  [4 -     4676]            move              x:(r0+n0),b
2449      P:0755 56EA00  [4 -     4680]            move              x:(r2+n2),a
2450      P:0756 44F418  [4 -     4684]            add     a,b       #>524287,x0
                 07FFFF
2451      P:0758 218E4E  [2 -     4686]            and     x0,b      a1,a
2452      P:0759 21AF00  [2 -     4688]            move              b1,b
2453      P:075A 205800  [2 -     4690]            move              (r0)+
2454      P:075B 555000  [2 -     4692]            move              b1,x:(r0)-
2455      P:075C 0606A0  [4 -     4696]            rep     #6
2456      P:075D 200022  [2 -     4698]            asr     a
2457                                     ; **************************************************
2458                                     ;   S->LAST_Y = SIGNBIT(TMP, 13);
2459                                     ; **************************************************
2460      P:075E 57E000  [2 -     4700]            move              x:(r0),b
2461      P:075F 44F400  [4 -     4704]            move              #>16383,x0
                 003FFF
2462      P:0761 45F400  [4 -     4708]            move              #>16760832,x1
                 FFC000
2463      P:0763 218E00  [2 -     4710]            move              a1,a
2464      P:0764 200060  [2 -     4712]            add     x1,a
2465      P:0765 20001C  [2 -     4714]            sub     a,b
2466      P:0766 44F44E  [4 -     4718]            and     x0,b      #>8192,x0
                 002000
2467      P:0768 21AF00  [2 -     4720]            move              b1,b
2468      P:0769 556801  [4 -     4724]            tfr     b,a       b1,x:(r0+n0)
2469      P:076A 200046  [2 -     4726]            and     x0,a
2470      P:076B 218E00  [2 -     4728]            move              a1,a
2471      P:076C 2A0000  [2 -     4730]            move              #0,a2
2472      P:076D 200003  [2 -     4732]            tst     a
2473      P:076E 0AF0AA  [6 -     4738]            jeq     L167
                 000774
2474      P:0770 56F400  [4 -     4742]            move              #>1,a
                 000001
2475      P:0772 0AF080  [6 -     4748]            jmp     L168
                 000775
2476                                     L167
2477      P:0774 200013  [2 -     4750]            clr     a
2478                                     L168
2479                                     ; **************************************************
2480                                     ;   if (S->LAST_Y)
2481                                     ; **************************************************
2482      P:0775 3A1703  [2 -     4752]            tst     a         #23,n2
2483      P:0776 546A00  [4 -     4756]            move              a1,x:(r2+n2)
2484      P:0777 0AF0AA  [6 -     4762]            jeq     L169
                 000784
2485                                     ; **************************************************
2486                                     ;     TMP = (16384 - TMP) & 8191; 
2487                                     ; **************************************************
2488      P:0779 380200  [2 -     4764]            move              #2,n0
2489      P:077A 44F400  [4 -     4768]            move              #>8191,x0
                 001FFF
2490      P:077C 45E800  [4 -     4772]            move              x:(r0+n0),x1
2491      P:077D 56F400  [4 -     4776]            move              #>16384,a
                 004000
2492      P:077F 200064  [2 -     4778]            sub     x1,a
2493      P:0780 546809  [4 -     4782]            tfr     a,b       a1,x:(r0+n0)
2494      P:0781 20004E  [2 -     4784]            and     x0,b
2495      P:0782 21AF00  [2 -     4786]            move              b1,b
2496      P:0783 556800  [4 -     4790]            move              b1,x:(r0+n0)
2497                                     L169
2498                                     ; **************************************************
2499                                     ;   TMP = (TMP * AL) >> 6;
2500                                     ; **************************************************
2501      P:0784 380200  [2 -     4792]            move              #2,n0
2502      P:0785 44F000  [4 -     4796]            move              x:FAL,x0
                 00006E
2503      P:0787 45E800  [4 -     4800]            move              x:(r0+n0),x1
2504      P:0788 2000A8  [2 -     4802]            mpy     +x0,x1,b
2505      P:0789 20002A  [2 -     4804]            asr     b
2506      P:078A 212F00  [2 -     4806]            move              b0,b
2507      P:078B 0606A0  [4 -     4810]            rep     #6
2508      P:078C 20002B  [2 -     4812]            lsr     b
2509                                     ; **************************************************
2510                                     ;   if (S->LAST_Y)
2511                                     ; **************************************************
2512      P:078D 3A1700  [2 -     4814]            move              #23,n2
2513      P:078E 556800  [4 -     4818]            move              b1,x:(r0+n0)
2514      P:078F 56EA00  [4 -     4822]            move              x:(r2+n2),a
2515      P:0790 200003  [2 -     4824]            tst     a
2516      P:0791 0AF0AA  [6 -     4830]            jeq     L170
                 00079D
2517                                     ; **************************************************
2518                                     ;     TMP = (16384 - TMP) & 16383;
2519                                     ; **************************************************
2520      P:0793 45E800  [4 -     4834]            move              x:(r0+n0),x1
2521      P:0794 44F400  [4 -     4838]            move              #>16383,x0
                 003FFF
2522      P:0796 56F400  [4 -     4842]            move              #>16384,a
                 004000
2523      P:0798 200064  [2 -     4844]            sub     x1,a
2524      P:0799 546809  [4 -     4848]            tfr     a,b       a1,x:(r0+n0)
2525      P:079A 20004E  [2 -     4850]            and     x0,b
2526      P:079B 21AF00  [2 -     4852]            move              b1,b
2527      P:079C 556800  [4 -     4856]            move              b1,x:(r0+n0)
2528                                     L170
2529                                     ; **************************************************
2530                                     ;   
2531                                     ;   S->LAST_Y = S->Y = ((S->Y_L >> 6) + TMP) & 8191; 
2532                                     ; **************************************************
2533      P:079D 3A1600  [2 -     4858]            move              #22,n2
2534      P:079E 56EA00  [4 -     4862]            move              x:(r2+n2),a
2535      P:079F 218E00  [2 -     4864]            move              a1,a
2536      P:07A0 0606A0  [4 -     4868]            rep     #6
2537      P:07A1 200022  [2 -     4870]            asr     a
2538                                     ; **************************************************
2539                                     ;   S->YL = S->Y_L; 
2540                                     ; **************************************************
2541                                     ; **************************************************
2542                                     ;   S->Y_L = YLP;
2543                                     ; **************************************************
2544                                     ; **************************************************
2545                                     ; }
2546                                     ; **************************************************
2547      P:07A2 3A0200  [2 -     4872]            move              #2,n2
2548      P:07A3 380200  [2 -     4874]            move              #2,n0
2549      P:07A4 44F400  [4 -     4878]            move              #>8191,x0
                 001FFF
2550      P:07A6 45E800  [4 -     4882]            move              x:(r0+n0),x1
2551      P:07A7 218E00  [2 -     4884]            move              a1,a
2552      P:07A8 205860  [2 -     4886]            add     x1,a      (r0)+
2553      P:07A9 205646  [2 -     4888]            and     x0,a      (r6)-
2554      P:07AA 218E00  [2 -     4890]            move              a1,a
2555      P:07AB 546A00  [4 -     4894]            move              a1,x:(r2+n2)
2556      P:07AC 3A1700  [2 -     4896]            move              #23,n2
2557      P:07AD 546A00  [4 -     4900]            move              a1,x:(r2+n2)
2558      P:07AE 3A1600  [2 -     4902]            move              #22,n2
2559      P:07AF 56EA00  [4 -     4906]            move              x:(r2+n2),a
2560      P:07B0 3A0300  [2 -     4908]            move              #3,n2
2561      P:07B1 546A00  [4 -     4912]            move              a1,x:(r2+n2)
2562      P:07B2 3A1600  [2 -     4914]            move              #22,n2
2563      P:07B3 45D000  [2 -     4916]            move              x:(r0)-,x1
2564      P:07B4 456A00  [4 -     4920]            move              x1,x:(r2+n2)
2565      P:07B5 62D600  [2 -     4922]            move              x:(r6)-,r2
2566      P:07B6 61D600  [2 -     4924]            move              x:(r6)-,r1
2567      P:07B7 45D600  [2 -     4926]            move              x:(r6)-,x1
2568      P:07B8 44D600  [2 -     4928]            move              x:(r6)-,x0
2569      P:07B9 57D600  [2 -     4930]            move              x:(r6)-,b
2570      P:07BA 51E600  [2 -     4932]            move              x:(r6),b0
2571      P:07BB 205000  [2 -     4934]            move              (r0)-
2572      P:07BC 205000  [2 -     4936]            move              (r0)-
2573      P:07BD 221600  [2 -     4938]            move              r0,r6
2574      P:07BE 60E000  [2 -     4940]            move              x:(r0),r0
2575      P:07BF 00000C  [4 -     4944]            rts
2576   
2577                                               global  Finit_disk_play
2578                                     Finit_disk_play
2579                                     ; **************************************************
2580                                     ; **************************************************
2581                                     ; **************************************************
2582                                     ; 
2583                                     ; #ifndef __MNECOUNT__
2584                                     ; 
2585                                     ; #ifdef __DSP56K__
2586                                     ; 
2587                                     ; void init_disk_play()
2588                                     ; {
2589                                     ; }
2590                                     ; **************************************************
2591      P:07C0 00000C  [4 -     4948]            rts
2592   
2593                                               global  FData_in
2594      X:005C                                   org     x:
2595                                     FData_in
2596      X:005C                                   dc      122
2597      X:005D                                   dc      121
2598      X:005E                                   dc      123
2599      X:005F                                   dc      119
2600      X:0060                                   dc      116
2601      X:0061                                   dc      115
2602      X:0062                                   dc      118
2603      X:0063                                   dc      116
2604      X:0064                                   dc      114
2605      X:0065                                   dc      115
2606                                     F___i3
2607      X:0066                                   dc      0
2608      P:07C1                                   org     p:
2609                                               global  Fdisk_play
2610                                     Fdisk_play
2611                                     ; **************************************************
2612                                     ; **************************************************
2613                                     ; **************************************************
2614                                     ; 
2615                                     ; #ifdef __SIMULATION__
2616                                     ; #include "data_in.c"
2617                                     ; #endif
2618                                     ; 
2619                                     ; void disk_play()
2620                                     ; {
2621                                     ; #ifdef __SIMULATION__
2622                                     ; 
2623                                     ;   static int i = 0;
2624                                     ; 
2625                                     ;   if (i >= sizeof(Data_in) / sizeof(int))
2626                                     ; **************************************************
2627      P:07C1 605E00  [2 -     4950]            move              r0,x:(r6)+
2628      P:07C2 22D000  [2 -     4952]            move              r6,r0
2629      P:07C3 205E00  [2 -     4954]            move              (r6)+
2630      P:07C4 515E00  [2 -     4956]            move              b0,x:(r6)+
2631      P:07C5 555E00  [2 -     4958]            move              b1,x:(r6)+
2632      P:07C6 57F400  [4 -     4962]            move              #>9,b
                 000009
2633      P:07C8 445E00  [2 -     4964]            move              x0,x:(r6)+
2634      P:07C9 455E00  [2 -     4966]            move              x1,x:(r6)+
2635      P:07CA 615E00  [2 -     4968]            move              r1,x:(r6)+
2636      P:07CB 56F000  [4 -     4972]            move              x:F___i3,a
                 000066
2637      P:07CD 200005  [2 -     4974]            cmp     b,a
2638      P:07CE 0AF0AF  [6 -     4980]            jle     L174
                 0007D4
2639                                     ; **************************************************
2640                                     ;     ExitFlag = TRUE;
2641                                     ; **************************************************
2642      P:07D0 56F400  [4 -     4984]            move              #>1,a
                 000001
2643      P:07D2 547000  [4 -     4988]            move              a1,x:FExitFlag
                 000070
2644                                     L174
2645                                     ; **************************************************
2646                                     ; 
2647                                     ;   SL = Data_in[i++] & 0x3FFF;
2648                                     ; **************************************************
2649                                     ; **************************************************
2650                                     ; 
2651                                     ; #else
2652                                     ; 
2653                                     ;   ExitFlag = TRUE;
2654                                     ;   SL = 0;
2655                                     ; 
2656                                     ; #endif
2657                                     ; }
2658                                     ; **************************************************
2659      P:07D4 61F400  [4 -     4992]            move              #FData_in,r1
                 00005C
2660      P:07D6 56F000  [4 -     4996]            move              x:F___i3,a
                 000066
2661      P:07D8 44F409  [4 -     5000]            tfr     a,b       #>16383,x0
                 003FFF
2662      P:07DA 45F400  [4 -     5004]            move              #>1,x1
                 000001
2663      P:07DC 205068  [2 -     5006]            add     x1,b      (r0)-
2664      P:07DD 21A500  [2 -     5008]            move              b1,x1
2665      P:07DE 222F00  [2 -     5010]            move              r1,b
2666      P:07DF 457018  [4 -     5014]            add     a,b       x1,x:F___i3
                 000066
2667      P:07E1 21B100  [2 -     5016]            move              b1,r1
2668      P:07E2 205600  [2 -     5018]            move              (r6)-
2669      P:07E3 56E100  [2 -     5020]            move              x:(r1),a
2670      P:07E4 200046  [2 -     5022]            and     x0,a
2671      P:07E5 218E00  [2 -     5024]            move              a1,a
2672      P:07E6 547000  [4 -     5028]            move              a1,x:FSL
                 000069
2673      P:07E8 61D600  [2 -     5030]            move              x:(r6)-,r1
2674      P:07E9 45D600  [2 -     5032]            move              x:(r6)-,x1
2675      P:07EA 44D600  [2 -     5034]            move              x:(r6)-,x0
2676      P:07EB 57D600  [2 -     5036]            move              x:(r6)-,b
2677      P:07EC 51E600  [2 -     5038]            move              x:(r6),b0
2678      P:07ED 221600  [2 -     5040]            move              r0,r6
2679      P:07EE 60E000  [2 -     5042]            move              x:(r0),r0
2680      P:07EF 00000C  [4 -     5046]            rts
2681   
2682                                               global  Fpost_disk_play
2683                                     Fpost_disk_play
2684                                     ; **************************************************
2685                                     ; **************************************************
2686                                     ; **************************************************
2687                                     ; 
2688                                     ; void post_disk_play()
2689                                     ; {
2690                                     ; }
2691                                     ; **************************************************
2692      P:07F0 00000C  [4 -     5050]            rts
2693   
2694                                               global  Finit_disk_record
2695                                     Finit_disk_record
2696                                     ; **************************************************
2697                                     ; **************************************************
2698                                     ; **************************************************
2699                                     ; 
2700                                     ; void init_disk_record()
2701                                     ; {
2702                                     ; }
2703                                     ; **************************************************
2704      P:07F1 00000C  [4 -     5054]            rts
2705   
2706                                               global  Fdisk_record
2707                                     Fdisk_record
2708                                     ; **************************************************
2709                                     ; **************************************************
2710                                     ; **************************************************
2711                                     ; 
2712                                     ; void disk_record()
2713                                     ; {
2714                                     ; }
2715                                     ; **************************************************
2716      P:07F2 00000C  [4 -     5058]            rts
2717   
2718                                               global  Fpost_disk_record
2719                                     Fpost_disk_record
2720                                     ; **************************************************
2721                                     ; **************************************************
2722                                     ; **************************************************
2723                                     ; 
2724                                     ; void post_disk_record()
2725                                     ; {
2726                                     ; }
2727                                     ; **************************************************
2728      P:07F3 00000C  [4 -     5062]            rts
2729   
2730                                               global  Fmain
2731                                     Fmain
2732      P:07F4 605E00  [2 -     5064]            move              r0,x:(r6)+
2733      P:07F5 055E3C  [2 -     5066]            move              ssh,x:(r6)+
2734                                     ; **************************************************
2735                                     ; **************************************************
2736                                     ; **************************************************
2737                                     ; 
2738                                     ; #else
2739                                     ; 
2740                                     ; void init_disk_play()
2741                                     ; {
2742                                     ;   istrm = fopen("data.in", "rb");
2743                                     ; }
2744                                     ; 
2745                                     ; void disk_play()
2746                                     ; {
2747                                     ;   int d;
2748                                     ; 
2749                                     ;   if (istrm != NULL && !feof(istrm))
2750                                     ;   {
2751                                     ;     fread((char*) &d, sizeof(int), 1, istrm);
2752                                     ;     SL = (d & 0x3FFF0000) >> 16;
2753                                     ;   }
2754                                     ;   if (feof(istrm))
2755                                     ;     ExitFlag = TRUE;
2756                                     ; }
2757                                     ; 
2758                                     ; void post_disk_play()
2759                                     ; {
2760                                     ;   if (istrm != NULL)
2761                                     ;     fclose(istrm);
2762                                     ; }
2763                                     ; 
2764                                     ; void init_disk_record()
2765                                     ; {
2766                                     ;   ostrm = fopen("data.out", "wb");
2767                                     ; }
2768                                     ; 
2769                                     ; void disk_record()
2770                                     ; {
2771                                     ;   int d;
2772                                     ; 
2773                                     ;   if (ostrm != NULL)
2774                                     ;   {
2775                                     ;     d = (SD & 0x0000FFFF) << 16;
2776                                     ;     fwrite((char*) &d, 4, 1, ostrm);
2777                                     ;   }
2778                                     ; }
2779                                     ; 
2780                                     ; void post_disk_record()
2781                                     ; {
2782                                     ;   if (ostrm != NULL)
2783                                     ;     fclose(ostrm);
2784                                     ; }
2785                                     ; 
2786                                     ; #endif
2787                                     ; #endif
2788                                     ; 
2789                                     ; main()
2790                                     ; {
2791                                     ; #ifndef __MNECOUNT__
2792                                     ; #ifdef __DOWNLOAD__
2793                                     ;   run56k_start();
2794                                     ; #endif
2795                                     ; 
2796                                     ;   init_disk_play();
2797                                     ; **************************************************
2798      P:07F6 3E0300  [2 -     5068]            move              #3,n6
2799      P:07F7 22D000  [2 -     5070]            move              r6,r0
2800      P:07F8 204E00  [2 -     5072]            move              (r6)+n6
2801      P:07F9 515E00  [2 -     5074]            move              b0,x:(r6)+
2802      P:07FA 555E00  [2 -     5076]            move              b1,x:(r6)+
2803      P:07FB 445E00  [2 -     5078]            move              x0,x:(r6)+
2804      P:07FC 455E00  [2 -     5080]            move              x1,x:(r6)+
2805      P:07FD 465E00  [2 -     5082]            move              y0,x:(r6)+
2806      P:07FE 475E00  [2 -     5084]            move              y1,x:(r6)+
2807      P:07FF 615E00  [2 -     5086]            move              r1,x:(r6)+
2808      P:0800 625E00  [2 -     5088]            move              r2,x:(r6)+
2809      P:0801 635E00  [2 -     5090]            move              r3,x:(r6)+
2810      P:0802 0BF080  [6 -     5096]            jsr     Finit_disk_play
                 0007C0
2811                                     ; **************************************************
2812                                     ;   init_disk_record();
2813                                     ; **************************************************
2814      P:0804 0BF080  [6 -     5102]            jsr     Finit_disk_record
                 0007F1
2815                                     ; **************************************************
2816                                     ; 
2817                                     ;   ExitFlag = FALSE;
2818                                     ; **************************************************
2819                                     ; **************************************************
2820                                     ;   while (!ExitFlag)
2821                                     ; **************************************************
2822      P:0806 61F413  [4 -     5106]            clr     a         #FD_STATES,r1
                 00001E
2823      P:0808 63F400  [4 -     5110]            move              #Fiadpt_quant,r3
                 0004E0
2824      P:080A 62F400  [4 -     5114]            move              #FE_STATES,r2
                 000000
2825      P:080C 547000  [4 -     5118]            move              a1,x:FExitFlag
                 000070
2826                                     L231
2827                                     ; **************************************************
2828                                     ;   {
2829                                     ; #endif
2830                                     ;     disk_play();
2831                                     ; **************************************************
2832      P:080E 0BF080  [6 -     5124]            jsr     Fdisk_play
                 0007C1
2833                                     ; **************************************************
2834                                     ;     if (ExitFlag)
2835                                     ; **************************************************
2836      P:0810 56F000  [4 -     5128]            move              x:FExitFlag,a
                 000070
2837      P:0812 200003  [2 -     5130]            tst     a
2838      P:0813 0AF0A2  [6 -     5136]            jne     L181
                 00099D
2839                                     ; **************************************************
2840                                     ;       break;
2841                                     ; **************************************************
2842                                     ; **************************************************
2843                                     ; 
2844                                     ;     /*
2845                                     ;      * ENCODER
2846                                     ;      */
2847                                     ;     adpt_predict(&E_STATES);
2848                                     ; **************************************************
2849      P:0815 625E00  [2 -     5138]            move              r2,x:(r6)+
2850      P:0816 0BF080  [6 -     5144]            jsr     Fadpt_predict
                 0000BC
2851                                     ; **************************************************
2852                                     ;     {
2853                                     ;       /* SUBTA (inlined) */
2854                                     ;       D = ((SL & (1 << 13) ? 49152 | SL : SL) + 65536 -
2855                                     ;           (S_E & (1 << 14) ? 32768 | S_E : S_E)) & 65535;
2856                                     ; **************************************************
2857      P:0818 380200  [2 -     5146]            move              #2,n0
2858      P:0819 47F000  [4 -     5150]            move              x:FSL,y1
                 000069
2859      P:081B 44F471  [4 -     5154]            tfr     y1,a      #>8192,x0
                 002000
2860      P:081D 476846  [4 -     5158]            and     x0,a      y1,x:(r0+n0)
2861      P:081E 218E00  [2 -     5160]            move              a1,a
2862      P:081F 2A0000  [2 -     5162]            move              #0,a2
2863      P:0820 205603  [2 -     5164]            tst     a         (r6)-
2864      P:0821 0AF0AA  [6 -     5170]            jeq     L183
                 00082B
2865      P:0823 57E800  [4 -     5174]            move              x:(r0+n0),b
2866      P:0824 44F400  [4 -     5178]            move              #>49152,x0
                 00C000
2867      P:0826 20004A  [2 -     5180]            or      x0,b
2868      P:0827 21AF00  [2 -     5182]            move              b1,b
2869      P:0828 556000  [2 -     5184]            move              b1,x:(r0)
2870      P:0829 0AF080  [6 -     5190]            jmp     L184
                 00082E
2871                                     L183
2872      P:082B 47F000  [4 -     5194]            move              x:FSL,y1
                 000069
2873      P:082D 476000  [2 -     5196]            move              y1,x:(r0)
2874                                     L184
2875      P:082E 380200  [2 -     5198]            move              #2,n0
2876      P:082F 47F000  [4 -     5202]            move              x:FS_E,y1
                 00006A
2877      P:0831 476871  [4 -     5206]            tfr     y1,a      y1,x:(r0+n0)
2878      P:0832 47F400  [4 -     5210]            move              #>16384,y1
                 004000
2879      P:0834 200076  [2 -     5212]            and     y1,a
2880      P:0835 218E00  [2 -     5214]            move              a1,a
2881      P:0836 2A0000  [2 -     5216]            move              #0,a2
2882      P:0837 200003  [2 -     5218]            tst     a
2883      P:0838 0AF0AA  [6 -     5224]            jeq     L185
                 000842
2884      P:083A 57E800  [4 -     5228]            move              x:(r0+n0),b
2885      P:083B 47F400  [4 -     5232]            move              #>32768,y1
                 008000
2886      P:083D 20007A  [2 -     5234]            or      y1,b
2887      P:083E 21AF00  [2 -     5236]            move              b1,b
2888      P:083F 556800  [4 -     5240]            move              b1,x:(r0+n0)
2889      P:0840 0AF080  [6 -     5246]            jmp     L186
                 000846
2890                                     L185
2891      P:0842 380200  [2 -     5248]            move              #2,n0
2892      P:0843 47F000  [4 -     5252]            move              x:FS_E,y1
                 00006A
2893      P:0845 476800  [4 -     5256]            move              y1,x:(r0+n0)
2894                                     L186
2895                                     ; **************************************************
2896                                     ;     }
2897                                     ;     {
2898                                     ;       /* adaptive predictor (inlined) */
2899                                     ;       register int DS, DQM, DL, DLN, EXP;
2900                                     ; 
2901                                     ;       /* LOG */
2902                                     ;       DS = D & (1 << 15);
2903                                     ; **************************************************
2904                                     ; **************************************************
2905                                     ;       DQM = DS ? (65536 - D) & 32767 : D;
2906                                     ; **************************************************
2907      P:0846 380200  [2 -     5258]            move              #2,n0
2908      P:0847 44F400  [4 -     5262]            move              #>65535,x0
                 00FFFF
2909      P:0849 57E800  [4 -     5266]            move              x:(r0+n0),b
2910      P:084A 56F400  [4 -     5270]            move              #>16711680,a
                 FF0000
2911      P:084C 200018  [2 -     5272]            add     a,b
2912      P:084D 57E001  [2 -     5274]            tfr     b,a       x:(r0),b
2913      P:084E 20001C  [2 -     5276]            sub     a,b
2914      P:084F 200001  [2 -     5278]            tfr     b,a
2915      P:0850 200046  [2 -     5280]            and     x0,a
2916      P:0851 218E00  [2 -     5282]            move              a1,a
2917      P:0852 218709  [2 -     5284]            tfr     a,b       a1,y1
2918      P:0853 546800  [4 -     5288]            move              a1,x:(r0+n0)
2919      P:0854 477000  [4 -     5292]            move              y1,x:FD
                 00006D
2920      P:0856 47F400  [4 -     5296]            move              #>32768,y1
                 008000
2921      P:0858 20587E  [2 -     5298]            and     y1,b      (r0)+
2922      P:0859 21AF00  [2 -     5300]            move              b1,b
2923      P:085A 55500B  [2 -     5302]            tst     b         b1,x:(r0)-
2924      P:085B 0AF0AA  [6 -     5308]            jeq     L187
                 000867
2925      P:085D 44F400  [4 -     5312]            move              #>32767,x0
                 007FFF
2926      P:085F 47E800  [4 -     5316]            move              x:(r0+n0),y1
2927      P:0860 56F400  [4 -     5320]            move              #>65536,a
                 010000
2928      P:0862 200074  [2 -     5322]            sub     y1,a
2929      P:0863 200046  [2 -     5324]            and     x0,a
2930      P:0864 218E00  [2 -     5326]            move              a1,a
2931      P:0865 0AF080  [6 -     5332]            jmp     L188
                 000869
2932                                     L187
2933      P:0867 56F000  [4 -     5336]            move              x:FD,a
                 00006D
2934                                     L188
2935                                     ; **************************************************
2936                                     ;       {
2937                                     ;       register int dqm = DQM;
2938                                     ; **************************************************
2939                                     ; **************************************************
2940                                     ; 
2941                                     ;       for (EXP = 1; dqm >>= 1; EXP++)
2942                                     ; **************************************************
2943      P:0869 46F400  [4 -     5340]            move              #>1,y0
                 000001
2944      P:086B 218500  [2 -     5342]            move              a1,x1
2945      P:086C 0AF080  [6 -     5348]            jmp     L234
                 000872
2946                                     L191
2947      P:086E 47F459  [4 -     5352]            tfr     y0,b      #>1,y1
                 000001
2948      P:0870 200078  [2 -     5354]            add     y1,b
2949      P:0871 21A600  [2 -     5356]            move              b1,y0
2950                                     L234
2951      P:0872 218E00  [2 -     5358]            move              a1,a
2952      P:0873 200022  [2 -     5360]            asr     a
2953      P:0874 218E00  [2 -     5362]            move              a1,a
2954      P:0875 200003  [2 -     5364]            tst     a
2955      P:0876 0AF0A2  [6 -     5370]            jne     L191
                 00086E
2956                                     ; **************************************************
2957                                     ;         ;
2958                                     ;       }
2959                                     ;       EXP--;
2960                                     ; **************************************************
2961                                     ; **************************************************
2962                                     ;       DL = (EXP * (1 << 7)) + (((DQM * (1 << 7)) >> EXP) & 127);
2963                                     ; **************************************************
2964      P:0878 44F459  [4 -     5374]            tfr     y0,b      #>128,x0
                 000080
2965      P:087A 56F400  [4 -     5378]            move              #>16777215,a
                 FFFFFF
2966      P:087C 200018  [2 -     5380]            add     a,b
2967      P:087D 21A6A0  [2 -     5382]            mpy     +x0,x1,a  b1,y0
2968      P:087E 200022  [2 -     5384]            asr     a
2969      P:087F 210E0B  [2 -     5386]            tst     b         a0,a
2970      P:0880 0AF0AA  [6 -     5392]            jeq     L236
                 000886
2971      P:0882 218E00  [2 -     5394]            move              a1,a
2972      P:0883 06CF20  [4 -     5398]            rep     b
2973      P:0884 200022  [2 -     5400]            asr     a
2974      P:0885 218E00  [2 -     5402]            move              a1,a
2975                                     L236
2976                                     ; **************************************************
2977                                     ; 
2978                                     ;       /* SUBTB */
2979                                     ;       DLN = (DL + 4096 - (E_STATES.Y >> 2)) & 4095;
2980                                     ; **************************************************
2981                                     ; **************************************************
2982                                     ; 
2983                                     ;       /* QUAN */
2984                                     ;       if (DLN > 3971)
2985                                     ; **************************************************
2986      P:0886 380200  [2 -     5404]            move              #2,n0
2987      P:0887 47F000  [4 -     5408]            move              x:(FE_STATES+2),y1
                 000002
2988      P:0889 45F479  [4 -     5412]            tfr     y1,b      #>127,x1
                 00007F
2989      P:088B 21AF66  [2 -     5414]            and     x1,a      b1,b
2990      P:088C 218E2A  [2 -     5416]            asr     b         a1,a
2991      P:088D 21C82A  [2 -     5418]            asr     b         a,a0
2992      P:088E 21AF32  [2 -     5420]            asl     a         b1,b
2993      P:088F 44F4D2  [4 -     5424]            mac     +y0,x0,a  #>16773120,x0
                 FFF000
2994      P:0891 44F448  [4 -     5428]            add     x0,b      #>4095,x0
                 000FFF
2995      P:0893 21A722  [2 -     5430]            asr     a         b1,y1
2996      P:0894 210E00  [2 -     5432]            move              a0,a
2997      P:0895 200074  [2 -     5434]            sub     y1,a
2998      P:0896 200046  [2 -     5436]            and     x0,a
2999      P:0897 218E00  [2 -     5438]            move              a1,a
3000      P:0898 546809  [4 -     5442]            tfr     a,b       a1,x:(r0+n0)
3001      P:0899 56F400  [4 -     5446]            move              #>3971,a
                 000F83
3002      P:089B 20000D  [2 -     5448]            cmp     a,b
3003      P:089C 0AF0AF  [6 -     5454]            jle     L193
                 0008A5
3004                                     ; **************************************************
3005                                     ;       I = DS ? 0xE : 0x1;
3006                                     ; **************************************************
3007      P:089E 205800  [2 -     5456]            move              (r0)+
3008      P:089F 57D000  [2 -     5458]            move              x:(r0)-,b
3009      P:08A0 20000B  [2 -     5460]            tst     b
3010      P:08A1 0AF0A2  [6 -     5466]            jne     L235
                 00092D
3011      P:08A3 0AF080  [6 -     5472]            jmp     L223
                 000931
3012                                     L193
3013                                     ; **************************************************
3014                                     ;       else if (DLN > 2047)
3015                                     ; **************************************************
3016      P:08A5 380200  [2 -     5474]            move              #2,n0
3017      P:08A6 56F400  [4 -     5478]            move              #>2047,a
                 0007FF
3018      P:08A8 57E800  [4 -     5482]            move              x:(r0+n0),b
3019      P:08A9 20000D  [2 -     5484]            cmp     a,b
3020      P:08AA 0AF0AF  [6 -     5490]            jle     L197
                 0008B0
3021                                     ; **************************************************
3022                                     ;       I = 0xF;
3023                                     ; **************************************************
3024      P:08AC 56F400  [4 -     5494]            move              #>15,a
                 00000F
3025      P:08AE 0AF080  [6 -     5500]            jmp     L224
                 000933
3026                                     L197
3027                                     ; **************************************************
3028                                     ;       else if (DLN > 399)
3029                                     ; **************************************************
3030      P:08B0 380200  [2 -     5502]            move              #2,n0
3031      P:08B1 56F400  [4 -     5506]            move              #>399,a
                 00018F
3032      P:08B3 57E800  [4 -     5510]            move              x:(r0+n0),b
3033      P:08B4 20000D  [2 -     5512]            cmp     a,b
3034      P:08B5 0AF0AF  [6 -     5518]            jle     L199
                 0008C4
3035                                     ; **************************************************
3036                                     ;       I = DS ? 0x8 : 0x7;
3037                                     ; **************************************************
3038      P:08B7 205800  [2 -     5520]            move              (r0)+
3039      P:08B8 57D000  [2 -     5522]            move              x:(r0)-,b
3040      P:08B9 20000B  [2 -     5524]            tst     b
3041      P:08BA 0AF0AA  [6 -     5530]            jeq     L200
                 0008C0
3042      P:08BC 56F400  [4 -     5534]            move              #>8,a
                 000008
3043      P:08BE 0AF080  [6 -     5540]            jmp     L224
                 000933
3044                                     L200
3045      P:08C0 56F400  [4 -     5544]            move              #>7,a
                 000007
3046      P:08C2 0AF080  [6 -     5550]            jmp     L224
                 000933
3047                                     L199
3048                                     ; **************************************************
3049                                     ;       else if (DLN > 348)
3050                                     ; **************************************************
3051      P:08C4 380200  [2 -     5552]            move              #2,n0
3052      P:08C5 56F400  [4 -     5556]            move              #>348,a
                 00015C
3053      P:08C7 57E800  [4 -     5560]            move              x:(r0+n0),b
3054      P:08C8 20000D  [2 -     5562]            cmp     a,b
3055      P:08C9 0AF0AF  [6 -     5568]            jle     L203
                 0008D8
3056                                     ; **************************************************
3057                                     ;       I = DS ? 0x9 : 0x6;
3058                                     ; **************************************************
3059      P:08CB 205800  [2 -     5570]            move              (r0)+
3060      P:08CC 57D000  [2 -     5572]            move              x:(r0)-,b
3061      P:08CD 20000B  [2 -     5574]            tst     b
3062      P:08CE 0AF0AA  [6 -     5580]            jeq     L204
                 0008D4
3063      P:08D0 56F400  [4 -     5584]            move              #>9,a
                 000009
3064      P:08D2 0AF080  [6 -     5590]            jmp     L224
                 000933
3065                                     L204
3066      P:08D4 56F400  [4 -     5594]            move              #>6,a
                 000006
3067      P:08D6 0AF080  [6 -     5600]            jmp     L224
                 000933
3068                                     L203
3069                                     ; **************************************************
3070                                     ;       else if (DLN > 299)
3071                                     ; **************************************************
3072      P:08D8 380200  [2 -     5602]            move              #2,n0
3073      P:08D9 56F400  [4 -     5606]            move              #>299,a
                 00012B
3074      P:08DB 57E800  [4 -     5610]            move              x:(r0+n0),b
3075      P:08DC 20000D  [2 -     5612]            cmp     a,b
3076      P:08DD 0AF0AF  [6 -     5618]            jle     L207
                 0008EC
3077                                     ; **************************************************
3078                                     ;       I = DS ? 0xA : 0x5;    
3079                                     ; **************************************************
3080      P:08DF 205800  [2 -     5620]            move              (r0)+
3081      P:08E0 57D000  [2 -     5622]            move              x:(r0)-,b
3082      P:08E1 20000B  [2 -     5624]            tst     b
3083      P:08E2 0AF0AA  [6 -     5630]            jeq     L208
                 0008E8
3084      P:08E4 56F400  [4 -     5634]            move              #>10,a
                 00000A
3085      P:08E6 0AF080  [6 -     5640]            jmp     L224
                 000933
3086                                     L208
3087      P:08E8 56F400  [4 -     5644]            move              #>5,a
                 000005
3088      P:08EA 0AF080  [6 -     5650]            jmp     L224
                 000933
3089                                     L207
3090                                     ; **************************************************
3091                                     ;       else if (DLN > 245)
3092                                     ; **************************************************
3093      P:08EC 380200  [2 -     5652]            move              #2,n0
3094      P:08ED 56F400  [4 -     5656]            move              #>245,a
                 0000F5
3095      P:08EF 57E800  [4 -     5660]            move              x:(r0+n0),b
3096      P:08F0 20000D  [2 -     5662]            cmp     a,b
3097      P:08F1 0AF0AF  [6 -     5668]            jle     L211
                 000900
3098                                     ; **************************************************
3099                                     ;       I = DS ? 0xB : 0x4;
3100                                     ; **************************************************
3101      P:08F3 205800  [2 -     5670]            move              (r0)+
3102      P:08F4 57D000  [2 -     5672]            move              x:(r0)-,b
3103      P:08F5 20000B  [2 -     5674]            tst     b
3104      P:08F6 0AF0AA  [6 -     5680]            jeq     L212
                 0008FC
3105      P:08F8 56F400  [4 -     5684]            move              #>11,a
                 00000B
3106      P:08FA 0AF080  [6 -     5690]            jmp     L224
                 000933
3107                                     L212
3108      P:08FC 56F400  [4 -     5694]            move              #>4,a
                 000004
3109      P:08FE 0AF080  [6 -     5700]            jmp     L224
                 000933
3110                                     L211
3111                                     ; **************************************************
3112                                     ;       else if (DLN > 177)
3113                                     ; **************************************************
3114      P:0900 380200  [2 -     5702]            move              #2,n0
3115      P:0901 56F400  [4 -     5706]            move              #>177,a
                 0000B1
3116      P:0903 57E800  [4 -     5710]            move              x:(r0+n0),b
3117      P:0904 20000D  [2 -     5712]            cmp     a,b
3118      P:0905 0AF0AF  [6 -     5718]            jle     L215
                 000914
3119                                     ; **************************************************
3120                                     ;       I = DS ? 0xC : 0x3;
3121                                     ; **************************************************
3122      P:0907 205800  [2 -     5720]            move              (r0)+
3123      P:0908 57D000  [2 -     5722]            move              x:(r0)-,b
3124      P:0909 20000B  [2 -     5724]            tst     b
3125      P:090A 0AF0AA  [6 -     5730]            jeq     L216
                 000910
3126      P:090C 56F400  [4 -     5734]            move              #>12,a
                 00000C
3127      P:090E 0AF080  [6 -     5740]            jmp     L224
                 000933
3128                                     L216
3129      P:0910 56F400  [4 -     5744]            move              #>3,a
                 000003
3130      P:0912 0AF080  [6 -     5750]            jmp     L224
                 000933
3131                                     L215
3132                                     ; **************************************************
3133                                     ;       else if (DLN > 79)
3134                                     ; **************************************************
3135      P:0914 380200  [2 -     5752]            move              #2,n0
3136      P:0915 56F400  [4 -     5756]            move              #>79,a
                 00004F
3137      P:0917 57E800  [4 -     5760]            move              x:(r0+n0),b
3138      P:0918 20000D  [2 -     5762]            cmp     a,b
3139      P:0919 0AF0AF  [6 -     5768]            jle     L219
                 000928
3140                                     ; **************************************************
3141                                     ;       I = DS ? 0xD : 0x2;
3142                                     ; **************************************************
3143      P:091B 205800  [2 -     5770]            move              (r0)+
3144      P:091C 57D000  [2 -     5772]            move              x:(r0)-,b
3145      P:091D 20000B  [2 -     5774]            tst     b
3146      P:091E 0AF0AA  [6 -     5780]            jeq     L220
                 000924
3147      P:0920 56F400  [4 -     5784]            move              #>13,a
                 00000D
3148      P:0922 0AF080  [6 -     5790]            jmp     L224
                 000933
3149                                     L220
3150      P:0924 56F400  [4 -     5794]            move              #>2,a
                 000002
3151      P:0926 0AF080  [6 -     5800]            jmp     L224
                 000933
3152                                     L219
3153                                     ; **************************************************
3154                                     ;       else
3155                                     ;       I = DS ? 0xE : 0x1;
3156                                     ; **************************************************
3157      P:0928 205800  [2 -     5802]            move              (r0)+
3158      P:0929 57D000  [2 -     5804]            move              x:(r0)-,b
3159      P:092A 20000B  [2 -     5806]            tst     b
3160      P:092B 0AF0AA  [6 -     5812]            jeq     L223
                 000931
3161                                     L235
3162      P:092D 56F400  [4 -     5816]            move              #>14,a
                 00000E
3163      P:092F 0AF080  [6 -     5822]            jmp     L224
                 000933
3164                                     L223
3165      P:0931 56F400  [4 -     5826]            move              #>1,a
                 000001
3166                                     L224
3167                                     ; **************************************************
3168                                     ;     }
3169                                     ;     iadpt_quant(&E_STATES);
3170                                     ; **************************************************
3171      P:0933 547000  [4 -     5830]            move              a1,x:FI
                 00006C
3172      P:0935 625E00  [2 -     5832]            move              r2,x:(r6)+
3173      P:0936 0BE380  [4 -     5836]            jsr     (r3)
3174                                     ; **************************************************
3175                                     ;     tone_detector(&E_STATES);
3176                                     ; **************************************************
3177      P:0937 205600  [2 -     5838]            move              (r6)-
3178      P:0938 625E00  [2 -     5840]            move              r2,x:(r6)+
3179      P:0939 0BF080  [6 -     5846]            jsr     Ftone_detector
                 000541
3180                                     ; **************************************************
3181                                     ;     speed_control(&E_STATES);
3182                                     ; **************************************************
3183      P:093B 205600  [2 -     5848]            move              (r6)-
3184      P:093C 625E00  [2 -     5850]            move              r2,x:(r6)+
3185      P:093D 0BF080  [6 -     5856]            jsr     Fspeed_control
                 0005C1
3186                                     ; **************************************************
3187                                     ;     scale_factor(&E_STATES);
3188                                     ; **************************************************
3189      P:093F 205600  [2 -     5858]            move              (r6)-
3190      P:0940 625E00  [2 -     5860]            move              r2,x:(r6)+
3191      P:0941 0BF080  [6 -     5866]            jsr     Fscale_factor
                 0006C6
3192                                     ; **************************************************
3193                                     ; 
3194                                     ;     /*
3195                                     ;      * DECODER
3196                                     ;      */
3197                                     ;     adpt_predict(&D_STATES);
3198                                     ; **************************************************
3199      P:0943 205600  [2 -     5868]            move              (r6)-
3200      P:0944 615E00  [2 -     5870]            move              r1,x:(r6)+
3201      P:0945 0BF080  [6 -     5876]            jsr     Fadpt_predict
                 0000BC
3202                                     ; **************************************************
3203                                     ;     iadpt_quant(&D_STATES);
3204                                     ; **************************************************
3205      P:0947 205600  [2 -     5878]            move              (r6)-
3206      P:0948 615E00  [2 -     5880]            move              r1,x:(r6)+
3207      P:0949 0BE380  [4 -     5884]            jsr     (r3)
3208                                     ; **************************************************
3209                                     ;     {
3210                                     ;       /* ADD (inlined) */
3211                                     ;       register int dq, se;
3212                                     ; 
3213                                     ;       /* 15 SM auf 16 TC */
3214                                     ;       dq = (D_STATES.DQ & (1 << 14)) ? D_STATES.DQ == (1 << 14) ? 0: 
3215                                     ;            (((D_STATES.DQ ^ 0x3FFF) + 0x1) & 0x3FFF) + 0xC000 : D_STATES.DQ ; 
3216                                     ; **************************************************
3217      P:094A 380200  [2 -     5886]            move              #2,n0
3218      P:094B 47E100  [2 -     5888]            move              x:(r1),y1
3219      P:094C 476871  [4 -     5892]            tfr     y1,a      y1,x:(r0+n0)
3220      P:094D 47F400  [4 -     5896]            move              #>16384,y1
                 004000
3221      P:094F 205676  [2 -     5898]            and     y1,a      (r6)-
3222      P:0950 218E00  [2 -     5900]            move              a1,a
3223      P:0951 200003  [2 -     5902]            tst     a
3224      P:0952 0AF0AA  [6 -     5908]            jeq     L225
                 000969
3225      P:0954 57E800  [4 -     5912]            move              x:(r0+n0),b
3226      P:0955 20007D  [2 -     5914]            cmp     y1,b
3227      P:0956 0AF0A2  [6 -     5920]            jne     L227
                 00095B
3228      P:0958 200013  [2 -     5922]            clr     a
3229      P:0959 0AF080  [6 -     5928]            jmp     L226
                 00096A
3230                                     L227
3231      P:095B 47F400  [4 -     5932]            move              #>1,y1
                 000001
3232      P:095D 44F400  [4 -     5936]            move              #>16383,x0
                 003FFF
3233      P:095F 56E100  [2 -     5938]            move              x:(r1),a
3234      P:0960 200043  [2 -     5940]            eor     x0,a
3235      P:0961 218E00  [2 -     5942]            move              a1,a
3236      P:0962 47F470  [4 -     5946]            add     y1,a      #>49152,y1
                 00C000
3237      P:0964 200046  [2 -     5948]            and     x0,a
3238      P:0965 218E00  [2 -     5950]            move              a1,a
3239      P:0966 200070  [2 -     5952]            add     y1,a
3240      P:0967 0AF080  [6 -     5958]            jmp     L226
                 00096A
3241                                     L225
3242      P:0969 56E100  [2 -     5960]            move              x:(r1),a
3243                                     L226
3244                                     ; **************************************************
3245                                     ; 
3246                                     ;       /* 15 TC auf 16 TC */
3247                                     ;       se = S_E & (1 << 14) ? 0x8000 | S_E : S_E ; 
3248                                     ; **************************************************
3249      P:096A 380200  [2 -     5962]            move              #2,n0
3250      P:096B 47F000  [4 -     5966]            move              x:FS_E,y1
                 00006A
3251      P:096D 218471  [2 -     5968]            tfr     y1,a      a1,x0
3252      P:096E 476800  [4 -     5972]            move              y1,x:(r0+n0)
3253      P:096F 47F400  [4 -     5976]            move              #>16384,y1
                 004000
3254      P:0971 200076  [2 -     5978]            and     y1,a
3255      P:0972 218E00  [2 -     5980]            move              a1,a
3256      P:0973 2A0000  [2 -     5982]            move              #0,a2
3257      P:0974 200003  [2 -     5984]            tst     a
3258      P:0975 0AF0AA  [6 -     5990]            jeq     L229
                 00097E
3259      P:0977 47F400  [4 -     5994]            move              #>32768,y1
                 008000
3260      P:0979 56E800  [4 -     5998]            move              x:(r0+n0),a
3261      P:097A 200072  [2 -     6000]            or      y1,a
3262      P:097B 218E00  [2 -     6002]            move              a1,a
3263      P:097C 0AF080  [6 -     6008]            jmp     L230
                 000980
3264                                     L229
3265      P:097E 56F000  [4 -     6012]            move              x:FS_E,a
                 00006A
3266                                     L230
3267                                     ; **************************************************
3268                                     ;   
3269                                     ;       /* perform add operation at 16 TC */
3270                                     ;       SP  = (dq + se) & 0xFFFF;
3271                                     ; **************************************************
3272                                     ; **************************************************
3273                                     ;     }
3274                                     ;     {
3275                                     ;       /* coding_adjector (inlined) */
3276                                     ;       /* Just passing a SP (16TC) through */
3277                                     ;       /* rest of the signals is ignored */
3278                                     ;       SD = SP;
3279                                     ; **************************************************
3280                                     ; **************************************************
3281                                     ;     }
3282                                     ;     tone_detector(&D_STATES);
3283                                     ; **************************************************
3284      P:0980 44F449  [4 -     6016]            tfr     x0,b      #>65535,x0
                 00FFFF
3285      P:0982 200018  [2 -     6018]            add     a,b
3286      P:0983 200001  [2 -     6020]            tfr     b,a
3287      P:0984 200046  [2 -     6022]            and     x0,a
3288      P:0985 218E00  [2 -     6024]            move              a1,a
3289      P:0986 547000  [4 -     6028]            move              a1,x:FSP
                 000068
3290      P:0988 547000  [4 -     6032]            move              a1,x:FSD
                 00006B
3291      P:098A 615E00  [2 -     6034]            move              r1,x:(r6)+
3292      P:098B 0BF080  [6 -     6040]            jsr     Ftone_detector
                 000541
3293                                     ; **************************************************
3294                                     ;     speed_control(&D_STATES);
3295                                     ; **************************************************
3296      P:098D 205600  [2 -     6042]            move              (r6)-
3297      P:098E 615E00  [2 -     6044]            move              r1,x:(r6)+
3298      P:098F 0BF080  [6 -     6050]            jsr     Fspeed_control
                 0005C1
3299                                     ; **************************************************
3300                                     ;     scale_factor(&D_STATES);
3301                                     ; **************************************************
3302      P:0991 205600  [2 -     6052]            move              (r6)-
3303      P:0992 615E00  [2 -     6054]            move              r1,x:(r6)+
3304      P:0993 0BF080  [6 -     6060]            jsr     Fscale_factor
                 0006C6
3305                                     ; **************************************************
3306                                     ; #ifndef __MNECOUNT__
3307                                     ;     disk_record();
3308                                     ; **************************************************
3309      P:0995 205600  [2 -     6062]            move              (r6)-
3310      P:0996 0BF080  [6 -     6068]            jsr     Fdisk_record
                 0007F2
3311      P:0998 56F000  [4 -     6072]            move              x:FExitFlag,a
                 000070
3312      P:099A 200003  [2 -     6074]            tst     a
3313      P:099B 0AF0AA  [6 -     6080]            jeq     L231
                 00080E
3314                                     L181
3315                                     ; **************************************************
3316                                     ;   }
3317                                     ; 
3318                                     ;   post_disk_play();
3319                                     ; **************************************************
3320      P:099D 0BF080  [6 -     6086]            jsr     Fpost_disk_play
                 0007F0
3321                                     ; **************************************************
3322                                     ;   post_disk_record();
3323                                     ; **************************************************
3324      P:099F 0BF080  [6 -     6092]            jsr     Fpost_disk_record
                 0007F3
3325                                     ; **************************************************
3326                                     ; 
3327                                     ; #ifdef __DOWNLOAD__
3328                                     ;   run56k_end();
3329                                     ; #endif
3330                                     ;   return (0);
3331                                     ; **************************************************
3332                                     ; **************************************************
3333                                     ; #endif
3334                                     ; } 
3335                                     ; **************************************************
3336      P:09A1 205013  [2 -     6094]            clr     a         (r0)-
3337      P:09A2 205600  [2 -     6096]            move              (r6)-
3338      P:09A3 63D600  [2 -     6098]            move              x:(r6)-,r3
3339      P:09A4 62D600  [2 -     6100]            move              x:(r6)-,r2
3340      P:09A5 61D600  [2 -     6102]            move              x:(r6)-,r1
3341      P:09A6 47D600  [2 -     6104]            move              x:(r6)-,y1
3342      P:09A7 46D600  [2 -     6106]            move              x:(r6)-,y0
3343      P:09A8 45D600  [2 -     6108]            move              x:(r6)-,x1
3344      P:09A9 44D600  [2 -     6110]            move              x:(r6)-,x0
3345      P:09AA 57D600  [2 -     6112]            move              x:(r6)-,b
3346      P:09AB 51E600  [2 -     6114]            move              x:(r6),b0
3347      P:09AC 05D03C  [2 -     6116]            move              x:(r0)-,ssh
3348      P:09AD 221603  [2 -     6118]            tst     a         r0,r6
3349      P:09AE 60E000  [2 -     6120]            move              x:(r0),r0
3350      P:09AF 00000C  [4 -     6124]            rts
3351   
3352      X:0067                                   org     x:
3353                                               global  FTDP
3354      X:0067 000000                  FTDP      bsc     1
3355                                               global  FSP
3356      X:0068 000000                  FSP       bsc     1
3357                                               global  FSL
3358      X:0069 000000                  FSL       bsc     1
3359                                               global  FS_E
3360      X:006A 000000                  FS_E      bsc     1
3361                                               global  FSD
3362      X:006B 000000                  FSD       bsc     1
3363                                               global  FI
3364      X:006C 000000                  FI        bsc     1
3365                                               global  FD
3366      X:006D 000000                  FD        bsc     1
3367                                               global  FAL
3368      X:006E 000000                  FAL       bsc     1
3369                                               global  FA_2
3370      X:006F 000000                  FA_2      bsc     1
3371                                               global  FExitFlag
3372      X:0070 000000                  FExitFlag bsc     1
3373                                               global  Fostrm
3374      X:0071 000000                  Fostrm    bsc     1
3375                                               global  Fistrm
3376      X:0072 000000                  Fistrm    bsc     1
3377   
3378                                               endsec
3379   
3380                                     ; 
3381                                     ; 
3382                                     ; 
3383                                     ; 
3384                                     ; 
3385                                     ; 
3386                                     ; 
3387                                     ; 
3388                                     ; 
3389                                     ; 
3390                                     ; 
3391   
101  Errors
0    Warnings
