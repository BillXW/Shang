1                                        ;
2                                        ;       annotate version 1.03
3                                        ;
4                                        ; **************************************************
5                                        ; **************************************************
6                                                  section opt_adpcm_v2_c
7                                                  opt     so,nomd
8                                                  page    132,66,3,3
9                                        ;*** DSP56000/1 Motorola 1.03 GNU 1.37.1
10        P:0000                                   org     p:
11                                                 global  FE_DQ
12        X:0000                                   org     x:
13                                       FE_DQ
14        X:0000                                   dc      0
15                                                 global  FE_T
16                                       FE_T
17        X:0001                                   dc      0
18                                                 global  FE_Y
19                                       FE_Y
20        X:0002                                   dc      0
21                                                 global  FE_YL
22                                       FE_YL
23        X:0003                                   dc      0
24                                                 global  FE_DQ2
25                                       FE_DQ2
26        X:0004                                   dc      0
27                                                 global  FE_DQ3
28                                       FE_DQ3
29        X:0005                                   dc      0
30                                                 global  FE_DQ4
31                                       FE_DQ4
32        X:0006                                   dc      0
33                                                 global  FE_DQ5
34                                       FE_DQ5
35        X:0007                                   dc      0
36                                                 global  FE_DQ6
37                                       FE_DQ6
38        X:0008                                   dc      0
39                                                 global  FE_DQ7
40                                       FE_DQ7
41        X:0009                                   dc      0
42                                                 global  FE_PK1
43                                       FE_PK1
44        X:000A                                   dc      0
45                                                 global  FE_PK2
46                                       FE_PK2
47        X:000B                                   dc      0
48                                                 global  FE_SR2
49                                       FE_SR2
50        X:000C                                   dc      0
51                                                 global  FE_A1
52                                       FE_A1
53        X:000D                                   dc      0
54                                                 global  FE_A2
55                                       FE_A2
56        X:000E                                   dc      0
57        P:0000                                   org     p:
58                                                 global  FE_B
59        X:000F                                   org     x:
60                                       FE_B
61        X:000F                                   dc      0
62        X:0010                                   dc      0
63        X:0011                                   dc      0
64        X:0012                                   dc      0
65        X:0013                                   dc      0
66        X:0014                                   dc      0
67                                                 global  FE_SE
68                                       FE_SE
69        X:0015                                   dc      0
70                                                 global  FE_SEZ
71                                       FE_SEZ
72        X:0016                                   dc      0
73                                                 global  FE_t_dr
74                                       FE_t_dr
75        X:0017                                   dc      0
76                                                 global  FE_LAST_TR
77                                       FE_LAST_TR
78        X:0018                                   dc      0
79                                                 global  FE_DMS
80                                       FE_DMS
81        X:0019                                   dc      0
82                                                 global  FE_DML
83                                       FE_DML
84        X:001A                                   dc      0
85                                                 global  FE_AP
86                                       FE_AP
87        X:001B                                   dc      0
88                                                 global  FE_Y_L
89                                       FE_Y_L
90        X:001C                                   dc      0
91                                                 global  FE_LAST_Y
92                                       FE_LAST_Y
93        X:001D                                   dc      0
94                                                 global  FD_DQ
95                                       FD_DQ
96        X:001E                                   dc      0
97                                                 global  FD_T
98                                       FD_T
99        X:001F                                   dc      0
100                                                global  FD_Y
101                                      FD_Y
102       X:0020                                   dc      0
103                                                global  FD_YL
104                                      FD_YL
105       X:0021                                   dc      0
106                                                global  FD_DQ2
107                                      FD_DQ2
108       X:0022                                   dc      0
109                                                global  FD_DQ3
110                                      FD_DQ3
111       X:0023                                   dc      0
112                                                global  FD_DQ4
113                                      FD_DQ4
114       X:0024                                   dc      0
115                                                global  FD_DQ5
116                                      FD_DQ5
117       X:0025                                   dc      0
118                                                global  FD_DQ6
119                                      FD_DQ6
120       X:0026                                   dc      0
121                                                global  FD_DQ7
122                                      FD_DQ7
123       X:0027                                   dc      0
124                                                global  FD_PK1
125                                      FD_PK1
126       X:0028                                   dc      0
127                                                global  FD_PK2
128                                      FD_PK2
129       X:0029                                   dc      0
130                                                global  FD_SR2
131                                      FD_SR2
132       X:002A                                   dc      0
133                                                global  FD_A1
134                                      FD_A1
135       X:002B                                   dc      0
136                                                global  FD_A2
137                                      FD_A2
138       X:002C                                   dc      0
139       P:0000                                   org     p:
140                                                global  FD_B
141       X:002D                                   org     x:
142                                      FD_B
143       X:002D                                   dc      0
144       X:002E                                   dc      0
145       X:002F                                   dc      0
146       X:0030                                   dc      0
147       X:0031                                   dc      0
148       X:0032                                   dc      0
149                                                global  FD_SE
150                                      FD_SE
151       X:0033                                   dc      0
152                                                global  FD_SEZ
153                                      FD_SEZ
154       X:0034                                   dc      0
155                                                global  FD_t_dr
156                                      FD_t_dr
157       X:0035                                   dc      0
158                                                global  FD_LAST_TR
159                                      FD_LAST_TR
160       X:0036                                   dc      0
161                                                global  FD_DMS
162                                      FD_DMS
163       X:0037                                   dc      0
164                                                global  FD_DML
165                                      FD_DML
166       X:0038                                   dc      0
167                                                global  FD_AP
168                                      FD_AP
169       X:0039                                   dc      0
170                                                global  FD_Y_L
171                                      FD_Y_L
172       X:003A                                   dc      0
173                                                global  FD_LAST_Y
174                                      FD_LAST_Y
175       X:003B                                   dc      0
176       P:0000                                   org     p:
177                                                global  Ff_mult
178                                      Ff_mult
179                                      ; **************************************************
180                                      ; /*
181                                      ;  * opt_adpcm.c
182                                      ;  * Handwritten version of an optimized ADPCM transcoder applying the
183                                      ;  * CCITT recommendation G.721
184                                      ;  * 26-Oct-93 Chris Schlaeger
185                                      ;  * VERSION 1.2
186                                      ;  */
187                                      ; 
188                                      ; #include <stdio.h>
189                                      ; 
190                                      ; #define FALSE 0
191                                      ; #define TRUE (!FALSE)
192                                      ; 
193                                      ; FILE* istrm;
194                                      ; FILE* ostrm;
195                                      ; int   ExitFlag;
196                                      ; 
197                                      ; #ifdef __LOOPCOUNT__
198                                      ; int Loop1 = 0;
199                                      ; int Loop2 = 0;
200                                      ; int Loop3 = 0;
201                                      ; int Loop4 = 0;
202                                      ; int Loop5 = 0;
203                                      ; int Loop6 = 0;
204                                      ; int Loop7 = 0;
205                                      ; #endif
206                                      ; 
207                                      ; /* Global signals */
208                                      ; int A_2, AL, D, I, SD, S_E, SL, SP, TDP;
209                                      ; 
210                                      ; /* ENCODER states */
211                                      ; int E_DQ = 0;
212                                      ; int E_T = 0;
213                                      ; int E_Y = 0;
214                                      ; int E_YL = 0;
215                                      ; int E_DQ2 = 0;
216                                      ; int E_DQ3 = 0;
217                                      ; int E_DQ4 = 0;
218                                      ; int E_DQ5 = 0;
219                                      ; int E_DQ6 = 0;
220                                      ; int E_DQ7 = 0;
221                                      ; int E_PK1 = 0;
222                                      ; int E_PK2 = 0;
223                                      ; int E_SR2 = 0;
224                                      ; int E_A1 = 0;
225                                      ; int E_A2 = 0;
226                                      ; int E_B[6] = { 0, 0, 0, 0, 0, 0 };
227                                      ; int E_SE = 0;
228                                      ; int E_SEZ = 0;
229                                      ; int E_t_dr = 0;
230                                      ; int E_LAST_TR = 0;
231                                      ; int E_DMS = 0;
232                                      ; int E_DML = 0;
233                                      ; int E_AP = 0;
234                                      ; int E_Y_L = 0;
235                                      ; int E_LAST_Y = 0;
236                                      ; 
237                                      ; /* DECODER states */
238                                      ; int D_DQ = 0;
239                                      ; int D_T = 0;
240                                      ; int D_Y = 0;
241                                      ; int D_YL = 0;
242                                      ; int D_DQ2 = 0;
243                                      ; int D_DQ3 = 0;
244                                      ; int D_DQ4 = 0;
245                                      ; int D_DQ5 = 0;
246                                      ; int D_DQ6 = 0;
247                                      ; int D_DQ7 = 0;
248                                      ; int D_PK1 = 0;
249                                      ; int D_PK2 = 0;
250                                      ; int D_SR2 = 0;
251                                      ; int D_A1 = 0;
252                                      ; int D_A2 = 0;
253                                      ; int D_B[6] = { 0, 0, 0, 0, 0, 0 };
254                                      ; int D_SE = 0;
255                                      ; int D_SEZ = 0;
256                                      ; int D_t_dr = 0;
257                                      ; int D_LAST_TR = 0;
258                                      ; int D_DMS = 0;
259                                      ; int D_DML = 0;
260                                      ; int D_AP = 0;
261                                      ; int D_Y_L = 0;
262                                      ; int D_LAST_Y = 0;
263                                      ; 
264                                      ; int f_mult(int An, int SRn)
265                                      ; {
266                                      ;   int           AnS, MAG, AnMANT;
267                                      ;   register int  EXP;
268                                      ;   register long WAnMANT;
269                                      ; 
270                                      ;   AnS = An >> 15;
271                                      ; **************************************************
272       P:0000 70F400  [4 -        4]            move              #65533,n0
                 00FFFD
273       P:0002 3E0A00  [2 -        6]            move              #10,n6
274       P:0003 605E00  [2 -        8]            move              r0,x:(r6)+
275       P:0004 205E00  [2 -       10]            move              (r6)+
276       P:0005 22D000  [2 -       12]            move              r6,r0
277       P:0006 204E00  [2 -       14]            move              (r6)+n6
278       P:0007 515E00  [2 -       16]            move              b0,x:(r6)+
279       P:0008 555E00  [2 -       18]            move              b1,x:(r6)+
280       P:0009 445E00  [2 -       20]            move              x0,x:(r6)+
281       P:000A 455E00  [2 -       22]            move              x1,x:(r6)+
282       P:000B 465E00  [2 -       24]            move              y0,x:(r6)+
283       P:000C 475E00  [2 -       26]            move              y1,x:(r6)+
284       P:000D 57E800  [4 -       30]            move              x:(r0+n0),b
285       P:000E 21AF00  [2 -       32]            move              b1,b
286       P:000F 060FA0  [4 -       36]            rep     #15
287       P:0010 20002A  [2 -       38]            asr     b
288                                      ; **************************************************
289                                      ;   MAG = AnS ? (16384 - (An >> 2)) & 8191 : An >> 2;
290                                      ; **************************************************
291       P:0011 21AF00  [2 -       40]            move              b1,b
292       P:0012 55600B  [2 -       42]            tst     b         b1,x:(r0)
293       P:0013 0AF0AA  [6 -       48]            jeq     L2
                 000023
294       P:0015 57E800  [4 -       52]            move              x:(r0+n0),b
295       P:0016 21AF00  [2 -       54]            move              b1,b
296       P:0017 20002A  [2 -       56]            asr     b
297       P:0018 20002A  [2 -       58]            asr     b
298       P:0019 21AF00  [2 -       60]            move              b1,b
299       P:001A 21A500  [2 -       62]            move              b1,x1
300       P:001B 57F400  [4 -       66]            move              #>16384,b
                 004000
301       P:001D 45F46C  [4 -       70]            sub     x1,b      #>8191,x1
                 001FFF
302       P:001F 20006E  [2 -       72]            and     x1,b
303       P:0020 21AF00  [2 -       74]            move              b1,b
304       P:0021 0AF080  [6 -       80]            jmp     L15
                 00002A
305                                      L2
306       P:0023 70F400  [4 -       84]            move              #65533,n0
                 00FFFD
307       P:0025 57E800  [4 -       88]            move              x:(r0+n0),b
308       P:0026 21AF00  [2 -       90]            move              b1,b
309       P:0027 20002A  [2 -       92]            asr     b
310       P:0028 20002A  [2 -       94]            asr     b
311       P:0029 21AF00  [2 -       96]            move              b1,b
312                                      L15
313                                      ; **************************************************
314                                      ;     for (EXP = 0; (MAG >> EXP) != 0; EXP++)
315                                      ; **************************************************
316       P:002A 380200  [2 -       98]            move              #2,n0
317       P:002B 250000  [2 -      100]            move              #0,x1
318       P:002C 556800  [4 -      104]            move              b1,x:(r0+n0)
319       P:002D 205800  [2 -      106]            move              (r0)+
320       P:002E 455000  [2 -      108]            move              x1,x:(r0)-
321       P:002F 57E800  [4 -      112]            move              x:(r0+n0),b
322       P:0030 20000B  [2 -      114]            tst     b
323       P:0031 0AF0AA  [6 -      120]            jeq     L14
                 000044
324       P:0033 46F400  [4 -      124]            move              #>1,y0
                 000001
325                                      L6
326       P:0035 380200  [2 -      126]            move              #2,n0
327       P:0036 205800  [2 -      128]            move              (r0)+
328       P:0037 57D000  [2 -      130]            move              x:(r0)-,b
329       P:0038 205858  [2 -      132]            add     y0,b      (r0)+
330       P:0039 555001  [2 -      134]            tfr     b,a       b1,x:(r0)-
331       P:003A 57E803  [4 -      138]            tst     a         x:(r0+n0),b
332       P:003B 0AF0AA  [6 -      144]            jeq     L16
                 000041
333       P:003D 21AF00  [2 -      146]            move              b1,b
334       P:003E 06CE20  [4 -      150]            rep     a
335       P:003F 20002A  [2 -      152]            asr     b
336       P:0040 21AF00  [2 -      154]            move              b1,b
337                                      L16
338       P:0041 20000B  [2 -      156]            tst     b
339       P:0042 0AF0A2  [6 -      162]            jne     L6
                 000035
340                                      L14
341                                      ; **************************************************
342                                      ; #ifdef __LOOPCOUNT__
343                                      ;       Loop1++;
344                                      ; #else
345                                      ;       ;
346                                      ; #endif
347                                      ; 
348                                      ;   AnMANT = MAG ? (MAG << 6) >> EXP : 1 << 5;
349                                      ; **************************************************
350       P:0044 380200  [2 -      164]            move              #2,n0
351       P:0045 57E800  [4 -      168]            move              x:(r0+n0),b
352       P:0046 20000B  [2 -      170]            tst     b
353       P:0047 0AF0AA  [6 -      176]            jeq     L8
                 000058
354       P:0049 0606A0  [4 -      180]            rep     #6
355       P:004A 20003A  [2 -      182]            asl     b
356       P:004B 21AF00  [2 -      184]            move              b1,b
357       P:004C 205800  [2 -      186]            move              (r0)+
358       P:004D 56D000  [2 -      188]            move              x:(r0)-,a
359       P:004E 200003  [2 -      190]            tst     a
360       P:004F 0AF0AA  [6 -      196]            jeq     L17
                 000055
361       P:0051 21AF00  [2 -      198]            move              b1,b
362       P:0052 06CE20  [4 -      202]            rep     a
363       P:0053 20002A  [2 -      204]            asr     b
364       P:0054 21AF00  [2 -      206]            move              b1,b
365                                      L17
366       P:0055 556800  [4 -      210]            move              b1,x:(r0+n0)
367       P:0056 0AF080  [6 -      216]            jmp     L9
                 00005C
368                                      L8
369       P:0058 380200  [2 -      218]            move              #2,n0
370       P:0059 45F400  [4 -      222]            move              #>32,x1
                 000020
371       P:005B 456800  [4 -      226]            move              x1,x:(r0+n0)
372                                      L9
373                                      ; **************************************************
374                                      ; 
375                                      ;   EXP += ((SRn >> 6) & 15);
376                                      ; **************************************************
377       P:005C 70F400  [4 -      230]            move              #65532,n0
                 00FFFC
378       P:005E 57E800  [4 -      234]            move              x:(r0+n0),b
379       P:005F 21AF00  [2 -      236]            move              b1,b
380       P:0060 0606A0  [4 -      240]            rep     #6
381       P:0061 20002A  [2 -      242]            asr     b
382                                      ; **************************************************
383                                      ;   WAnMANT = ((((long) (SRn & 63) * AnMANT) + 48) >> 4) << 7;
384                                      ; **************************************************
385       P:0062 45F400  [4 -      246]            move              #>15,x1
                 00000F
386       P:0064 21AF00  [2 -      248]            move              b1,b
387       P:0065 20586E  [2 -      250]            and     x1,b      (r0)+
388       P:0066 21AF00  [2 -      252]            move              b1,b
389       P:0067 21A500  [2 -      254]            move              b1,x1
390       P:0068 57D000  [2 -      256]            move              x:(r0)-,b
391       P:0069 45F468  [4 -      260]            add     x1,b      #>63,x1
                 00003F
392       P:006B 205800  [2 -      262]            move              (r0)+
393       P:006C 555000  [2 -      264]            move              b1,x:(r0)-
394       P:006D 57E800  [4 -      268]            move              x:(r0+n0),b
395       P:006E 38026E  [2 -      270]            and     x1,b      #2,n0
396       P:006F 21AF00  [2 -      272]            move              b1,b
397       P:0070 21A400  [2 -      274]            move              b1,x0
398       P:0071 216500  [2 -      276]            move              b2,x1
399       P:0072 57E800  [4 -      280]            move              x:(r0+n0),b
400       P:0073 21A600  [2 -      282]            move              b1,y0
401       P:0074 216769  [2 -      284]            tfr     x1,b      b2,y1
402       P:0075 208971  [2 -      286]            tfr     y1,a      x0,b0
403       P:0076 20C800  [2 -      288]            move              y0,a0
404       P:0077 0BF080  [6 -      294]            jsr     lmpy_ab
                 000000
405       P:0079 380800  [2 -      296]            move              #8,n0
406       P:007A 44F400  [4 -      300]            move              #>48,x0
                 000030
407       P:007C 45F400  [4 -      304]            move              #>0,x1
                 000000
408       P:007E 205828  [2 -      306]            add     x,b       (r0)+
409       P:007F 204800  [2 -      308]            move              (r0)+n0
410       P:0080 455000  [2 -      310]            move              x1,x:(r0)-
411       P:0081 444000  [2 -      312]            move              x0,x:(r0)-n0
412       P:0082 516600  [2 -      314]            move              b0,x:(r6)
413       P:0083 21AF00  [2 -      316]            move              b1,b
414       P:0084 51E600  [2 -      318]            move              x:(r6),b0
415       P:0085 0604A0  [4 -      322]            rep     #4
416       P:0086 20002A  [2 -      324]            asr     b
417       P:0087 0607A0  [4 -      328]            rep     #7
418       P:0088 20003A  [2 -      330]            asl     b
419                                      ; **************************************************
420                                      ;   MAG = (int) (EXP <= 26 ?
421                                      ;                WAnMANT  >> (26 - EXP) :
422                                      ;              (WAnMANT << (EXP - 26)) & 32767);
423                                      ; **************************************************
424       P:0089 380300  [2 -      332]            move              #3,n0
425       P:008A 45F400  [4 -      336]            move              #>26,x1
                 00001A
426       P:008C 205800  [2 -      338]            move              (r0)+
427       P:008D 204800  [2 -      340]            move              (r0)+n0
428       P:008E 555000  [2 -      342]            move              b1,x:(r0)-
429       P:008F 514000  [2 -      344]            move              b0,x:(r0)-n0
430       P:0090 205800  [2 -      346]            move              (r0)+
431       P:0091 57D000  [2 -      348]            move              x:(r0)-,b
432       P:0092 20006D  [2 -      350]            cmp     x1,b
433       P:0093 0AF0A7  [6 -      356]            jgt     L10
                 0000AE
434       P:0095 57F400  [4 -      360]            move              #>26,b
                 00001A
435       P:0097 205800  [2 -      362]            move              (r0)+
436       P:0098 45D000  [2 -      364]            move              x:(r0)-,x1
437       P:0099 20586C  [2 -      366]            sub     x1,b      (r0)+
438       P:009A 204801  [2 -      368]            tfr     b,a       (r0)+n0
439       P:009B 57D003  [2 -      370]            tst     a         x:(r0)-,b
440       P:009C 51C000  [2 -      372]            move              x:(r0)-n0,b0
441       P:009D 516600  [2 -      374]            move              b0,x:(r6)
442       P:009E 21AF00  [2 -      376]            move              b1,b
443       P:009F 51E600  [2 -      378]            move              x:(r6),b0
444       P:00A0 0AF0AA  [6 -      384]            jeq     L18
                 0000A4
445       P:00A2 06CE20  [4 -      388]            rep     a
446       P:00A3 20002A  [2 -      390]            asr     b
447                                      L18
448       P:00A4 380800  [2 -      392]            move              #8,n0
449       P:00A5 205800  [2 -      394]            move              (r0)+
450       P:00A6 204800  [2 -      396]            move              (r0)+n0
451       P:00A7 555000  [2 -      398]            move              b1,x:(r0)-
452       P:00A8 514000  [2 -      400]            move              b0,x:(r0)-n0
453       P:00A9 45E800  [4 -      404]            move              x:(r0+n0),x1
454       P:00AA 380200  [2 -      406]            move              #2,n0
455       P:00AB 456800  [4 -      410]            move              x1,x:(r0+n0)
456       P:00AC 0AF080  [6 -      416]            jmp     L11
                 0000C8
457                                      L10
458       P:00AE 380300  [2 -      418]            move              #3,n0
459       P:00AF 45F400  [4 -      422]            move              #>16777190,x1
                 FFFFE6
460       P:00B1 205800  [2 -      424]            move              (r0)+
461       P:00B2 57D000  [2 -      426]            move              x:(r0)-,b
462       P:00B3 205868  [2 -      428]            add     x1,b      (r0)+
463       P:00B4 204801  [2 -      430]            tfr     b,a       (r0)+n0
464       P:00B5 57D003  [2 -      432]            tst     a         x:(r0)-,b
465       P:00B6 51C000  [2 -      434]            move              x:(r0)-n0,b0
466       P:00B7 0AF0AA  [6 -      440]            jeq     L19
                 0000BB
467       P:00B9 06CE20  [4 -      444]            rep     a
468       P:00BA 20003A  [2 -      446]            asl     b
469                                      L19
470       P:00BB 380800  [2 -      448]            move              #8,n0
471       P:00BC 205800  [2 -      450]            move              (r0)+
472       P:00BD 204800  [2 -      452]            move              (r0)+n0
473       P:00BE 555000  [2 -      454]            move              b1,x:(r0)-
474       P:00BF 514000  [2 -      456]            move              b0,x:(r0)-n0
475       P:00C0 45E800  [4 -      460]            move              x:(r0+n0),x1
476       P:00C1 380269  [2 -      462]            tfr     x1,b      #2,n0
477       P:00C2 456800  [4 -      466]            move              x1,x:(r0+n0)
478       P:00C3 45F400  [4 -      470]            move              #>32767,x1
                 007FFF
479       P:00C5 20006E  [2 -      472]            and     x1,b
480       P:00C6 21AF00  [2 -      474]            move              b1,b
481       P:00C7 556800  [4 -      478]            move              b1,x:(r0+n0)
482                                      L11
483                                      ; **************************************************
484                                      ;   return ((SRn >> 10) ^ AnS ? (65536 - MAG) & 65535 : MAG);
485                                      ; **************************************************
486       P:00C8 70F400  [4 -      482]            move              #65532,n0
                 00FFFC
487       P:00CA 57E800  [4 -      486]            move              x:(r0+n0),b
488       P:00CB 21AF00  [2 -      488]            move              b1,b
489       P:00CC 060AA0  [4 -      492]            rep     #10
490       P:00CD 20002A  [2 -      494]            asr     b
491       P:00CE 45E000  [2 -      496]            move              x:(r0),x1
492       P:00CF 21AF00  [2 -      498]            move              b1,b
493       P:00D0 20006B  [2 -      500]            eor     x1,b
494       P:00D1 21AF00  [2 -      502]            move              b1,b
495       P:00D2 20000B  [2 -      504]            tst     b
496       P:00D3 0AF0AA  [6 -      510]            jeq     L12
                 0000E1
497       P:00D5 380200  [2 -      512]            move              #2,n0
498       P:00D6 57F400  [4 -      516]            move              #>65536,b
                 010000
499       P:00D8 45E800  [4 -      520]            move              x:(r0+n0),x1
500       P:00D9 38086C  [2 -      522]            sub     x1,b      #8,n0
501       P:00DA 45F400  [4 -      526]            move              #>65535,x1
                 00FFFF
502       P:00DC 20006E  [2 -      528]            and     x1,b
503       P:00DD 21AF00  [2 -      530]            move              b1,b
504       P:00DE 556800  [4 -      534]            move              b1,x:(r0+n0)
505       P:00DF 0AF080  [6 -      540]            jmp     L13
                 0000E5
506                                      L12
507       P:00E1 380200  [2 -      542]            move              #2,n0
508       P:00E2 45E800  [4 -      546]            move              x:(r0+n0),x1
509       P:00E3 380800  [2 -      548]            move              #8,n0
510       P:00E4 456800  [4 -      552]            move              x1,x:(r0+n0)
511                                      L13
512                                      ; **************************************************
513                                      ; }
514                                      ; **************************************************
515       P:00E5 380800  [2 -      554]            move              #8,n0
516       P:00E6 205600  [2 -      556]            move              (r6)-
517       P:00E7 56E800  [4 -      560]            move              x:(r0+n0),a
518       P:00E8 47D603  [2 -      562]            tst     a         x:(r6)-,y1
519       P:00E9 46D600  [2 -      564]            move              x:(r6)-,y0
520       P:00EA 45D600  [2 -      566]            move              x:(r6)-,x1
521       P:00EB 44D600  [2 -      568]            move              x:(r6)-,x0
522       P:00EC 57D600  [2 -      570]            move              x:(r6)-,b
523       P:00ED 51E600  [2 -      572]            move              x:(r6),b0
524       P:00EE 205000  [2 -      574]            move              (r0)-
525       P:00EF 205000  [2 -      576]            move              (r0)-
526       P:00F0 221600  [2 -      578]            move              r0,r6
527       P:00F1 60E000  [2 -      580]            move              x:(r0),r0
528       P:00F2 00000C  [4 -      584]            rts
529    
530                                                global  Fdiff_signal
531                                      Fdiff_signal
532                                      ; **************************************************
533                                      ; **************************************************
534                                      ; **************************************************
535                                      ; 
536                                      ; void diff_signal(void)
537                                      ; {
538                                      ;   /*
539                                      ;    * diff_signal
540                                      ;    *
541                                      ;    * Input signals:  SL, S_E
542                                      ;    * Output signals: D
543                                      ;    */
544                                      ; 
545                                      ;   /* SUBTA */
546                                      ;   D = ((SL & (1 << 13) ? 49152 | SL : SL) + 65536 -
547                                      ;        (S_E & (1 << 14) ? 32768 | S_E : S_E)) & 65535;
548                                      ; **************************************************
549       P:00F3 3E0200  [2 -      586]            move              #2,n6
550       P:00F4 605E00  [2 -      588]            move              r0,x:(r6)+
551       P:00F5 22D000  [2 -      590]            move              r6,r0
552       P:00F6 204E00  [2 -      592]            move              (r6)+n6
553       P:00F7 515E00  [2 -      594]            move              b0,x:(r6)+
554       P:00F8 555E00  [2 -      596]            move              b1,x:(r6)+
555       P:00F9 445E00  [2 -      598]            move              x0,x:(r6)+
556       P:00FA 44F400  [4 -      602]            move              #>8192,x0
                 002000
557       P:00FC 455E00  [2 -      604]            move              x1,x:(r6)+
558       P:00FD 45F000  [4 -      608]            move              x:FSL,x1
                 000069
559       P:00FF 205800  [2 -      610]            move              (r0)+
560       P:0100 455000  [2 -      612]            move              x1,x:(r0)-
561       P:0101 205800  [2 -      614]            move              (r0)+
562       P:0102 56D000  [2 -      616]            move              x:(r0)-,a
563       P:0103 200046  [2 -      618]            and     x0,a
564       P:0104 218E00  [2 -      620]            move              a1,a
565       P:0105 200003  [2 -      622]            tst     a
566       P:0106 0AF0AA  [6 -      628]            jeq     L21
                 000111
567       P:0108 44F400  [4 -      632]            move              #>49152,x0
                 00C000
568       P:010A 205800  [2 -      634]            move              (r0)+
569       P:010B 57D000  [2 -      636]            move              x:(r0)-,b
570       P:010C 20004A  [2 -      638]            or      x0,b
571       P:010D 21AF00  [2 -      640]            move              b1,b
572       P:010E 556000  [2 -      642]            move              b1,x:(r0)
573       P:010F 0AF080  [6 -      648]            jmp     L22
                 000114
574                                      L21
575       P:0111 45F000  [4 -      652]            move              x:FSL,x1
                 000069
576       P:0113 456000  [2 -      654]            move              x1,x:(r0)
577                                      L22
578       P:0114 45F000  [4 -      658]            move              x:FS_E,x1
                 00006A
579       P:0116 44F461  [4 -      662]            tfr     x1,a      #>16384,x0
                 004000
580       P:0118 205846  [2 -      664]            and     x0,a      (r0)+
581       P:0119 218E00  [2 -      666]            move              a1,a
582       P:011A 455003  [2 -      668]            tst     a         x1,x:(r0)-
583       P:011B 0AF0AA  [6 -      674]            jeq     L23
                 000126
584       P:011D 44F400  [4 -      678]            move              #>32768,x0
                 008000
585       P:011F 205800  [2 -      680]            move              (r0)+
586       P:0120 57D000  [2 -      682]            move              x:(r0)-,b
587       P:0121 20584A  [2 -      684]            or      x0,b      (r0)+
588       P:0122 21AF00  [2 -      686]            move              b1,b
589       P:0123 555000  [2 -      688]            move              b1,x:(r0)-
590       P:0124 0AF080  [6 -      694]            jmp     L24
                 00012A
591                                      L23
592       P:0126 45F000  [4 -      698]            move              x:FS_E,x1
                 00006A
593       P:0128 205800  [2 -      700]            move              (r0)+
594       P:0129 455000  [2 -      702]            move              x1,x:(r0)-
595                                      L24
596                                      ; **************************************************
597                                      ; }
598                                      ; **************************************************
599       P:012A 44F400  [4 -      706]            move              #>65535,x0
                 00FFFF
600       P:012C 56F400  [4 -      710]            move              #>16711680,a
                 FF0000
601       P:012E 205600  [2 -      712]            move              (r6)-
602       P:012F 205800  [2 -      714]            move              (r0)+
603       P:0130 57D000  [2 -      716]            move              x:(r0)-,b
604       P:0131 200018  [2 -      718]            add     a,b
605       P:0132 57E001  [2 -      720]            tfr     b,a       x:(r0),b
606       P:0133 20501C  [2 -      722]            sub     a,b       (r0)-
607       P:0134 200001  [2 -      724]            tfr     b,a
608       P:0135 200046  [2 -      726]            and     x0,a
609       P:0136 218E00  [2 -      728]            move              a1,a
610       P:0137 547000  [4 -      732]            move              a1,x:FD
                 00006D
611       P:0139 45D600  [2 -      734]            move              x:(r6)-,x1
612       P:013A 44D600  [2 -      736]            move              x:(r6)-,x0
613       P:013B 57D600  [2 -      738]            move              x:(r6)-,b
614       P:013C 51E600  [2 -      740]            move              x:(r6),b0
615       P:013D 221600  [2 -      742]            move              r0,r6
616       P:013E 60E000  [2 -      744]            move              x:(r0),r0
617       P:013F 00000C  [4 -      748]            rts
618    
619                                                global  Fadpt_predict
620                                      Fadpt_predict
621       P:0140 605E00  [2 -      750]            move              r0,x:(r6)+
622       P:0141 055E3C  [2 -      752]            move              ssh,x:(r6)+
623                                      ; **************************************************
624                                      ; **************************************************
625                                      ; **************************************************
626                                      ; 
627                                      ; void adpt_predict(int* DQ, int* T,
628                                      ;                   int* DQ2, int* DQ3, int* DQ4, int* DQ5, int* DQ6, int* DQ7,
629                                      ;                   int* PK1, int* PK2, int* SR2, int* A1, int* A2, int B[],
630                                      ;                   int* SE, int* SEZ)
631                                      ; {
632                                      ;   /*
633                                      ;    * adaptive predictor
634                                      ;    *
635                                      ;    * Input signals:  DQ, T
636                                      ;    * Output signals: S_E, A_2
637                                      ;    */
638                                      ; 
639                                      ;   register int DQS, DQI, DQSEZ, PK0; 
640                                      ;   register int SR1;
641                                      ;   register int A1S, AP;
642                                      ;   register int A2R;
643                                      ;   register int WA1, WA2;
644                                      ;   register int MAG, EXP, MANT; 
645                                      ;   int BP[6];
646                                      ; 
647                                      ;   /* ADDC */
648                                      ;   DQS = *DQ >> 14;
649                                      ; **************************************************
650       P:0142 70F400  [4 -      756]            move              #65533,n0
                 00FFFD
651       P:0144 3E1500  [2 -      758]            move              #21,n6
652       P:0145 22D000  [2 -      760]            move              r6,r0
653       P:0146 204E00  [2 -      762]            move              (r6)+n6
654       P:0147 515E00  [2 -      764]            move              b0,x:(r6)+
655       P:0148 555E00  [2 -      766]            move              b1,x:(r6)+
656       P:0149 445E00  [2 -      768]            move              x0,x:(r6)+
657       P:014A 455E00  [2 -      770]            move              x1,x:(r6)+
658       P:014B 465E00  [2 -      772]            move              y0,x:(r6)+
659       P:014C 475E00  [2 -      774]            move              y1,x:(r6)+
660       P:014D 615E00  [2 -      776]            move              r1,x:(r6)+
661       P:014E 625E00  [2 -      778]            move              r2,x:(r6)+
662       P:014F 635E00  [2 -      780]            move              r3,x:(r6)+
663       P:0150 645E00  [2 -      782]            move              r4,x:(r6)+
664       P:0151 655E00  [2 -      784]            move              r5,x:(r6)+
665       P:0152 675E00  [2 -      786]            move              r7,x:(r6)+
666       P:0153 62E800  [4 -      790]            move              x:(r0+n0),r2
667       P:0154 70F400  [4 -      794]            move              #65529,n0
                 00FFF9
668       P:0156 46E200  [2 -      796]            move              x:(r2),y0
669       P:0157 67E859  [4 -      800]            tfr     y0,b      x:(r0+n0),r7
670       P:0158 70F400  [4 -      804]            move              #65527,n0
                 00FFF7
671       P:015A 21AF00  [2 -      806]            move              b1,b
672       P:015B 65E800  [4 -      810]            move              x:(r0+n0),r5
673       P:015C 70F400  [4 -      814]            move              #65522,n0
                 00FFF2
674       P:015E 61E800  [4 -      818]            move              x:(r0+n0),r1
675       P:015F 70F400  [4 -      822]            move              #65520,n0
                 00FFF0
676       P:0161 63E800  [4 -      826]            move              x:(r0+n0),r3
677       P:0162 381300  [2 -      828]            move              #19,n0
678       P:0163 466800  [4 -      832]            move              y0,x:(r0+n0)
679       P:0164 060EA0  [4 -      836]            rep     #14
680       P:0165 20002A  [2 -      838]            asr     b
681                                      ; **************************************************
682                                      ;   DQI = DQS == 0 ? *DQ : (65536 - (*DQ & 16383)) & 65535;
683                                      ; **************************************************
684       P:0166 380600  [2 -      840]            move              #6,n0
685       P:0167 21AF00  [2 -      842]            move              b1,b
686       P:0168 55680B  [4 -      846]            tst     b         b1,x:(r0+n0)
687       P:0169 0AF0A2  [6 -      852]            jne     L26
                 00016F
688       P:016B 380700  [2 -      854]            move              #7,n0
689       P:016C 466800  [4 -      858]            move              y0,x:(r0+n0)
690       P:016D 0AF080  [6 -      864]            jmp     L27
                 00017F
691                                      L26
692       P:016F 381300  [2 -      866]            move              #19,n0
693       P:0170 46E200  [2 -      868]            move              x:(r2),y0
694       P:0171 44F459  [4 -      872]            tfr     y0,b      #>16383,x0
                 003FFF
695       P:0173 44F44E  [4 -      876]            and     x0,b      #>65535,x0
                 00FFFF
696       P:0175 21AF00  [2 -      878]            move              b1,b
697       P:0176 21A600  [2 -      880]            move              b1,y0
698       P:0177 556800  [4 -      884]            move              b1,x:(r0+n0)
699       P:0178 380700  [2 -      886]            move              #7,n0
700       P:0179 57F400  [4 -      890]            move              #>65536,b
                 010000
701       P:017B 20005C  [2 -      892]            sub     y0,b
702       P:017C 55684E  [4 -      896]            and     x0,b      b1,x:(r0+n0)
703       P:017D 21AF00  [2 -      898]            move              b1,b
704       P:017E 556800  [4 -      902]            move              b1,x:(r0+n0)
705                                      L27
706                                      ; **************************************************
707                                      ;   MAG = (( (*SEZ)  >> 14) == 0) ?  (*SEZ)  : (1 << 15) +  (*SEZ);
708                                      ; **************************************************
709       P:017F 70F400  [4 -      906]            move              #65518,n0
                 00FFEE
710       P:0181 64E800  [4 -      910]            move              x:(r0+n0),r4
711       P:0182 381200  [2 -      912]            move              #18,n0
712       P:0183 46E400  [2 -      914]            move              x:(r4),y0
713       P:0184 466859  [4 -      918]            tfr     y0,b      y0,x:(r0+n0)
714       P:0185 21AF00  [2 -      920]            move              b1,b
715       P:0186 060EA0  [4 -      924]            rep     #14
716       P:0187 20002A  [2 -      926]            asr     b
717       P:0188 21AF00  [2 -      928]            move              b1,b
718       P:0189 20000B  [2 -      930]            tst     b
719       P:018A 0AF0A2  [6 -      936]            jne     L28
                 00018F
720       P:018C 466800  [4 -      940]            move              y0,x:(r0+n0)
721       P:018D 0AF080  [6 -      946]            jmp     L29
                 00019A
722                                      L28
723       P:018F 70F400  [4 -      950]            move              #65518,n0
                 00FFEE
724       P:0191 64E800  [4 -      954]            move              x:(r0+n0),r4
725       P:0192 381300  [2 -      956]            move              #19,n0
726       P:0193 46E400  [2 -      958]            move              x:(r4),y0
727       P:0194 466859  [4 -      962]            tfr     y0,b      y0,x:(r0+n0)
728       P:0195 381200  [2 -      964]            move              #18,n0
729       P:0196 46F400  [4 -      968]            move              #>32768,y0
                 008000
730       P:0198 200058  [2 -      970]            add     y0,b
731       P:0199 556800  [4 -      974]            move              b1,x:(r0+n0)
732                                      L29
733                                      ; **************************************************
734                                      ;   DQSEZ = (DQI + MAG) & 65535;
735                                      ; **************************************************
736                                      ; **************************************************
737                                      ;   PK0 = DQSEZ >> 15;
738                                      ; **************************************************
739       P:019A 380700  [2 -      976]            move              #7,n0
740       P:019B 44F400  [4 -      980]            move              #>65535,x0
                 00FFFF
741       P:019D 57E800  [4 -      984]            move              x:(r0+n0),b
742       P:019E 381200  [2 -      986]            move              #18,n0
743       P:019F 46E800  [4 -      990]            move              x:(r0+n0),y0
744       P:01A0 380858  [2 -      992]            add     y0,b      #8,n0
745       P:01A1 20004E  [2 -      994]            and     x0,b
746       P:01A2 21AF00  [2 -      996]            move              b1,b
747       P:01A3 556800  [4 -     1000]            move              b1,x:(r0+n0)
748       P:01A4 21AF00  [2 -     1002]            move              b1,b
749       P:01A5 060FA0  [4 -     1006]            rep     #15
750       P:01A6 20002A  [2 -     1008]            asr     b
751                                      ; **************************************************
752                                      ;   WA2 = DQSEZ == 0 ? 1 : 0;
753                                      ; **************************************************
754       P:01A7 380900  [2 -     1010]            move              #9,n0
755       P:01A8 21AF00  [2 -     1012]            move              b1,b
756       P:01A9 556800  [4 -     1016]            move              b1,x:(r0+n0)
757       P:01AA 380800  [2 -     1018]            move              #8,n0
758       P:01AB 57E800  [4 -     1022]            move              x:(r0+n0),b
759       P:01AC 20000B  [2 -     1024]            tst     b
760       P:01AD 0AF0A2  [6 -     1030]            jne     L30
                 0001B3
761       P:01AF 46F400  [4 -     1034]            move              #>1,y0
                 000001
762       P:01B1 0AF080  [6 -     1040]            jmp     L111
                 0001B4
763                                      L30
764       P:01B3 260000  [2 -     1042]            move              #0,y0
765                                      L111
766                                      ; **************************************************
767                                      ;   
768                                      ;   /* ADDB */
769                                      ;   DQI = DQS == 0 ? *DQ : (65536 - (*DQ & 16383)) & 65535;
770                                      ; **************************************************
771       P:01B4 380C00  [2 -     1044]            move              #12,n0
772       P:01B5 466800  [4 -     1048]            move              y0,x:(r0+n0)
773       P:01B6 380600  [2 -     1050]            move              #6,n0
774       P:01B7 57E800  [4 -     1054]            move              x:(r0+n0),b
775       P:01B8 20000B  [2 -     1056]            tst     b
776       P:01B9 0AF0A2  [6 -     1062]            jne     L32
                 0001C0
777       P:01BB 380700  [2 -     1064]            move              #7,n0
778       P:01BC 46E200  [2 -     1066]            move              x:(r2),y0
779       P:01BD 466800  [4 -     1070]            move              y0,x:(r0+n0)
780       P:01BE 0AF080  [6 -     1076]            jmp     L33
                 0001D0
781                                      L32
782       P:01C0 381300  [2 -     1078]            move              #19,n0
783       P:01C1 46E200  [2 -     1080]            move              x:(r2),y0
784       P:01C2 44F459  [4 -     1084]            tfr     y0,b      #>16383,x0
                 003FFF
785       P:01C4 44F44E  [4 -     1088]            and     x0,b      #>65535,x0
                 00FFFF
786       P:01C6 21AF00  [2 -     1090]            move              b1,b
787       P:01C7 21A600  [2 -     1092]            move              b1,y0
788       P:01C8 556800  [4 -     1096]            move              b1,x:(r0+n0)
789       P:01C9 380700  [2 -     1098]            move              #7,n0
790       P:01CA 57F400  [4 -     1102]            move              #>65536,b
                 010000
791       P:01CC 20005C  [2 -     1104]            sub     y0,b
792       P:01CD 55684E  [4 -     1108]            and     x0,b      b1,x:(r0+n0)
793       P:01CE 21AF00  [2 -     1110]            move              b1,b
794       P:01CF 556800  [4 -     1114]            move              b1,x:(r0+n0)
795                                      L33
796                                      ; **************************************************
797                                      ;   MAG = (( (*SE)  >> 14) == 0) ?  (*SE)  : (1 << 15) +  (*SE) ;
798                                      ; **************************************************
799       P:01D0 70F400  [4 -     1118]            move              #65519,n0
                 00FFEF
800       P:01D2 64E800  [4 -     1122]            move              x:(r0+n0),r4
801       P:01D3 381200  [2 -     1124]            move              #18,n0
802       P:01D4 46E400  [2 -     1126]            move              x:(r4),y0
803       P:01D5 466859  [4 -     1130]            tfr     y0,b      y0,x:(r0+n0)
804       P:01D6 21AF00  [2 -     1132]            move              b1,b
805       P:01D7 060EA0  [4 -     1136]            rep     #14
806       P:01D8 20002A  [2 -     1138]            asr     b
807       P:01D9 21AF00  [2 -     1140]            move              b1,b
808       P:01DA 20000B  [2 -     1142]            tst     b
809       P:01DB 0AF0A2  [6 -     1148]            jne     L34
                 0001E0
810       P:01DD 466800  [4 -     1152]            move              y0,x:(r0+n0)
811       P:01DE 0AF080  [6 -     1158]            jmp     L35
                 0001EB
812                                      L34
813       P:01E0 70F400  [4 -     1162]            move              #65519,n0
                 00FFEF
814       P:01E2 64E800  [4 -     1166]            move              x:(r0+n0),r4
815       P:01E3 381300  [2 -     1168]            move              #19,n0
816       P:01E4 46E400  [2 -     1170]            move              x:(r4),y0
817       P:01E5 466859  [4 -     1174]            tfr     y0,b      y0,x:(r0+n0)
818       P:01E6 381200  [2 -     1176]            move              #18,n0
819       P:01E7 46F400  [4 -     1180]            move              #>32768,y0
                 008000
820       P:01E9 200058  [2 -     1182]            add     y0,b
821       P:01EA 556800  [4 -     1186]            move              b1,x:(r0+n0)
822                                      L35
823                                      ; **************************************************
824                                      ;   DQSEZ = (DQI + MAG) & 65535;
825                                      ; **************************************************
826                                      ; **************************************************
827                                      ;   
828                                      ;   /* FLOATB */
829                                      ;   MAG = ((DQSEZ >> 15) == 0) ? DQSEZ : (65536 - DQSEZ) & 32767;
830                                      ; **************************************************
831       P:01EB 380700  [2 -     1188]            move              #7,n0
832       P:01EC 44F400  [4 -     1192]            move              #>65535,x0
                 00FFFF
833       P:01EE 57E800  [4 -     1196]            move              x:(r0+n0),b
834       P:01EF 381200  [2 -     1198]            move              #18,n0
835       P:01F0 46E800  [4 -     1202]            move              x:(r0+n0),y0
836       P:01F1 380858  [2 -     1204]            add     y0,b      #8,n0
837       P:01F2 20004E  [2 -     1206]            and     x0,b
838       P:01F3 21AF00  [2 -     1208]            move              b1,b
839       P:01F4 556800  [4 -     1212]            move              b1,x:(r0+n0)
840       P:01F5 21AF00  [2 -     1214]            move              b1,b
841       P:01F6 060FA0  [4 -     1218]            rep     #15
842       P:01F7 20002A  [2 -     1220]            asr     b
843       P:01F8 21AF00  [2 -     1222]            move              b1,b
844       P:01F9 20000B  [2 -     1224]            tst     b
845       P:01FA 0AF0A2  [6 -     1230]            jne     L36
                 000201
846       P:01FC 46E800  [4 -     1234]            move              x:(r0+n0),y0
847       P:01FD 381200  [2 -     1236]            move              #18,n0
848       P:01FE 466800  [4 -     1240]            move              y0,x:(r0+n0)
849       P:01FF 0AF080  [6 -     1246]            jmp     L37
                 00020C
850                                      L36
851       P:0201 380800  [2 -     1248]            move              #8,n0
852       P:0202 44F400  [4 -     1252]            move              #>32767,x0
                 007FFF
853       P:0204 46E800  [4 -     1256]            move              x:(r0+n0),y0
854       P:0205 381200  [2 -     1258]            move              #18,n0
855       P:0206 57F400  [4 -     1262]            move              #>65536,b
                 010000
856       P:0208 20005C  [2 -     1264]            sub     y0,b
857       P:0209 55684E  [4 -     1268]            and     x0,b      b1,x:(r0+n0)
858       P:020A 21AF00  [2 -     1270]            move              b1,b
859       P:020B 556800  [4 -     1274]            move              b1,x:(r0+n0)
860                                      L37
861                                      ; **************************************************
862                                      ;   for (EXP = 0; (MAG >> EXP) != 0; EXP++)
863                                      ; **************************************************
864       P:020C 380D00  [2 -     1276]            move              #13,n0
865       P:020D 260000  [2 -     1278]            move              #0,y0
866       P:020E 466800  [4 -     1282]            move              y0,x:(r0+n0)
867       P:020F 381200  [2 -     1284]            move              #18,n0
868       P:0210 57E800  [4 -     1288]            move              x:(r0+n0),b
869       P:0211 20000B  [2 -     1290]            tst     b
870       P:0212 0AF0AA  [6 -     1296]            jeq     L110
                 000225
871       P:0214 44F400  [4 -     1300]            move              #>1,x0
                 000001
872                                      L40
873       P:0216 380D00  [2 -     1302]            move              #13,n0
874       P:0217 57E800  [4 -     1306]            move              x:(r0+n0),b
875       P:0218 200048  [2 -     1308]            add     x0,b
876       P:0219 556801  [4 -     1312]            tfr     b,a       b1,x:(r0+n0)
877       P:021A 381203  [2 -     1314]            tst     a         #18,n0
878       P:021B 57E800  [4 -     1318]            move              x:(r0+n0),b
879       P:021C 0AF0AA  [6 -     1324]            jeq     L121
                 000222
880       P:021E 21AF00  [2 -     1326]            move              b1,b
881       P:021F 06CE20  [4 -     1330]            rep     a
882       P:0220 20002A  [2 -     1332]            asr     b
883       P:0221 21AF00  [2 -     1334]            move              b1,b
884                                      L121
885       P:0222 20000B  [2 -     1336]            tst     b
886       P:0223 0AF0A2  [6 -     1342]            jne     L40
                 000216
887                                      L110
888                                      ; **************************************************
889                                      ; #ifdef __LOOPCOUNT__ 
890                                      ;     Loop2++;
891                                      ; #else
892                                      ;     ;
893                                      ; #endif
894                                      ;   MANT = MAG == 0 ? 1 << 5 : (MAG << 6) >> EXP;
895                                      ; **************************************************
896       P:0225 381200  [2 -     1344]            move              #18,n0
897       P:0226 57E800  [4 -     1348]            move              x:(r0+n0),b
898       P:0227 20000B  [2 -     1350]            tst     b
899       P:0228 0AF0A2  [6 -     1356]            jne     L42
                 000230
900       P:022A 380E00  [2 -     1358]            move              #14,n0
901       P:022B 46F400  [4 -     1362]            move              #>32,y0
                 000020
902       P:022D 466800  [4 -     1366]            move              y0,x:(r0+n0)
903       P:022E 0AF080  [6 -     1372]            jmp     L43
                 000242
904                                      L42
905       P:0230 381200  [2 -     1374]            move              #18,n0
906       P:0231 57E800  [4 -     1378]            move              x:(r0+n0),b
907       P:0232 0606A0  [4 -     1382]            rep     #6
908       P:0233 20003A  [2 -     1384]            asl     b
909       P:0234 380E00  [2 -     1386]            move              #14,n0
910       P:0235 21AF00  [2 -     1388]            move              b1,b
911       P:0236 556800  [4 -     1392]            move              b1,x:(r0+n0)
912       P:0237 380D00  [2 -     1394]            move              #13,n0
913       P:0238 56E800  [4 -     1398]            move              x:(r0+n0),a
914       P:0239 200003  [2 -     1400]            tst     a
915       P:023A 0AF0AA  [6 -     1406]            jeq     L122
                 000240
916       P:023C 21AF00  [2 -     1408]            move              b1,b
917       P:023D 06CE20  [4 -     1412]            rep     a
918       P:023E 20002A  [2 -     1414]            asr     b
919       P:023F 21AF00  [2 -     1416]            move              b1,b
920                                      L122
921       P:0240 380E00  [2 -     1418]            move              #14,n0
922       P:0241 556800  [4 -     1422]            move              b1,x:(r0+n0)
923                                      L43
924                                      ; **************************************************
925                                      ;   SR1 = ( (DQSEZ >> 15) << 10)  + (EXP << 6) + MANT;
926                                      ; **************************************************
927       P:0242 380800  [2 -     1424]            move              #8,n0
928       P:0243 57E800  [4 -     1428]            move              x:(r0+n0),b
929       P:0244 21AF00  [2 -     1430]            move              b1,b
930       P:0245 060FA0  [4 -     1434]            rep     #15
931       P:0246 20002A  [2 -     1436]            asr     b
932       P:0247 21AF00  [2 -     1438]            move              b1,b
933       P:0248 060AA0  [4 -     1442]            rep     #10
934       P:0249 20003A  [2 -     1444]            asl     b
935       P:024A 381300  [2 -     1446]            move              #19,n0
936       P:024B 21AF00  [2 -     1448]            move              b1,b
937       P:024C 556800  [4 -     1452]            move              b1,x:(r0+n0)
938       P:024D 380D00  [2 -     1454]            move              #13,n0
939       P:024E 57E800  [4 -     1458]            move              x:(r0+n0),b
940       P:024F 0606A0  [4 -     1462]            rep     #6
941       P:0250 20003A  [2 -     1464]            asl     b
942                                      ; **************************************************
943                                      ;   
944                                      ;   /* UPA2 */
945                                      ;   WA1 = PK0 ^  (*PK1) ;
946                                      ; **************************************************
947                                      ; **************************************************
948                                      ;   MAG = (PK0 ^  (*PK2) ) == 0 ? 16384 : 114688;
949                                      ; **************************************************
950       P:0251 381200  [2 -     1466]            move              #18,n0
951       P:0252 21AF00  [2 -     1468]            move              b1,b
952       P:0253 21A600  [2 -     1470]            move              b1,y0
953       P:0254 556800  [4 -     1474]            move              b1,x:(r0+n0)
954       P:0255 381300  [2 -     1476]            move              #19,n0
955       P:0256 57E800  [4 -     1480]            move              x:(r0+n0),b
956       P:0257 380E58  [2 -     1482]            add     y0,b      #14,n0
957       P:0258 21A700  [2 -     1484]            move              b1,y1
958       P:0259 46E800  [4 -     1488]            move              x:(r0+n0),y0
959       P:025A 70F458  [4 -     1492]            add     y0,b      #65525,n0
                 00FFF5
960       P:025C 21A700  [2 -     1494]            move              b1,y1
961       P:025D 64E800  [4 -     1498]            move              x:(r0+n0),r4
962       P:025E 380900  [2 -     1500]            move              #9,n0
963       P:025F 44E400  [2 -     1502]            move              x:(r4),x0
964       P:0260 57E800  [4 -     1506]            move              x:(r0+n0),b
965       P:0261 380B4B  [2 -     1508]            eor     x0,b      #11,n0
966       P:0262 21AF00  [2 -     1510]            move              b1,b
967       P:0263 556800  [4 -     1514]            move              b1,x:(r0+n0)
968       P:0264 70F400  [4 -     1518]            move              #65524,n0
                 00FFF4
969       P:0266 64E800  [4 -     1522]            move              x:(r0+n0),r4
970       P:0267 380900  [2 -     1524]            move              #9,n0
971       P:0268 44E400  [2 -     1526]            move              x:(r4),x0
972       P:0269 57E800  [4 -     1530]            move              x:(r0+n0),b
973       P:026A 20004B  [2 -     1532]            eor     x0,b
974       P:026B 21AF00  [2 -     1534]            move              b1,b
975       P:026C 20000B  [2 -     1536]            tst     b
976       P:026D 0AF0A2  [6 -     1542]            jne     L44
                 000273
977       P:026F 46F400  [4 -     1546]            move              #>16384,y0
                 004000
978       P:0271 0AF080  [6 -     1552]            jmp     L112
                 000275
979                                      L44
980       P:0273 46F400  [4 -     1556]            move              #>114688,y0
                 01C000
981                                      L112
982                                      ; **************************************************
983                                      ;   A1S =  (*A1)  >> 15;
984                                      ; **************************************************
985       P:0275 381200  [2 -     1558]            move              #18,n0
986       P:0276 466800  [4 -     1562]            move              y0,x:(r0+n0)
987       P:0277 380F00  [2 -     1564]            move              #15,n0
988       P:0278 46E100  [2 -     1566]            move              x:(r1),y0
989       P:0279 466859  [4 -     1570]            tfr     y0,b      y0,x:(r0+n0)
990       P:027A 21AF00  [2 -     1572]            move              b1,b
991       P:027B 060FA0  [4 -     1576]            rep     #15
992       P:027C 20002A  [2 -     1578]            asr     b
993                                      ; **************************************************
994                                      ;   if (A1S == 0)
995                                      ; **************************************************
996       P:027D 380A00  [2 -     1580]            move              #10,n0
997       P:027E 21AF00  [2 -     1582]            move              b1,b
998       P:027F 55680B  [4 -     1586]            tst     b         b1,x:(r0+n0)
999       P:0280 0AF0A2  [6 -     1592]            jne     L46
                 000293
1000                                     ; **************************************************
1001                                     ;     EXP =  (*A1)  <= 8191 ?  (*A1)  << 2 : 8191 << 2;
1002                                     ; **************************************************
1003      P:0282 380F00  [2 -     1594]            move              #15,n0
1004      P:0283 46F400  [4 -     1598]            move              #>8191,y0
                 001FFF
1005      P:0285 57E800  [4 -     1602]            move              x:(r0+n0),b
1006      P:0286 20005D  [2 -     1604]            cmp     y0,b
1007      P:0287 0AF0A7  [6 -     1610]            jgt     L47
                 00028F
1008      P:0289 380D3A  [2 -     1612]            asl     b         #13,n0
1009      P:028A 20003A  [2 -     1614]            asl     b
1010      P:028B 21AF00  [2 -     1616]            move              b1,b
1011      P:028C 556800  [4 -     1620]            move              b1,x:(r0+n0)
1012      P:028D 0AF080  [6 -     1626]            jmp     L49
                 0002A6
1013                                     L47
1014      P:028F 46F400  [4 -     1630]            move              #>32764,y0
                 007FFC
1015      P:0291 0AF080  [6 -     1636]            jmp     L113
                 0002A4
1016                                     L46
1017                                     ; **************************************************
1018                                     ;   else
1019                                     ;     EXP =  (*A1)  >= 57345 ? ( (*A1)  << 2) & 131071 : 24577 << 2;
1020                                     ; **************************************************
1021      P:0293 46E100  [2 -     1638]            move              x:(r1),y0
1022      P:0294 46F459  [4 -     1642]            tfr     y0,b      #>57344,y0
                 00E000
1023      P:0296 20005D  [2 -     1644]            cmp     y0,b
1024      P:0297 0AF0AF  [6 -     1650]            jle     L50
                 0002A2
1025      P:0299 380D3A  [2 -     1652]            asl     b         #13,n0
1026      P:029A 44F43A  [4 -     1656]            asl     b         #>131071,x0
                 01FFFF
1027      P:029C 21AF00  [2 -     1658]            move              b1,b
1028      P:029D 20004E  [2 -     1660]            and     x0,b
1029      P:029E 21AF00  [2 -     1662]            move              b1,b
1030      P:029F 556800  [4 -     1666]            move              b1,x:(r0+n0)
1031      P:02A0 0AF080  [6 -     1672]            jmp     L49
                 0002A6
1032                                     L50
1033      P:02A2 46F400  [4 -     1676]            move              #>98308,y0
                 018004
1034                                     L113
1035      P:02A4 380D00  [2 -     1678]            move              #13,n0
1036      P:02A5 466800  [4 -     1682]            move              y0,x:(r0+n0)
1037                                     L49
1038                                     ; **************************************************
1039                                     ;   EXP = WA1 == 1 ? EXP : (131072 - EXP) & 131071;
1040                                     ; **************************************************
1041      P:02A6 380B00  [2 -     1684]            move              #11,n0
1042      P:02A7 46F400  [4 -     1688]            move              #>1,y0
                 000001
1043      P:02A9 57E800  [4 -     1692]            move              x:(r0+n0),b
1044      P:02AA 20005D  [2 -     1694]            cmp     y0,b
1045      P:02AB 0AF0AA  [6 -     1700]            jeq     L53
                 0002B7
1046      P:02AD 380D00  [2 -     1702]            move              #13,n0
1047      P:02AE 44F400  [4 -     1706]            move              #>131071,x0
                 01FFFF
1048      P:02B0 46E800  [4 -     1710]            move              x:(r0+n0),y0
1049      P:02B1 57F400  [4 -     1714]            move              #>131072,b
                 020000
1050      P:02B3 20005C  [2 -     1716]            sub     y0,b
1051      P:02B4 55684E  [4 -     1720]            and     x0,b      b1,x:(r0+n0)
1052      P:02B5 21AF00  [2 -     1722]            move              b1,b
1053      P:02B6 556800  [4 -     1726]            move              b1,x:(r0+n0)
1054                                     L53
1055                                     ; **************************************************
1056                                     ;   MAG = (MAG + EXP) & 131071;
1057                                     ; **************************************************
1058                                     ; **************************************************
1059                                     ;   EXP = WA2 == 1 ? 0 :
1060                                     ;     ( (MAG >> 16) == 0)  ? MAG >> 7 : (MAG >> 7) + 64512;
1061                                     ; **************************************************
1062      P:02B7 381200  [2 -     1728]            move              #18,n0
1063      P:02B8 44F400  [4 -     1732]            move              #>131071,x0
                 01FFFF
1064      P:02BA 57E800  [4 -     1736]            move              x:(r0+n0),b
1065      P:02BB 380D00  [2 -     1738]            move              #13,n0
1066      P:02BC 46E800  [4 -     1742]            move              x:(r0+n0),y0
1067      P:02BD 381258  [2 -     1744]            add     y0,b      #18,n0
1068      P:02BE 46F44E  [4 -     1748]            and     x0,b      #>1,y0
                 000001
1069      P:02C0 21AF00  [2 -     1750]            move              b1,b
1070      P:02C1 556800  [4 -     1754]            move              b1,x:(r0+n0)
1071      P:02C2 380C00  [2 -     1756]            move              #12,n0
1072      P:02C3 57E800  [4 -     1760]            move              x:(r0+n0),b
1073      P:02C4 20005D  [2 -     1762]            cmp     y0,b
1074      P:02C5 0AF0A2  [6 -     1768]            jne     L54
                 0002CC
1075      P:02C7 380D00  [2 -     1770]            move              #13,n0
1076      P:02C8 260000  [2 -     1772]            move              #0,y0
1077      P:02C9 466800  [4 -     1776]            move              y0,x:(r0+n0)
1078      P:02CA 0AF080  [6 -     1782]            jmp     L55
                 0002E8
1079                                     L54
1080      P:02CC 381200  [2 -     1784]            move              #18,n0
1081      P:02CD 56E800  [4 -     1788]            move              x:(r0+n0),a
1082      P:02CE 218E00  [2 -     1790]            move              a1,a
1083      P:02CF 0610A0  [4 -     1794]            rep     #16
1084      P:02D0 200022  [2 -     1796]            asr     a
1085      P:02D1 218E00  [2 -     1798]            move              a1,a
1086      P:02D2 200003  [2 -     1800]            tst     a
1087      P:02D3 0AF0A2  [6 -     1806]            jne     L56
                 0002DC
1088      P:02D5 57E800  [4 -     1810]            move              x:(r0+n0),b
1089      P:02D6 21AF00  [2 -     1812]            move              b1,b
1090      P:02D7 0607A0  [4 -     1816]            rep     #7
1091      P:02D8 20002A  [2 -     1818]            asr     b
1092      P:02D9 21AF00  [2 -     1820]            move              b1,b
1093      P:02DA 0AF080  [6 -     1826]            jmp     L114
                 0002E6
1094                                     L56
1095      P:02DC 381200  [2 -     1828]            move              #18,n0
1096      P:02DD 57E800  [4 -     1832]            move              x:(r0+n0),b
1097      P:02DE 21AF00  [2 -     1834]            move              b1,b
1098      P:02DF 0607A0  [4 -     1838]            rep     #7
1099      P:02E0 20002A  [2 -     1840]            asr     b
1100      P:02E1 380D00  [2 -     1842]            move              #13,n0
1101      P:02E2 46F400  [4 -     1846]            move              #>64512,y0
                 00FC00
1102      P:02E4 21AF00  [2 -     1848]            move              b1,b
1103      P:02E5 556858  [4 -     1852]            add     y0,b      b1,x:(r0+n0)
1104                                     L114
1105      P:02E6 380D00  [2 -     1854]            move              #13,n0
1106      P:02E7 556800  [4 -     1858]            move              b1,x:(r0+n0)
1107                                     L55
1108                                     ; **************************************************
1109                                     ;   MANT = ( (*A2)  >> 15) == 0 ? (65536 - ( (*A2)  >> 7)) & 65535 :
1110                                     ;     (65536 - (( (*A2)  >> 7) + 65024)) & 65535;
1111                                     ; **************************************************
1112      P:02E8 70F400  [4 -     1862]            move              #65521,n0
                 00FFF1
1113      P:02EA 64E800  [4 -     1866]            move              x:(r0+n0),r4
1114      P:02EB 381200  [2 -     1868]            move              #18,n0
1115      P:02EC 46E400  [2 -     1870]            move              x:(r4),y0
1116      P:02ED 466859  [4 -     1874]            tfr     y0,b      y0,x:(r0+n0)
1117      P:02EE 21AF00  [2 -     1876]            move              b1,b
1118      P:02EF 060FA0  [4 -     1880]            rep     #15
1119      P:02F0 20002A  [2 -     1882]            asr     b
1120      P:02F1 21AF00  [2 -     1884]            move              b1,b
1121      P:02F2 20000B  [2 -     1886]            tst     b
1122      P:02F3 0AF0A2  [6 -     1892]            jne     L58
                 000302
1123      P:02F5 57E800  [4 -     1896]            move              x:(r0+n0),b
1124      P:02F6 21AF00  [2 -     1898]            move              b1,b
1125      P:02F7 0607A0  [4 -     1902]            rep     #7
1126      P:02F8 20002A  [2 -     1904]            asr     b
1127      P:02F9 381300  [2 -     1906]            move              #19,n0
1128      P:02FA 21AF00  [2 -     1908]            move              b1,b
1129      P:02FB 21A600  [2 -     1910]            move              b1,y0
1130      P:02FC 556800  [4 -     1914]            move              b1,x:(r0+n0)
1131      P:02FD 57F400  [4 -     1918]            move              #>65536,b
                 010000
1132      P:02FF 20005C  [2 -     1920]            sub     y0,b
1133      P:0300 0AF080  [6 -     1926]            jmp     L115
                 000313
1134                                     L58
1135      P:0302 70F400  [4 -     1930]            move              #65521,n0
                 00FFF1
1136      P:0304 64E800  [4 -     1934]            move              x:(r0+n0),r4
1137      P:0305 46E400  [2 -     1936]            move              x:(r4),y0
1138      P:0306 200059  [2 -     1938]            tfr     y0,b
1139      P:0307 21AF00  [2 -     1940]            move              b1,b
1140      P:0308 0607A0  [4 -     1944]            rep     #7
1141      P:0309 20002A  [2 -     1946]            asr     b
1142      P:030A 381300  [2 -     1948]            move              #19,n0
1143      P:030B 21AF00  [2 -     1950]            move              b1,b
1144      P:030C 21A600  [2 -     1952]            move              b1,y0
1145      P:030D 556800  [4 -     1956]            move              b1,x:(r0+n0)
1146      P:030E 380E00  [2 -     1958]            move              #14,n0
1147      P:030F 57F400  [4 -     1962]            move              #>512,b
                 000200
1148      P:0311 20005C  [2 -     1964]            sub     y0,b
1149      P:0312 556800  [4 -     1968]            move              b1,x:(r0+n0)
1150                                     L115
1151                                     ; **************************************************
1152                                     ;   EXP = (EXP + MANT) & 65535;
1153                                     ; **************************************************
1154                                     ; **************************************************
1155                                     ;   EXP = ( (*A2)  + EXP) & 65535;
1156                                     ; **************************************************
1157                                     ; **************************************************
1158                                     ;   
1159                                     ;   /* LIMC */
1160                                     ;   AP = 32768 <= EXP && EXP <= 53248 ? 53248 :
1161                                     ;     12288 <= EXP && EXP <= 32767 ? 12288 : EXP;
1162                                     ; **************************************************
1163      P:0313 380E00  [2 -     1970]            move              #14,n0
1164      P:0314 44F400  [4 -     1974]            move              #>65535,x0
                 00FFFF
1165      P:0316 44F44E  [4 -     1978]            and     x0,b      #>65535,x0
                 00FFFF
1166      P:0318 21AF00  [2 -     1980]            move              b1,b
1167      P:0319 556800  [4 -     1984]            move              b1,x:(r0+n0)
1168      P:031A 380D00  [2 -     1986]            move              #13,n0
1169      P:031B 57E800  [4 -     1990]            move              x:(r0+n0),b
1170      P:031C 380E00  [2 -     1992]            move              #14,n0
1171      P:031D 46E800  [4 -     1996]            move              x:(r0+n0),y0
1172      P:031E 70F458  [4 -     2000]            add     y0,b      #65521,n0
                 00FFF1
1173      P:0320 20004E  [2 -     2002]            and     x0,b
1174      P:0321 64E800  [4 -     2006]            move              x:(r0+n0),r4
1175      P:0322 381300  [2 -     2008]            move              #19,n0
1176      P:0323 46E400  [2 -     2010]            move              x:(r4),y0
1177      P:0324 21AF00  [2 -     2012]            move              b1,b
1178      P:0325 466858  [4 -     2016]            add     y0,b      y0,x:(r0+n0)
1179      P:0326 380D4E  [2 -     2018]            and     x0,b      #13,n0
1180      P:0327 21AF00  [2 -     2020]            move              b1,b
1181      P:0328 46F400  [4 -     2024]            move              #>32767,y0
                 007FFF
1182      P:032A 55685D  [4 -     2028]            cmp     y0,b      b1,x:(r0+n0)
1183      P:032B 0AF0AF  [6 -     2034]            jle     L60
                 000335
1184      P:032D 44F400  [4 -     2038]            move              #>53248,x0
                 00D000
1185      P:032F 20004D  [2 -     2040]            cmp     x0,b
1186      P:0330 0AF0A7  [6 -     2046]            jgt     L60
                 000335
1187      P:0332 208500  [2 -     2048]            move              x0,x1
1188      P:0333 0AF080  [6 -     2054]            jmp     L61
                 000347
1189                                     L60
1190      P:0335 380D00  [2 -     2056]            move              #13,n0
1191      P:0336 46F400  [4 -     2060]            move              #>12287,y0
                 002FFF
1192      P:0338 57E800  [4 -     2064]            move              x:(r0+n0),b
1193      P:0339 20005D  [2 -     2066]            cmp     y0,b
1194      P:033A 0AF0AF  [6 -     2072]            jle     L62
                 000345
1195      P:033C 46F400  [4 -     2076]            move              #>32767,y0
                 007FFF
1196      P:033E 20005D  [2 -     2078]            cmp     y0,b
1197      P:033F 0AF0A7  [6 -     2084]            jgt     L62
                 000345
1198      P:0341 45F400  [4 -     2088]            move              #>12288,x1
                 003000
1199      P:0343 0AF080  [6 -     2094]            jmp     L61
                 000347
1200                                     L62
1201      P:0345 380D00  [2 -     2096]            move              #13,n0
1202      P:0346 45E800  [4 -     2100]            move              x:(r0+n0),x1
1203                                     L61
1204                                     ; **************************************************
1205                                     ;   
1206                                     ;   /* TRIGB */
1207                                     ;   A2R = *T == 0 ? AP : 0;
1208                                     ; **************************************************
1209      P:0347 70F400  [4 -     2104]            move              #65532,n0
                 00FFFC
1210      P:0349 64E800  [4 -     2108]            move              x:(r0+n0),r4
1211      P:034A 381300  [2 -     2110]            move              #19,n0
1212      P:034B 46E400  [2 -     2112]            move              x:(r4),y0
1213      P:034C 466859  [4 -     2116]            tfr     y0,b      y0,x:(r0+n0)
1214      P:034D 20000B  [2 -     2118]            tst     b
1215      P:034E 0AF0A2  [6 -     2124]            jne     L64
                 000354
1216      P:0350 381400  [2 -     2126]            move              #20,n0
1217      P:0351 456800  [4 -     2130]            move              x1,x:(r0+n0)
1218      P:0352 0AF080  [6 -     2136]            jmp     L65
                 000357
1219                                     L64
1220      P:0354 381400  [2 -     2138]            move              #20,n0
1221      P:0355 260000  [2 -     2140]            move              #0,y0
1222      P:0356 466800  [4 -     2144]            move              y0,x:(r0+n0)
1223                                     L65
1224                                     ; **************************************************
1225                                     ;   
1226                                     ;   /* UPA1 */
1227                                     ;   EXP = WA2 == 1 ? 0 : (WA1 == 0 ? 192 : 65344);
1228                                     ; **************************************************
1229      P:0357 380C00  [2 -     2146]            move              #12,n0
1230      P:0358 46F400  [4 -     2150]            move              #>1,y0
                 000001
1231      P:035A 57E800  [4 -     2154]            move              x:(r0+n0),b
1232      P:035B 20005D  [2 -     2156]            cmp     y0,b
1233      P:035C 0AF0A2  [6 -     2162]            jne     L66
                 000361
1234      P:035E 260000  [2 -     2164]            move              #0,y0
1235      P:035F 0AF080  [6 -     2170]            jmp     L116
                 00036C
1236                                     L66
1237      P:0361 380B00  [2 -     2172]            move              #11,n0
1238      P:0362 57E800  [4 -     2176]            move              x:(r0+n0),b
1239      P:0363 20000B  [2 -     2178]            tst     b
1240      P:0364 0AF0A2  [6 -     2184]            jne     L68
                 00036A
1241      P:0366 46F400  [4 -     2188]            move              #>192,y0
                 0000C0
1242      P:0368 0AF080  [6 -     2194]            jmp     L116
                 00036C
1243                                     L68
1244      P:036A 46F400  [4 -     2198]            move              #>65344,y0
                 00FF40
1245                                     L116
1246                                     ; **************************************************
1247                                     ;   MANT = A1S == 0 ? (65536 - ( (*A1)  >> 8)) & 65535 :
1248                                     ;     (65536 - (( (*A1)  >> 8) + 65280)) & 65535;
1249                                     ; **************************************************
1250      P:036C 380D00  [2 -     2200]            move              #13,n0
1251      P:036D 466800  [4 -     2204]            move              y0,x:(r0+n0)
1252      P:036E 380A00  [2 -     2206]            move              #10,n0
1253      P:036F 57E800  [4 -     2210]            move              x:(r0+n0),b
1254      P:0370 20000B  [2 -     2212]            tst     b
1255      P:0371 0AF0A2  [6 -     2218]            jne     L70
                 000381
1256      P:0373 46E100  [2 -     2220]            move              x:(r1),y0
1257      P:0374 200059  [2 -     2222]            tfr     y0,b
1258      P:0375 21AF00  [2 -     2224]            move              b1,b
1259      P:0376 0608A0  [4 -     2228]            rep     #8
1260      P:0377 20002A  [2 -     2230]            asr     b
1261      P:0378 381300  [2 -     2232]            move              #19,n0
1262      P:0379 21AF00  [2 -     2234]            move              b1,b
1263      P:037A 21A600  [2 -     2236]            move              b1,y0
1264      P:037B 556800  [4 -     2240]            move              b1,x:(r0+n0)
1265      P:037C 57F400  [4 -     2244]            move              #>65536,b
                 010000
1266      P:037E 20005C  [2 -     2246]            sub     y0,b
1267      P:037F 0AF080  [6 -     2252]            jmp     L117
                 00038F
1268                                     L70
1269      P:0381 46E100  [2 -     2254]            move              x:(r1),y0
1270      P:0382 200059  [2 -     2256]            tfr     y0,b
1271      P:0383 21AF00  [2 -     2258]            move              b1,b
1272      P:0384 0608A0  [4 -     2262]            rep     #8
1273      P:0385 20002A  [2 -     2264]            asr     b
1274      P:0386 381300  [2 -     2266]            move              #19,n0
1275      P:0387 21AF00  [2 -     2268]            move              b1,b
1276      P:0388 21A600  [2 -     2270]            move              b1,y0
1277      P:0389 556800  [4 -     2274]            move              b1,x:(r0+n0)
1278      P:038A 380E00  [2 -     2276]            move              #14,n0
1279      P:038B 57F400  [4 -     2280]            move              #>256,b
                 000100
1280      P:038D 20005C  [2 -     2282]            sub     y0,b
1281      P:038E 556800  [4 -     2286]            move              b1,x:(r0+n0)
1282                                     L117
1283                                     ; **************************************************
1284                                     ;   EXP = (EXP + MANT) & 65535;
1285                                     ; **************************************************
1286                                     ; **************************************************
1287                                     ;   EXP = ( (*A1)  + EXP) & 65535;
1288                                     ; **************************************************
1289                                     ; **************************************************
1290                                     ;   
1291                                     ;   /* FMULT */
1292                                     ;   WA2 = f_mult(A2R,  (*SR2) ) ; 
1293                                     ; **************************************************
1294      P:038F 380E00  [2 -     2288]            move              #14,n0
1295      P:0390 44F400  [4 -     2292]            move              #>65535,x0
                 00FFFF
1296      P:0392 44F44E  [4 -     2296]            and     x0,b      #>65535,x0
                 00FFFF
1297      P:0394 21AF00  [2 -     2298]            move              b1,b
1298      P:0395 556800  [4 -     2302]            move              b1,x:(r0+n0)
1299      P:0396 380D00  [2 -     2304]            move              #13,n0
1300      P:0397 57E800  [4 -     2308]            move              x:(r0+n0),b
1301      P:0398 380E00  [2 -     2310]            move              #14,n0
1302      P:0399 46E800  [4 -     2314]            move              x:(r0+n0),y0
1303      P:039A 380D58  [2 -     2316]            add     y0,b      #13,n0
1304      P:039B 46E14E  [2 -     2318]            and     x0,b      x:(r1),y0
1305      P:039C 21AF00  [2 -     2320]            move              b1,b
1306      P:039D 200058  [2 -     2322]            add     y0,b
1307      P:039E 20004E  [2 -     2324]            and     x0,b
1308      P:039F 21AF00  [2 -     2326]            move              b1,b
1309      P:03A0 556800  [4 -     2330]            move              b1,x:(r0+n0)
1310      P:03A1 70F400  [4 -     2334]            move              #65523,n0
                 00FFF3
1311      P:03A3 64E800  [4 -     2338]            move              x:(r0+n0),r4
1312      P:03A4 381300  [2 -     2340]            move              #19,n0
1313      P:03A5 46E400  [2 -     2342]            move              x:(r4),y0
1314      P:03A6 466800  [4 -     2346]            move              y0,x:(r0+n0)
1315      P:03A7 381400  [2 -     2348]            move              #20,n0
1316      P:03A8 465E00  [2 -     2350]            move              y0,x:(r6)+
1317      P:03A9 46E800  [4 -     2354]            move              x:(r0+n0),y0
1318      P:03AA 465E00  [2 -     2356]            move              y0,x:(r6)+
1319      P:03AB 0BF080  [6 -     2362]            jsr     Ff_mult
                 000000
1320                                     ; **************************************************
1321                                     ;  
1322                                     ;   /* LIMD */
1323                                     ;   MAG = (15360 + 65536 - AP) & 65535;
1324                                     ; **************************************************
1325                                     ; **************************************************
1326                                     ;    (*A1)  = (AP + 65536 - 15360) & 65535;
1327                                     ; **************************************************
1328                                     ; **************************************************
1329                                     ;   AP = 32768 <= EXP && EXP <=  (*A1)  ?  (*A1)  :
1330                                     ;     MAG <= EXP && EXP <= 32767 ? MAG : EXP;
1331                                     ; **************************************************
1332      P:03AD 380C00  [2 -     2364]            move              #12,n0
1333      P:03AE 46F400  [4 -     2368]            move              #>50176,y0
                 00C400
1334      P:03B0 57F400  [4 -     2372]            move              #>80896,b
                 013C00
1335      P:03B2 54686C  [4 -     2376]            sub     x1,b      a1,x:(r0+n0)
1336      P:03B3 38124E  [2 -     2378]            and     x0,b      #18,n0
1337      P:03B4 21AF00  [2 -     2380]            move              b1,b
1338      P:03B5 556869  [4 -     2384]            tfr     x1,b      b1,x:(r0+n0)
1339      P:03B6 381158  [2 -     2386]            add     y0,b      #17,n0
1340      P:03B7 20564E  [2 -     2388]            and     x0,b      (r6)-
1341      P:03B8 21AF00  [2 -     2390]            move              b1,b
1342      P:03B9 21A600  [2 -     2392]            move              b1,y0
1343      P:03BA 556800  [4 -     2396]            move              b1,x:(r0+n0)
1344      P:03BB 380D00  [2 -     2398]            move              #13,n0
1345      P:03BC 466100  [2 -     2400]            move              y0,x:(r1)
1346      P:03BD 57E800  [4 -     2404]            move              x:(r0+n0),b
1347      P:03BE 46F400  [4 -     2408]            move              #>32767,y0
                 007FFF
1348      P:03C0 20565D  [2 -     2410]            cmp     y0,b      (r6)-
1349      P:03C1 0AF0AF  [6 -     2416]            jle     L72
                 0003CB
1350      P:03C3 381100  [2 -     2418]            move              #17,n0
1351      P:03C4 46E800  [4 -     2422]            move              x:(r0+n0),y0
1352      P:03C5 20005D  [2 -     2424]            cmp     y0,b
1353      P:03C6 0AF0A7  [6 -     2430]            jgt     L72
                 0003CB
1354      P:03C8 45E800  [4 -     2434]            move              x:(r0+n0),x1
1355      P:03C9 0AF080  [6 -     2440]            jmp     L73
                 0003DE
1356                                     L72
1357      P:03CB 381200  [2 -     2442]            move              #18,n0
1358      P:03CC 57E800  [4 -     2446]            move              x:(r0+n0),b
1359      P:03CD 380D00  [2 -     2448]            move              #13,n0
1360      P:03CE 46E800  [4 -     2452]            move              x:(r0+n0),y0
1361      P:03CF 20005D  [2 -     2454]            cmp     y0,b
1362      P:03D0 0AF0A7  [6 -     2460]            jgt     L74
                 0003DC
1363      P:03D2 46F400  [4 -     2464]            move              #>32767,y0
                 007FFF
1364      P:03D4 57E800  [4 -     2468]            move              x:(r0+n0),b
1365      P:03D5 20005D  [2 -     2470]            cmp     y0,b
1366      P:03D6 0AF0A7  [6 -     2476]            jgt     L74
                 0003DC
1367      P:03D8 381200  [2 -     2478]            move              #18,n0
1368      P:03D9 45E800  [4 -     2482]            move              x:(r0+n0),x1
1369      P:03DA 0AF080  [6 -     2488]            jmp     L73
                 0003DE
1370                                     L74
1371      P:03DC 380D00  [2 -     2490]            move              #13,n0
1372      P:03DD 45E800  [4 -     2494]            move              x:(r0+n0),x1
1373                                     L73
1374                                     ; **************************************************
1375                                     ;   
1376                                     ;   /* TRIGB */
1377                                     ;    (*A1)  = *T == 0 ? AP : 0;
1378                                     ; **************************************************
1379      P:03DE 70F400  [4 -     2498]            move              #65532,n0
                 00FFFC
1380      P:03E0 64E800  [4 -     2502]            move              x:(r0+n0),r4
1381      P:03E1 381300  [2 -     2504]            move              #19,n0
1382      P:03E2 46E400  [2 -     2506]            move              x:(r4),y0
1383      P:03E3 466859  [4 -     2510]            tfr     y0,b      y0,x:(r0+n0)
1384      P:03E4 20000B  [2 -     2512]            tst     b
1385      P:03E5 0AF0A2  [6 -     2518]            jne     L76
                 0003EA
1386      P:03E7 20A400  [2 -     2520]            move              x1,x0
1387      P:03E8 0AF080  [6 -     2526]            jmp     L77
                 0003EB
1388                                     L76
1389      P:03EA 240000  [2 -     2528]            move              #0,x0
1390                                     L77
1391                                     ; **************************************************
1392                                     ;   
1393                                     ;   /* FMULT */
1394                                     ;   WA1 = f_mult( (*A1) , SR1);
1395                                     ; **************************************************
1396      P:03EB 446100  [2 -     2530]            move              x0,x:(r1)
1397      P:03EC 475E00  [2 -     2532]            move              y1,x:(r6)+
1398      P:03ED 445E00  [2 -     2534]            move              x0,x:(r6)+
1399      P:03EE 0BF080  [6 -     2540]            jsr     Ff_mult
                 000000
1400                                     ; **************************************************
1401                                     ;   
1402                                     ;   /* FLOATA */
1403                                     ;   MAG = *DQ & 16383;
1404                                     ; **************************************************
1405                                     ; **************************************************
1406                                     ;   for (EXP = 0; (MAG >> EXP) != 0; EXP++)
1407                                     ; **************************************************
1408      P:03F0 380B00  [2 -     2542]            move              #11,n0
1409      P:03F1 44F400  [4 -     2546]            move              #>16383,x0
                 003FFF
1410      P:03F3 546800  [4 -     2550]            move              a1,x:(r0+n0)
1411      P:03F4 381300  [2 -     2552]            move              #19,n0
1412      P:03F5 46E200  [2 -     2554]            move              x:(r2),y0
1413      P:03F6 466859  [4 -     2558]            tfr     y0,b      y0,x:(r0+n0)
1414      P:03F7 38124E  [2 -     2560]            and     x0,b      #18,n0
1415      P:03F8 21AF00  [2 -     2562]            move              b1,b
1416      P:03F9 26000B  [2 -     2564]            tst     b         #0,y0
1417      P:03FA 556800  [4 -     2568]            move              b1,x:(r0+n0)
1418      P:03FB 380D00  [2 -     2570]            move              #13,n0
1419      P:03FC 205600  [2 -     2572]            move              (r6)-
1420      P:03FD 205600  [2 -     2574]            move              (r6)-
1421      P:03FE 466800  [4 -     2578]            move              y0,x:(r0+n0)
1422      P:03FF 0AF0AA  [6 -     2584]            jeq     L109
                 000412
1423      P:0401 44F400  [4 -     2588]            move              #>1,x0
                 000001
1424                                     L80
1425      P:0403 380D00  [2 -     2590]            move              #13,n0
1426      P:0404 57E800  [4 -     2594]            move              x:(r0+n0),b
1427      P:0405 200048  [2 -     2596]            add     x0,b
1428      P:0406 556801  [4 -     2600]            tfr     b,a       b1,x:(r0+n0)
1429      P:0407 381203  [2 -     2602]            tst     a         #18,n0
1430      P:0408 57E800  [4 -     2606]            move              x:(r0+n0),b
1431      P:0409 0AF0AA  [6 -     2612]            jeq     L123
                 00040F
1432      P:040B 21AF00  [2 -     2614]            move              b1,b
1433      P:040C 06CE20  [4 -     2618]            rep     a
1434      P:040D 20002A  [2 -     2620]            asr     b
1435      P:040E 21AF00  [2 -     2622]            move              b1,b
1436                                     L123
1437      P:040F 20000B  [2 -     2624]            tst     b
1438      P:0410 0AF0A2  [6 -     2630]            jne     L80
                 000403
1439                                     L109
1440                                     ; **************************************************
1441                                     ; #ifdef __LOOPCOUNT__ 
1442                                     ;     Loop3++;
1443                                     ; #else
1444                                     ;     ;
1445                                     ; #endif
1446                                     ;   MANT = MAG == 0 ? 1 << 5 : (MAG << 6) >> EXP;
1447                                     ; **************************************************
1448      P:0412 381200  [2 -     2632]            move              #18,n0
1449      P:0413 57E800  [4 -     2636]            move              x:(r0+n0),b
1450      P:0414 20000B  [2 -     2638]            tst     b
1451      P:0415 0AF0A2  [6 -     2644]            jne     L82
                 00041D
1452      P:0417 380E00  [2 -     2646]            move              #14,n0
1453      P:0418 46F400  [4 -     2650]            move              #>32,y0
                 000020
1454      P:041A 466800  [4 -     2654]            move              y0,x:(r0+n0)
1455      P:041B 0AF080  [6 -     2660]            jmp     L83
                 00042F
1456                                     L82
1457      P:041D 381200  [2 -     2662]            move              #18,n0
1458      P:041E 57E800  [4 -     2666]            move              x:(r0+n0),b
1459      P:041F 0606A0  [4 -     2670]            rep     #6
1460      P:0420 20003A  [2 -     2672]            asl     b
1461      P:0421 380E00  [2 -     2674]            move              #14,n0
1462      P:0422 21AF00  [2 -     2676]            move              b1,b
1463      P:0423 556800  [4 -     2680]            move              b1,x:(r0+n0)
1464      P:0424 380D00  [2 -     2682]            move              #13,n0
1465      P:0425 56E800  [4 -     2686]            move              x:(r0+n0),a
1466      P:0426 200003  [2 -     2688]            tst     a
1467      P:0427 0AF0AA  [6 -     2694]            jeq     L124
                 00042D
1468      P:0429 21AF00  [2 -     2696]            move              b1,b
1469      P:042A 06CE20  [4 -     2700]            rep     a
1470      P:042B 20002A  [2 -     2702]            asr     b
1471      P:042C 21AF00  [2 -     2704]            move              b1,b
1472                                     L124
1473      P:042D 380E00  [2 -     2706]            move              #14,n0
1474      P:042E 556800  [4 -     2710]            move              b1,x:(r0+n0)
1475                                     L83
1476                                     ; **************************************************
1477                                     ;   DQSEZ = (DQS << 10) + (EXP << 6) + MANT;
1478                                     ; **************************************************
1479      P:042F 380600  [2 -     2712]            move              #6,n0
1480      P:0430 57E800  [4 -     2716]            move              x:(r0+n0),b
1481      P:0431 060AA0  [4 -     2720]            rep     #10
1482      P:0432 20003A  [2 -     2722]            asl     b
1483      P:0433 381300  [2 -     2724]            move              #19,n0
1484      P:0434 21AF00  [2 -     2726]            move              b1,b
1485      P:0435 556800  [4 -     2730]            move              b1,x:(r0+n0)
1486      P:0436 380D00  [2 -     2732]            move              #13,n0
1487      P:0437 57E800  [4 -     2736]            move              x:(r0+n0),b
1488      P:0438 0606A0  [4 -     2740]            rep     #6
1489      P:0439 20003A  [2 -     2742]            asl     b
1490                                     ; **************************************************
1491                                     ;   
1492                                     ;   /* XOR */
1493                                     ;   BP[0] = DQS ^ ( (*DQ2)  >> 10);
1494                                     ; **************************************************
1495      P:043A 381200  [2 -     2744]            move              #18,n0
1496      P:043B 21AF00  [2 -     2746]            move              b1,b
1497      P:043C 21A600  [2 -     2748]            move              b1,y0
1498      P:043D 556800  [4 -     2752]            move              b1,x:(r0+n0)
1499      P:043E 381300  [2 -     2754]            move              #19,n0
1500      P:043F 57E800  [4 -     2758]            move              x:(r0+n0),b
1501      P:0440 380E58  [2 -     2760]            add     y0,b      #14,n0
1502      P:0441 46E800  [4 -     2764]            move              x:(r0+n0),y0
1503      P:0442 380858  [2 -     2766]            add     y0,b      #8,n0
1504      P:0443 556800  [4 -     2770]            move              b1,x:(r0+n0)
1505      P:0444 70F400  [4 -     2774]            move              #65531,n0
                 00FFFB
1506      P:0446 64E800  [4 -     2778]            move              x:(r0+n0),r4
1507      P:0447 46E400  [2 -     2780]            move              x:(r4),y0
1508      P:0448 200059  [2 -     2782]            tfr     y0,b
1509      P:0449 21AF00  [2 -     2784]            move              b1,b
1510      P:044A 060AA0  [4 -     2788]            rep     #10
1511      P:044B 20002A  [2 -     2790]            asr     b
1512                                     ; **************************************************
1513                                     ;   BP[1] = DQS ^ ( (*DQ3)  >> 10);
1514                                     ; **************************************************
1515      P:044C 380600  [2 -     2792]            move              #6,n0
1516      P:044D 21AF00  [2 -     2794]            move              b1,b
1517      P:044E 21A400  [2 -     2796]            move              b1,x0
1518      P:044F 57E800  [4 -     2800]            move              x:(r0+n0),b
1519      P:0450 70F44B  [4 -     2804]            eor     x0,b      #65530,n0
                 00FFFA
1520      P:0452 21AF00  [2 -     2806]            move              b1,b
1521      P:0453 21A600  [2 -     2808]            move              b1,y0
1522      P:0454 466000  [2 -     2810]            move              y0,x:(r0)
1523      P:0455 64E800  [4 -     2814]            move              x:(r0+n0),r4
1524      P:0456 46E400  [2 -     2816]            move              x:(r4),y0
1525      P:0457 200059  [2 -     2818]            tfr     y0,b
1526      P:0458 21AF00  [2 -     2820]            move              b1,b
1527      P:0459 060AA0  [4 -     2824]            rep     #10
1528      P:045A 20002A  [2 -     2826]            asr     b
1529                                     ; **************************************************
1530                                     ;   BP[2] = DQS ^ ( (*DQ4)  >> 10);
1531                                     ; **************************************************
1532      P:045B 380600  [2 -     2828]            move              #6,n0
1533      P:045C 21AF00  [2 -     2830]            move              b1,b
1534      P:045D 21A400  [2 -     2832]            move              b1,x0
1535      P:045E 57E800  [4 -     2836]            move              x:(r0+n0),b
1536      P:045F 20584B  [2 -     2838]            eor     x0,b      (r0)+
1537      P:0460 21AF00  [2 -     2840]            move              b1,b
1538      P:0461 21A600  [2 -     2842]            move              b1,y0
1539      P:0462 465000  [2 -     2844]            move              y0,x:(r0)-
1540      P:0463 46E700  [2 -     2846]            move              x:(r7),y0
1541      P:0464 200059  [2 -     2848]            tfr     y0,b
1542      P:0465 21AF00  [2 -     2850]            move              b1,b
1543      P:0466 060AA0  [4 -     2854]            rep     #10
1544      P:0467 20002A  [2 -     2856]            asr     b
1545                                     ; **************************************************
1546                                     ;   BP[3] = DQS ^ ( (*DQ5)  >> 10);
1547                                     ; **************************************************
1548      P:0468 21AF00  [2 -     2858]            move              b1,b
1549      P:0469 21A400  [2 -     2860]            move              b1,x0
1550      P:046A 57E800  [4 -     2864]            move              x:(r0+n0),b
1551      P:046B 38024B  [2 -     2866]            eor     x0,b      #2,n0
1552      P:046C 21AF00  [2 -     2868]            move              b1,b
1553      P:046D 21A600  [2 -     2870]            move              b1,y0
1554      P:046E 466800  [4 -     2874]            move              y0,x:(r0+n0)
1555      P:046F 70F400  [4 -     2878]            move              #65528,n0
                 00FFF8
1556      P:0471 64E800  [4 -     2882]            move              x:(r0+n0),r4
1557      P:0472 46E400  [2 -     2884]            move              x:(r4),y0
1558      P:0473 200059  [2 -     2886]            tfr     y0,b
1559      P:0474 21AF00  [2 -     2888]            move              b1,b
1560      P:0475 060AA0  [4 -     2892]            rep     #10
1561      P:0476 20002A  [2 -     2894]            asr     b
1562                                     ; **************************************************
1563                                     ;   BP[4] = DQS ^ ( (*DQ6)  >> 10);
1564                                     ; **************************************************
1565      P:0477 380600  [2 -     2896]            move              #6,n0
1566      P:0478 21AF00  [2 -     2898]            move              b1,b
1567      P:0479 21A400  [2 -     2900]            move              b1,x0
1568      P:047A 57E800  [4 -     2904]            move              x:(r0+n0),b
1569      P:047B 38034B  [2 -     2906]            eor     x0,b      #3,n0
1570      P:047C 21AF00  [2 -     2908]            move              b1,b
1571      P:047D 21A600  [2 -     2910]            move              b1,y0
1572      P:047E 466800  [4 -     2914]            move              y0,x:(r0+n0)
1573      P:047F 46E500  [2 -     2916]            move              x:(r5),y0
1574      P:0480 200059  [2 -     2918]            tfr     y0,b
1575      P:0481 21AF00  [2 -     2920]            move              b1,b
1576      P:0482 060AA0  [4 -     2924]            rep     #10
1577      P:0483 20002A  [2 -     2926]            asr     b
1578                                     ; **************************************************
1579                                     ;   BP[5] = DQS ^ ( (*DQ7)  >> 10);
1580                                     ; **************************************************
1581      P:0484 380600  [2 -     2928]            move              #6,n0
1582      P:0485 21AF00  [2 -     2930]            move              b1,b
1583      P:0486 21A400  [2 -     2932]            move              b1,x0
1584      P:0487 57E800  [4 -     2936]            move              x:(r0+n0),b
1585      P:0488 38044B  [2 -     2938]            eor     x0,b      #4,n0
1586      P:0489 21AF00  [2 -     2940]            move              b1,b
1587      P:048A 21A600  [2 -     2942]            move              b1,y0
1588      P:048B 466800  [4 -     2946]            move              y0,x:(r0+n0)
1589      P:048C 70F400  [4 -     2950]            move              #65526,n0
                 00FFF6
1590      P:048E 64E800  [4 -     2954]            move              x:(r0+n0),r4
1591      P:048F 46E400  [2 -     2956]            move              x:(r4),y0
1592      P:0490 200059  [2 -     2958]            tfr     y0,b
1593      P:0491 21AF00  [2 -     2960]            move              b1,b
1594      P:0492 060AA0  [4 -     2964]            rep     #10
1595      P:0493 20002A  [2 -     2966]            asr     b
1596                                     ; **************************************************
1597                                     ;   
1598                                     ;   /* UPB */
1599                                     ;   MANT = *DQ & 16383;
1600                                     ; **************************************************
1601                                     ; **************************************************
1602                                     ;   for (EXP = 0; EXP < 6; EXP++)
1603                                     ; **************************************************
1604      P:0494 380600  [2 -     2968]            move              #6,n0
1605      P:0495 45F400  [4 -     2972]            move              #>1,x1
                 000001
1606      P:0497 21AF00  [2 -     2974]            move              b1,b
1607      P:0498 21A400  [2 -     2976]            move              b1,x0
1608      P:0499 57E800  [4 -     2980]            move              x:(r0+n0),b
1609      P:049A 38054B  [2 -     2982]            eor     x0,b      #5,n0
1610      P:049B 21AF00  [2 -     2984]            move              b1,b
1611      P:049C 21A600  [2 -     2986]            move              b1,y0
1612      P:049D 44F400  [4 -     2990]            move              #>16383,x0
                 003FFF
1613      P:049F 466800  [4 -     2994]            move              y0,x:(r0+n0)
1614      P:04A0 381300  [2 -     2996]            move              #19,n0
1615      P:04A1 46E200  [2 -     2998]            move              x:(r2),y0
1616      P:04A2 221259  [2 -     3000]            tfr     y0,b      r0,r2
1617      P:04A3 44F44E  [4 -     3004]            and     x0,b      #>65535,x0
                 00FFFF
1618      P:04A5 21AF00  [2 -     3006]            move              b1,b
1619      P:04A6 466800  [4 -     3010]            move              y0,x:(r0+n0)
1620      P:04A7 380E00  [2 -     3012]            move              #14,n0
1621      P:04A8 260000  [2 -     3014]            move              #0,y0
1622      P:04A9 556800  [4 -     3018]            move              b1,x:(r0+n0)
1623      P:04AA 380D00  [2 -     3020]            move              #13,n0
1624      P:04AB 466800  [4 -     3024]            move              y0,x:(r0+n0)
1625      P:04AC 060680  [6 -     3030]            do      #6,L108
                 00050F
1626                                     L93
1627                                     ; **************************************************
1628                                     ;     {
1629                                     ; #ifdef __LOOPCOUNT__ 
1630                                     ;       Loop4++;
1631                                     ; #endif
1632                                     ;       DQS = MANT == 0 ? 0 : (BP[EXP] == 0 ? 128 : 65408);
1633                                     ; **************************************************
1634      P:04AE 380E00  [2 -     3032]            move              #14,n0
1635      P:04AF 57E800  [4 -     3036]            move              x:(r0+n0),b
1636      P:04B0 20000B  [2 -     3038]            tst     b
1637      P:04B1 0AF0A2  [6 -     3044]            jne     L87
                 0004B6
1638      P:04B3 260000  [2 -     3046]            move              #0,y0
1639      P:04B4 0AF080  [6 -     3052]            jmp     L118
                 0004C3
1640                                     L87
1641      P:04B6 56E200  [2 -     3054]            move              x:(r2),a
1642      P:04B7 200003  [2 -     3056]            tst     a
1643      P:04B8 0AF0A2  [6 -     3062]            jne     L89
                 0004BE
1644      P:04BA 46F400  [4 -     3066]            move              #>128,y0
                 000080
1645      P:04BC 0AF080  [6 -     3072]            jmp     L119
                 0004C0
1646                                     L89
1647      P:04BE 46F400  [4 -     3076]            move              #>65408,y0
                 00FF80
1648                                     L119
1649      P:04C0 381300  [2 -     3078]            move              #19,n0
1650      P:04C1 466800  [4 -     3082]            move              y0,x:(r0+n0)
1651      P:04C2 46E800  [4 -     3086]            move              x:(r0+n0),y0
1652                                     L118
1653                                     ; **************************************************
1654                                     ;       MAG = B[EXP] >> 15;
1655                                     ; **************************************************
1656      P:04C3 381300  [2 -     3088]            move              #19,n0
1657      P:04C4 226F00  [2 -     3090]            move              r3,b
1658      P:04C5 466800  [4 -     3094]            move              y0,x:(r0+n0)
1659      P:04C6 46E800  [4 -     3098]            move              x:(r0+n0),y0
1660      P:04C7 380600  [2 -     3100]            move              #6,n0
1661      P:04C8 466800  [4 -     3104]            move              y0,x:(r0+n0)
1662      P:04C9 380D00  [2 -     3106]            move              #13,n0
1663      P:04CA 46E800  [4 -     3110]            move              x:(r0+n0),y0
1664      P:04CB 381358  [2 -     3112]            add     y0,b      #19,n0
1665      P:04CC 21B100  [2 -     3114]            move              b1,r1
1666      P:04CD 46E100  [2 -     3116]            move              x:(r1),y0
1667      P:04CE 466859  [4 -     3120]            tfr     y0,b      y0,x:(r0+n0)
1668      P:04CF 21AF00  [2 -     3122]            move              b1,b
1669      P:04D0 060FA0  [4 -     3126]            rep     #15
1670      P:04D1 20002A  [2 -     3128]            asr     b
1671                                     ; **************************************************
1672                                     ;       DQS += MAG == 0 ? (65536 - (B[EXP] >> 8)) & 65535 :
1673                                     ;       (65536 - ((B[EXP] >> 8) + 65280)) & 65535;
1674                                     ; **************************************************
1675      P:04D2 381200  [2 -     3130]            move              #18,n0
1676      P:04D3 21AF00  [2 -     3132]            move              b1,b
1677      P:04D4 55680B  [4 -     3136]            tst     b         b1,x:(r0+n0)
1678      P:04D5 0AF0A2  [6 -     3142]            jne     L91
                 0004E2
1679      P:04D7 381300  [2 -     3144]            move              #19,n0
1680      P:04D8 57E800  [4 -     3148]            move              x:(r0+n0),b
1681      P:04D9 21AF00  [2 -     3150]            move              b1,b
1682      P:04DA 0608A0  [4 -     3154]            rep     #8
1683      P:04DB 20002A  [2 -     3156]            asr     b
1684      P:04DC 21AF00  [2 -     3158]            move              b1,b
1685      P:04DD 21A600  [2 -     3160]            move              b1,y0
1686      P:04DE 57F400  [4 -     3164]            move              #>65536,b
                 010000
1687      P:04E0 0AF080  [6 -     3170]            jmp     L120
                 0004F0
1688                                     L91
1689      P:04E2 380D00  [2 -     3172]            move              #13,n0
1690      P:04E3 226F00  [2 -     3174]            move              r3,b
1691      P:04E4 46E800  [4 -     3178]            move              x:(r0+n0),y0
1692      P:04E5 200058  [2 -     3180]            add     y0,b
1693      P:04E6 21B100  [2 -     3182]            move              b1,r1
1694      P:04E7 46E100  [2 -     3184]            move              x:(r1),y0
1695      P:04E8 200059  [2 -     3186]            tfr     y0,b
1696      P:04E9 21AF00  [2 -     3188]            move              b1,b
1697      P:04EA 0608A0  [4 -     3192]            rep     #8
1698      P:04EB 20002A  [2 -     3194]            asr     b
1699      P:04EC 21AF00  [2 -     3196]            move              b1,b
1700      P:04ED 21A600  [2 -     3198]            move              b1,y0
1701      P:04EE 57F400  [4 -     3202]            move              #>256,b
                 000100
1702                                     L120
1703                                     ; **************************************************
1704                                     ;       DQS &= 65535;
1705                                     ; **************************************************
1706                                     ; **************************************************
1707                                     ;       BP[EXP] = (B[EXP] + DQS) & 65535;
1708                                     ; **************************************************
1709                                     ; **************************************************
1710                                     ; **************************************************
1711      P:04F0 38135C  [2 -     3204]            sub     y0,b      #19,n0
1712      P:04F1 20004E  [2 -     3206]            and     x0,b
1713      P:04F2 21AF00  [2 -     3208]            move              b1,b
1714      P:04F3 556800  [4 -     3212]            move              b1,x:(r0+n0)
1715      P:04F4 380600  [2 -     3214]            move              #6,n0
1716      P:04F5 57E800  [4 -     3218]            move              x:(r0+n0),b
1717      P:04F6 381300  [2 -     3220]            move              #19,n0
1718      P:04F7 46E800  [4 -     3224]            move              x:(r0+n0),y0
1719      P:04F8 380658  [2 -     3226]            add     y0,b      #6,n0
1720      P:04F9 20004E  [2 -     3228]            and     x0,b
1721      P:04FA 21AF00  [2 -     3230]            move              b1,b
1722      P:04FB 556800  [4 -     3234]            move              b1,x:(r0+n0)
1723      P:04FC 380D00  [2 -     3236]            move              #13,n0
1724      P:04FD 226F00  [2 -     3238]            move              r3,b
1725      P:04FE 46E800  [4 -     3242]            move              x:(r0+n0),y0
1726      P:04FF 380658  [2 -     3244]            add     y0,b      #6,n0
1727      P:0500 21B100  [2 -     3246]            move              b1,r1
1728      P:0501 57E800  [4 -     3250]            move              x:(r0+n0),b
1729      P:0502 381300  [2 -     3252]            move              #19,n0
1730      P:0503 46E100  [2 -     3254]            move              x:(r1),y0
1731      P:0504 200058  [2 -     3256]            add     y0,b
1732      P:0505 20004E  [2 -     3258]            and     x0,b
1733      P:0506 21AF00  [2 -     3260]            move              b1,b
1734      P:0507 21A600  [2 -     3262]            move              b1,y0
1735      P:0508 556800  [4 -     3266]            move              b1,x:(r0+n0)
1736      P:0509 380D00  [2 -     3268]            move              #13,n0
1737      P:050A 224F00  [2 -     3270]            move              r2,b
1738      P:050B 466268  [2 -     3272]            add     x1,b      y0,x:(r2)
1739      P:050C 21B200  [2 -     3274]            move              b1,r2
1740      P:050D 57E800  [4 -     3278]            move              x:(r0+n0),b
1741      P:050E 200068  [2 -     3280]            add     x1,b
1742      P:050F 556800  [4 -     3284]            move              b1,x:(r0+n0)
1743                                     L108
1744                                     ; **************************************************
1745                                     ;     }
1746                                     ;   
1747                                     ;   /* TRIGB */
1748                                     ;   if (*T != 0)
1749                                     ; **************************************************
1750      P:0510 70F400  [4 -     3288]            move              #65532,n0
                 00FFFC
1751      P:0512 64E800  [4 -     3292]            move              x:(r0+n0),r4
1752      P:0513 381300  [2 -     3294]            move              #19,n0
1753      P:0514 46E400  [2 -     3296]            move              x:(r4),y0
1754      P:0515 466859  [4 -     3300]            tfr     y0,b      y0,x:(r0+n0)
1755      P:0516 20000B  [2 -     3302]            tst     b
1756      P:0517 0AF0AA  [6 -     3308]            jeq     L94
                 00051F
1757                                     ; **************************************************
1758                                     ;     for (EXP = 0; EXP < 6; EXP++)
1759                                     ; **************************************************
1760      P:0519 221100  [2 -     3310]            move              r0,r1
1761      P:051A 240000  [2 -     3312]            move              #0,x0
1762      P:051B 060680  [6 -     3318]            do      #6,L106
                 00051D
1763                                     L98
1764                                     ; **************************************************
1765                                     ; #ifdef __LOOPCOUNT__ 
1766                                     ;     {
1767                                     ;       Loop5++;
1768                                     ;       BP[EXP] = 0 ;
1769                                     ;     }
1770                                     ; #else
1771                                     ;       BP[EXP] = 0 ;
1772                                     ; **************************************************
1773                                     ; **************************************************
1774                                     ; **************************************************
1775      P:051D 445900  [2 -     3320]            move              x0,x:(r1)+
1776                                     L106
1777      P:051E 000000  [2 -     3322]            nop
1778                                     L94
1779                                     ; **************************************************
1780                                     ; #endif
1781                                     ;   
1782                                     ;   /* FMULT */
1783                                     ;   DQI  = f_mult(BP[0], DQSEZ);
1784                                     ; **************************************************
1785      P:051F 380800  [2 -     3324]            move              #8,n0
1786      P:0520 61F400  [4 -     3328]            move              #Ff_mult,r1
                 000000
1787      P:0522 46E800  [4 -     3332]            move              x:(r0+n0),y0
1788      P:0523 465E00  [2 -     3334]            move              y0,x:(r6)+
1789      P:0524 46E000  [2 -     3336]            move              x:(r0),y0
1790      P:0525 465E00  [2 -     3338]            move              y0,x:(r6)+
1791      P:0526 0BE180  [4 -     3342]            jsr     (r1)
1792                                     ; **************************************************
1793                                     ;   MAG  = f_mult(BP[1], (*DQ2));
1794                                     ; **************************************************
1795      P:0527 380700  [2 -     3344]            move              #7,n0
1796      P:0528 205600  [2 -     3346]            move              (r6)-
1797      P:0529 546800  [4 -     3350]            move              a1,x:(r0+n0)
1798      P:052A 57E800  [4 -     3354]            move              x:(r0+n0),b
1799      P:052B 70F400  [4 -     3358]            move              #65531,n0
                 00FFFB
1800      P:052D 205600  [2 -     3360]            move              (r6)-
1801      P:052E 64E800  [4 -     3364]            move              x:(r0+n0),r4
1802      P:052F 205800  [2 -     3366]            move              (r0)+
1803      P:0530 46E400  [2 -     3368]            move              x:(r4),y0
1804      P:0531 465E00  [2 -     3370]            move              y0,x:(r6)+
1805      P:0532 46D000  [2 -     3372]            move              x:(r0)-,y0
1806      P:0533 465E00  [2 -     3374]            move              y0,x:(r6)+
1807      P:0534 0BE180  [4 -     3378]            jsr     (r1)
1808                                     ; **************************************************
1809                                     ;   MANT = f_mult(BP[2], (*DQ3));
1810                                     ; **************************************************
1811      P:0535 381200  [2 -     3380]            move              #18,n0
1812      P:0536 205600  [2 -     3382]            move              (r6)-
1813      P:0537 546800  [4 -     3386]            move              a1,x:(r0+n0)
1814      P:0538 70F400  [4 -     3390]            move              #65530,n0
                 00FFFA
1815      P:053A 205600  [2 -     3392]            move              (r6)-
1816      P:053B 64E800  [4 -     3396]            move              x:(r0+n0),r4
1817      P:053C 380200  [2 -     3398]            move              #2,n0
1818      P:053D 46E400  [2 -     3400]            move              x:(r4),y0
1819      P:053E 465E00  [2 -     3402]            move              y0,x:(r6)+
1820      P:053F 46E800  [4 -     3406]            move              x:(r0+n0),y0
1821      P:0540 465E00  [2 -     3408]            move              y0,x:(r6)+
1822      P:0541 0BE180  [4 -     3412]            jsr     (r1)
1823                                     ; **************************************************
1824                                     ;   A1S  = f_mult(BP[3], (*DQ4));
1825                                     ; **************************************************
1826      P:0542 380E00  [2 -     3414]            move              #14,n0
1827      P:0543 205600  [2 -     3416]            move              (r6)-
1828      P:0544 546800  [4 -     3420]            move              a1,x:(r0+n0)
1829      P:0545 380300  [2 -     3422]            move              #3,n0
1830      P:0546 46E700  [2 -     3424]            move              x:(r7),y0
1831      P:0547 205600  [2 -     3426]            move              (r6)-
1832      P:0548 465E00  [2 -     3428]            move              y0,x:(r6)+
1833      P:0549 46E800  [4 -     3432]            move              x:(r0+n0),y0
1834      P:054A 465E00  [2 -     3434]            move              y0,x:(r6)+
1835      P:054B 0BE180  [4 -     3438]            jsr     (r1)
1836                                     ; **************************************************
1837                                     ;   AP   = f_mult(BP[4], (*DQ5));
1838                                     ; **************************************************
1839      P:054C 380A00  [2 -     3440]            move              #10,n0
1840      P:054D 205600  [2 -     3442]            move              (r6)-
1841      P:054E 546800  [4 -     3446]            move              a1,x:(r0+n0)
1842      P:054F 70F400  [4 -     3450]            move              #65528,n0
                 00FFF8
1843      P:0551 205600  [2 -     3452]            move              (r6)-
1844      P:0552 64E800  [4 -     3456]            move              x:(r0+n0),r4
1845      P:0553 380400  [2 -     3458]            move              #4,n0
1846      P:0554 46E400  [2 -     3460]            move              x:(r4),y0
1847      P:0555 465E00  [2 -     3462]            move              y0,x:(r6)+
1848      P:0556 46E800  [4 -     3466]            move              x:(r0+n0),y0
1849      P:0557 465E00  [2 -     3468]            move              y0,x:(r6)+
1850      P:0558 0BE180  [4 -     3472]            jsr     (r1)
1851                                     ; **************************************************
1852                                     ;   EXP  = f_mult(BP[5], (*DQ6));
1853                                     ; **************************************************
1854      P:0559 380500  [2 -     3474]            move              #5,n0
1855      P:055A 46E500  [2 -     3476]            move              x:(r5),y0
1856      P:055B 218500  [2 -     3478]            move              a1,x1
1857      P:055C 205600  [2 -     3480]            move              (r6)-
1858      P:055D 205600  [2 -     3482]            move              (r6)-
1859      P:055E 465E00  [2 -     3484]            move              y0,x:(r6)+
1860      P:055F 46E800  [4 -     3488]            move              x:(r0+n0),y0
1861      P:0560 465E00  [2 -     3490]            move              y0,x:(r6)+
1862      P:0561 0BE180  [4 -     3494]            jsr     (r1)
1863                                     ; **************************************************
1864                                     ;   
1865                                     ;   /* ACCUM */
1866                                     ;   DQS = (DQI + MAG + MANT + A1S + AP + EXP) & 65535;
1867                                     ; **************************************************
1868                                     ; **************************************************
1869                                     ;   (*SEZ)  = DQS >> 1;
1870                                     ; **************************************************
1871                                     ; **************************************************
1872                                     ;   S_E =  (*SE)  = ((DQS + WA2 + WA1) & 65535 ) >> 1;
1873                                     ; **************************************************
1874                                     ; **************************************************
1875                                     ;   
1876                                     ;   /* STATE update */
1877                                     ;   (*PK2) = (*PK1);
1878                                     ; **************************************************
1879      P:0562 380D00  [2 -     3496]            move              #13,n0
1880      P:0563 44F400  [4 -     3500]            move              #>65535,x0
                 00FFFF
1881      P:0565 546800  [4 -     3504]            move              a1,x:(r0+n0)
1882      P:0566 381200  [2 -     3506]            move              #18,n0
1883      P:0567 205600  [2 -     3508]            move              (r6)-
1884      P:0568 46E800  [4 -     3512]            move              x:(r0+n0),y0
1885      P:0569 380E58  [2 -     3514]            add     y0,b      #14,n0
1886      P:056A 205600  [2 -     3516]            move              (r6)-
1887      P:056B 46E800  [4 -     3520]            move              x:(r0+n0),y0
1888      P:056C 380A58  [2 -     3522]            add     y0,b      #10,n0
1889      P:056D 46E800  [4 -     3526]            move              x:(r0+n0),y0
1890      P:056E 380D58  [2 -     3528]            add     y0,b      #13,n0
1891      P:056F 200068  [2 -     3530]            add     x1,b
1892      P:0570 46E800  [4 -     3534]            move              x:(r0+n0),y0
1893      P:0571 380658  [2 -     3536]            add     y0,b      #6,n0
1894      P:0572 20004E  [2 -     3538]            and     x0,b
1895      P:0573 21AF00  [2 -     3540]            move              b1,b
1896      P:0574 556800  [4 -     3544]            move              b1,x:(r0+n0)
1897      P:0575 70F400  [4 -     3548]            move              #65518,n0
                 00FFEE
1898      P:0577 21AF00  [2 -     3550]            move              b1,b
1899      P:0578 64E82A  [4 -     3554]            asr     b         x:(r0+n0),r4
1900      P:0579 380600  [2 -     3556]            move              #6,n0
1901      P:057A 21AF00  [2 -     3558]            move              b1,b
1902      P:057B 21A600  [2 -     3560]            move              b1,y0
1903      P:057C 466400  [2 -     3562]            move              y0,x:(r4)
1904      P:057D 57E800  [4 -     3566]            move              x:(r0+n0),b
1905      P:057E 380C00  [2 -     3568]            move              #12,n0
1906      P:057F 46E800  [4 -     3572]            move              x:(r0+n0),y0
1907      P:0580 380B58  [2 -     3574]            add     y0,b      #11,n0
1908      P:0581 46E800  [4 -     3578]            move              x:(r0+n0),y0
1909      P:0582 70F458  [4 -     3582]            add     y0,b      #65519,n0
                 00FFEF
1910      P:0584 20004E  [2 -     3584]            and     x0,b
1911      P:0585 64E800  [4 -     3588]            move              x:(r0+n0),r4
1912      P:0586 70F400  [4 -     3592]            move              #65525,n0
                 00FFF5
1913      P:0588 21AF00  [2 -     3594]            move              b1,b
1914      P:0589 21AF00  [2 -     3596]            move              b1,b
1915      P:058A 20002A  [2 -     3598]            asr     b
1916      P:058B 21AF00  [2 -     3600]            move              b1,b
1917      P:058C 21A600  [2 -     3602]            move              b1,y0
1918      P:058D 466400  [2 -     3604]            move              y0,x:(r4)
1919      P:058E 467000  [4 -     3608]            move              y0,x:FS_E
                 00006A
1920      P:0590 64E800  [4 -     3612]            move              x:(r0+n0),r4
1921      P:0591 46E400  [2 -     3614]            move              x:(r4),y0
1922                                     ; **************************************************
1923                                     ;   (*PK1) = PK0;
1924                                     ; **************************************************
1925                                     ; **************************************************
1926                                     ;   (*SR2) = SR1;
1927                                     ; **************************************************
1928                                     ; **************************************************
1929                                     ;   A_2 = (*A2) = A2R;
1930                                     ; **************************************************
1931                                     ; **************************************************
1932                                     ; 
1933                                     ;   for (EXP = 0; EXP < 6; EXP++)
1934                                     ; **************************************************
1935      P:0592 381300  [2 -     3616]            move              #19,n0
1936      P:0593 221100  [2 -     3618]            move              r0,r1
1937      P:0594 227200  [2 -     3620]            move              r3,r2
1938      P:0595 466800  [4 -     3624]            move              y0,x:(r0+n0)
1939      P:0596 70F400  [4 -     3628]            move              #65524,n0
                 00FFF4
1940      P:0598 64E800  [4 -     3632]            move              x:(r0+n0),r4
1941      P:0599 70F400  [4 -     3636]            move              #65525,n0
                 00FFF5
1942      P:059B 466400  [2 -     3638]            move              y0,x:(r4)
1943      P:059C 64E800  [4 -     3642]            move              x:(r0+n0),r4
1944      P:059D 380900  [2 -     3644]            move              #9,n0
1945      P:059E 46E800  [4 -     3648]            move              x:(r0+n0),y0
1946      P:059F 70F400  [4 -     3652]            move              #65523,n0
                 00FFF3
1947      P:05A1 466400  [2 -     3654]            move              y0,x:(r4)
1948      P:05A2 64E800  [4 -     3658]            move              x:(r0+n0),r4
1949      P:05A3 70F400  [4 -     3662]            move              #65521,n0
                 00FFF1
1950      P:05A5 476400  [2 -     3664]            move              y1,x:(r4)
1951      P:05A6 64E800  [4 -     3668]            move              x:(r0+n0),r4
1952      P:05A7 381400  [2 -     3670]            move              #20,n0
1953      P:05A8 46E800  [4 -     3674]            move              x:(r0+n0),y0
1954      P:05A9 466400  [2 -     3676]            move              y0,x:(r4)
1955      P:05AA 467000  [4 -     3680]            move              y0,x:FA_2
                 00006F
1956      P:05AC 060680  [6 -     3686]            do      #6,L104
                 0005AF
1957                                     L102
1958                                     ; **************************************************
1959                                     ; #ifdef __LOOPCOUNT__
1960                                     ;   {
1961                                     ;     Loop6++;
1962                                     ;     B[EXP] = BP[EXP];
1963                                     ;   }
1964                                     ; #else
1965                                     ;     B[EXP] = BP[EXP];
1966                                     ; **************************************************
1967                                     ; **************************************************
1968                                     ; **************************************************
1969      P:05AE 56D900  [2 -     3688]            move              x:(r1)+,a
1970      P:05AF 545A00  [2 -     3690]            move              a1,x:(r2)+
1971                                     L104
1972                                     ; **************************************************
1973                                     ; #endif
1974                                     ; 
1975                                     ;   (*DQ7) = (*DQ6);
1976                                     ; **************************************************
1977                                     ; **************************************************
1978                                     ;   (*DQ6) = (*DQ5);
1979                                     ; **************************************************
1980                                     ; **************************************************
1981                                     ;   (*DQ5) = (*DQ4);
1982                                     ; **************************************************
1983                                     ; **************************************************
1984                                     ;   (*DQ4) = (*DQ3);
1985                                     ; **************************************************
1986                                     ; **************************************************
1987                                     ;   (*DQ3) = (*DQ2);
1988                                     ; **************************************************
1989                                     ; **************************************************
1990                                     ;   (*DQ2) = DQSEZ;
1991                                     ; **************************************************
1992                                     ; **************************************************
1993                                     ; }
1994                                     ; **************************************************
1995      P:05B0 70F400  [4 -     3694]            move              #65526,n0
                 00FFF6
1996      P:05B2 46E500  [2 -     3696]            move              x:(r5),y0
1997      P:05B3 64E800  [4 -     3700]            move              x:(r0+n0),r4
1998      P:05B4 70F400  [4 -     3704]            move              #65528,n0
                 00FFF8
1999      P:05B6 466400  [2 -     3706]            move              y0,x:(r4)
2000      P:05B7 64E800  [4 -     3710]            move              x:(r0+n0),r4
2001      P:05B8 70F400  [4 -     3714]            move              #65530,n0
                 00FFFA
2002      P:05BA 46E400  [2 -     3716]            move              x:(r4),y0
2003      P:05BB 205600  [2 -     3718]            move              (r6)-
2004      P:05BC 466500  [2 -     3720]            move              y0,x:(r5)
2005      P:05BD 46E700  [2 -     3722]            move              x:(r7),y0
2006      P:05BE 466400  [2 -     3724]            move              y0,x:(r4)
2007      P:05BF 64E800  [4 -     3728]            move              x:(r0+n0),r4
2008      P:05C0 70F400  [4 -     3732]            move              #65531,n0
                 00FFFB
2009      P:05C2 46E400  [2 -     3734]            move              x:(r4),y0
2010      P:05C3 466700  [2 -     3736]            move              y0,x:(r7)
2011      P:05C4 64E800  [4 -     3740]            move              x:(r0+n0),r4
2012      P:05C5 381300  [2 -     3742]            move              #19,n0
2013      P:05C6 46E400  [2 -     3744]            move              x:(r4),y0
2014      P:05C7 466800  [4 -     3748]            move              y0,x:(r0+n0)
2015      P:05C8 70F400  [4 -     3752]            move              #65530,n0
                 00FFFA
2016      P:05CA 64E800  [4 -     3756]            move              x:(r0+n0),r4
2017      P:05CB 70F400  [4 -     3760]            move              #65531,n0
                 00FFFB
2018      P:05CD 466400  [2 -     3762]            move              y0,x:(r4)
2019      P:05CE 64E800  [4 -     3766]            move              x:(r0+n0),r4
2020      P:05CF 380800  [2 -     3768]            move              #8,n0
2021      P:05D0 46E800  [4 -     3772]            move              x:(r0+n0),y0
2022      P:05D1 466400  [2 -     3774]            move              y0,x:(r4)
2023      P:05D2 67D600  [2 -     3776]            move              x:(r6)-,r7
2024      P:05D3 65D600  [2 -     3778]            move              x:(r6)-,r5
2025      P:05D4 64D600  [2 -     3780]            move              x:(r6)-,r4
2026      P:05D5 63D600  [2 -     3782]            move              x:(r6)-,r3
2027      P:05D6 62D600  [2 -     3784]            move              x:(r6)-,r2
2028      P:05D7 61D600  [2 -     3786]            move              x:(r6)-,r1
2029      P:05D8 47D600  [2 -     3788]            move              x:(r6)-,y1
2030      P:05D9 46D600  [2 -     3790]            move              x:(r6)-,y0
2031      P:05DA 45D600  [2 -     3792]            move              x:(r6)-,x1
2032      P:05DB 44D600  [2 -     3794]            move              x:(r6)-,x0
2033      P:05DC 57D600  [2 -     3796]            move              x:(r6)-,b
2034      P:05DD 51E600  [2 -     3798]            move              x:(r6),b0
2035      P:05DE 205000  [2 -     3800]            move              (r0)-
2036      P:05DF 05D03C  [2 -     3802]            move              x:(r0)-,ssh
2037      P:05E0 221600  [2 -     3804]            move              r0,r6
2038      P:05E1 60E000  [2 -     3806]            move              x:(r0),r0
2039      P:05E2 00000C  [4 -     3810]            rts
2040   
2041                                               global  Fcoding_adj
2042                                     Fcoding_adj
2043                                     ; **************************************************
2044                                     ; **************************************************
2045                                     ; **************************************************
2046                                     ; 
2047                                     ; void coding_adj(void)
2048                                     ; {
2049                                     ;   /*
2050                                     ;    * coding_adjustment
2051                                     ;    *
2052                                     ;    * Input signals:  I, SP, S_E, Y
2053                                     ;    * Output signals: SD
2054                                     ;    */
2055                                     ; 
2056                                     ;   /* Just passing a SP (16TC) through */
2057                                     ;   /* rest of the signals is ignored */
2058                                     ;   SD = SP;
2059                                     ; **************************************************
2060                                     ; **************************************************
2061                                     ; }
2062                                     ; **************************************************
2063      P:05E3 56F000  [4 -     3814]            move              x:FSP,a
                 000068
2064      P:05E5 547000  [4 -     3818]            move              a1,x:FSD
                 00006B
2065      P:05E7 00000C  [4 -     3822]            rts
2066   
2067      X:003C                                   org     x:
2068                                     F___qtab0
2069      X:003C                                   dc      2048
2070      X:003D                                   dc      4
2071      X:003E                                   dc      135
2072      X:003F                                   dc      213
2073      X:0040                                   dc      273
2074      X:0041                                   dc      323
2075      X:0042                                   dc      373
2076      X:0043                                   dc      425
2077      X:0044                                   dc      425
2078      X:0045                                   dc      373
2079      X:0046                                   dc      323
2080      X:0047                                   dc      273
2081      X:0048                                   dc      213
2082      X:0049                                   dc      135
2083      X:004A                                   dc      4
2084      X:004B                                   dc      2048
2085      P:05E8                                   org     p:
2086                                               global  Fiadpt_quant
2087                                     Fiadpt_quant
2088                                     ; **************************************************
2089                                     ; **************************************************
2090                                     ; **************************************************
2091                                     ; 
2092                                     ; void iadpt_quant(int* DQ, int* Y)
2093                                     ; {
2094                                     ;   /*
2095                                     ;    * inverse adaptive quantizer
2096                                     ;    * 
2097                                     ;    * Input signals:  I, Y
2098                                     ;    * Output signals: DQ
2099                                     ;    */
2100                                     ;  
2101                                     ;   static int qtab[] =
2102                                     ;   {
2103                                     ;     2048, 4, 135, 213, 273, 323, 373, 425,
2104                                     ;     425, 373, 323, 273, 213, 135, 4, 2048,
2105                                     ;   } ;
2106                                     ;   register int DQL;
2107                                     ; 
2108                                     ;   /* RECONST and ADDA */
2109                                     ;   DQL = (qtab[I] + (*Y >> 2)) & 4095;
2110                                     ; **************************************************
2111                                     ; **************************************************
2112                                     ; 
2113                                     ;   /* ANTILOG */
2114                                     ;   *DQ = ((I & (1 << 3)) * (1 << 11)) +
2115                                     ;         (DQL & (1 << 11) ? 0 :
2116                                     ;         (((1 << 7) + (DQL & 127)) << 7) >>
2117                                     ;         (14 - ((DQL >> 7) & 15)));
2118                                     ; **************************************************
2119      P:05E8 70F400  [4 -     3826]            move              #65532,n0
                 00FFFC
2120      P:05EA 3E0300  [2 -     3828]            move              #3,n6
2121      P:05EB 605E00  [2 -     3830]            move              r0,x:(r6)+
2122      P:05EC 205E00  [2 -     3832]            move              (r6)+
2123      P:05ED 22D000  [2 -     3834]            move              r6,r0
2124      P:05EE 204E00  [2 -     3836]            move              (r6)+n6
2125      P:05EF 515E00  [2 -     3838]            move              b0,x:(r6)+
2126      P:05F0 555E00  [2 -     3840]            move              b1,x:(r6)+
2127      P:05F1 445E00  [2 -     3842]            move              x0,x:(r6)+
2128      P:05F2 455E00  [2 -     3844]            move              x1,x:(r6)+
2129      P:05F3 615E00  [2 -     3846]            move              r1,x:(r6)+
2130      P:05F4 61F400  [4 -     3850]            move              #F___qtab0,r1
                 00003C
2131      P:05F6 625E00  [2 -     3852]            move              r2,x:(r6)+
2132      P:05F7 62E800  [4 -     3856]            move              x:(r0+n0),r2
2133      P:05F8 222F00  [2 -     3858]            move              r1,b
2134      P:05F9 45E200  [2 -     3860]            move              x:(r2),x1
2135      P:05FA 56F000  [4 -     3864]            move              x:FI,a
                 00006C
2136      P:05FC 200018  [2 -     3866]            add     a,b
2137      P:05FD 21B169  [2 -     3868]            tfr     x1,b      b1,r1
2138      P:05FE 21AF00  [2 -     3870]            move              b1,b
2139      P:05FF 44E12A  [2 -     3872]            asr     b         x:(r1),x0
2140      P:0600 20002A  [2 -     3874]            asr     b
2141      P:0601 21AF00  [2 -     3876]            move              b1,b
2142      P:0602 44F448  [4 -     3880]            add     x0,b      #>4095,x0
                 000FFF
2143      P:0604 44F44E  [4 -     3884]            and     x0,b      #>8,x0
                 000008
2144      P:0606 21AF46  [2 -     3886]            and     x0,a      b1,b
2145      P:0607 218E00  [2 -     3888]            move              a1,a
2146      P:0608 218500  [2 -     3890]            move              a1,x1
2147      P:0609 44F400  [4 -     3894]            move              #>2048,x0
                 000800
2148      P:060B 5560A8  [2 -     3896]            mpy     +x0,x1,b  b1,x:(r0)
2149      P:060C 20582A  [2 -     3898]            asr     b         (r0)+
2150      P:060D 212F00  [2 -     3900]            move              b0,b
2151      P:060E 555000  [2 -     3902]            move              b1,x:(r0)-
2152      P:060F 56E000  [2 -     3904]            move              x:(r0),a
2153      P:0610 200046  [2 -     3906]            and     x0,a
2154      P:0611 218E00  [2 -     3908]            move              a1,a
2155      P:0612 200003  [2 -     3910]            tst     a
2156      P:0613 0AF0A2  [6 -     3916]            jne     L127
                 000638
2157      P:0615 45F400  [4 -     3920]            move              #>128,x1
                 000080
2158      P:0617 56E000  [2 -     3922]            move              x:(r0),a
2159      P:0618 44F400  [4 -     3926]            move              #>127,x0
                 00007F
2160      P:061A 200046  [2 -     3928]            and     x0,a
2161      P:061B 218E00  [2 -     3930]            move              a1,a
2162      P:061C 200060  [2 -     3932]            add     x1,a
2163      P:061D 0607A0  [4 -     3936]            rep     #7
2164      P:061E 200032  [2 -     3938]            asl     a
2165      P:061F 57E000  [2 -     3940]            move              x:(r0),b
2166      P:0620 21AF00  [2 -     3942]            move              b1,b
2167      P:0621 218E00  [2 -     3944]            move              a1,a
2168      P:0622 0607A0  [4 -     3948]            rep     #7
2169      P:0623 20002A  [2 -     3950]            asr     b
2170      P:0624 44F400  [4 -     3954]            move              #>15,x0
                 00000F
2171      P:0626 21AF00  [2 -     3956]            move              b1,b
2172      P:0627 20004E  [2 -     3958]            and     x0,b
2173      P:0628 21AF00  [2 -     3960]            move              b1,b
2174      P:0629 21A500  [2 -     3962]            move              b1,x1
2175      P:062A 57F400  [4 -     3966]            move              #>14,b
                 00000E
2176      P:062C 20006C  [2 -     3968]            sub     x1,b
2177      P:062D 20000B  [2 -     3970]            tst     b
2178      P:062E 0AF0AA  [6 -     3976]            jeq     L128
                 000634
2179      P:0630 218E00  [2 -     3978]            move              a1,a
2180      P:0631 06CF20  [4 -     3982]            rep     b
2181      P:0632 200022  [2 -     3984]            asr     a
2182      P:0633 218E00  [2 -     3986]            move              a1,a
2183                                     L128
2184      P:0634 205800  [2 -     3988]            move              (r0)+
2185      P:0635 57D000  [2 -     3990]            move              x:(r0)-,b
2186      P:0636 205818  [2 -     3992]            add     a,b       (r0)+
2187      P:0637 555000  [2 -     3994]            move              b1,x:(r0)-
2188                                     L127
2189                                     ; **************************************************
2190                                     ; }
2191                                     ; **************************************************
2192      P:0638 70F400  [4 -     3998]            move              #65533,n0
                 00FFFD
2193      P:063A 205600  [2 -     4000]            move              (r6)-
2194      P:063B 62E800  [4 -     4004]            move              x:(r0+n0),r2
2195      P:063C 205800  [2 -     4006]            move              (r0)+
2196      P:063D 45D000  [2 -     4008]            move              x:(r0)-,x1
2197      P:063E 456200  [2 -     4010]            move              x1,x:(r2)
2198      P:063F 62D600  [2 -     4012]            move              x:(r6)-,r2
2199      P:0640 61D600  [2 -     4014]            move              x:(r6)-,r1
2200      P:0641 45D600  [2 -     4016]            move              x:(r6)-,x1
2201      P:0642 44D600  [2 -     4018]            move              x:(r6)-,x0
2202      P:0643 57D600  [2 -     4020]            move              x:(r6)-,b
2203      P:0644 51E600  [2 -     4022]            move              x:(r6),b0
2204      P:0645 205000  [2 -     4024]            move              (r0)-
2205      P:0646 205000  [2 -     4026]            move              (r0)-
2206      P:0647 221600  [2 -     4028]            move              r0,r6
2207      P:0648 60E000  [2 -     4030]            move              x:(r0),r0
2208      P:0649 00000C  [4 -     4034]            rts
2209   
2210                                               global  Fadpt_quant
2211                                     Fadpt_quant
2212                                     ; **************************************************
2213                                     ; **************************************************
2214                                     ; **************************************************
2215                                     ; 
2216                                     ; void adpt_quant(int* Y)
2217                                     ; {
2218                                     ;   /*
2219                                     ;    * adaptive quantizer
2220                                     ;    *
2221                                     ;    * Input signals:  D, Y
2222                                     ;    * Output signals: I
2223                                     ;    */
2224                                     ; 
2225                                     ;   register int DS, DQM, DL, DLN, EXP;
2226                                     ; 
2227                                     ;   /* LOG */
2228                                     ;   DS = D & (1 << 15);
2229                                     ; **************************************************
2230                                     ; **************************************************
2231                                     ;   DQM = DS ? (65536 - D) & 32767 : D;
2232                                     ; **************************************************
2233      P:064A 380200  [2 -     4036]            move              #2,n0
2234      P:064B 3E0300  [2 -     4038]            move              #3,n6
2235      P:064C 605E00  [2 -     4040]            move              r0,x:(r6)+
2236      P:064D 205E00  [2 -     4042]            move              (r6)+
2237      P:064E 22D000  [2 -     4044]            move              r6,r0
2238      P:064F 204E00  [2 -     4046]            move              (r6)+n6
2239      P:0650 515E00  [2 -     4048]            move              b0,x:(r6)+
2240      P:0651 555E00  [2 -     4050]            move              b1,x:(r6)+
2241      P:0652 445E00  [2 -     4052]            move              x0,x:(r6)+
2242      P:0653 44F400  [4 -     4056]            move              #>32768,x0
                 008000
2243      P:0655 455E00  [2 -     4058]            move              x1,x:(r6)+
2244      P:0656 465E00  [2 -     4060]            move              y0,x:(r6)+
2245      P:0657 615E00  [2 -     4062]            move              r1,x:(r6)+
2246      P:0658 46F000  [4 -     4066]            move              x:FD,y0
                 00006D
2247      P:065A 466859  [4 -     4070]            tfr     y0,b      y0,x:(r0+n0)
2248      P:065B 20004E  [2 -     4072]            and     x0,b
2249      P:065C 21AF00  [2 -     4074]            move              b1,b
2250      P:065D 55600B  [2 -     4076]            tst     b         b1,x:(r0)
2251      P:065E 0AF0AA  [6 -     4082]            jeq     L130
                 00066B
2252      P:0660 44F400  [4 -     4086]            move              #>32767,x0
                 007FFF
2253      P:0662 56F400  [4 -     4090]            move              #>65536,a
                 010000
2254      P:0664 205854  [2 -     4092]            sub     y0,a      (r0)+
2255      P:0665 200009  [2 -     4094]            tfr     a,b
2256      P:0666 20004E  [2 -     4096]            and     x0,b
2257      P:0667 21AF00  [2 -     4098]            move              b1,b
2258      P:0668 555000  [2 -     4100]            move              b1,x:(r0)-
2259      P:0669 0AF080  [6 -     4106]            jmp     L131
                 00066F
2260                                     L130
2261      P:066B 46F000  [4 -     4110]            move              x:FD,y0
                 00006D
2262      P:066D 205800  [2 -     4112]            move              (r0)+
2263      P:066E 465000  [2 -     4114]            move              y0,x:(r0)-
2264                                     L131
2265                                     ; **************************************************
2266                                     ;   for (EXP = 1; DQM >> EXP; EXP++)
2267                                     ; **************************************************
2268      P:066F 380200  [2 -     4116]            move              #2,n0
2269      P:0670 46F400  [4 -     4120]            move              #>1,y0
                 000001
2270      P:0672 466859  [4 -     4124]            tfr     y0,b      y0,x:(r0+n0)
2271      P:0673 20580B  [2 -     4126]            tst     b         (r0)+
2272      P:0674 56D000  [2 -     4128]            move              x:(r0)-,a
2273      P:0675 0AF0AA  [6 -     4134]            jeq     L170
                 00067B
2274      P:0677 218E00  [2 -     4136]            move              a1,a
2275      P:0678 06CF20  [4 -     4140]            rep     b
2276      P:0679 200022  [2 -     4142]            asr     a
2277      P:067A 218E00  [2 -     4144]            move              a1,a
2278                                     L170
2279      P:067B 200003  [2 -     4146]            tst     a
2280      P:067C 0AF0AA  [6 -     4152]            jeq     L168
                 00068E
2281      P:067E 44E800  [4 -     4156]            move              x:(r0+n0),x0
2282                                     L134
2283      P:067F 380200  [2 -     4158]            move              #2,n0
2284      P:0680 57E800  [4 -     4162]            move              x:(r0+n0),b
2285      P:0681 200048  [2 -     4164]            add     x0,b
2286      P:0682 55680B  [4 -     4168]            tst     b         b1,x:(r0+n0)
2287      P:0683 205800  [2 -     4170]            move              (r0)+
2288      P:0684 56D000  [2 -     4172]            move              x:(r0)-,a
2289      P:0685 0AF0AA  [6 -     4178]            jeq     L171
                 00068B
2290      P:0687 218E00  [2 -     4180]            move              a1,a
2291      P:0688 06CF20  [4 -     4184]            rep     b
2292      P:0689 200022  [2 -     4186]            asr     a
2293      P:068A 218E00  [2 -     4188]            move              a1,a
2294                                     L171
2295      P:068B 200003  [2 -     4190]            tst     a
2296      P:068C 0AF0A2  [6 -     4196]            jne     L134
                 00067F
2297                                     L168
2298                                     ; **************************************************
2299                                     ; #ifdef __LOOPCOUNT__
2300                                     ;     Loop7++;
2301                                     ; #else
2302                                     ;     ;
2303                                     ; #endif
2304                                     ;   EXP--;
2305                                     ; **************************************************
2306                                     ; **************************************************
2307                                     ;   DL = (EXP * (1 << 7)) + (((DQM * (1 << 7)) >> EXP) & 127);
2308                                     ; **************************************************
2309      P:068E 380200  [2 -     4198]            move              #2,n0
2310      P:068F 44F400  [4 -     4202]            move              #>128,x0
                 000080
2311      P:0691 57E800  [4 -     4206]            move              x:(r0+n0),b
2312      P:0692 56F400  [4 -     4210]            move              #>16777215,a
                 FFFFFF
2313      P:0694 205818  [2 -     4212]            add     a,b       (r0)+
2314      P:0695 46D000  [2 -     4214]            move              x:(r0)-,y0
2315      P:0696 2000D0  [2 -     4216]            mpy     +x0,y0,a
2316      P:0697 200022  [2 -     4218]            asr     a
2317      P:0698 210E0B  [2 -     4220]            tst     b         a0,a
2318      P:0699 0AF0AA  [6 -     4226]            jeq     L172
                 00069F
2319      P:069B 218E00  [2 -     4228]            move              a1,a
2320      P:069C 06CF20  [4 -     4232]            rep     b
2321      P:069D 200022  [2 -     4234]            asr     a
2322      P:069E 218E00  [2 -     4236]            move              a1,a
2323                                     L172
2324                                     ; **************************************************
2325                                     ; 
2326                                     ;   /* SUBTB */
2327                                     ;   DLN = (DL + 4096 - (*Y >> 2)) & 4095;
2328                                     ; **************************************************
2329                                     ; **************************************************
2330                                     ; 
2331                                     ;   /* QUAN */
2332                                     ;   if (DLN > 3971)
2333                                     ; **************************************************
2334      P:069F 70F400  [4 -     4240]            move              #65533,n0
                 00FFFD
2335      P:06A1 21A600  [2 -     4242]            move              b1,y0
2336      P:06A2 61E800  [4 -     4246]            move              x:(r0+n0),r1
2337      P:06A3 380200  [2 -     4248]            move              #2,n0
2338      P:06A4 45F400  [4 -     4252]            move              #>127,x1
                 00007F
2339      P:06A6 200066  [2 -     4254]            and     x1,a
2340      P:06A7 218E00  [2 -     4256]            move              a1,a
2341      P:06A8 21C800  [2 -     4258]            move              a,a0
2342      P:06A9 200032  [2 -     4260]            asl     a
2343      P:06AA 46E1D2  [2 -     4262]            mac     +y0,x0,a  x:(r1),y0
2344      P:06AB 44F422  [4 -     4266]            asr     a         #>16773120,x0
                 FFF000
2345      P:06AD 210E59  [2 -     4268]            tfr     y0,b      a0,a
2346      P:06AE 21AF00  [2 -     4270]            move              b1,b
2347      P:06AF 20002A  [2 -     4272]            asr     b
2348      P:06B0 20002A  [2 -     4274]            asr     b
2349      P:06B1 21AF00  [2 -     4276]            move              b1,b
2350      P:06B2 44F448  [4 -     4280]            add     x0,b      #>4095,x0
                 000FFF
2351      P:06B4 21A600  [2 -     4282]            move              b1,y0
2352      P:06B5 200054  [2 -     4284]            sub     y0,a
2353      P:06B6 56F409  [4 -     4288]            tfr     a,b       #>3971,a
                 000F83
2354      P:06B8 20004E  [2 -     4290]            and     x0,b
2355      P:06B9 21AF00  [2 -     4292]            move              b1,b
2356      P:06BA 55680D  [4 -     4296]            cmp     a,b       b1,x:(r0+n0)
2357      P:06BB 0AF0AF  [6 -     4302]            jle     L136
                 0006C3
2358                                     ; **************************************************
2359                                     ;     I = DS ? 0xE : 0x1;
2360                                     ; **************************************************
2361      P:06BD 57E000  [2 -     4304]            move              x:(r0),b
2362      P:06BE 20000B  [2 -     4306]            tst     b
2363      P:06BF 0AF0A2  [6 -     4312]            jne     L169
                 000744
2364      P:06C1 0AF080  [6 -     4318]            jmp     L166
                 000748
2365                                     L136
2366                                     ; **************************************************
2367                                     ;   else if (DLN > 2047)
2368                                     ; **************************************************
2369      P:06C3 380200  [2 -     4320]            move              #2,n0
2370      P:06C4 56F400  [4 -     4324]            move              #>2047,a
                 0007FF
2371      P:06C6 57E800  [4 -     4328]            move              x:(r0+n0),b
2372      P:06C7 20000D  [2 -     4330]            cmp     a,b
2373      P:06C8 0AF0AF  [6 -     4336]            jle     L140
                 0006CE
2374                                     ; **************************************************
2375                                     ;     I = 0xF;
2376                                     ; **************************************************
2377      P:06CA 56F400  [4 -     4340]            move              #>15,a
                 00000F
2378      P:06CC 0AF080  [6 -     4346]            jmp     L167
                 00074A
2379                                     L140
2380                                     ; **************************************************
2381                                     ;   else if (DLN > 399)
2382                                     ; **************************************************
2383      P:06CE 380200  [2 -     4348]            move              #2,n0
2384      P:06CF 56F400  [4 -     4352]            move              #>399,a
                 00018F
2385      P:06D1 57E800  [4 -     4356]            move              x:(r0+n0),b
2386      P:06D2 20000D  [2 -     4358]            cmp     a,b
2387      P:06D3 0AF0AF  [6 -     4364]            jle     L142
                 0006E1
2388                                     ; **************************************************
2389                                     ;     I = DS ? 0x8 : 0x7;
2390                                     ; **************************************************
2391      P:06D5 57E000  [2 -     4366]            move              x:(r0),b
2392      P:06D6 20000B  [2 -     4368]            tst     b
2393      P:06D7 0AF0AA  [6 -     4374]            jeq     L143
                 0006DD
2394      P:06D9 56F400  [4 -     4378]            move              #>8,a
                 000008
2395      P:06DB 0AF080  [6 -     4384]            jmp     L167
                 00074A
2396                                     L143
2397      P:06DD 56F400  [4 -     4388]            move              #>7,a
                 000007
2398      P:06DF 0AF080  [6 -     4394]            jmp     L167
                 00074A
2399                                     L142
2400                                     ; **************************************************
2401                                     ;   else if (DLN > 348)
2402                                     ; **************************************************
2403      P:06E1 380200  [2 -     4396]            move              #2,n0
2404      P:06E2 56F400  [4 -     4400]            move              #>348,a
                 00015C
2405      P:06E4 57E800  [4 -     4404]            move              x:(r0+n0),b
2406      P:06E5 20000D  [2 -     4406]            cmp     a,b
2407      P:06E6 0AF0AF  [6 -     4412]            jle     L146
                 0006F4
2408                                     ; **************************************************
2409                                     ;     I = DS ? 0x9 : 0x6;
2410                                     ; **************************************************
2411      P:06E8 57E000  [2 -     4414]            move              x:(r0),b
2412      P:06E9 20000B  [2 -     4416]            tst     b
2413      P:06EA 0AF0AA  [6 -     4422]            jeq     L147
                 0006F0
2414      P:06EC 56F400  [4 -     4426]            move              #>9,a
                 000009
2415      P:06EE 0AF080  [6 -     4432]            jmp     L167
                 00074A
2416                                     L147
2417      P:06F0 56F400  [4 -     4436]            move              #>6,a
                 000006
2418      P:06F2 0AF080  [6 -     4442]            jmp     L167
                 00074A
2419                                     L146
2420                                     ; **************************************************
2421                                     ;   else if (DLN > 299)
2422                                     ; **************************************************
2423      P:06F4 380200  [2 -     4444]            move              #2,n0
2424      P:06F5 56F400  [4 -     4448]            move              #>299,a
                 00012B
2425      P:06F7 57E800  [4 -     4452]            move              x:(r0+n0),b
2426      P:06F8 20000D  [2 -     4454]            cmp     a,b
2427      P:06F9 0AF0AF  [6 -     4460]            jle     L150
                 000707
2428                                     ; **************************************************
2429                                     ;     I = DS ? 0xA : 0x5;       
2430                                     ; **************************************************
2431      P:06FB 57E000  [2 -     4462]            move              x:(r0),b
2432      P:06FC 20000B  [2 -     4464]            tst     b
2433      P:06FD 0AF0AA  [6 -     4470]            jeq     L151
                 000703
2434      P:06FF 56F400  [4 -     4474]            move              #>10,a
                 00000A
2435      P:0701 0AF080  [6 -     4480]            jmp     L167
                 00074A
2436                                     L151
2437      P:0703 56F400  [4 -     4484]            move              #>5,a
                 000005
2438      P:0705 0AF080  [6 -     4490]            jmp     L167
                 00074A
2439                                     L150
2440                                     ; **************************************************
2441                                     ;   else if (DLN > 245)
2442                                     ; **************************************************
2443      P:0707 380200  [2 -     4492]            move              #2,n0
2444      P:0708 56F400  [4 -     4496]            move              #>245,a
                 0000F5
2445      P:070A 57E800  [4 -     4500]            move              x:(r0+n0),b
2446      P:070B 20000D  [2 -     4502]            cmp     a,b
2447      P:070C 0AF0AF  [6 -     4508]            jle     L154
                 00071A
2448                                     ; **************************************************
2449                                     ;     I = DS ? 0xB : 0x4;
2450                                     ; **************************************************
2451      P:070E 57E000  [2 -     4510]            move              x:(r0),b
2452      P:070F 20000B  [2 -     4512]            tst     b
2453      P:0710 0AF0AA  [6 -     4518]            jeq     L155
                 000716
2454      P:0712 56F400  [4 -     4522]            move              #>11,a
                 00000B
2455      P:0714 0AF080  [6 -     4528]            jmp     L167
                 00074A
2456                                     L155
2457      P:0716 56F400  [4 -     4532]            move              #>4,a
                 000004
2458      P:0718 0AF080  [6 -     4538]            jmp     L167
                 00074A
2459                                     L154
2460                                     ; **************************************************
2461                                     ;   else if (DLN > 177)
2462                                     ; **************************************************
2463      P:071A 380200  [2 -     4540]            move              #2,n0
2464      P:071B 56F400  [4 -     4544]            move              #>177,a
                 0000B1
2465      P:071D 57E800  [4 -     4548]            move              x:(r0+n0),b
2466      P:071E 20000D  [2 -     4550]            cmp     a,b
2467      P:071F 0AF0AF  [6 -     4556]            jle     L158
                 00072D
2468                                     ; **************************************************
2469                                     ;     I = DS ? 0xC : 0x3;
2470                                     ; **************************************************
2471      P:0721 57E000  [2 -     4558]            move              x:(r0),b
2472      P:0722 20000B  [2 -     4560]            tst     b
2473      P:0723 0AF0AA  [6 -     4566]            jeq     L159
                 000729
2474      P:0725 56F400  [4 -     4570]            move              #>12,a
                 00000C
2475      P:0727 0AF080  [6 -     4576]            jmp     L167
                 00074A
2476                                     L159
2477      P:0729 56F400  [4 -     4580]            move              #>3,a
                 000003
2478      P:072B 0AF080  [6 -     4586]            jmp     L167
                 00074A
2479                                     L158
2480                                     ; **************************************************
2481                                     ;   else if (DLN > 79)
2482                                     ; **************************************************
2483      P:072D 380200  [2 -     4588]            move              #2,n0
2484      P:072E 56F400  [4 -     4592]            move              #>79,a
                 00004F
2485      P:0730 57E800  [4 -     4596]            move              x:(r0+n0),b
2486      P:0731 20000D  [2 -     4598]            cmp     a,b
2487      P:0732 0AF0AF  [6 -     4604]            jle     L162
                 000740
2488                                     ; **************************************************
2489                                     ;     I = DS ? 0xD : 0x2;
2490                                     ; **************************************************
2491      P:0734 57E000  [2 -     4606]            move              x:(r0),b
2492      P:0735 20000B  [2 -     4608]            tst     b
2493      P:0736 0AF0AA  [6 -     4614]            jeq     L163
                 00073C
2494      P:0738 56F400  [4 -     4618]            move              #>13,a
                 00000D
2495      P:073A 0AF080  [6 -     4624]            jmp     L167
                 00074A
2496                                     L163
2497      P:073C 56F400  [4 -     4628]            move              #>2,a
                 000002
2498      P:073E 0AF080  [6 -     4634]            jmp     L167
                 00074A
2499                                     L162
2500                                     ; **************************************************
2501                                     ;   else
2502                                     ;     I = DS ? 0xE : 0x1;
2503                                     ; **************************************************
2504      P:0740 57E000  [2 -     4636]            move              x:(r0),b
2505      P:0741 20000B  [2 -     4638]            tst     b
2506      P:0742 0AF0AA  [6 -     4644]            jeq     L166
                 000748
2507                                     L169
2508      P:0744 56F400  [4 -     4648]            move              #>14,a
                 00000E
2509      P:0746 0AF080  [6 -     4654]            jmp     L167
                 00074A
2510                                     L166
2511      P:0748 56F400  [4 -     4658]            move              #>1,a
                 000001
2512                                     L167
2513                                     ; **************************************************
2514                                     ; }
2515                                     ; **************************************************
2516      P:074A 205000  [2 -     4660]            move              (r0)-
2517      P:074B 205000  [2 -     4662]            move              (r0)-
2518      P:074C 205600  [2 -     4664]            move              (r6)-
2519      P:074D 547000  [4 -     4668]            move              a1,x:FI
                 00006C
2520      P:074F 61D600  [2 -     4670]            move              x:(r6)-,r1
2521      P:0750 46D600  [2 -     4672]            move              x:(r6)-,y0
2522      P:0751 45D600  [2 -     4674]            move              x:(r6)-,x1
2523      P:0752 44D600  [2 -     4676]            move              x:(r6)-,x0
2524      P:0753 57D600  [2 -     4678]            move              x:(r6)-,b
2525      P:0754 51E600  [2 -     4680]            move              x:(r6),b0
2526      P:0755 221600  [2 -     4682]            move              r0,r6
2527      P:0756 60E000  [2 -     4684]            move              x:(r0),r0
2528      P:0757 00000C  [4 -     4688]            rts
2529   
2530                                               global  Ftone_detector
2531                                     Ftone_detector
2532                                     ; **************************************************
2533                                     ; **************************************************
2534                                     ; **************************************************
2535                                     ; 
2536                                     ; void tone_detector(int* DQ, int* T, int* YL, int* t_dr, int* LAST_TR)
2537                                     ; {
2538                                     ;   /*
2539                                     ;    * tone detector
2540                                     ;    *
2541                                     ;    * Input signals:  DQ, A_2, YL
2542                                     ;    * Output signals: T, TDP;
2543                                     ;    */
2544                                     ; 
2545                                     ;   register int tmp; 
2546                                     ;   register int t_d; 
2547                                     ; 
2548                                     ;   /* partial band signal detection */
2549                                     ;   TDP = ((A_2 > 32769) && (A_2 < 53761)) ? 1 : 0 ; 
2550                                     ; **************************************************
2551      P:0758 70F400  [4 -     4692]            move              #65530,n0
                 00FFFA
2552      P:075A 3E0300  [2 -     4694]            move              #3,n6
2553      P:075B 56F400  [4 -     4698]            move              #>32769,a
                 008001
2554      P:075D 605E00  [2 -     4700]            move              r0,x:(r6)+
2555      P:075E 205E00  [2 -     4702]            move              (r6)+
2556      P:075F 22D000  [2 -     4704]            move              r6,r0
2557      P:0760 204E00  [2 -     4706]            move              (r6)+n6
2558      P:0761 515E00  [2 -     4708]            move              b0,x:(r6)+
2559      P:0762 555E00  [2 -     4710]            move              b1,x:(r6)+
2560      P:0763 445E00  [2 -     4712]            move              x0,x:(r6)+
2561      P:0764 455E00  [2 -     4714]            move              x1,x:(r6)+
2562      P:0765 615E00  [2 -     4716]            move              r1,x:(r6)+
2563      P:0766 625E00  [2 -     4718]            move              r2,x:(r6)+
2564      P:0767 635E00  [2 -     4720]            move              r3,x:(r6)+
2565      P:0768 62E800  [4 -     4724]            move              x:(r0+n0),r2
2566      P:0769 70F400  [4 -     4728]            move              #65529,n0
                 00FFF9
2567      P:076B 45F000  [4 -     4732]            move              x:FA_2,x1
                 00006F
2568      P:076D 61E869  [4 -     4736]            tfr     x1,b      x:(r0+n0),r1
2569      P:076E 20000D  [2 -     4738]            cmp     a,b
2570      P:076F 0AF0AF  [6 -     4744]            jle     L174
                 00077A
2571      P:0771 56F400  [4 -     4748]            move              #>53760,a
                 00D200
2572      P:0773 20000D  [2 -     4750]            cmp     a,b
2573      P:0774 0AF0A7  [6 -     4756]            jgt     L174
                 00077A
2574      P:0776 44F400  [4 -     4760]            move              #>1,x0
                 000001
2575      P:0778 0AF080  [6 -     4766]            jmp     L175
                 00077B
2576                                     L174
2577      P:077A 240000  [2 -     4768]            move              #0,x0
2578                                     L175
2579                                     ; **************************************************
2580                                     ;   
2581                                     ;   /* take last (t_dr) */
2582                                     ;   t_d = (*t_dr);
2583                                     ; **************************************************
2584                                     ; **************************************************
2585                                     ;   
2586                                     ;   /* calcutale new  (*t_dr)  */
2587                                     ;   /* TRIGB Function */
2588                                     ;   *t_dr = (*LAST_TR == 0) ? TDP : 0; 
2589                                     ; **************************************************
2590      P:077B 205800  [2 -     4770]            move              (r0)+
2591      P:077C 447000  [4 -     4774]            move              x0,x:FTDP
                 000067
2592      P:077E 45E200  [2 -     4776]            move              x:(r2),x1
2593      P:077F 455000  [2 -     4778]            move              x1,x:(r0)-
2594      P:0780 56E100  [2 -     4780]            move              x:(r1),a
2595      P:0781 200003  [2 -     4782]            tst     a
2596      P:0782 0AF0A2  [6 -     4788]            jne     L176
                 000787
2597      P:0784 200041  [2 -     4790]            tfr     x0,a
2598      P:0785 0AF080  [6 -     4796]            jmp     L177
                 000788
2599                                     L176
2600      P:0787 200013  [2 -     4798]            clr     a
2601                                     L177
2602                                     ; **************************************************
2603                                     ;   
2604                                     ;   *LAST_TR = *YL >> 15; /* (*LAST_TR)  is used here as a temporary variable */
2605                                     ; **************************************************
2606      P:0788 70F400  [4 -     4802]            move              #65531,n0
                 00FFFB
2607      P:078A 546200  [2 -     4804]            move              a1,x:(r2)
2608      P:078B 63E800  [4 -     4808]            move              x:(r0+n0),r3
2609      P:078C 56E300  [2 -     4810]            move              x:(r3),a
2610      P:078D 218E00  [2 -     4812]            move              a1,a
2611      P:078E 060FA0  [4 -     4816]            rep     #15
2612      P:078F 200022  [2 -     4818]            asr     a
2613                                     ; **************************************************
2614                                     ;   
2615                                     ;   tmp = ((*LAST_TR) > 8) ? 31 << 9 :
2616                                     ;         (32 + ((*LAST_TR << 5) & 31)) << *LAST_TR; 
2617                                     ; **************************************************
2618      P:0790 45F400  [4 -     4822]            move              #>8,x1
                 000008
2619      P:0792 218E00  [2 -     4824]            move              a1,a
2620      P:0793 546165  [2 -     4826]            cmp     x1,a      a1,x:(r1)
2621      P:0794 0AF0AF  [6 -     4832]            jle     L178
                 00079B
2622      P:0796 45F400  [4 -     4836]            move              #>15872,x1
                 003E00
2623      P:0798 456000  [2 -     4838]            move              x1,x:(r0)
2624      P:0799 0AF080  [6 -     4844]            jmp     L179
                 0007AE
2625                                     L178
2626      P:079B 56E100  [2 -     4846]            move              x:(r1),a
2627      P:079C 0605A0  [4 -     4850]            rep     #5
2628      P:079D 200032  [2 -     4852]            asl     a
2629      P:079E 57E100  [2 -     4854]            move              x:(r1),b
2630      P:079F 45F400  [4 -     4858]            move              #>32,x1
                 000020
2631      P:07A1 44F400  [4 -     4862]            move              #>31,x0
                 00001F
2632      P:07A3 218E00  [2 -     4864]            move              a1,a
2633      P:07A4 200046  [2 -     4866]            and     x0,a
2634      P:07A5 218E00  [2 -     4868]            move              a1,a
2635      P:07A6 200060  [2 -     4870]            add     x1,a
2636      P:07A7 20000B  [2 -     4872]            tst     b
2637      P:07A8 0AF0AA  [6 -     4878]            jeq     L182
                 0007AD
2638      P:07AA 06CF20  [4 -     4882]            rep     b
2639      P:07AB 200032  [2 -     4884]            asl     a
2640      P:07AC 218E00  [2 -     4886]            move              a1,a
2641                                     L182
2642      P:07AD 546000  [2 -     4888]            move              a1,x:(r0)
2643                                     L179
2644                                     ; **************************************************
2645                                     ;   
2646                                     ;   *LAST_TR = *T = (((*DQ & 16383) > (tmp + (tmp >> 1)) >> 1) 
2647                                     ;               && (t_d == 1)) ? 1 : 0;
2648                                     ; **************************************************
2649      P:07AE 70F400  [4 -     4892]            move              #65533,n0
                 00FFFD
2650      P:07B0 57E000  [2 -     4894]            move              x:(r0),b
2651      P:07B1 63E800  [4 -     4898]            move              x:(r0+n0),r3
2652      P:07B2 21AF00  [2 -     4900]            move              b1,b
2653      P:07B3 56E32A  [2 -     4902]            asr     b         x:(r3),a
2654      P:07B4 21AF00  [2 -     4904]            move              b1,b
2655      P:07B5 21A500  [2 -     4906]            move              b1,x1
2656      P:07B6 57E000  [2 -     4908]            move              x:(r0),b
2657      P:07B7 44F468  [4 -     4912]            add     x1,b      #>16383,x0
                 003FFF
2658      P:07B9 21AF46  [2 -     4914]            and     x0,a      b1,b
2659      P:07BA 218E2A  [2 -     4916]            asr     b         a1,a
2660      P:07BB 21AF00  [2 -     4918]            move              b1,b
2661      P:07BC 21A500  [2 -     4920]            move              b1,x1
2662      P:07BD 200065  [2 -     4922]            cmp     x1,a
2663      P:07BE 0AF0AF  [6 -     4928]            jle     L180
                 0007C7
2664      P:07C0 56F400  [4 -     4932]            move              #>1,a
                 000001
2665      P:07C2 205800  [2 -     4934]            move              (r0)+
2666      P:07C3 57D000  [2 -     4936]            move              x:(r0)-,b
2667      P:07C4 20000D  [2 -     4938]            cmp     a,b
2668      P:07C5 0AF0AA  [6 -     4944]            jeq     L181
                 0007C8
2669                                     L180
2670      P:07C7 200013  [2 -     4946]            clr     a
2671                                     L181
2672                                     ; **************************************************
2673                                     ; }
2674                                     ; **************************************************
2675      P:07C8 70F400  [4 -     4950]            move              #65532,n0
                 00FFFC
2676      P:07CA 205600  [2 -     4952]            move              (r6)-
2677      P:07CB 63E800  [4 -     4956]            move              x:(r0+n0),r3
2678      P:07CC 205000  [2 -     4958]            move              (r0)-
2679      P:07CD 546300  [2 -     4960]            move              a1,x:(r3)
2680      P:07CE 546100  [2 -     4962]            move              a1,x:(r1)
2681      P:07CF 63D600  [2 -     4964]            move              x:(r6)-,r3
2682      P:07D0 62D600  [2 -     4966]            move              x:(r6)-,r2
2683      P:07D1 61D600  [2 -     4968]            move              x:(r6)-,r1
2684      P:07D2 45D600  [2 -     4970]            move              x:(r6)-,x1
2685      P:07D3 44D600  [2 -     4972]            move              x:(r6)-,x0
2686      P:07D4 57D600  [2 -     4974]            move              x:(r6)-,b
2687      P:07D5 51E600  [2 -     4976]            move              x:(r6),b0
2688      P:07D6 205000  [2 -     4978]            move              (r0)-
2689      P:07D7 221600  [2 -     4980]            move              r0,r6
2690      P:07D8 60E000  [2 -     4982]            move              x:(r0),r0
2691      P:07D9 00000C  [4 -     4986]            rts
2692   
2693      X:004C                                   org     x:
2694                                     F___F1
2695      X:004C                                   dc      0
2696      X:004D                                   dc      0
2697      X:004E                                   dc      0
2698      X:004F                                   dc      1
2699      X:0050                                   dc      1
2700      X:0051                                   dc      1
2701      X:0052                                   dc      3
2702      X:0053                                   dc      7
2703      P:07DA                                   org     p:
2704                                               global  Fspeed_control
2705                                     Fspeed_control
2706                                     ; **************************************************
2707                                     ; **************************************************
2708                                     ; **************************************************
2709                                     ; 
2710                                     ; void speed_control(int* T, int* Y, int* DMS, int* DML, int* AP)
2711                                     ; {
2712                                     ;   /*
2713                                     ;    * speed control
2714                                     ;    *
2715                                     ;    * Input signals:  T, TDP, I, Y
2716                                     ;    * Output signals: AL
2717                                     ;    */
2718                                     ; 
2719                                     ;   static int F[] = { 0, 0, 0, 1, 1, 1, 3, 7 };
2720                                     ;   register int FI, tmp ; 
2721                                     ; 
2722                                     ;   /* FUNTCF */
2723                                     ;   FI = F[(I >> 3 ? (15 - I) : I) & 7] ; 
2724                                     ; **************************************************
2725      P:07DA 70F400  [4 -     4990]            move              #65531,n0
                 00FFFB
2726      P:07DC 3E0300  [2 -     4992]            move              #3,n6
2727      P:07DD 605E00  [2 -     4994]            move              r0,x:(r6)+
2728      P:07DE 205E00  [2 -     4996]            move              (r6)+
2729      P:07DF 22D000  [2 -     4998]            move              r6,r0
2730      P:07E0 204E00  [2 -     5000]            move              (r6)+n6
2731      P:07E1 515E00  [2 -     5002]            move              b0,x:(r6)+
2732      P:07E2 555E00  [2 -     5004]            move              b1,x:(r6)+
2733      P:07E3 445E00  [2 -     5006]            move              x0,x:(r6)+
2734      P:07E4 455E00  [2 -     5008]            move              x1,x:(r6)+
2735      P:07E5 465E00  [2 -     5010]            move              y0,x:(r6)+
2736      P:07E6 615E00  [2 -     5012]            move              r1,x:(r6)+
2737      P:07E7 625E00  [2 -     5014]            move              r2,x:(r6)+
2738      P:07E8 635E00  [2 -     5016]            move              r3,x:(r6)+
2739      P:07E9 645E00  [2 -     5018]            move              r4,x:(r6)+
2740      P:07EA 655E00  [2 -     5020]            move              r5,x:(r6)+
2741      P:07EB 62E800  [4 -     5024]            move              x:(r0+n0),r2
2742      P:07EC 70F400  [4 -     5028]            move              #65530,n0
                 00FFFA
2743      P:07EE 46F000  [4 -     5032]            move              x:FI,y0
                 00006C
2744      P:07F0 63E851  [4 -     5036]            tfr     y0,a      x:(r0+n0),r3
2745      P:07F1 70F400  [4 -     5040]            move              #65529,n0
                 00FFF9
2746      P:07F3 218E00  [2 -     5042]            move              a1,a
2747      P:07F4 64E800  [4 -     5046]            move              x:(r0+n0),r4
2748      P:07F5 380200  [2 -     5048]            move              #2,n0
2749      P:07F6 466800  [4 -     5052]            move              y0,x:(r0+n0)
2750      P:07F7 0603A0  [4 -     5056]            rep     #3
2751      P:07F8 200022  [2 -     5058]            asr     a
2752      P:07F9 218E00  [2 -     5060]            move              a1,a
2753      P:07FA 200003  [2 -     5062]            tst     a
2754      P:07FB 0AF0AA  [6 -     5068]            jeq     L184
                 000802
2755      P:07FD 56F400  [4 -     5072]            move              #>15,a
                 00000F
2756      P:07FF 200054  [2 -     5074]            sub     y0,a
2757      P:0800 0AF080  [6 -     5080]            jmp     L185
                 000804
2758                                     L184
2759      P:0802 56F000  [4 -     5084]            move              x:FI,a
                 00006C
2760                                     L185
2761                                     ; **************************************************
2762                                     ; 
2763                                     ;   /* FILTA */
2764                                     ;   tmp = ((FI << 9) + 8192 - *DMS) & 8191;              /* tmp => DIF */
2765                                     ; **************************************************
2766      P:0804 61F400  [4 -     5088]            move              #F___F1,r1
                 00004C
2767      P:0806 44F400  [4 -     5092]            move              #>7,x0
                 000007
2768      P:0808 222F46  [2 -     5094]            and     x0,a      r1,b
2769      P:0809 218E00  [2 -     5096]            move              a1,a
2770      P:080A 200018  [2 -     5098]            add     a,b
2771      P:080B 21B100  [2 -     5100]            move              b1,r1
2772      P:080C 46E100  [2 -     5102]            move              x:(r1),y0
2773      P:080D 466059  [2 -     5104]            tfr     y0,b      y0,x:(r0)
2774      P:080E 0609A0  [4 -     5108]            rep     #9
2775      P:080F 20003A  [2 -     5110]            asl     b
2776                                     ; **************************************************
2777                                     ;   tmp = (tmp >> 12) ? (tmp >> 5) + 3840 : (tmp >> 5);  /* tmp => DIFSX */
2778                                     ; **************************************************
2779      P:0810 56E200  [2 -     5112]            move              x:(r2),a
2780      P:0811 44F400  [4 -     5116]            move              #>16769024,x0
                 FFE000
2781      P:0813 21AF40  [2 -     5118]            add     x0,a      b1,b
2782      P:0814 44F41C  [4 -     5122]            sub     a,b       #>8191,x0
                 001FFF
2783      P:0816 20584E  [2 -     5124]            and     x0,b      (r0)+
2784      P:0817 21AF00  [2 -     5126]            move              b1,b
2785      P:0818 555001  [2 -     5128]            tfr     b,a       b1,x:(r0)-
2786      P:0819 218E00  [2 -     5130]            move              a1,a
2787      P:081A 060CA0  [4 -     5134]            rep     #12
2788      P:081B 200022  [2 -     5136]            asr     a
2789      P:081C 218E00  [2 -     5138]            move              a1,a
2790      P:081D 200003  [2 -     5140]            tst     a
2791      P:081E 0AF0AA  [6 -     5146]            jeq     L186
                 000829
2792      P:0820 21AF00  [2 -     5148]            move              b1,b
2793      P:0821 0605A0  [4 -     5152]            rep     #5
2794      P:0822 20002A  [2 -     5154]            asr     b
2795      P:0823 56F400  [4 -     5158]            move              #>3840,a
                 000F00
2796      P:0825 21AF00  [2 -     5160]            move              b1,b
2797      P:0826 200018  [2 -     5162]            add     a,b
2798      P:0827 0AF080  [6 -     5168]            jmp     L199
                 00082F
2799                                     L186
2800      P:0829 205800  [2 -     5170]            move              (r0)+
2801      P:082A 57D000  [2 -     5172]            move              x:(r0)-,b
2802      P:082B 21AF00  [2 -     5174]            move              b1,b
2803      P:082C 0605A0  [4 -     5178]            rep     #5
2804      P:082D 20002A  [2 -     5180]            asr     b
2805      P:082E 21AF00  [2 -     5182]            move              b1,b
2806                                     L199
2807                                     ; **************************************************
2808                                     ;   *DMS = (tmp + *DMS) & 4095;
2809                                     ; **************************************************
2810                                     ; **************************************************
2811                                     ; 
2812                                     ;   /* FILTB */
2813                                     ;   tmp = ((FI << 11) + 32768 - *DML) & 32767;           /* tmp => DIF */
2814                                     ; **************************************************
2815      P:082F 44F400  [4 -     5186]            move              #>4095,x0
                 000FFF
2816      P:0831 205800  [2 -     5188]            move              (r0)+
2817      P:0832 555000  [2 -     5190]            move              b1,x:(r0)-
2818      P:0833 56E200  [2 -     5192]            move              x:(r2),a
2819      P:0834 205800  [2 -     5194]            move              (r0)+
2820      P:0835 57D000  [2 -     5196]            move              x:(r0)-,b
2821      P:0836 200018  [2 -     5198]            add     a,b
2822      P:0837 200001  [2 -     5200]            tfr     b,a
2823      P:0838 200046  [2 -     5202]            and     x0,a
2824      P:0839 218E00  [2 -     5204]            move              a1,a
2825      P:083A 546200  [2 -     5206]            move              a1,x:(r2)
2826      P:083B 57E000  [2 -     5208]            move              x:(r0),b
2827      P:083C 060BA0  [4 -     5212]            rep     #11
2828      P:083D 20003A  [2 -     5214]            asl     b
2829                                     ; **************************************************
2830                                     ;   tmp = (tmp >> 14) ? (tmp >> 7) + 16128 : (tmp >> 7); /* tmp => DIFSX */
2831                                     ; **************************************************
2832      P:083E 56E300  [2 -     5216]            move              x:(r3),a
2833      P:083F 44F400  [4 -     5220]            move              #>16744448,x0
                 FF8000
2834      P:0841 21AF40  [2 -     5222]            add     x0,a      b1,b
2835      P:0842 44F41C  [4 -     5226]            sub     a,b       #>32767,x0
                 007FFF
2836      P:0844 20584E  [2 -     5228]            and     x0,b      (r0)+
2837      P:0845 21AF00  [2 -     5230]            move              b1,b
2838      P:0846 555001  [2 -     5232]            tfr     b,a       b1,x:(r0)-
2839      P:0847 218E00  [2 -     5234]            move              a1,a
2840      P:0848 060EA0  [4 -     5238]            rep     #14
2841      P:0849 200022  [2 -     5240]            asr     a
2842      P:084A 218E00  [2 -     5242]            move              a1,a
2843      P:084B 200003  [2 -     5244]            tst     a
2844      P:084C 0AF0AA  [6 -     5250]            jeq     L188
                 000857
2845      P:084E 21AF00  [2 -     5252]            move              b1,b
2846      P:084F 0607A0  [4 -     5256]            rep     #7
2847      P:0850 20002A  [2 -     5258]            asr     b
2848      P:0851 56F400  [4 -     5262]            move              #>16128,a
                 003F00
2849      P:0853 21AF00  [2 -     5264]            move              b1,b
2850      P:0854 200018  [2 -     5266]            add     a,b
2851      P:0855 0AF080  [6 -     5272]            jmp     L200
                 00085D
2852                                     L188
2853      P:0857 205800  [2 -     5274]            move              (r0)+
2854      P:0858 57D000  [2 -     5276]            move              x:(r0)-,b
2855      P:0859 21AF00  [2 -     5278]            move              b1,b
2856      P:085A 0607A0  [4 -     5282]            rep     #7
2857      P:085B 20002A  [2 -     5284]            asr     b
2858      P:085C 21AF00  [2 -     5286]            move              b1,b
2859                                     L200
2860                                     ; **************************************************
2861                                     ;   *DML = (tmp + *DML) & 16383;
2862                                     ; **************************************************
2863                                     ; **************************************************
2864                                     ; 
2865                                     ;   /* SUBTC */
2866                                     ;   tmp = ((*DMS << 2) + 32768 - *DML) & 32767;          /* tmp => DIF */
2867                                     ; **************************************************
2868                                     ; **************************************************
2869                                     ;   tmp = (tmp >> 14) ? (32768 - tmp) & 16383 : tmp;     /* tmp => DIFM */
2870                                     ; **************************************************
2871      P:085D 380200  [2 -     5288]            move              #2,n0
2872      P:085E 44F400  [4 -     5292]            move              #>16744448,x0
                 FF8000
2873      P:0860 45F400  [4 -     5296]            move              #>16383,x1
                 003FFF
2874      P:0862 205800  [2 -     5298]            move              (r0)+
2875      P:0863 555000  [2 -     5300]            move              b1,x:(r0)-
2876      P:0864 56E300  [2 -     5302]            move              x:(r3),a
2877      P:0865 205800  [2 -     5304]            move              (r0)+
2878      P:0866 57D000  [2 -     5306]            move              x:(r0)-,b
2879      P:0867 200018  [2 -     5308]            add     a,b
2880      P:0868 200001  [2 -     5310]            tfr     b,a
2881      P:0869 200066  [2 -     5312]            and     x1,a
2882      P:086A 218E00  [2 -     5314]            move              a1,a
2883      P:086B 546340  [2 -     5316]            add     x0,a      a1,x:(r3)
2884      P:086C 46E200  [2 -     5318]            move              x:(r2),y0
2885      P:086D 44F459  [4 -     5322]            tfr     y0,b      #>32767,x0
                 007FFF
2886      P:086F 46683A  [4 -     5326]            asl     b         y0,x:(r0+n0)
2887      P:0870 20583A  [2 -     5328]            asl     b         (r0)+
2888      P:0871 21AF00  [2 -     5330]            move              b1,b
2889      P:0872 20001C  [2 -     5332]            sub     a,b
2890      P:0873 20004E  [2 -     5334]            and     x0,b
2891      P:0874 21AF00  [2 -     5336]            move              b1,b
2892      P:0875 555001  [2 -     5338]            tfr     b,a       b1,x:(r0)-
2893      P:0876 218E00  [2 -     5340]            move              a1,a
2894      P:0877 060EA0  [4 -     5344]            rep     #14
2895      P:0878 200022  [2 -     5346]            asr     a
2896      P:0879 218E00  [2 -     5348]            move              a1,a
2897      P:087A 200003  [2 -     5350]            tst     a
2898      P:087B 0AF0AA  [6 -     5356]            jeq     L191
                 000886
2899      P:087D 56F400  [4 -     5360]            move              #>32768,a
                 008000
2900      P:087F 205800  [2 -     5362]            move              (r0)+
2901      P:0880 46D000  [2 -     5364]            move              x:(r0)-,y0
2902      P:0881 205854  [2 -     5366]            sub     y0,a      (r0)+
2903      P:0882 545009  [2 -     5368]            tfr     a,b       a1,x:(r0)-
2904      P:0883 20586E  [2 -     5370]            and     x1,b      (r0)+
2905      P:0884 21AF00  [2 -     5372]            move              b1,b
2906      P:0885 555000  [2 -     5374]            move              b1,x:(r0)-
2907                                     L191
2908                                     ; **************************************************
2909                                     ;   FI = ((*Y > 1535) && (tmp < (*DML >> 3)) && (TDP == 0)) ? 0 : 1;
2910                                     ; **************************************************
2911      P:0886 70F400  [4 -     5378]            move              #65532,n0
                 00FFFC
2912      P:0888 46F400  [4 -     5382]            move              #>1535,y0
                 0005FF
2913      P:088A 65E800  [4 -     5386]            move              x:(r0+n0),r5
2914      P:088B 56E500  [2 -     5388]            move              x:(r5),a
2915      P:088C 200055  [2 -     5390]            cmp     y0,a
2916      P:088D 0AF0AF  [6 -     5396]            jle     L192
                 0008A1
2917      P:088F 56E300  [2 -     5398]            move              x:(r3),a
2918      P:0890 218E00  [2 -     5400]            move              a1,a
2919      P:0891 0603A0  [4 -     5404]            rep     #3
2920      P:0892 200022  [2 -     5406]            asr     a
2921      P:0893 218E00  [2 -     5408]            move              a1,a
2922      P:0894 205800  [2 -     5410]            move              (r0)+
2923      P:0895 57D000  [2 -     5412]            move              x:(r0)-,b
2924      P:0896 20000D  [2 -     5414]            cmp     a,b
2925      P:0897 0AF0A1  [6 -     5420]            jge     L192
                 0008A1
2926      P:0899 56F000  [4 -     5424]            move              x:FTDP,a
                 000067
2927      P:089B 200003  [2 -     5426]            tst     a
2928      P:089C 0AF0A2  [6 -     5432]            jne     L192
                 0008A1
2929      P:089E 260000  [2 -     5434]            move              #0,y0
2930      P:089F 0AF080  [6 -     5440]            jmp     L201
                 0008A3
2931                                     L192
2932      P:08A1 46F400  [4 -     5444]            move              #>1,y0
                 000001
2933                                     L201
2934                                     ; **************************************************
2935                                     ; 
2936                                     ;   /* FILTC */
2937                                     ;   tmp = ((FI << 9) + 2048 - *AP) & 2047;               /* tmp => DIF */ 
2938                                     ; **************************************************
2939      P:08A3 466000  [2 -     5446]            move              y0,x:(r0)
2940      P:08A4 57E000  [2 -     5448]            move              x:(r0),b
2941      P:08A5 0609A0  [4 -     5452]            rep     #9
2942      P:08A6 20003A  [2 -     5454]            asl     b
2943                                     ; **************************************************
2944                                     ;   tmp = (tmp >> 4) + (tmp >> 10 ? 896 : 0);            /* tmp => DIFSX */
2945                                     ; **************************************************
2946      P:08A7 56E400  [2 -     5456]            move              x:(r4),a
2947      P:08A8 44F400  [4 -     5460]            move              #>16775168,x0
                 FFF800
2948      P:08AA 21AF40  [2 -     5462]            add     x0,a      b1,b
2949      P:08AB 44F41C  [4 -     5466]            sub     a,b       #>2047,x0
                 0007FF
2950      P:08AD 20584E  [2 -     5468]            and     x0,b      (r0)+
2951      P:08AE 21AF00  [2 -     5470]            move              b1,b
2952      P:08AF 555001  [2 -     5472]            tfr     b,a       b1,x:(r0)-
2953      P:08B0 21AF00  [2 -     5474]            move              b1,b
2954      P:08B1 0604A0  [4 -     5478]            rep     #4
2955      P:08B2 20002A  [2 -     5480]            asr     b
2956      P:08B3 380200  [2 -     5482]            move              #2,n0
2957      P:08B4 218E00  [2 -     5484]            move              a1,a
2958      P:08B5 21AF00  [2 -     5486]            move              b1,b
2959      P:08B6 556800  [4 -     5490]            move              b1,x:(r0+n0)
2960      P:08B7 060AA0  [4 -     5494]            rep     #10
2961      P:08B8 200022  [2 -     5496]            asr     a
2962      P:08B9 218E00  [2 -     5498]            move              a1,a
2963      P:08BA 200003  [2 -     5500]            tst     a
2964      P:08BB 0AF0AA  [6 -     5506]            jeq     L194
                 0008C1
2965      P:08BD 56F400  [4 -     5510]            move              #>896,a
                 000380
2966      P:08BF 200018  [2 -     5512]            add     a,b
2967      P:08C0 556800  [4 -     5516]            move              b1,x:(r0+n0)
2968                                     L194
2969                                     ; **************************************************
2970                                     ;   tmp = (tmp + *AP) & 1023;                            /* tmp => APP */
2971                                     ; **************************************************
2972                                     ; **************************************************
2973                                     ; 
2974                                     ;   /* TRIGA */
2975                                     ;   *AP = *T ? 256 : tmp; 
2976                                     ; **************************************************
2977      P:08C1 380200  [2 -     5518]            move              #2,n0
2978      P:08C2 56E400  [2 -     5520]            move              x:(r4),a
2979      P:08C3 46E800  [4 -     5524]            move              x:(r0+n0),y0
2980      P:08C4 70F459  [4 -     5528]            tfr     y0,b      #65533,n0
                 00FFFD
2981      P:08C6 44F418  [4 -     5532]            add     a,b       #>1023,x0
                 0003FF
2982      P:08C8 20584E  [2 -     5534]            and     x0,b      (r0)+
2983      P:08C9 21AF00  [2 -     5536]            move              b1,b
2984      P:08CA 555000  [2 -     5538]            move              b1,x:(r0)-
2985      P:08CB 65E800  [4 -     5542]            move              x:(r0+n0),r5
2986      P:08CC 56E500  [2 -     5544]            move              x:(r5),a
2987      P:08CD 200003  [2 -     5546]            tst     a
2988      P:08CE 0AF0AA  [6 -     5552]            jeq     L195
                 0008D4
2989      P:08D0 46F400  [4 -     5556]            move              #>256,y0
                 000100
2990      P:08D2 0AF080  [6 -     5562]            jmp     L202
                 0008D6
2991                                     L195
2992      P:08D4 205800  [2 -     5564]            move              (r0)+
2993      P:08D5 46D000  [2 -     5566]            move              x:(r0)-,y0
2994                                     L202
2995                                     ; **************************************************
2996                                     ; 
2997                                     ;   /* LIMA */
2998                                     ;   AL = (*AP > 255) ? 64 : *AP >> 2; 
2999                                     ; **************************************************
3000      P:08D6 380200  [2 -     5568]            move              #2,n0
3001      P:08D7 56F400  [4 -     5572]            move              #>255,a
                 0000FF
3002      P:08D9 466800  [4 -     5576]            move              y0,x:(r0+n0)
3003      P:08DA 46E800  [4 -     5580]            move              x:(r0+n0),y0
3004      P:08DB 466459  [2 -     5582]            tfr     y0,b      y0,x:(r4)
3005      P:08DC 20000D  [2 -     5584]            cmp     a,b
3006      P:08DD 0AF0AF  [6 -     5590]            jle     L197
                 0008E3
3007      P:08DF 56F400  [4 -     5594]            move              #>64,a
                 000040
3008      P:08E1 0AF080  [6 -     5600]            jmp     L198
                 0008E8
3009                                     L197
3010      P:08E3 56E400  [2 -     5602]            move              x:(r4),a
3011      P:08E4 218E00  [2 -     5604]            move              a1,a
3012      P:08E5 200022  [2 -     5606]            asr     a
3013      P:08E6 200022  [2 -     5608]            asr     a
3014      P:08E7 218E00  [2 -     5610]            move              a1,a
3015                                     L198
3016                                     ; **************************************************
3017                                     ; }
3018                                     ; **************************************************
3019      P:08E8 205000  [2 -     5612]            move              (r0)-
3020      P:08E9 205000  [2 -     5614]            move              (r0)-
3021      P:08EA 205600  [2 -     5616]            move              (r6)-
3022      P:08EB 547000  [4 -     5620]            move              a1,x:FAL
                 00006E
3023      P:08ED 65D600  [2 -     5622]            move              x:(r6)-,r5
3024      P:08EE 64D600  [2 -     5624]            move              x:(r6)-,r4
3025      P:08EF 63D600  [2 -     5626]            move              x:(r6)-,r3
3026      P:08F0 62D600  [2 -     5628]            move              x:(r6)-,r2
3027      P:08F1 61D600  [2 -     5630]            move              x:(r6)-,r1
3028      P:08F2 46D600  [2 -     5632]            move              x:(r6)-,y0
3029      P:08F3 45D600  [2 -     5634]            move              x:(r6)-,x1
3030      P:08F4 44D600  [2 -     5636]            move              x:(r6)-,x0
3031      P:08F5 57D600  [2 -     5638]            move              x:(r6)-,b
3032      P:08F6 51E600  [2 -     5640]            move              x:(r6),b0
3033      P:08F7 221600  [2 -     5642]            move              r0,r6
3034      P:08F8 60E000  [2 -     5644]            move              x:(r0),r0
3035      P:08F9 00000C  [4 -     5648]            rts
3036   
3037      X:0054                                   org     x:
3038                                     F___W2
3039      X:0054                                   dc      4084
3040      X:0055                                   dc      18
3041      X:0056                                   dc      41
3042      X:0057                                   dc      64
3043      X:0058                                   dc      112
3044      X:0059                                   dc      198
3045      X:005A                                   dc      255
3046      X:005B                                   dc      1122
3047      P:08FA                                   org     p:
3048                                               global  Fscale_factor
3049                                     Fscale_factor
3050                                     ; **************************************************
3051                                     ; **************************************************
3052                                     ; **************************************************
3053                                     ; 
3054                                     ; void scale_factor(int* Y, int* YL, int* Y_L, int* LAST_Y)
3055                                     ; {
3056                                     ;   /*
3057                                     ;    * scale factor adaptation
3058                                     ;    *
3059                                     ;    * Input signals:  AL, I
3060                                     ;    * Output signals: YL, Y
3061                                     ;    */
3062                                     ; 
3063                                     ;   static int W[] = 
3064                                     ;   {
3065                                     ;     4084, 18, 41, 64, 112, 198, 255, 1122
3066                                     ;   } ; 
3067                                     ;   register int TMP, YUP, YLP;
3068                                     ;  
3069                                     ;   /* FUNCTW */
3070                                     ;   TMP = W[(I >> 3) ? (15 - I) & 7 : I & 7];
3071                                     ; **************************************************
3072      P:08FA 70F400  [4 -     5652]            move              #65531,n0
                 00FFFB
3073      P:08FC 3E0300  [2 -     5654]            move              #3,n6
3074      P:08FD 605E00  [2 -     5656]            move              r0,x:(r6)+
3075      P:08FE 205E00  [2 -     5658]            move              (r6)+
3076      P:08FF 22D000  [2 -     5660]            move              r6,r0
3077      P:0900 204E00  [2 -     5662]            move              (r6)+n6
3078      P:0901 515E00  [2 -     5664]            move              b0,x:(r6)+
3079      P:0902 555E00  [2 -     5666]            move              b1,x:(r6)+
3080      P:0903 445E00  [2 -     5668]            move              x0,x:(r6)+
3081      P:0904 455E00  [2 -     5670]            move              x1,x:(r6)+
3082      P:0905 615E00  [2 -     5672]            move              r1,x:(r6)+
3083      P:0906 625E00  [2 -     5674]            move              r2,x:(r6)+
3084      P:0907 635E00  [2 -     5676]            move              r3,x:(r6)+
3085      P:0908 645E00  [2 -     5678]            move              r4,x:(r6)+
3086      P:0909 63E800  [4 -     5682]            move              x:(r0+n0),r3
3087      P:090A 70F400  [4 -     5686]            move              #65530,n0
                 00FFFA
3088      P:090C 45F000  [4 -     5690]            move              x:FI,x1
                 00006C
3089      P:090E 62E861  [4 -     5694]            tfr     x1,a      x:(r0+n0),r2
3090      P:090F 380200  [2 -     5696]            move              #2,n0
3091      P:0910 218E00  [2 -     5698]            move              a1,a
3092      P:0911 456800  [4 -     5702]            move              x1,x:(r0+n0)
3093      P:0912 0603A0  [4 -     5706]            rep     #3
3094      P:0913 200022  [2 -     5708]            asr     a
3095      P:0914 218E00  [2 -     5710]            move              a1,a
3096      P:0915 200003  [2 -     5712]            tst     a
3097      P:0916 0AF0AA  [6 -     5718]            jeq     L204
                 00091D
3098      P:0918 56F400  [4 -     5722]            move              #>15,a
                 00000F
3099      P:091A 200064  [2 -     5724]            sub     x1,a
3100      P:091B 0AF080  [6 -     5730]            jmp     L216
                 00091F
3101                                     L204
3102      P:091D 56F000  [4 -     5734]            move              x:FI,a
                 00006C
3103                                     L216
3104                                     ; **************************************************
3105                                     ;   
3106                                     ;   /* FILTD */
3107                                     ;   TMP = ((TMP << 5) + 131072 - *LAST_Y) & 131071;
3108                                     ; **************************************************
3109      P:091F 61F400  [4 -     5738]            move              #F___W2,r1
                 000054
3110      P:0921 44F400  [4 -     5742]            move              #>7,x0
                 000007
3111      P:0923 222F46  [2 -     5744]            and     x0,a      r1,b
3112      P:0924 218E00  [2 -     5746]            move              a1,a
3113      P:0925 200018  [2 -     5748]            add     a,b
3114      P:0926 21B100  [2 -     5750]            move              b1,r1
3115      P:0927 45E100  [2 -     5752]            move              x:(r1),x1
3116      P:0928 200069  [2 -     5754]            tfr     x1,b
3117      P:0929 0605A0  [4 -     5758]            rep     #5
3118      P:092A 20003A  [2 -     5760]            asl     b
3119                                     ; **************************************************
3120                                     ;   YUP = (TMP >> 16) ? (TMP >> 5) + 4096 : (TMP >> 5);
3121                                     ; **************************************************
3122      P:092B 380200  [2 -     5762]            move              #2,n0
3123      P:092C 56E200  [2 -     5764]            move              x:(r2),a
3124      P:092D 44F400  [4 -     5768]            move              #>16646144,x0
                 FE0000
3125      P:092F 21AF40  [2 -     5770]            add     x0,a      b1,b
3126      P:0930 44F41C  [4 -     5774]            sub     a,b       #>131071,x0
                 01FFFF
3127      P:0932 20004E  [2 -     5776]            and     x0,b
3128      P:0933 21AF00  [2 -     5778]            move              b1,b
3129      P:0934 556801  [4 -     5782]            tfr     b,a       b1,x:(r0+n0)
3130      P:0935 218E00  [2 -     5784]            move              a1,a
3131      P:0936 0610A0  [4 -     5788]            rep     #16
3132      P:0937 200022  [2 -     5790]            asr     a
3133      P:0938 218E00  [2 -     5792]            move              a1,a
3134      P:0939 200003  [2 -     5794]            tst     a
3135      P:093A 0AF0AA  [6 -     5800]            jeq     L206
                 000945
3136      P:093C 21AF00  [2 -     5802]            move              b1,b
3137      P:093D 0605A0  [4 -     5806]            rep     #5
3138      P:093E 20002A  [2 -     5808]            asr     b
3139      P:093F 56F400  [4 -     5812]            move              #>4096,a
                 001000
3140      P:0941 21AF00  [2 -     5814]            move              b1,b
3141      P:0942 200018  [2 -     5816]            add     a,b
3142      P:0943 0AF080  [6 -     5822]            jmp     L217
                 00094B
3143                                     L206
3144      P:0945 380200  [2 -     5824]            move              #2,n0
3145      P:0946 57E800  [4 -     5828]            move              x:(r0+n0),b
3146      P:0947 21AF00  [2 -     5830]            move              b1,b
3147      P:0948 0605A0  [4 -     5834]            rep     #5
3148      P:0949 20002A  [2 -     5836]            asr     b
3149      P:094A 21AF00  [2 -     5838]            move              b1,b
3150                                     L217
3151                                     ; **************************************************
3152                                     ;   YUP = (YUP + *LAST_Y) & 8191;
3153                                     ; **************************************************
3154                                     ; **************************************************
3155                                     ;   
3156                                     ;   /* LIMB */
3157                                     ;   if ((((YUP + 11264) & 16383) >> 13) == 0)
3158                                     ; **************************************************
3159      P:094B 44F400  [4 -     5842]            move              #>8191,x0
                 001FFF
3160      P:094D 556000  [2 -     5844]            move              b1,x:(r0)
3161      P:094E 56E200  [2 -     5846]            move              x:(r2),a
3162      P:094F 57E000  [2 -     5848]            move              x:(r0),b
3163      P:0950 56F418  [4 -     5852]            add     a,b       #>11264,a
                 002C00
3164      P:0952 44F44E  [4 -     5856]            and     x0,b      #>16383,x0
                 003FFF
3165      P:0954 21AF00  [2 -     5858]            move              b1,b
3166      P:0955 556018  [2 -     5860]            add     a,b       b1,x:(r0)
3167      P:0956 200001  [2 -     5862]            tfr     b,a
3168      P:0957 200046  [2 -     5864]            and     x0,a
3169      P:0958 218E00  [2 -     5866]            move              a1,a
3170      P:0959 218E00  [2 -     5868]            move              a1,a
3171      P:095A 060DA0  [4 -     5872]            rep     #13
3172      P:095B 200022  [2 -     5874]            asr     a
3173      P:095C 218E00  [2 -     5876]            move              a1,a
3174      P:095D 200003  [2 -     5878]            tst     a
3175      P:095E 0AF0A2  [6 -     5884]            jne     L208
                 000963
3176                                     ; **************************************************
3177                                     ;     YUP = 5120;
3178                                     ; **************************************************
3179      P:0960 45F400  [4 -     5888]            move              #>5120,x1
                 001400
3180      P:0962 456000  [2 -     5890]            move              x1,x:(r0)
3181                                     L208
3182                                     ; **************************************************
3183                                     ;   if ((((YUP + 15840) & 16383) >> 13))
3184                                     ; **************************************************
3185      P:0963 44F400  [4 -     5894]            move              #>16383,x0
                 003FFF
3186      P:0965 57E000  [2 -     5896]            move              x:(r0),b
3187      P:0966 56F400  [4 -     5900]            move              #>15840,a
                 003DE0
3188      P:0968 200018  [2 -     5902]            add     a,b
3189      P:0969 200001  [2 -     5904]            tfr     b,a
3190      P:096A 200046  [2 -     5906]            and     x0,a
3191      P:096B 218E00  [2 -     5908]            move              a1,a
3192      P:096C 218E00  [2 -     5910]            move              a1,a
3193      P:096D 060DA0  [4 -     5914]            rep     #13
3194      P:096E 200022  [2 -     5916]            asr     a
3195      P:096F 218E00  [2 -     5918]            move              a1,a
3196      P:0970 200003  [2 -     5920]            tst     a
3197      P:0971 0AF0AA  [6 -     5926]            jeq     L209
                 000976
3198                                     ; **************************************************
3199                                     ;     YUP = 544;
3200                                     ; **************************************************
3201      P:0973 45F400  [4 -     5930]            move              #>544,x1
                 000220
3202      P:0975 456000  [2 -     5932]            move              x1,x:(r0)
3203                                     L209
3204                                     ; **************************************************
3205                                     ;   
3206                                     ;   /* FILTE */
3207                                     ;   TMP = (YUP + ((1048576 - *Y_L) >> 6)) & 16383;
3208                                     ; **************************************************
3209      P:0976 45E300  [2 -     5934]            move              x:(r3),x1
3210      P:0977 56F400  [4 -     5938]            move              #>1048576,a
                 100000
3211      P:0979 200064  [2 -     5940]            sub     x1,a
3212      P:097A 218E00  [2 -     5942]            move              a1,a
3213      P:097B 0606A0  [4 -     5946]            rep     #6
3214      P:097C 200022  [2 -     5948]            asr     a
3215                                     ; **************************************************
3216                                     ;   TMP = (TMP >> 13) ? TMP + 507904 : TMP;
3217                                     ; **************************************************
3218      P:097D 380200  [2 -     5950]            move              #2,n0
3219      P:097E 57E000  [2 -     5952]            move              x:(r0),b
3220      P:097F 44F400  [4 -     5956]            move              #>16383,x0
                 003FFF
3221      P:0981 218E00  [2 -     5958]            move              a1,a
3222      P:0982 200018  [2 -     5960]            add     a,b
3223      P:0983 20004E  [2 -     5962]            and     x0,b
3224      P:0984 21AF00  [2 -     5964]            move              b1,b
3225      P:0985 556801  [4 -     5968]            tfr     b,a       b1,x:(r0+n0)
3226      P:0986 218E00  [2 -     5970]            move              a1,a
3227      P:0987 060DA0  [4 -     5974]            rep     #13
3228      P:0988 200022  [2 -     5976]            asr     a
3229      P:0989 218E00  [2 -     5978]            move              a1,a
3230      P:098A 200003  [2 -     5980]            tst     a
3231      P:098B 0AF0AA  [6 -     5986]            jeq     L211
                 000991
3232      P:098D 56F400  [4 -     5990]            move              #>507904,a
                 07C000
3233      P:098F 200018  [2 -     5992]            add     a,b
3234      P:0990 556800  [4 -     5996]            move              b1,x:(r0+n0)
3235                                     L211
3236                                     ; **************************************************
3237                                     ;   YLP = (TMP + *Y_L) & 524287;
3238                                     ; **************************************************
3239                                     ; **************************************************
3240                                     ;   
3241                                     ;   /* MIX */
3242                                     ;   TMP = (YUP + 16384 - (*Y_L >> 6)) & 16383;
3243                                     ; **************************************************
3244      P:0991 380200  [2 -     5998]            move              #2,n0
3245      P:0992 56E300  [2 -     6000]            move              x:(r3),a
3246      P:0993 57E800  [4 -     6004]            move              x:(r0+n0),b
3247      P:0994 44F418  [4 -     6008]            add     a,b       #>524287,x0
                 07FFFF
3248      P:0996 218E4E  [2 -     6010]            and     x0,b      a1,a
3249      P:0997 21AF00  [2 -     6012]            move              b1,b
3250      P:0998 205800  [2 -     6014]            move              (r0)+
3251      P:0999 555000  [2 -     6016]            move              b1,x:(r0)-
3252      P:099A 0606A0  [4 -     6020]            rep     #6
3253      P:099B 200022  [2 -     6022]            asr     a
3254                                     ; **************************************************
3255                                     ;   *LAST_Y = TMP >> 13;
3256                                     ; **************************************************
3257      P:099C 57E000  [2 -     6024]            move              x:(r0),b
3258      P:099D 44F400  [4 -     6028]            move              #>16383,x0
                 003FFF
3259      P:099F 45F400  [4 -     6032]            move              #>16760832,x1
                 FFC000
3260      P:09A1 218E00  [2 -     6034]            move              a1,a
3261      P:09A2 200060  [2 -     6036]            add     x1,a
3262      P:09A3 20001C  [2 -     6038]            sub     a,b
3263      P:09A4 20004E  [2 -     6040]            and     x0,b
3264      P:09A5 21AF00  [2 -     6042]            move              b1,b
3265      P:09A6 556801  [4 -     6046]            tfr     b,a       b1,x:(r0+n0)
3266      P:09A7 218E00  [2 -     6048]            move              a1,a
3267      P:09A8 060DA0  [4 -     6052]            rep     #13
3268      P:09A9 200022  [2 -     6054]            asr     a
3269                                     ; **************************************************
3270                                     ;   TMP = *LAST_Y ? (16384 - TMP) & 8191 : TMP; 
3271                                     ; **************************************************
3272      P:09AA 218E00  [2 -     6056]            move              a1,a
3273      P:09AB 546203  [2 -     6058]            tst     a         a1,x:(r2)
3274      P:09AC 0AF0AA  [6 -     6064]            jeq     L213
                 0009B8
3275      P:09AE 45E800  [4 -     6068]            move              x:(r0+n0),x1
3276      P:09AF 44F400  [4 -     6072]            move              #>8191,x0
                 001FFF
3277      P:09B1 56F400  [4 -     6076]            move              #>16384,a
                 004000
3278      P:09B3 200064  [2 -     6078]            sub     x1,a
3279      P:09B4 546809  [4 -     6082]            tfr     a,b       a1,x:(r0+n0)
3280      P:09B5 20004E  [2 -     6084]            and     x0,b
3281      P:09B6 21AF00  [2 -     6086]            move              b1,b
3282      P:09B7 556800  [4 -     6090]            move              b1,x:(r0+n0)
3283                                     L213
3284                                     ; **************************************************
3285                                     ;   TMP = (TMP * AL) >> 6;
3286                                     ; **************************************************
3287      P:09B8 380200  [2 -     6092]            move              #2,n0
3288      P:09B9 44F000  [4 -     6096]            move              x:FAL,x0
                 00006E
3289      P:09BB 45E800  [4 -     6100]            move              x:(r0+n0),x1
3290      P:09BC 2000A8  [2 -     6102]            mpy     +x0,x1,b
3291      P:09BD 20002A  [2 -     6104]            asr     b
3292      P:09BE 212F00  [2 -     6106]            move              b0,b
3293      P:09BF 21AF00  [2 -     6108]            move              b1,b
3294      P:09C0 0606A0  [4 -     6112]            rep     #6
3295      P:09C1 20002A  [2 -     6114]            asr     b
3296                                     ; **************************************************
3297                                     ;   TMP = *LAST_Y ? (16384 - TMP) & 16383 : TMP;
3298                                     ; **************************************************
3299      P:09C2 21AF00  [2 -     6116]            move              b1,b
3300      P:09C3 556800  [4 -     6120]            move              b1,x:(r0+n0)
3301      P:09C4 56E200  [2 -     6122]            move              x:(r2),a
3302      P:09C5 200003  [2 -     6124]            tst     a
3303      P:09C6 0AF0AA  [6 -     6130]            jeq     L215
                 0009D2
3304      P:09C8 45E800  [4 -     6134]            move              x:(r0+n0),x1
3305      P:09C9 44F400  [4 -     6138]            move              #>16383,x0
                 003FFF
3306      P:09CB 56F400  [4 -     6142]            move              #>16384,a
                 004000
3307      P:09CD 200064  [2 -     6144]            sub     x1,a
3308      P:09CE 546809  [4 -     6148]            tfr     a,b       a1,x:(r0+n0)
3309      P:09CF 20004E  [2 -     6150]            and     x0,b
3310      P:09D0 21AF00  [2 -     6152]            move              b1,b
3311      P:09D1 556800  [4 -     6156]            move              b1,x:(r0+n0)
3312                                     L215
3313                                     ; **************************************************
3314                                     ;   
3315                                     ;   *LAST_Y = *Y = ((*Y_L >> 6) + TMP) & 8191; 
3316                                     ; **************************************************
3317      P:09D2 56E300  [2 -     6158]            move              x:(r3),a
3318      P:09D3 218E00  [2 -     6160]            move              a1,a
3319      P:09D4 0606A0  [4 -     6164]            rep     #6
3320      P:09D5 200022  [2 -     6166]            asr     a
3321                                     ; **************************************************
3322                                     ;   *YL = *Y_L; 
3323                                     ; **************************************************
3324                                     ; **************************************************
3325                                     ;   *Y_L = YLP;
3326                                     ; **************************************************
3327                                     ; **************************************************
3328                                     ; }
3329                                     ; **************************************************
3330      P:09D6 380200  [2 -     6168]            move              #2,n0
3331      P:09D7 44F400  [4 -     6172]            move              #>8191,x0
                 001FFF
3332      P:09D9 45E800  [4 -     6176]            move              x:(r0+n0),x1
3333      P:09DA 70F400  [4 -     6180]            move              #65533,n0
                 00FFFD
3334      P:09DC 218E00  [2 -     6182]            move              a1,a
3335      P:09DD 64E860  [4 -     6186]            add     x1,a      x:(r0+n0),r4
3336      P:09DE 70F446  [4 -     6190]            and     x0,a      #65532,n0
                 00FFFC
3337      P:09E0 218E00  [2 -     6192]            move              a1,a
3338      P:09E1 546400  [2 -     6194]            move              a1,x:(r4)
3339      P:09E2 546200  [2 -     6196]            move              a1,x:(r2)
3340      P:09E3 64E800  [4 -     6200]            move              x:(r0+n0),r4
3341      P:09E4 56E300  [2 -     6202]            move              x:(r3),a
3342      P:09E5 546400  [2 -     6204]            move              a1,x:(r4)
3343      P:09E6 205800  [2 -     6206]            move              (r0)+
3344      P:09E7 45D000  [2 -     6208]            move              x:(r0)-,x1
3345      P:09E8 456300  [2 -     6210]            move              x1,x:(r3)
3346      P:09E9 205000  [2 -     6212]            move              (r0)-
3347      P:09EA 205000  [2 -     6214]            move              (r0)-
3348      P:09EB 205600  [2 -     6216]            move              (r6)-
3349      P:09EC 64D600  [2 -     6218]            move              x:(r6)-,r4
3350      P:09ED 63D600  [2 -     6220]            move              x:(r6)-,r3
3351      P:09EE 62D600  [2 -     6222]            move              x:(r6)-,r2
3352      P:09EF 61D600  [2 -     6224]            move              x:(r6)-,r1
3353      P:09F0 45D600  [2 -     6226]            move              x:(r6)-,x1
3354      P:09F1 44D600  [2 -     6228]            move              x:(r6)-,x0
3355      P:09F2 57D600  [2 -     6230]            move              x:(r6)-,b
3356      P:09F3 51E600  [2 -     6232]            move              x:(r6),b0
3357      P:09F4 221600  [2 -     6234]            move              r0,r6
3358      P:09F5 60E000  [2 -     6236]            move              x:(r0),r0
3359      P:09F6 00000C  [4 -     6240]            rts
3360   
3361                                               global  Fadd
3362                                     Fadd
3363                                     ; **************************************************
3364                                     ; **************************************************
3365                                     ; **************************************************
3366                                     ; 
3367                                     ; void add(int* DQ)
3368                                     ; {
3369                                     ;   /*
3370                                     ;    * add
3371                                     ;    *
3372                                     ;    * Input signals:  DQ, SE
3373                                     ;    * Output signals: SP
3374                                     ;    */
3375                                     ; 
3376                                     ;   int dq, se;
3377                                     ; 
3378                                     ;   /* 15 SM auf 16 TC */
3379                                     ;   dq = (*DQ & (1 << 14)) ? *DQ == (1 << 14) ? 0: 
3380                                     ;        (((*DQ ^ 0x3FFF) + 0x1) & 0x3FFF) + 0xC000 : *DQ ; 
3381                                     ; **************************************************
3382      P:09F7 70F400  [4 -     6244]            move              #65533,n0
                 00FFFD
3383      P:09F9 605E00  [2 -     6246]            move              r0,x:(r6)+
3384      P:09FA 205E00  [2 -     6248]            move              (r6)+
3385      P:09FB 22D000  [2 -     6250]            move              r6,r0
3386      P:09FC 205E00  [2 -     6252]            move              (r6)+
3387      P:09FD 515E00  [2 -     6254]            move              b0,x:(r6)+
3388      P:09FE 555E00  [2 -     6256]            move              b1,x:(r6)+
3389      P:09FF 445E00  [2 -     6258]            move              x0,x:(r6)+
3390      P:0A00 44F400  [4 -     6262]            move              #>16384,x0
                 004000
3391      P:0A02 455E00  [2 -     6264]            move              x1,x:(r6)+
3392      P:0A03 615E00  [2 -     6266]            move              r1,x:(r6)+
3393      P:0A04 61E800  [4 -     6270]            move              x:(r0+n0),r1
3394      P:0A05 57E100  [2 -     6272]            move              x:(r1),b
3395      P:0A06 200001  [2 -     6274]            tfr     b,a
3396      P:0A07 200046  [2 -     6276]            and     x0,a
3397      P:0A08 218E00  [2 -     6278]            move              a1,a
3398      P:0A09 200003  [2 -     6280]            tst     a
3399      P:0A0A 0AF0AA  [6 -     6286]            jeq     L219
                 000A20
3400      P:0A0C 20004D  [2 -     6288]            cmp     x0,b
3401      P:0A0D 0AF0A2  [6 -     6294]            jne     L221
                 000A12
3402      P:0A0F 20001B  [2 -     6296]            clr     b
3403      P:0A10 0AF080  [6 -     6302]            jmp     L220
                 000A21
3404                                     L221
3405      P:0A12 44F400  [4 -     6306]            move              #>16383,x0
                 003FFF
3406      P:0A14 56E100  [2 -     6308]            move              x:(r1),a
3407      P:0A15 56F409  [4 -     6312]            tfr     a,b       #>1,a
                 000001
3408      P:0A17 20004B  [2 -     6314]            eor     x0,b
3409      P:0A18 21AF00  [2 -     6316]            move              b1,b
3410      P:0A19 56F418  [4 -     6320]            add     a,b       #>49152,a
                 00C000
3411      P:0A1B 20004E  [2 -     6322]            and     x0,b
3412      P:0A1C 21AF00  [2 -     6324]            move              b1,b
3413      P:0A1D 200018  [2 -     6326]            add     a,b
3414      P:0A1E 0AF080  [6 -     6332]            jmp     L220
                 000A21
3415                                     L219
3416      P:0A20 57E100  [2 -     6334]            move              x:(r1),b
3417                                     L220
3418                                     ; **************************************************
3419                                     ; 
3420                                     ;   /* 15 TC auf 16 TC */
3421                                     ;   se = S_E & (1 << 14) ? 0x8000 | S_E : S_E ; 
3422                                     ; **************************************************
3423      P:0A21 45F000  [4 -     6338]            move              x:FS_E,x1
                 00006A
3424      P:0A23 44F461  [4 -     6342]            tfr     x1,a      #>16384,x0
                 004000
3425      P:0A25 456046  [2 -     6344]            and     x0,a      x1,x:(r0)
3426      P:0A26 218E00  [2 -     6346]            move              a1,a
3427      P:0A27 200003  [2 -     6348]            tst     a
3428      P:0A28 0AF0AA  [6 -     6354]            jeq     L223
                 000A31
3429      P:0A2A 56E000  [2 -     6356]            move              x:(r0),a
3430      P:0A2B 44F400  [4 -     6360]            move              #>32768,x0
                 008000
3431      P:0A2D 200042  [2 -     6362]            or      x0,a
3432      P:0A2E 218E00  [2 -     6364]            move              a1,a
3433      P:0A2F 0AF080  [6 -     6370]            jmp     L224
                 000A33
3434                                     L223
3435      P:0A31 56F000  [4 -     6374]            move              x:FS_E,a
                 00006A
3436                                     L224
3437                                     ; **************************************************
3438                                     ;   
3439                                     ;   /* perform add operation at 16 TC */
3440                                     ;   SP  = (dq + se) & 0xFFFF;
3441                                     ; **************************************************
3442                                     ; **************************************************
3443                                     ; }
3444                                     ; **************************************************
3445      P:0A33 44F418  [4 -     6378]            add     a,b       #>65535,x0
                 00FFFF
3446      P:0A35 205601  [2 -     6380]            tfr     b,a       (r6)-
3447      P:0A36 200046  [2 -     6382]            and     x0,a
3448      P:0A37 218E00  [2 -     6384]            move              a1,a
3449      P:0A38 547000  [4 -     6388]            move              a1,x:FSP
                 000068
3450      P:0A3A 61D600  [2 -     6390]            move              x:(r6)-,r1
3451      P:0A3B 45D600  [2 -     6392]            move              x:(r6)-,x1
3452      P:0A3C 44D600  [2 -     6394]            move              x:(r6)-,x0
3453      P:0A3D 57D600  [2 -     6396]            move              x:(r6)-,b
3454      P:0A3E 51E600  [2 -     6398]            move              x:(r6),b0
3455      P:0A3F 205600  [2 -     6400]            move              (r6)-
3456      P:0A40 205600  [2 -     6402]            move              (r6)-
3457      P:0A41 205600  [2 -     6404]            move              (r6)-
3458      P:0A42 60E600  [2 -     6406]            move              x:(r6),r0
3459      P:0A43 00000C  [4 -     6410]            rts
3460   
3461                                               global  Finit_disk_play
3462                                     Finit_disk_play
3463                                     ; **************************************************
3464                                     ; **************************************************
3465                                     ; **************************************************
3466                                     ; 
3467                                     ; #ifdef __DSP56K__
3468                                     ; 
3469                                     ; void init_disk_play()
3470                                     ; {
3471                                     ; }
3472                                     ; **************************************************
3473      P:0A44 00000C  [4 -     6414]            rts
3474   
3475                                               global  FData_in
3476      X:005C                                   org     x:
3477                                     FData_in
3478      X:005C                                   dc      122
3479      X:005D                                   dc      121
3480      X:005E                                   dc      123
3481      X:005F                                   dc      119
3482      X:0060                                   dc      116
3483      X:0061                                   dc      115
3484      X:0062                                   dc      118
3485      X:0063                                   dc      116
3486      X:0064                                   dc      114
3487      X:0065                                   dc      115
3488                                     F___i3
3489      X:0066                                   dc      0
3490      P:0A45                                   org     p:
3491                                               global  Fdisk_play
3492                                     Fdisk_play
3493                                     ; **************************************************
3494                                     ; **************************************************
3495                                     ; **************************************************
3496                                     ; 
3497                                     ; #ifdef __SIMULATION__
3498                                     ; #include "data_in.c"
3499                                     ; #endif
3500                                     ; 
3501                                     ; void disk_play()
3502                                     ; {
3503                                     ; #ifdef __SIMULATION__
3504                                     ; 
3505                                     ;   static int i = 0;
3506                                     ; 
3507                                     ;   if (i >= sizeof(Data_in) / sizeof(int))
3508                                     ; **************************************************
3509      P:0A45 605E00  [2 -     6416]            move              r0,x:(r6)+
3510      P:0A46 22D000  [2 -     6418]            move              r6,r0
3511      P:0A47 205E00  [2 -     6420]            move              (r6)+
3512      P:0A48 515E00  [2 -     6422]            move              b0,x:(r6)+
3513      P:0A49 555E00  [2 -     6424]            move              b1,x:(r6)+
3514      P:0A4A 57F400  [4 -     6428]            move              #>9,b
                 000009
3515      P:0A4C 445E00  [2 -     6430]            move              x0,x:(r6)+
3516      P:0A4D 455E00  [2 -     6432]            move              x1,x:(r6)+
3517      P:0A4E 615E00  [2 -     6434]            move              r1,x:(r6)+
3518      P:0A4F 56F000  [4 -     6438]            move              x:F___i3,a
                 000066
3519      P:0A51 200005  [2 -     6440]            cmp     b,a
3520      P:0A52 0AF0AF  [6 -     6446]            jle     L227
                 000A58
3521                                     ; **************************************************
3522                                     ;     ExitFlag = TRUE;
3523                                     ; **************************************************
3524      P:0A54 56F400  [4 -     6450]            move              #>1,a
                 000001
3525      P:0A56 547000  [4 -     6454]            move              a1,x:FExitFlag
                 000070
3526                                     L227
3527                                     ; **************************************************
3528                                     ; 
3529                                     ;   SL = Data_in[i++] & 0x3FFF;
3530                                     ; **************************************************
3531                                     ; **************************************************
3532                                     ; 
3533                                     ; #else
3534                                     ; 
3535                                     ;   ExitFlag = TRUE;
3536                                     ;   SL = 0;
3537                                     ; 
3538                                     ; #endif
3539                                     ; }
3540                                     ; **************************************************
3541      P:0A58 61F400  [4 -     6458]            move              #FData_in,r1
                 00005C
3542      P:0A5A 56F000  [4 -     6462]            move              x:F___i3,a
                 000066
3543      P:0A5C 44F409  [4 -     6466]            tfr     a,b       #>16383,x0
                 003FFF
3544      P:0A5E 45F400  [4 -     6470]            move              #>1,x1
                 000001
3545      P:0A60 205068  [2 -     6472]            add     x1,b      (r0)-
3546      P:0A61 21A500  [2 -     6474]            move              b1,x1
3547      P:0A62 222F00  [2 -     6476]            move              r1,b
3548      P:0A63 457018  [4 -     6480]            add     a,b       x1,x:F___i3
                 000066
3549      P:0A65 21B100  [2 -     6482]            move              b1,r1
3550      P:0A66 205600  [2 -     6484]            move              (r6)-
3551      P:0A67 56E100  [2 -     6486]            move              x:(r1),a
3552      P:0A68 200046  [2 -     6488]            and     x0,a
3553      P:0A69 218E00  [2 -     6490]            move              a1,a
3554      P:0A6A 547000  [4 -     6494]            move              a1,x:FSL
                 000069
3555      P:0A6C 61D600  [2 -     6496]            move              x:(r6)-,r1
3556      P:0A6D 45D600  [2 -     6498]            move              x:(r6)-,x1
3557      P:0A6E 44D600  [2 -     6500]            move              x:(r6)-,x0
3558      P:0A6F 57D600  [2 -     6502]            move              x:(r6)-,b
3559      P:0A70 51E600  [2 -     6504]            move              x:(r6),b0
3560      P:0A71 221600  [2 -     6506]            move              r0,r6
3561      P:0A72 60E000  [2 -     6508]            move              x:(r0),r0
3562      P:0A73 00000C  [4 -     6512]            rts
3563   
3564                                               global  Fpost_disk_play
3565                                     Fpost_disk_play
3566                                     ; **************************************************
3567                                     ; **************************************************
3568                                     ; **************************************************
3569                                     ; 
3570                                     ; void post_disk_play()
3571                                     ; {
3572                                     ; }
3573                                     ; **************************************************
3574      P:0A74 00000C  [4 -     6516]            rts
3575   
3576                                               global  Finit_disk_record
3577                                     Finit_disk_record
3578                                     ; **************************************************
3579                                     ; **************************************************
3580                                     ; **************************************************
3581                                     ; 
3582                                     ; void init_disk_record()
3583                                     ; {
3584                                     ; }
3585                                     ; **************************************************
3586      P:0A75 00000C  [4 -     6520]            rts
3587   
3588                                               global  Fdisk_record
3589                                     Fdisk_record
3590                                     ; **************************************************
3591                                     ; **************************************************
3592                                     ; **************************************************
3593                                     ; 
3594                                     ; void disk_record()
3595                                     ; {
3596                                     ; }
3597                                     ; **************************************************
3598      P:0A76 00000C  [4 -     6524]            rts
3599   
3600                                               global  Fpost_disk_record
3601                                     Fpost_disk_record
3602                                     ; **************************************************
3603                                     ; **************************************************
3604                                     ; **************************************************
3605                                     ; 
3606                                     ; void post_disk_record()
3607                                     ; {
3608                                     ; }
3609                                     ; **************************************************
3610      P:0A77 00000C  [4 -     6528]            rts
3611   
3612                                               global  Fmain
3613                                     Fmain
3614      P:0A78 055E3C  [2 -     6530]            move              ssh,x:(r6)+
3615                                     ; **************************************************
3616                                     ; **************************************************
3617                                     ; **************************************************
3618                                     ; 
3619                                     ; #else
3620                                     ; 
3621                                     ; void init_disk_play()
3622                                     ; {
3623                                     ;   istrm = fopen("data.in", "rb");
3624                                     ; }
3625                                     ; 
3626                                     ; void disk_play()
3627                                     ; {
3628                                     ;   int d;
3629                                     ; 
3630                                     ;   if (istrm != NULL && !feof(istrm))
3631                                     ;   {
3632                                     ;     fread((char*) &d, sizeof(int), 1, istrm);
3633                                     ;     SL = (d & 0x3FFF0000) >> 16;
3634                                     ;   }
3635                                     ;   if (feof(istrm))
3636                                     ;     ExitFlag = TRUE;
3637                                     ; }
3638                                     ; 
3639                                     ; void post_disk_play()
3640                                     ; {
3641                                     ;   if (istrm != NULL)
3642                                     ;     fclose(istrm);
3643                                     ; }
3644                                     ; 
3645                                     ; void init_disk_record()
3646                                     ; {
3647                                     ;   ostrm = fopen("data.out", "wb");
3648                                     ; }
3649                                     ; 
3650                                     ; void disk_record()
3651                                     ; {
3652                                     ;   int d;
3653                                     ; 
3654                                     ;   if (ostrm != NULL)
3655                                     ;   {
3656                                     ;     d = (SD & 0x0000FFFF) << 16;
3657                                     ;     fwrite((char*) &d, 4, 1, ostrm);
3658                                     ;   }
3659                                     ; }
3660                                     ; 
3661                                     ; void post_disk_record()
3662                                     ; {
3663                                     ;   if (ostrm != NULL)
3664                                     ;     fclose(ostrm);
3665                                     ; }
3666                                     ; 
3667                                     ; #endif
3668                                     ; 
3669                                     ; main()
3670                                     ; {
3671                                     ; #ifdef __DOWNLOAD__
3672                                     ;   run56k_start();
3673                                     ; #endif
3674                                     ; 
3675                                     ;   init_disk_play();
3676                                     ; **************************************************
3677      P:0A79 445E00  [2 -     6532]            move              x0,x:(r6)+
3678      P:0A7A 615E00  [2 -     6534]            move              r1,x:(r6)+
3679      P:0A7B 625E00  [2 -     6536]            move              r2,x:(r6)+
3680      P:0A7C 635E00  [2 -     6538]            move              r3,x:(r6)+
3681      P:0A7D 645E00  [2 -     6540]            move              r4,x:(r6)+
3682      P:0A7E 655E00  [2 -     6542]            move              r5,x:(r6)+
3683      P:0A7F 675E00  [2 -     6544]            move              r7,x:(r6)+
3684      P:0A80 0BF080  [6 -     6550]            jsr     Finit_disk_play
                 000A44
3685                                     ; **************************************************
3686                                     ;   init_disk_record();
3687                                     ; **************************************************
3688      P:0A82 0BF080  [6 -     6556]            jsr     Finit_disk_record
                 000A75
3689                                     ; **************************************************
3690                                     ; 
3691                                     ;   ExitFlag = FALSE;
3692                                     ; **************************************************
3693                                     ; **************************************************
3694                                     ;   while (!ExitFlag)
3695                                     ; **************************************************
3696      P:0A84 64F413  [4 -     6560]            clr     a         #FD_Y,r4
                 000020
3697      P:0A86 62F400  [4 -     6564]            move              #FD_DQ,r2
                 00001E
3698      P:0A88 65F400  [4 -     6568]            move              #FD_T,r5
                 00001F
3699      P:0A8A 63F400  [4 -     6572]            move              #FE_Y,r3
                 000002
3700      P:0A8C 67F400  [4 -     6576]            move              #FE_DQ,r7
                 000000
3701      P:0A8E 547000  [4 -     6580]            move              a1,x:FExitFlag
                 000070
3702                                     L236
3703                                     ; **************************************************
3704                                     ;   {
3705                                     ;     disk_play();
3706                                     ; **************************************************
3707      P:0A90 0BF080  [6 -     6586]            jsr     Fdisk_play
                 000A45
3708                                     ; **************************************************
3709                                     ;     if (ExitFlag)
3710                                     ; **************************************************
3711      P:0A92 56F000  [4 -     6590]            move              x:FExitFlag,a
                 000070
3712      P:0A94 200003  [2 -     6592]            tst     a
3713      P:0A95 0AF0A2  [6 -     6598]            jne     L234
                 000B70
3714                                     ; **************************************************
3715                                     ;       break;
3716                                     ; **************************************************
3717                                     ; **************************************************
3718                                     ; 
3719                                     ;     /*
3720                                     ;      * ENCODER
3721                                     ;      */
3722                                     ;     adpt_predict(&E_DQ, &E_T, &E_DQ2, &E_DQ3, &E_DQ4, &E_DQ5, &E_DQ6, &E_DQ7,
3723                                     ;               &E_PK1, &E_PK2, &E_SR2, &E_A1, &E_A2, E_B,
3724                                     ;               &E_SE, &E_SEZ);
3725                                     ; **************************************************
3726      P:0A97 61F400  [4 -     6602]            move              #FE_SEZ,r1
                 000016
3727      P:0A99 44F400  [4 -     6606]            move              #>FE_T,x0
                 000001
3728      P:0A9B 615E00  [2 -     6608]            move              r1,x:(r6)+
3729      P:0A9C 61F400  [4 -     6612]            move              #FE_SE,r1
                 000015
3730      P:0A9E 615E00  [2 -     6614]            move              r1,x:(r6)+
3731      P:0A9F 61F400  [4 -     6618]            move              #FE_B,r1
                 00000F
3732      P:0AA1 615E00  [2 -     6620]            move              r1,x:(r6)+
3733      P:0AA2 61F400  [4 -     6624]            move              #FE_A2,r1
                 00000E
3734      P:0AA4 615E00  [2 -     6626]            move              r1,x:(r6)+
3735      P:0AA5 61F400  [4 -     6630]            move              #FE_A1,r1
                 00000D
3736      P:0AA7 615E00  [2 -     6632]            move              r1,x:(r6)+
3737      P:0AA8 61F400  [4 -     6636]            move              #FE_SR2,r1
                 00000C
3738      P:0AAA 615E00  [2 -     6638]            move              r1,x:(r6)+
3739      P:0AAB 61F400  [4 -     6642]            move              #FE_PK2,r1
                 00000B
3740      P:0AAD 615E00  [2 -     6644]            move              r1,x:(r6)+
3741      P:0AAE 61F400  [4 -     6648]            move              #FE_PK1,r1
                 00000A
3742      P:0AB0 615E00  [2 -     6650]            move              r1,x:(r6)+
3743      P:0AB1 61F400  [4 -     6654]            move              #FE_DQ7,r1
                 000009
3744      P:0AB3 615E00  [2 -     6656]            move              r1,x:(r6)+
3745      P:0AB4 61F400  [4 -     6660]            move              #FE_DQ6,r1
                 000008
3746      P:0AB6 615E00  [2 -     6662]            move              r1,x:(r6)+
3747      P:0AB7 61F400  [4 -     6666]            move              #FE_DQ5,r1
                 000007
3748      P:0AB9 615E00  [2 -     6668]            move              r1,x:(r6)+
3749      P:0ABA 61F400  [4 -     6672]            move              #FE_DQ4,r1
                 000006
3750      P:0ABC 615E00  [2 -     6674]            move              r1,x:(r6)+
3751      P:0ABD 61F400  [4 -     6678]            move              #FE_DQ3,r1
                 000005
3752      P:0ABF 615E00  [2 -     6680]            move              r1,x:(r6)+
3753      P:0AC0 61F400  [4 -     6684]            move              #FE_DQ2,r1
                 000004
3754      P:0AC2 615E00  [2 -     6686]            move              r1,x:(r6)+
3755      P:0AC3 445E00  [2 -     6688]            move              x0,x:(r6)+
3756      P:0AC4 675E00  [2 -     6690]            move              r7,x:(r6)+
3757      P:0AC5 0BF080  [6 -     6696]            jsr     Fadpt_predict
                 000140
3758                                     ; **************************************************
3759                                     ;     diff_signal();
3760                                     ; **************************************************
3761      P:0AC7 3E1000  [2 -     6698]            move              #16,n6
3762      P:0AC8 204600  [2 -     6700]            move              (r6)-n6
3763      P:0AC9 0BF080  [6 -     6706]            jsr     Fdiff_signal
                 0000F3
3764                                     ; **************************************************
3765                                     ;     adpt_quant(&E_Y);
3766                                     ; **************************************************
3767      P:0ACB 635E00  [2 -     6708]            move              r3,x:(r6)+
3768      P:0ACC 0BF080  [6 -     6714]            jsr     Fadpt_quant
                 00064A
3769                                     ; **************************************************
3770                                     ;     iadpt_quant(&E_DQ, &E_Y);
3771                                     ; **************************************************
3772      P:0ACE 205600  [2 -     6716]            move              (r6)-
3773      P:0ACF 635E00  [2 -     6718]            move              r3,x:(r6)+
3774      P:0AD0 675E00  [2 -     6720]            move              r7,x:(r6)+
3775      P:0AD1 0BF080  [6 -     6726]            jsr     Fiadpt_quant
                 0005E8
3776                                     ; **************************************************
3777                                     ;     tone_detector(&E_DQ, &E_T, &E_YL, &E_t_dr, &E_LAST_TR);
3778                                     ; **************************************************
3779      P:0AD3 61F400  [4 -     6730]            move              #FE_LAST_TR,r1
                 000018
3780      P:0AD5 44F400  [4 -     6734]            move              #>FE_YL,x0
                 000003
3781      P:0AD7 205600  [2 -     6736]            move              (r6)-
3782      P:0AD8 205600  [2 -     6738]            move              (r6)-
3783      P:0AD9 615E00  [2 -     6740]            move              r1,x:(r6)+
3784      P:0ADA 61F400  [4 -     6744]            move              #FE_t_dr,r1
                 000017
3785      P:0ADC 615E00  [2 -     6746]            move              r1,x:(r6)+
3786      P:0ADD 445E00  [2 -     6748]            move              x0,x:(r6)+
3787      P:0ADE 44F400  [4 -     6752]            move              #>FE_T,x0
                 000001
3788      P:0AE0 445E00  [2 -     6754]            move              x0,x:(r6)+
3789      P:0AE1 675E00  [2 -     6756]            move              r7,x:(r6)+
3790      P:0AE2 0BF080  [6 -     6762]            jsr     Ftone_detector
                 000758
3791                                     ; **************************************************
3792                                     ;     speed_control(&E_T, &E_Y, &E_DMS, &E_DML, &E_AP);
3793                                     ; **************************************************
3794      P:0AE4 3E0500  [2 -     6764]            move              #5,n6
3795      P:0AE5 61F400  [4 -     6768]            move              #FE_AP,r1
                 00001B
3796      P:0AE7 204600  [2 -     6770]            move              (r6)-n6
3797      P:0AE8 615E00  [2 -     6772]            move              r1,x:(r6)+
3798      P:0AE9 61F400  [4 -     6776]            move              #FE_DML,r1
                 00001A
3799      P:0AEB 615E00  [2 -     6778]            move              r1,x:(r6)+
3800      P:0AEC 61F400  [4 -     6782]            move              #FE_DMS,r1
                 000019
3801      P:0AEE 615E00  [2 -     6784]            move              r1,x:(r6)+
3802      P:0AEF 635E00  [2 -     6786]            move              r3,x:(r6)+
3803      P:0AF0 445E00  [2 -     6788]            move              x0,x:(r6)+
3804      P:0AF1 0BF080  [6 -     6794]            jsr     Fspeed_control
                 0007DA
3805                                     ; **************************************************
3806                                     ;     scale_factor(&E_Y, &E_YL, &E_Y_L, &E_LAST_Y);
3807                                     ; **************************************************
3808      P:0AF3 3E0500  [2 -     6796]            move              #5,n6
3809      P:0AF4 61F400  [4 -     6800]            move              #FE_LAST_Y,r1
                 00001D
3810      P:0AF6 44F400  [4 -     6804]            move              #>FE_YL,x0
                 000003
3811      P:0AF8 204600  [2 -     6806]            move              (r6)-n6
3812      P:0AF9 615E00  [2 -     6808]            move              r1,x:(r6)+
3813      P:0AFA 61F400  [4 -     6812]            move              #FE_Y_L,r1
                 00001C
3814      P:0AFC 615E00  [2 -     6814]            move              r1,x:(r6)+
3815      P:0AFD 445E00  [2 -     6816]            move              x0,x:(r6)+
3816      P:0AFE 635E00  [2 -     6818]            move              r3,x:(r6)+
3817      P:0AFF 0BF080  [6 -     6824]            jsr     Fscale_factor
                 0008FA
3818                                     ; **************************************************
3819                                     ; 
3820                                     ;     /*
3821                                     ;      * DECODER
3822                                     ;      */
3823                                     ;     adpt_predict(&D_DQ, &D_T, &D_DQ2, &D_DQ3, &D_DQ4, &D_DQ5, &D_DQ6, &D_DQ7,
3824                                     ;               &D_PK1, &D_PK2, &D_SR2, &D_A1, &D_A2, D_B,
3825                                     ;               &D_SE, &D_SEZ);
3826                                     ; **************************************************
3827      P:0B01 3E0400  [2 -     6826]            move              #4,n6
3828      P:0B02 61F400  [4 -     6830]            move              #FD_SEZ,r1
                 000034
3829      P:0B04 204600  [2 -     6832]            move              (r6)-n6
3830      P:0B05 615E00  [2 -     6834]            move              r1,x:(r6)+
3831      P:0B06 61F400  [4 -     6838]            move              #FD_SE,r1
                 000033
3832      P:0B08 615E00  [2 -     6840]            move              r1,x:(r6)+
3833      P:0B09 61F400  [4 -     6844]            move              #FD_B,r1
                 00002D
3834      P:0B0B 615E00  [2 -     6846]            move              r1,x:(r6)+
3835      P:0B0C 61F400  [4 -     6850]            move              #FD_A2,r1
                 00002C
3836      P:0B0E 615E00  [2 -     6852]            move              r1,x:(r6)+
3837      P:0B0F 61F400  [4 -     6856]            move              #FD_A1,r1
                 00002B
3838      P:0B11 615E00  [2 -     6858]            move              r1,x:(r6)+
3839      P:0B12 61F400  [4 -     6862]            move              #FD_SR2,r1
                 00002A
3840      P:0B14 615E00  [2 -     6864]            move              r1,x:(r6)+
3841      P:0B15 61F400  [4 -     6868]            move              #FD_PK2,r1
                 000029
3842      P:0B17 615E00  [2 -     6870]            move              r1,x:(r6)+
3843      P:0B18 61F400  [4 -     6874]            move              #FD_PK1,r1
                 000028
3844      P:0B1A 615E00  [2 -     6876]            move              r1,x:(r6)+
3845      P:0B1B 61F400  [4 -     6880]            move              #FD_DQ7,r1
                 000027
3846      P:0B1D 615E00  [2 -     6882]            move              r1,x:(r6)+
3847      P:0B1E 61F400  [4 -     6886]            move              #FD_DQ6,r1
                 000026
3848      P:0B20 615E00  [2 -     6888]            move              r1,x:(r6)+
3849      P:0B21 61F400  [4 -     6892]            move              #FD_DQ5,r1
                 000025
3850      P:0B23 615E00  [2 -     6894]            move              r1,x:(r6)+
3851      P:0B24 61F400  [4 -     6898]            move              #FD_DQ4,r1
                 000024
3852      P:0B26 615E00  [2 -     6900]            move              r1,x:(r6)+
3853      P:0B27 61F400  [4 -     6904]            move              #FD_DQ3,r1
                 000023
3854      P:0B29 615E00  [2 -     6906]            move              r1,x:(r6)+
3855      P:0B2A 61F400  [4 -     6910]            move              #FD_DQ2,r1
                 000022
3856      P:0B2C 615E00  [2 -     6912]            move              r1,x:(r6)+
3857      P:0B2D 655E00  [2 -     6914]            move              r5,x:(r6)+
3858      P:0B2E 625E00  [2 -     6916]            move              r2,x:(r6)+
3859      P:0B2F 0BF080  [6 -     6922]            jsr     Fadpt_predict
                 000140
3860                                     ; **************************************************
3861                                     ;     iadpt_quant(&D_DQ, &D_Y);
3862                                     ; **************************************************
3863      P:0B31 3E1000  [2 -     6924]            move              #16,n6
3864      P:0B32 204600  [2 -     6926]            move              (r6)-n6
3865      P:0B33 645E00  [2 -     6928]            move              r4,x:(r6)+
3866      P:0B34 625E00  [2 -     6930]            move              r2,x:(r6)+
3867      P:0B35 0BF080  [6 -     6936]            jsr     Fiadpt_quant
                 0005E8
3868                                     ; **************************************************
3869                                     ;     add(&D_DQ);
3870                                     ; **************************************************
3871      P:0B37 205600  [2 -     6938]            move              (r6)-
3872      P:0B38 205600  [2 -     6940]            move              (r6)-
3873      P:0B39 625E00  [2 -     6942]            move              r2,x:(r6)+
3874      P:0B3A 0BF080  [6 -     6948]            jsr     Fadd
                 0009F7
3875                                     ; **************************************************
3876                                     ;     coding_adj();
3877                                     ; **************************************************
3878      P:0B3C 205600  [2 -     6950]            move              (r6)-
3879      P:0B3D 0BF080  [6 -     6956]            jsr     Fcoding_adj
                 0005E3
3880                                     ; **************************************************
3881                                     ;     tone_detector(&D_DQ, &D_T, &D_YL, &D_t_dr, &D_LAST_TR);
3882                                     ; **************************************************
3883      P:0B3F 61F400  [4 -     6960]            move              #FD_LAST_TR,r1
                 000036
3884      P:0B41 44F400  [4 -     6964]            move              #>FD_YL,x0
                 000021
3885      P:0B43 615E00  [2 -     6966]            move              r1,x:(r6)+
3886      P:0B44 61F400  [4 -     6970]            move              #FD_t_dr,r1
                 000035
3887      P:0B46 615E00  [2 -     6972]            move              r1,x:(r6)+
3888      P:0B47 445E00  [2 -     6974]            move              x0,x:(r6)+
3889      P:0B48 655E00  [2 -     6976]            move              r5,x:(r6)+
3890      P:0B49 625E00  [2 -     6978]            move              r2,x:(r6)+
3891      P:0B4A 0BF080  [6 -     6984]            jsr     Ftone_detector
                 000758
3892                                     ; **************************************************
3893                                     ;     speed_control(&D_T, &D_Y, &D_DMS, &D_DML, &D_AP);
3894                                     ; **************************************************
3895      P:0B4C 3E0500  [2 -     6986]            move              #5,n6
3896      P:0B4D 61F400  [4 -     6990]            move              #FD_AP,r1
                 000039
3897      P:0B4F 204600  [2 -     6992]            move              (r6)-n6
3898      P:0B50 615E00  [2 -     6994]            move              r1,x:(r6)+
3899      P:0B51 61F400  [4 -     6998]            move              #FD_DML,r1
                 000038
3900      P:0B53 615E00  [2 -     7000]            move              r1,x:(r6)+
3901      P:0B54 61F400  [4 -     7004]            move              #FD_DMS,r1
                 000037
3902      P:0B56 615E00  [2 -     7006]            move              r1,x:(r6)+
3903      P:0B57 645E00  [2 -     7008]            move              r4,x:(r6)+
3904      P:0B58 655E00  [2 -     7010]            move              r5,x:(r6)+
3905      P:0B59 0BF080  [6 -     7016]            jsr     Fspeed_control
                 0007DA
3906                                     ; **************************************************
3907                                     ;     scale_factor(&D_Y, &D_YL, &D_Y_L, &D_LAST_Y);
3908                                     ; **************************************************
3909      P:0B5B 3E0500  [2 -     7018]            move              #5,n6
3910      P:0B5C 61F400  [4 -     7022]            move              #FD_LAST_Y,r1
                 00003B
3911      P:0B5E 204600  [2 -     7024]            move              (r6)-n6
3912      P:0B5F 615E00  [2 -     7026]            move              r1,x:(r6)+
3913      P:0B60 61F400  [4 -     7030]            move              #FD_Y_L,r1
                 00003A
3914      P:0B62 615E00  [2 -     7032]            move              r1,x:(r6)+
3915      P:0B63 445E00  [2 -     7034]            move              x0,x:(r6)+
3916      P:0B64 645E00  [2 -     7036]            move              r4,x:(r6)+
3917      P:0B65 0BF080  [6 -     7042]            jsr     Fscale_factor
                 0008FA
3918                                     ; **************************************************
3919                                     ; 
3920                                     ;     disk_record();
3921                                     ; **************************************************
3922      P:0B67 3E0400  [2 -     7044]            move              #4,n6
3923      P:0B68 204600  [2 -     7046]            move              (r6)-n6
3924      P:0B69 0BF080  [6 -     7052]            jsr     Fdisk_record
                 000A76
3925      P:0B6B 56F000  [4 -     7056]            move              x:FExitFlag,a
                 000070
3926      P:0B6D 200003  [2 -     7058]            tst     a
3927      P:0B6E 0AF0AA  [6 -     7064]            jeq     L236
                 000A90
3928                                     L234
3929                                     ; **************************************************
3930                                     ;   }
3931                                     ; 
3932                                     ;   post_disk_play();
3933                                     ; **************************************************
3934      P:0B70 0BF080  [6 -     7070]            jsr     Fpost_disk_play
                 000A74
3935                                     ; **************************************************
3936                                     ;   post_disk_record();
3937                                     ; **************************************************
3938      P:0B72 0BF080  [6 -     7076]            jsr     Fpost_disk_record
                 000A77
3939                                     ; **************************************************
3940                                     ; 
3941                                     ; #ifdef __LOOPCOUNT__
3942                                     ;   printf("\nLoop1: %d", Loop1);
3943                                     ;   printf("\nLoop2: %d", Loop2);
3944                                     ;   printf("\nLoop3: %d", Loop3);
3945                                     ;   printf("\nLoop4: %d", Loop4);
3946                                     ;   printf("\nLoop5: %d", Loop5);
3947                                     ;   printf("\nLoop6: %d", Loop6);
3948                                     ;   printf("\nLoop7: %d", Loop7);
3949                                     ; #endif
3950                                     ; 
3951                                     ; #ifdef __DOWNLOAD__
3952                                     ;   run56k_end();
3953                                     ; #endif
3954                                     ;   return (0);
3955                                     ; **************************************************
3956                                     ; **************************************************
3957                                     ; } 
3958                                     ; **************************************************
3959      P:0B74 205613  [2 -     7078]            clr     a         (r6)-
3960      P:0B75 67D603  [2 -     7080]            tst     a         x:(r6)-,r7
3961      P:0B76 65D600  [2 -     7082]            move              x:(r6)-,r5
3962      P:0B77 64D600  [2 -     7084]            move              x:(r6)-,r4
3963      P:0B78 63D600  [2 -     7086]            move              x:(r6)-,r3
3964      P:0B79 62D600  [2 -     7088]            move              x:(r6)-,r2
3965      P:0B7A 61D600  [2 -     7090]            move              x:(r6)-,r1
3966      P:0B7B 44E600  [2 -     7092]            move              x:(r6),x0
3967      P:0B7C 205600  [2 -     7094]            move              (r6)-
3968      P:0B7D 05E63C  [2 -     7096]            move              x:(r6),ssh
3969      P:0B7E 00000C  [4 -     7100]            rts
3970   
3971      X:0067                                   org     x:
3972                                               global  FTDP
3973      X:0067 000000                  FTDP      bsc     1
3974                                               global  FSP
3975      X:0068 000000                  FSP       bsc     1
3976                                               global  FSL
3977      X:0069 000000                  FSL       bsc     1
3978                                               global  FS_E
3979      X:006A 000000                  FS_E      bsc     1
3980                                               global  FSD
3981      X:006B 000000                  FSD       bsc     1
3982                                               global  FI
3983      X:006C 000000                  FI        bsc     1
3984                                               global  FD
3985      X:006D 000000                  FD        bsc     1
3986                                               global  FAL
3987      X:006E 000000                  FAL       bsc     1
3988                                               global  FA_2
3989      X:006F 000000                  FA_2      bsc     1
3990                                               global  FExitFlag
3991      X:0070 000000                  FExitFlag bsc     1
3992                                               global  Fostrm
3993      X:0071 000000                  Fostrm    bsc     1
3994                                               global  Fistrm
3995      X:0072 000000                  Fistrm    bsc     1
3996   
3997                                               endsec
3998   
3999                                     ; 
4000                                     ; 
4001                                     ; 
4002                                     ; 
4003                                     ; 
4004                                     ; 
4005                                     ; 
4006                                     ; 
4007                                     ; 
4008                                     ; 
4009                                     ; 
4010   
111  Errors
0    Warnings
