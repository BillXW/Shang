1                                        ;
2                                        ;       annotate version 1.03
3                                        ;
4                                        ; **************************************************
5                                        ; **************************************************
6                                                  section opt_adpcm_v3_c
7                                                  opt     so,nomd
8                                                  page    132,66,3,3
9                                        ;*** DSP56000/1 Motorola 1.03 GNU 1.37.1
10        P:0000                                   org     p:
11                                                 global  FE_STATES
12        X:0000                                   org     x:
13                                       FE_STATES
14        X:0000                                   dc      0
15        X:0001                                   dc      0
16        X:0002                                   dc      0
17        X:0003                                   dc      0
18        X:0004                                   dc      0
19        X:0005                                   dc      0
20        X:0006                                   dc      0
21        X:0007                                   dc      0
22        X:0008                                   dc      0
23        X:0009                                   dc      0
24        X:000A                                   dc      0
25        X:000B                                   dc      0
26        X:000C                                   dc      0
27        X:000D                                   dc      0
28        X:000E                                   dc      0
29        X:000F                                   dc      0
30        X:0010                                   dc      0
31        X:0011                                   dc      0
32        X:0012                                   dc      0
33        X:0013                                   dc      0
34        X:0014                                   dc      0
35        X:0015                                   dc      0
36        X:0016                                   dc      0
37        X:0017                                   dc      0
38        X:0018                                   dc      0
39        X:0019                                   dc      0
40        X:001A                                   dc      0
41        X:001B                                   dc      0
42        X:001C                                   dc      0
43        X:001D                                   dc      0
44                                                 global  FD_STATES
45                                       FD_STATES
46        X:001E                                   dc      0
47        X:001F                                   dc      0
48        X:0020                                   dc      0
49        X:0021                                   dc      0
50        X:0022                                   dc      0
51        X:0023                                   dc      0
52        X:0024                                   dc      0
53        X:0025                                   dc      0
54        X:0026                                   dc      0
55        X:0027                                   dc      0
56        X:0028                                   dc      0
57        X:0029                                   dc      0
58        X:002A                                   dc      0
59        X:002B                                   dc      0
60        X:002C                                   dc      0
61        X:002D                                   dc      0
62        X:002E                                   dc      0
63        X:002F                                   dc      0
64        X:0030                                   dc      0
65        X:0031                                   dc      0
66        X:0032                                   dc      0
67        X:0033                                   dc      0
68        X:0034                                   dc      0
69        X:0035                                   dc      0
70        X:0036                                   dc      0
71        X:0037                                   dc      0
72        X:0038                                   dc      0
73        X:0039                                   dc      0
74        X:003A                                   dc      0
75        X:003B                                   dc      0
76        P:0000                                   org     p:
77                                                 global  Ff_mult
78                                       Ff_mult
79                                       ; **************************************************
80                                       ; /*
81                                       ;  * opt_adpcm.c
82                                       ;  * Handwritten version of an optimized ADPCM transcoder applying the
83                                       ;  * CCITT recommendation G.721
84                                       ;  *
85                                       ;  * For our purposes the algorithem has been retimed (a few delays have been
86                                       ;  * moved around). But apart from that the algorithem matches the CCITT's.
87                                       ;  * So for further documentation of the source refer to the recommendation.
88                                       ;  *
89                                       ;  * Compile flags:
90                                       ;  * __SIMULATION__ : use to get a file for run56sim
91                                       ;  * __DOWNLOAD__:    use to get a file for the S56X board
92                                       ;  * __LOOPCOUNT__:   use to count loop cycles
93                                       ;  * __MNECOUNT__:    use to count mnemonics
94                                       ;  *
95                                       ;  * 3-NOV-93 Chris Schlaeger
96                                       ;  * 
97                                       ;  * VERSION 1.3
98                                       ;  */
99                                       ; 
100                                      ; #include <stdio.h>
101                                      ; 
102                                      ; #define FALSE 0
103                                      ; #define TRUE (!FALSE)
104                                      ; 
105                                      ; FILE* istrm;
106                                      ; FILE* ostrm;
107                                      ; int   ExitFlag;
108                                      ; 
109                                      ; #ifdef __LOOPCOUNT__
110                                      ; int Loop1 = 0;
111                                      ; int Loop2 = 0;
112                                      ; int Loop3 = 0;
113                                      ; int Loop4 = 0;
114                                      ; int Loop5 = 0;
115                                      ; int Loop6 = 0;
116                                      ; int Loop7 = 0;
117                                      ; #endif
118                                      ; 
119                                      ; /* Global signals */
120                                      ; int A_2, AL, D, I, SD, S_E, SL, SP, TDP;
121                                      ; 
122                                      ; typedef struct
123                                      ; {
124                                      ;   int DQ, T, Y, YL, DQ2, DQ3, DQ4, DQ5, DQ6, DQ7, PK1, PK2, SR2,
125                                      ;       A1, A2, B[6], SE, SEZ, t_dr, LAST_TR, DMS, DML, AP, Y_L, LAST_Y;
126                                      ; } STATES;
127                                      ; 
128                                      ; /* ENCODER states */
129                                      ; STATES E_STATES = { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 };
130                                      ; 
131                                      ; /* DECODER states */
132                                      ; STATES D_STATES = { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 };
133                                      ; 
134                                      ; #define LSHIFT(a, b) ((b) < 0 ? (a) << -(b) : (a) >> (b))
135                                      ;  
136                                      ; int f_mult(int An, int SRn)
137                                      ; {
138                                      ;   register int  EXP;
139                                      ;   register int  WAnMANT;
140                                      ;   int           AnS, MAG, AnMANT;
141                                      ; 
142                                      ;   AnS = An & (1 << 15) ? 1 : 0;
143                                      ; **************************************************
144       P:0000 70F400  [4 -        4]            move              #65533,n0
                 00FFFD
145       P:0002 3E0300  [2 -        6]            move              #3,n6
146       P:0003 605E00  [2 -        8]            move              r0,x:(r6)+
147       P:0004 205E00  [2 -       10]            move              (r6)+
148       P:0005 22D000  [2 -       12]            move              r6,r0
149       P:0006 204E00  [2 -       14]            move              (r6)+n6
150       P:0007 515E00  [2 -       16]            move              b0,x:(r6)+
151       P:0008 555E00  [2 -       18]            move              b1,x:(r6)+
152       P:0009 445E00  [2 -       20]            move              x0,x:(r6)+
153       P:000A 44F400  [4 -       24]            move              #>32768,x0
                 008000
154       P:000C 455E00  [2 -       26]            move              x1,x:(r6)+
155       P:000D 465E00  [2 -       28]            move              y0,x:(r6)+
156       P:000E 475E00  [2 -       30]            move              y1,x:(r6)+
157       P:000F 56E800  [4 -       34]            move              x:(r0+n0),a
158       P:0010 200046  [2 -       36]            and     x0,a
159       P:0011 218E00  [2 -       38]            move              a1,a
160       P:0012 200003  [2 -       40]            tst     a
161       P:0013 0AF0AA  [6 -       46]            jeq     L2
                 000019
162       P:0015 46F400  [4 -       50]            move              #>1,y0
                 000001
163       P:0017 0AF080  [6 -       56]            jmp     L19
                 00001A
164                                      L2
165       P:0019 260000  [2 -       58]            move              #0,y0
166                                      L19
167                                      ; **************************************************
168                                      ;   MAG = AnS? (16384 - (An >> 2)) & 8191 : An >> 2;
169                                      ; **************************************************
170       P:001A 380200  [2 -       60]            move              #2,n0
171       P:001B 466800  [4 -       64]            move              y0,x:(r0+n0)
172       P:001C 57E800  [4 -       68]            move              x:(r0+n0),b
173       P:001D 20000B  [2 -       70]            tst     b
174       P:001E 0AF0AA  [6 -       76]            jeq     L4
                 00002F
175       P:0020 70F400  [4 -       80]            move              #65533,n0
                 00FFFD
176       P:0022 44F400  [4 -       84]            move              #>8191,x0
                 001FFF
177       P:0024 56E800  [4 -       88]            move              x:(r0+n0),a
178       P:0025 218E00  [2 -       90]            move              a1,a
179       P:0026 57F422  [4 -       94]            asr     a         #>16384,b
                 004000
180       P:0028 200022  [2 -       96]            asr     a
181       P:0029 218E00  [2 -       98]            move              a1,a
182       P:002A 20001C  [2 -      100]            sub     a,b
183       P:002B 20004E  [2 -      102]            and     x0,b
184       P:002C 21AF00  [2 -      104]            move              b1,b
185       P:002D 0AF080  [6 -      110]            jmp     L20
                 000036
186                                      L4
187       P:002F 70F400  [4 -      114]            move              #65533,n0
                 00FFFD
188       P:0031 57E800  [4 -      118]            move              x:(r0+n0),b
189       P:0032 21AF00  [2 -      120]            move              b1,b
190       P:0033 20002A  [2 -      122]            asr     b
191       P:0034 20002A  [2 -      124]            asr     b
192       P:0035 21AF00  [2 -      126]            move              b1,b
193                                      L20
194                                      ; **************************************************
195                                      ;   {
196                                      ;     register int mag = MAG << 1;
197                                      ; **************************************************
198                                      ; **************************************************
199                                      ; 
200                                      ;     for (EXP = 0; mag >>= 1; EXP++)
201                                      ; **************************************************
202       P:0036 250000  [2 -      128]            move              #0,x1
203       P:0037 205800  [2 -      130]            move              (r0)+
204       P:0038 555000  [2 -      132]            move              b1,x:(r0)-
205       P:0039 205800  [2 -      134]            move              (r0)+
206       P:003A 56D000  [2 -      136]            move              x:(r0)-,a
207       P:003B 200032  [2 -      138]            asl     a
208       P:003C 218E00  [2 -      140]            move              a1,a
209       P:003D 218E00  [2 -      142]            move              a1,a
210       P:003E 200022  [2 -      144]            asr     a
211       P:003F 218E00  [2 -      146]            move              a1,a
212       P:0040 200003  [2 -      148]            tst     a
213       P:0041 0AF0AA  [6 -      154]            jeq     L18
                 00004B
214       P:0043 44F400  [4 -      158]            move              #>1,x0
                 000001
215                                      L8
216       P:0045 218E69  [2 -      160]            tfr     x1,b      a1,a
217       P:0046 200022  [2 -      162]            asr     a
218       P:0047 218E48  [2 -      164]            add     x0,b      a1,a
219       P:0048 21A503  [2 -      166]            tst     a         b1,x1
220       P:0049 0AF0A2  [6 -      172]            jne     L8
                 000045
221                                      L18
222                                      ; **************************************************
223                                      ; #ifdef __LOOPCOUNT__
224                                      ;       Loop1++;
225                                      ; #else
226                                      ;         ;
227                                      ; #endif
228                                      ;   } 
229                                      ; 
230                                      ;   AnMANT = MAG ? LSHIFT(MAG, EXP - 6) : 1 << 5;
231                                      ; **************************************************
232       P:004B 205800  [2 -      174]            move              (r0)+
233       P:004C 57D000  [2 -      176]            move              x:(r0)-,b
234       P:004D 20000B  [2 -      178]            tst     b
235       P:004E 0AF0AA  [6 -      184]            jeq     L10
                 00006F
236       P:0050 56F469  [4 -      188]            tfr     x1,b      #>16777210,a
                 FFFFFA
237       P:0052 200018  [2 -      190]            add     a,b
238       P:0053 200001  [2 -      192]            tfr     b,a
239       P:0054 200003  [2 -      194]            tst     a
240       P:0055 0AF0A1  [6 -      200]            jge     L12
                 000061
241       P:0057 205836  [2 -      202]            neg     a         (r0)+
242       P:0058 57D003  [2 -      204]            tst     a         x:(r0)-,b
243       P:0059 0AF0AA  [6 -      210]            jeq     L22
                 00005E
244       P:005B 06CE20  [4 -      214]            rep     a
245       P:005C 20003A  [2 -      216]            asl     b
246       P:005D 21AF00  [2 -      218]            move              b1,b
247                                      L22
248       P:005E 556000  [2 -      220]            move              b1,x:(r0)
249       P:005F 0AF080  [6 -      226]            jmp     L11
                 000072
250                                      L12
251       P:0061 56F469  [4 -      230]            tfr     x1,b      #>16777210,a
                 FFFFFA
252       P:0063 205818  [2 -      232]            add     a,b       (r0)+
253       P:0064 57D001  [2 -      234]            tfr     b,a       x:(r0)-,b
254       P:0065 200003  [2 -      236]            tst     a
255       P:0066 0AF0AA  [6 -      242]            jeq     L23
                 00006C
256       P:0068 21AF00  [2 -      244]            move              b1,b
257       P:0069 06CE20  [4 -      248]            rep     a
258       P:006A 20002A  [2 -      250]            asr     b
259       P:006B 21AF00  [2 -      252]            move              b1,b
260                                      L23
261       P:006C 556000  [2 -      254]            move              b1,x:(r0)
262       P:006D 0AF080  [6 -      260]            jmp     L11
                 000072
263                                      L10
264       P:006F 46F400  [4 -      264]            move              #>32,y0
                 000020
265       P:0071 466000  [2 -      266]            move              y0,x:(r0)
266                                      L11
267                                      ; **************************************************
268                                      ;   EXP += ((SRn >> 6) & 15);
269                                      ; **************************************************
270       P:0072 70F400  [4 -      270]            move              #65532,n0
                 00FFFC
271       P:0074 56E800  [4 -      274]            move              x:(r0+n0),a
272       P:0075 218E00  [2 -      276]            move              a1,a
273       P:0076 0606A0  [4 -      280]            rep     #6
274       P:0077 200022  [2 -      282]            asr     a
275                                      ; **************************************************
276                                      ;   WAnMANT = (((SRn & 63) * AnMANT) + 48) >> 4;
277                                      ; **************************************************
278       P:0078 46E069  [2 -      284]            tfr     x1,b      x:(r0),y0
279       P:0079 44F400  [4 -      288]            move              #>15,x0
                 00000F
280       P:007B 218E00  [2 -      290]            move              a1,a
281       P:007C 44F446  [4 -      294]            and     x0,a      #>63,x0
                 00003F
282       P:007E 218E00  [2 -      296]            move              a1,a
283       P:007F 56F418  [4 -      300]            add     a,b       #>48,a
                 000030
284       P:0081 21C800  [2 -      302]            move              a,a0
285       P:0082 21A532  [2 -      304]            asl     a         b1,x1
286       P:0083 57E800  [4 -      308]            move              x:(r0+n0),b
287       P:0084 20004E  [2 -      310]            and     x0,b
288       P:0085 21AF00  [2 -      312]            move              b1,b
289       P:0086 21A700  [2 -      314]            move              b1,y1
290       P:0087 2000B2  [2 -      316]            mac     +y1,y0,a
291       P:0088 200022  [2 -      318]            asr     a
292       P:0089 210E00  [2 -      320]            move              a0,a
293       P:008A 200009  [2 -      322]            tfr     a,b
294       P:008B 21AF00  [2 -      324]            move              b1,b
295       P:008C 0604A0  [4 -      328]            rep     #4
296       P:008D 20002A  [2 -      330]            asr     b
297                                      ; **************************************************
298                                      ;   MAG = LSHIFT(WAnMANT, 19 - EXP) & 32767;
299                                      ; **************************************************
300       P:008E 56F400  [4 -      334]            move              #>19,a
                 000013
301       P:0090 21AF64  [2 -      336]            sub     x1,a      b1,b
302       P:0091 205803  [2 -      338]            tst     a         (r0)+
303       P:0092 555000  [2 -      340]            move              b1,x:(r0)-
304       P:0093 0AF0A1  [6 -      346]            jge     L14
                 00009E
305       P:0095 200036  [2 -      348]            neg     a
306       P:0096 200003  [2 -      350]            tst     a
307       P:0097 0AF0AA  [6 -      356]            jeq     L24
                 00009C
308       P:0099 06CE20  [4 -      360]            rep     a
309       P:009A 20003A  [2 -      362]            asl     b
310       P:009B 21AF00  [2 -      364]            move              b1,b
311                                      L24
312       P:009C 0AF080  [6 -      370]            jmp     L21
                 0000A8
313                                      L14
314       P:009E 56F400  [4 -      374]            move              #>19,a
                 000013
315       P:00A0 205864  [2 -      376]            sub     x1,a      (r0)+
316       P:00A1 57D003  [2 -      378]            tst     a         x:(r0)-,b
317       P:00A2 0AF0AA  [6 -      384]            jeq     L25
                 0000A8
318       P:00A4 21AF00  [2 -      386]            move              b1,b
319       P:00A5 06CE20  [4 -      390]            rep     a
320       P:00A6 20002A  [2 -      392]            asr     b
321       P:00A7 21AF00  [2 -      394]            move              b1,b
322                                      L25
323                                      L21
324                                      ; **************************************************
325                                      ;   return ((SRn >> 10) ^ AnS ? (65536 - MAG) & 65535 : MAG);
326                                      ; **************************************************
327       P:00A8 70F400  [4 -      398]            move              #65532,n0
                 00FFFC
328       P:00AA 44F400  [4 -      402]            move              #>32767,x0
                 007FFF
329       P:00AC 205800  [2 -      404]            move              (r0)+
330       P:00AD 555000  [2 -      406]            move              b1,x:(r0)-
331       P:00AE 205800  [2 -      408]            move              (r0)+
332       P:00AF 57D000  [2 -      410]            move              x:(r0)-,b
333       P:00B0 20584E  [2 -      412]            and     x0,b      (r0)+
334       P:00B1 21AF00  [2 -      414]            move              b1,b
335       P:00B2 555000  [2 -      416]            move              b1,x:(r0)-
336       P:00B3 56E800  [4 -      420]            move              x:(r0+n0),a
337       P:00B4 218E00  [2 -      422]            move              a1,a
338       P:00B5 060AA0  [4 -      426]            rep     #10
339       P:00B6 200022  [2 -      428]            asr     a
340       P:00B7 380200  [2 -      430]            move              #2,n0
341       P:00B8 218E00  [2 -      432]            move              a1,a
342       P:00B9 46E800  [4 -      436]            move              x:(r0+n0),y0
343       P:00BA 200053  [2 -      438]            eor     y0,a
344       P:00BB 218E00  [2 -      440]            move              a1,a
345       P:00BC 200003  [2 -      442]            tst     a
346       P:00BD 0AF0AA  [6 -      448]            jeq     L16
                 0000CA
347       P:00BF 44F400  [4 -      452]            move              #>65535,x0
                 00FFFF
348       P:00C1 56F400  [4 -      456]            move              #>65536,a
                 010000
349       P:00C3 205800  [2 -      458]            move              (r0)+
350       P:00C4 46D000  [2 -      460]            move              x:(r0)-,y0
351       P:00C5 200054  [2 -      462]            sub     y0,a
352       P:00C6 200046  [2 -      464]            and     x0,a
353       P:00C7 218E00  [2 -      466]            move              a1,a
354       P:00C8 0AF080  [6 -      472]            jmp     L17
                 0000CC
355                                      L16
356       P:00CA 205800  [2 -      474]            move              (r0)+
357       P:00CB 56D000  [2 -      476]            move              x:(r0)-,a
358                                      L17
359                                      ; **************************************************
360                                      ; }
361                                      ; **************************************************
362       P:00CC 205003  [2 -      478]            tst     a         (r0)-
363       P:00CD 205000  [2 -      480]            move              (r0)-
364       P:00CE 205600  [2 -      482]            move              (r6)-
365       P:00CF 47D600  [2 -      484]            move              x:(r6)-,y1
366       P:00D0 46D600  [2 -      486]            move              x:(r6)-,y0
367       P:00D1 45D600  [2 -      488]            move              x:(r6)-,x1
368       P:00D2 44D600  [2 -      490]            move              x:(r6)-,x0
369       P:00D3 57D600  [2 -      492]            move              x:(r6)-,b
370       P:00D4 51E600  [2 -      494]            move              x:(r6),b0
371       P:00D5 221600  [2 -      496]            move              r0,r6
372       P:00D6 60E000  [2 -      498]            move              x:(r0),r0
373       P:00D7 00000C  [4 -      502]            rts
374    
375                                                global  Fadpt_predict
376                                      Fadpt_predict
377       P:00D8 605E00  [2 -      504]            move              r0,x:(r6)+
378       P:00D9 055E3C  [2 -      506]            move              ssh,x:(r6)+
379                                      ; **************************************************
380                                      ; **************************************************
381                                      ; **************************************************
382                                      ; 
383                                      ; void adpt_predict(STATES *S)
384                                      ; {
385                                      ;   /*
386                                      ;    * adaptive predictor
387                                      ;    *
388                                      ;    * Input signals:  DQ, T
389                                      ;    * Output signals: S_E, A_2
390                                      ;    */
391                                      ; 
392                                      ;   register int DQS, DQI, DQSEZ, PK0; 
393                                      ;   register int SR1;
394                                      ;   register int A1S, AP;
395                                      ;   register int A2R;
396                                      ;   register int WA1, WA2;
397                                      ;   register int MAG, EXP, MANT; 
398                                      ;   int BP[6];
399                                      ; 
400                                      ;   /* ADDC */
401                                      ;   DQS = S->DQ >> 14;
402                                      ; **************************************************
403       P:00DA 70F400  [4 -      510]            move              #65533,n0
                 00FFFD
404       P:00DC 3E1600  [2 -      512]            move              #22,n6
405       P:00DD 22D000  [2 -      514]            move              r6,r0
406       P:00DE 204E00  [2 -      516]            move              (r6)+n6
407       P:00DF 515E00  [2 -      518]            move              b0,x:(r6)+
408       P:00E0 555E00  [2 -      520]            move              b1,x:(r6)+
409       P:00E1 445E00  [2 -      522]            move              x0,x:(r6)+
410       P:00E2 455E00  [2 -      524]            move              x1,x:(r6)+
411       P:00E3 465E00  [2 -      526]            move              y0,x:(r6)+
412       P:00E4 475E00  [2 -      528]            move              y1,x:(r6)+
413       P:00E5 615E00  [2 -      530]            move              r1,x:(r6)+
414       P:00E6 625E00  [2 -      532]            move              r2,x:(r6)+
415       P:00E7 635E00  [2 -      534]            move              r3,x:(r6)+
416       P:00E8 645E00  [2 -      536]            move              r4,x:(r6)+
417       P:00E9 64E800  [4 -      540]            move              x:(r0+n0),r4
418       P:00EA 381400  [2 -      542]            move              #20,n0
419       P:00EB 47E400  [2 -      544]            move              x:(r4),y1
420       P:00EC 476879  [4 -      548]            tfr     y1,b      y1,x:(r0+n0)
421       P:00ED 21AF00  [2 -      550]            move              b1,b
422       P:00EE 060EA0  [4 -      554]            rep     #14
423       P:00EF 20002A  [2 -      556]            asr     b
424                                      ; **************************************************
425                                      ;   DQI = DQS ? 65536 - (S->DQ & 16383) : S->DQ;
426                                      ; **************************************************
427       P:00F0 380600  [2 -      558]            move              #6,n0
428       P:00F1 21AF00  [2 -      560]            move              b1,b
429       P:00F2 55680B  [4 -      564]            tst     b         b1,x:(r0+n0)
430       P:00F3 0AF0AA  [6 -      570]            jeq     L27
                 000102
431       P:00F5 381400  [2 -      572]            move              #20,n0
432       P:00F6 57F400  [4 -      576]            move              #>65536,b
                 010000
433       P:00F8 56E800  [4 -      580]            move              x:(r0+n0),a
434       P:00F9 380700  [2 -      582]            move              #7,n0
435       P:00FA 44F400  [4 -      586]            move              #>16383,x0
                 003FFF
436       P:00FC 200046  [2 -      588]            and     x0,a
437       P:00FD 218E00  [2 -      590]            move              a1,a
438       P:00FE 20001C  [2 -      592]            sub     a,b
439       P:00FF 556800  [4 -      596]            move              b1,x:(r0+n0)
440       P:0100 0AF080  [6 -      602]            jmp     L28
                 000105
441                                      L27
442       P:0102 380700  [2 -      604]            move              #7,n0
443       P:0103 47E400  [2 -      606]            move              x:(r4),y1
444       P:0104 476800  [4 -      610]            move              y1,x:(r0+n0)
445                                      L28
446                                      ; **************************************************
447                                      ;   MAG = S->SEZ & (1 << 14) ? (1 << 15) + S->SEZ : S->SEZ;
448                                      ; **************************************************
449       P:0105 381300  [2 -      612]            move              #19,n0
450       P:0106 3C1600  [2 -      614]            move              #22,n4
451       P:0107 44F400  [4 -      618]            move              #>16384,x0
                 004000
452       P:0109 47EC00  [4 -      622]            move              x:(r4+n4),y1
453       P:010A 476879  [4 -      626]            tfr     y1,b      y1,x:(r0+n0)
454       P:010B 20004E  [2 -      628]            and     x0,b
455       P:010C 21AF00  [2 -      630]            move              b1,b
456       P:010D 20000B  [2 -      632]            tst     b
457       P:010E 0AF0AA  [6 -      638]            jeq     L29
                 000117
458       P:0110 57E800  [4 -      642]            move              x:(r0+n0),b
459       P:0111 47F400  [4 -      646]            move              #>32768,y1
                 008000
460       P:0113 200078  [2 -      648]            add     y1,b
461       P:0114 556800  [4 -      652]            move              b1,x:(r0+n0)
462       P:0115 0AF080  [6 -      658]            jmp     L30
                 00011B
463                                      L29
464       P:0117 381300  [2 -      660]            move              #19,n0
465       P:0118 3C1600  [2 -      662]            move              #22,n4
466       P:0119 47EC00  [4 -      666]            move              x:(r4+n4),y1
467       P:011A 476800  [4 -      670]            move              y1,x:(r0+n0)
468                                      L30
469                                      ; **************************************************
470                                      ;   DQSEZ = (DQI + MAG) & 65535;
471                                      ; **************************************************
472                                      ; **************************************************
473                                      ;   PK0 = DQSEZ >> 15;
474                                      ; **************************************************
475       P:011B 380700  [2 -      672]            move              #7,n0
476       P:011C 44F400  [4 -      676]            move              #>65535,x0
                 00FFFF
477       P:011E 57E800  [4 -      680]            move              x:(r0+n0),b
478       P:011F 381300  [2 -      682]            move              #19,n0
479       P:0120 47E800  [4 -      686]            move              x:(r0+n0),y1
480       P:0121 380878  [2 -      688]            add     y1,b      #8,n0
481       P:0122 20004E  [2 -      690]            and     x0,b
482       P:0123 21AF00  [2 -      692]            move              b1,b
483       P:0124 556800  [4 -      696]            move              b1,x:(r0+n0)
484       P:0125 21AF00  [2 -      698]            move              b1,b
485       P:0126 060FA0  [4 -      702]            rep     #15
486       P:0127 20002A  [2 -      704]            asr     b
487                                      ; **************************************************
488                                      ;   WA2 = DQSEZ ? 0 : 1;
489                                      ; **************************************************
490       P:0128 380900  [2 -      706]            move              #9,n0
491       P:0129 21AF00  [2 -      708]            move              b1,b
492       P:012A 556800  [4 -      712]            move              b1,x:(r0+n0)
493       P:012B 380800  [2 -      714]            move              #8,n0
494       P:012C 57E800  [4 -      718]            move              x:(r0+n0),b
495       P:012D 20000B  [2 -      720]            tst     b
496       P:012E 0AF0AA  [6 -      726]            jeq     L31
                 000133
497       P:0130 270000  [2 -      728]            move              #0,y1
498       P:0131 0AF080  [6 -      734]            jmp     L113
                 000135
499                                      L31
500       P:0133 47F400  [4 -      738]            move              #>1,y1
                 000001
501                                      L113
502                                      ; **************************************************
503                                      ;   
504                                      ;   /* ADDB */
505                                      ;   DQI = DQS ? 65536 - (S->DQ & 16383) : S->DQ;
506                                      ; **************************************************
507       P:0135 380D00  [2 -      740]            move              #13,n0
508       P:0136 476800  [4 -      744]            move              y1,x:(r0+n0)
509       P:0137 380600  [2 -      746]            move              #6,n0
510       P:0138 57E800  [4 -      750]            move              x:(r0+n0),b
511       P:0139 20000B  [2 -      752]            tst     b
512       P:013A 0AF0AA  [6 -      758]            jeq     L33
                 000148
513       P:013C 380700  [2 -      760]            move              #7,n0
514       P:013D 56E400  [2 -      762]            move              x:(r4),a
515       P:013E 57F400  [4 -      766]            move              #>65536,b
                 010000
516       P:0140 44F400  [4 -      770]            move              #>16383,x0
                 003FFF
517       P:0142 200046  [2 -      772]            and     x0,a
518       P:0143 218E00  [2 -      774]            move              a1,a
519       P:0144 20001C  [2 -      776]            sub     a,b
520       P:0145 556800  [4 -      780]            move              b1,x:(r0+n0)
521       P:0146 0AF080  [6 -      786]            jmp     L34
                 00014B
522                                      L33
523       P:0148 380700  [2 -      788]            move              #7,n0
524       P:0149 47E400  [2 -      790]            move              x:(r4),y1
525       P:014A 476800  [4 -      794]            move              y1,x:(r0+n0)
526                                      L34
527                                      ; **************************************************
528                                      ;   MAG = S->SE & (1 << 14) ? (1 << 15) + S->SE : S->SE;
529                                      ; **************************************************
530       P:014B 381300  [2 -      796]            move              #19,n0
531       P:014C 3C1500  [2 -      798]            move              #21,n4
532       P:014D 44F400  [4 -      802]            move              #>16384,x0
                 004000
533       P:014F 47EC00  [4 -      806]            move              x:(r4+n4),y1
534       P:0150 476879  [4 -      810]            tfr     y1,b      y1,x:(r0+n0)
535       P:0151 20004E  [2 -      812]            and     x0,b
536       P:0152 21AF00  [2 -      814]            move              b1,b
537       P:0153 20000B  [2 -      816]            tst     b
538       P:0154 0AF0AA  [6 -      822]            jeq     L35
                 00015D
539       P:0156 57E800  [4 -      826]            move              x:(r0+n0),b
540       P:0157 47F400  [4 -      830]            move              #>32768,y1
                 008000
541       P:0159 200078  [2 -      832]            add     y1,b
542       P:015A 556800  [4 -      836]            move              b1,x:(r0+n0)
543       P:015B 0AF080  [6 -      842]            jmp     L36
                 000161
544                                      L35
545       P:015D 381300  [2 -      844]            move              #19,n0
546       P:015E 3C1500  [2 -      846]            move              #21,n4
547       P:015F 47EC00  [4 -      850]            move              x:(r4+n4),y1
548       P:0160 476800  [4 -      854]            move              y1,x:(r0+n0)
549                                      L36
550                                      ; **************************************************
551                                      ;   DQSEZ = (DQI + MAG) & 65535;
552                                      ; **************************************************
553                                      ; **************************************************
554                                      ;   
555                                      ;   /* FLOATB */
556                                      ;   MAG = DQSEZ >> 15 ? (65536 - DQSEZ) & 32767 : DQSEZ;
557                                      ; **************************************************
558       P:0161 380700  [2 -      856]            move              #7,n0
559       P:0162 44F400  [4 -      860]            move              #>65535,x0
                 00FFFF
560       P:0164 57E800  [4 -      864]            move              x:(r0+n0),b
561       P:0165 381300  [2 -      866]            move              #19,n0
562       P:0166 47E800  [4 -      870]            move              x:(r0+n0),y1
563       P:0167 380878  [2 -      872]            add     y1,b      #8,n0
564       P:0168 20004E  [2 -      874]            and     x0,b
565       P:0169 21AF00  [2 -      876]            move              b1,b
566       P:016A 556800  [4 -      880]            move              b1,x:(r0+n0)
567       P:016B 21AF00  [2 -      882]            move              b1,b
568       P:016C 060FA0  [4 -      886]            rep     #15
569       P:016D 20002A  [2 -      888]            asr     b
570       P:016E 21AF00  [2 -      890]            move              b1,b
571       P:016F 20000B  [2 -      892]            tst     b
572       P:0170 0AF0AA  [6 -      898]            jeq     L37
                 00017E
573       P:0172 47E800  [4 -      902]            move              x:(r0+n0),y1
574       P:0173 381300  [2 -      904]            move              #19,n0
575       P:0174 44F400  [4 -      908]            move              #>32767,x0
                 007FFF
576       P:0176 57F400  [4 -      912]            move              #>65536,b
                 010000
577       P:0178 20007C  [2 -      914]            sub     y1,b
578       P:0179 20004E  [2 -      916]            and     x0,b
579       P:017A 21AF00  [2 -      918]            move              b1,b
580       P:017B 556800  [4 -      922]            move              b1,x:(r0+n0)
581       P:017C 0AF080  [6 -      928]            jmp     L38
                 000182
582                                      L37
583       P:017E 380800  [2 -      930]            move              #8,n0
584       P:017F 47E800  [4 -      934]            move              x:(r0+n0),y1
585       P:0180 381300  [2 -      936]            move              #19,n0
586       P:0181 476800  [4 -      940]            move              y1,x:(r0+n0)
587                                      L38
588                                      ; **************************************************
589                                      ;   {
590                                      ;     register int mag = MAG << 1;
591                                      ; **************************************************
592                                      ; **************************************************
593                                      ; 
594                                      ;     for (EXP = 0; mag >>= 1; EXP++)
595                                      ; **************************************************
596       P:0182 381300  [2 -      942]            move              #19,n0
597       P:0183 270000  [2 -      944]            move              #0,y1
598       P:0184 57E800  [4 -      948]            move              x:(r0+n0),b
599       P:0185 380E3A  [2 -      950]            asl     b         #14,n0
600       P:0186 21AF00  [2 -      952]            move              b1,b
601       P:0187 21AF00  [2 -      954]            move              b1,b
602       P:0188 47682A  [4 -      958]            asr     b         y1,x:(r0+n0)
603       P:0189 381400  [2 -      960]            move              #20,n0
604       P:018A 21AF00  [2 -      962]            move              b1,b
605       P:018B 55680B  [4 -      966]            tst     b         b1,x:(r0+n0)
606       P:018C 0AF0AA  [6 -      972]            jeq     L112
                 00019C
607       P:018E 44F400  [4 -      976]            move              #>1,x0
                 000001
608                                      L41
609       P:0190 380E00  [2 -      978]            move              #14,n0
610       P:0191 57E800  [4 -      982]            move              x:(r0+n0),b
611       P:0192 200048  [2 -      984]            add     x0,b
612       P:0193 556800  [4 -      988]            move              b1,x:(r0+n0)
613       P:0194 381400  [2 -      990]            move              #20,n0
614       P:0195 57E800  [4 -      994]            move              x:(r0+n0),b
615       P:0196 21AF00  [2 -      996]            move              b1,b
616       P:0197 20002A  [2 -      998]            asr     b
617       P:0198 21AF00  [2 -     1000]            move              b1,b
618       P:0199 55680B  [4 -     1004]            tst     b         b1,x:(r0+n0)
619       P:019A 0AF0A2  [6 -     1010]            jne     L41
                 000190
620                                      L112
621                                      ; **************************************************
622                                      ; #ifdef __LOOPCOUNT__ 
623                                      ;       Loop2++;
624                                      ; #else
625                                      ;       ;
626                                      ; #endif
627                                      ;   }
628                                      ;   MANT = MAG ? (MAG << 6) >> EXP : 1 << 5;
629                                      ; **************************************************
630       P:019C 381300  [2 -     1012]            move              #19,n0
631       P:019D 57E800  [4 -     1016]            move              x:(r0+n0),b
632       P:019E 20000B  [2 -     1018]            tst     b
633       P:019F 0AF0AA  [6 -     1024]            jeq     L43
                 0001B1
634       P:01A1 0606A0  [4 -     1028]            rep     #6
635       P:01A2 20003A  [2 -     1030]            asl     b
636       P:01A3 380E00  [2 -     1032]            move              #14,n0
637       P:01A4 21AF00  [2 -     1034]            move              b1,b
638       P:01A5 56E800  [4 -     1038]            move              x:(r0+n0),a
639       P:01A6 200003  [2 -     1040]            tst     a
640       P:01A7 0AF0AA  [6 -     1046]            jeq     L124
                 0001AD
641       P:01A9 21AF00  [2 -     1048]            move              b1,b
642       P:01AA 06CE20  [4 -     1052]            rep     a
643       P:01AB 20002A  [2 -     1054]            asr     b
644       P:01AC 21AF00  [2 -     1056]            move              b1,b
645                                      L124
646       P:01AD 380F00  [2 -     1058]            move              #15,n0
647       P:01AE 556800  [4 -     1062]            move              b1,x:(r0+n0)
648       P:01AF 0AF080  [6 -     1068]            jmp     L44
                 0001B5
649                                      L43
650       P:01B1 380F00  [2 -     1070]            move              #15,n0
651       P:01B2 47F400  [4 -     1074]            move              #>32,y1
                 000020
652       P:01B4 476800  [4 -     1078]            move              y1,x:(r0+n0)
653                                      L44
654                                      ; **************************************************
655                                      ;   SR1 = ((DQSEZ >> 15) << 10) + (EXP << 6) + MANT;
656                                      ; **************************************************
657       P:01B5 380800  [2 -     1080]            move              #8,n0
658       P:01B6 57E800  [4 -     1084]            move              x:(r0+n0),b
659       P:01B7 21AF00  [2 -     1086]            move              b1,b
660       P:01B8 060FA0  [4 -     1090]            rep     #15
661       P:01B9 20002A  [2 -     1092]            asr     b
662       P:01BA 21AF00  [2 -     1094]            move              b1,b
663       P:01BB 060AA0  [4 -     1098]            rep     #10
664       P:01BC 20003A  [2 -     1100]            asl     b
665       P:01BD 381400  [2 -     1102]            move              #20,n0
666       P:01BE 21AF00  [2 -     1104]            move              b1,b
667       P:01BF 556800  [4 -     1108]            move              b1,x:(r0+n0)
668       P:01C0 380E00  [2 -     1110]            move              #14,n0
669       P:01C1 57E800  [4 -     1114]            move              x:(r0+n0),b
670       P:01C2 0606A0  [4 -     1118]            rep     #6
671       P:01C3 20003A  [2 -     1120]            asl     b
672                                      ; **************************************************
673                                      ;   
674                                      ;   /* UPA2 */
675                                      ;   WA1 = PK0 ^ S->PK1;                     /* WA1 = PKS1 */
676                                      ; **************************************************
677                                      ; **************************************************
678                                      ;   MAG = PK0 ^ S->PK2 ? 114688 : 16384;    /* MAG = UGA2A */
679                                      ; **************************************************
680       P:01C4 3C0A00  [2 -     1122]            move              #10,n4
681       P:01C5 381300  [2 -     1124]            move              #19,n0
682       P:01C6 21AF00  [2 -     1126]            move              b1,b
683       P:01C7 21A700  [2 -     1128]            move              b1,y1
684       P:01C8 556800  [4 -     1132]            move              b1,x:(r0+n0)
685       P:01C9 381400  [2 -     1134]            move              #20,n0
686       P:01CA 57E800  [4 -     1138]            move              x:(r0+n0),b
687       P:01CB 380F78  [2 -     1140]            add     y1,b      #15,n0
688       P:01CC 47E800  [4 -     1144]            move              x:(r0+n0),y1
689       P:01CD 380A78  [2 -     1146]            add     y1,b      #10,n0
690       P:01CE 556800  [4 -     1150]            move              b1,x:(r0+n0)
691       P:01CF 380900  [2 -     1152]            move              #9,n0
692       P:01D0 44EC00  [4 -     1156]            move              x:(r4+n4),x0
693       P:01D1 3C0B00  [2 -     1158]            move              #11,n4
694       P:01D2 57E800  [4 -     1162]            move              x:(r0+n0),b
695       P:01D3 380C4B  [2 -     1164]            eor     x0,b      #12,n0
696       P:01D4 21AF00  [2 -     1166]            move              b1,b
697       P:01D5 556800  [4 -     1170]            move              b1,x:(r0+n0)
698       P:01D6 380900  [2 -     1172]            move              #9,n0
699       P:01D7 44EC00  [4 -     1176]            move              x:(r4+n4),x0
700       P:01D8 57E800  [4 -     1180]            move              x:(r0+n0),b
701       P:01D9 20004B  [2 -     1182]            eor     x0,b
702       P:01DA 21AF00  [2 -     1184]            move              b1,b
703       P:01DB 20000B  [2 -     1186]            tst     b
704       P:01DC 0AF0AA  [6 -     1192]            jeq     L45
                 0001E2
705       P:01DE 47F400  [4 -     1196]            move              #>114688,y1
                 01C000
706       P:01E0 0AF080  [6 -     1202]            jmp     L114
                 0001E4
707                                      L45
708       P:01E2 47F400  [4 -     1206]            move              #>16384,y1
                 004000
709                                      L114
710                                      ; **************************************************
711                                      ;   A1S = S->A1 & (1 << 15) ? 1 : 0;
712                                      ; **************************************************
713       P:01E4 3C0D00  [2 -     1208]            move              #13,n4
714       P:01E5 381300  [2 -     1210]            move              #19,n0
715       P:01E6 44F400  [4 -     1214]            move              #>32768,x0
                 008000
716       P:01E8 476800  [4 -     1218]            move              y1,x:(r0+n0)
717       P:01E9 56EC00  [4 -     1222]            move              x:(r4+n4),a
718       P:01EA 200046  [2 -     1224]            and     x0,a
719       P:01EB 218E00  [2 -     1226]            move              a1,a
720       P:01EC 200003  [2 -     1228]            tst     a
721       P:01ED 0AF0AA  [6 -     1234]            jeq     L47
                 0001F3
722       P:01EF 47F400  [4 -     1238]            move              #>1,y1
                 000001
723       P:01F1 0AF080  [6 -     1244]            jmp     L115
                 0001F4
724                                      L47
725       P:01F3 270000  [2 -     1246]            move              #0,y1
726                                      L115
727                                      ; **************************************************
728                                      ;   EXP = A1S ? (S->A1 >= 57345 ? (S->A1 << 2) & 131071 : 24577 << 2) :
729                                      ;               (S->A1 <= 8191 ? S->A1 << 2 : 8191 << 2); 
730                                      ; **************************************************
731       P:01F4 380B00  [2 -     1248]            move              #11,n0
732       P:01F5 476800  [4 -     1252]            move              y1,x:(r0+n0)
733       P:01F6 57E800  [4 -     1256]            move              x:(r0+n0),b
734       P:01F7 20000B  [2 -     1258]            tst     b
735       P:01F8 0AF0AA  [6 -     1264]            jeq     L49
                 000211
736       P:01FA 381000  [2 -     1266]            move              #16,n0
737       P:01FB 3C0D00  [2 -     1268]            move              #13,n4
738       P:01FC 47EC00  [4 -     1272]            move              x:(r4+n4),y1
739       P:01FD 476800  [4 -     1276]            move              y1,x:(r0+n0)
740       P:01FE 57E800  [4 -     1280]            move              x:(r0+n0),b
741       P:01FF 47F400  [4 -     1284]            move              #>57344,y1
                 00E000
742       P:0201 20007D  [2 -     1286]            cmp     y1,b
743       P:0202 0AF0AF  [6 -     1292]            jle     L51
                 00020D
744       P:0204 380E3A  [2 -     1294]            asl     b         #14,n0
745       P:0205 44F43A  [4 -     1298]            asl     b         #>131071,x0
                 01FFFF
746       P:0207 21AF00  [2 -     1300]            move              b1,b
747       P:0208 20004E  [2 -     1302]            and     x0,b
748       P:0209 21AF00  [2 -     1304]            move              b1,b
749       P:020A 556800  [4 -     1308]            move              b1,x:(r0+n0)
750       P:020B 0AF080  [6 -     1314]            jmp     L50
                 000222
751                                      L51
752       P:020D 47F400  [4 -     1318]            move              #>98308,y1
                 018004
753       P:020F 0AF080  [6 -     1324]            jmp     L116
                 000220
754                                      L49
755       P:0211 3C0D00  [2 -     1326]            move              #13,n4
756       P:0212 47EC00  [4 -     1330]            move              x:(r4+n4),y1
757       P:0213 47F479  [4 -     1334]            tfr     y1,b      #>8191,y1
                 001FFF
758       P:0215 20007D  [2 -     1336]            cmp     y1,b
759       P:0216 0AF0A7  [6 -     1342]            jgt     L53
                 00021E
760       P:0218 380E3A  [2 -     1344]            asl     b         #14,n0
761       P:0219 20003A  [2 -     1346]            asl     b
762       P:021A 21AF00  [2 -     1348]            move              b1,b
763       P:021B 556800  [4 -     1352]            move              b1,x:(r0+n0)
764       P:021C 0AF080  [6 -     1358]            jmp     L50
                 000222
765                                      L53
766       P:021E 47F400  [4 -     1362]            move              #>32764,y1
                 007FFC
767                                      L116
768       P:0220 380E00  [2 -     1364]            move              #14,n0
769       P:0221 476800  [4 -     1368]            move              y1,x:(r0+n0)
770                                      L50
771                                      ; **************************************************
772                                      ;   EXP = WA1 == 1 ? EXP : (131072 - EXP) & 131071;
773                                      ; **************************************************
774       P:0222 380C00  [2 -     1370]            move              #12,n0
775       P:0223 47F400  [4 -     1374]            move              #>1,y1
                 000001
776       P:0225 57E800  [4 -     1378]            move              x:(r0+n0),b
777       P:0226 20007D  [2 -     1380]            cmp     y1,b
778       P:0227 0AF0AA  [6 -     1386]            jeq     L56
                 000233
779       P:0229 380E00  [2 -     1388]            move              #14,n0
780       P:022A 44F400  [4 -     1392]            move              #>131071,x0
                 01FFFF
781       P:022C 47E800  [4 -     1396]            move              x:(r0+n0),y1
782       P:022D 57F400  [4 -     1400]            move              #>131072,b
                 020000
783       P:022F 20007C  [2 -     1402]            sub     y1,b
784       P:0230 55684E  [4 -     1406]            and     x0,b      b1,x:(r0+n0)
785       P:0231 21AF00  [2 -     1408]            move              b1,b
786       P:0232 556800  [4 -     1412]            move              b1,x:(r0+n0)
787                                      L56
788                                      ; **************************************************
789                                      ;   MAG = ((MAG + EXP) & 131071) >> 7;
790                                      ; **************************************************
791       P:0233 381300  [2 -     1414]            move              #19,n0
792       P:0234 44F400  [4 -     1418]            move              #>131071,x0
                 01FFFF
793       P:0236 57E800  [4 -     1422]            move              x:(r0+n0),b
794       P:0237 380E00  [2 -     1424]            move              #14,n0
795       P:0238 47E800  [4 -     1428]            move              x:(r0+n0),y1
796       P:0239 200078  [2 -     1430]            add     y1,b
797       P:023A 20004E  [2 -     1432]            and     x0,b
798       P:023B 21AF00  [2 -     1434]            move              b1,b
799       P:023C 21AF00  [2 -     1436]            move              b1,b
800       P:023D 0607A0  [4 -     1440]            rep     #7
801       P:023E 20002A  [2 -     1442]            asr     b
802                                      ; **************************************************
803                                      ;   EXP = WA2 == 1 ? 0 : (MAG & (1 << 9) ? MAG + 64512 : MAG);
804                                      ; **************************************************
805       P:023F 381300  [2 -     1444]            move              #19,n0
806       P:0240 47F400  [4 -     1448]            move              #>1,y1
                 000001
807       P:0242 21AF00  [2 -     1450]            move              b1,b
808       P:0243 556800  [4 -     1454]            move              b1,x:(r0+n0)
809       P:0244 380D00  [2 -     1456]            move              #13,n0
810       P:0245 57E800  [4 -     1460]            move              x:(r0+n0),b
811       P:0246 20007D  [2 -     1462]            cmp     y1,b
812       P:0247 0AF0A2  [6 -     1468]            jne     L57
                 00024C
813       P:0249 270000  [2 -     1470]            move              #0,y1
814       P:024A 0AF080  [6 -     1476]            jmp     L117
                 00025F
815                                      L57
816       P:024C 381300  [2 -     1478]            move              #19,n0
817       P:024D 44F400  [4 -     1482]            move              #>512,x0
                 000200
818       P:024F 56E800  [4 -     1486]            move              x:(r0+n0),a
819       P:0250 200046  [2 -     1488]            and     x0,a
820       P:0251 218E00  [2 -     1490]            move              a1,a
821       P:0252 200003  [2 -     1492]            tst     a
822       P:0253 0AF0AA  [6 -     1498]            jeq     L59
                 00025D
823       P:0255 57E800  [4 -     1502]            move              x:(r0+n0),b
824       P:0256 380E00  [2 -     1504]            move              #14,n0
825       P:0257 47F400  [4 -     1508]            move              #>64512,y1
                 00FC00
826       P:0259 200078  [2 -     1510]            add     y1,b
827       P:025A 556800  [4 -     1514]            move              b1,x:(r0+n0)
828       P:025B 0AF080  [6 -     1520]            jmp     L58
                 000261
829                                      L59
830       P:025D 381300  [2 -     1522]            move              #19,n0
831       P:025E 47E800  [4 -     1526]            move              x:(r0+n0),y1
832                                      L117
833       P:025F 380E00  [2 -     1528]            move              #14,n0
834       P:0260 476800  [4 -     1532]            move              y1,x:(r0+n0)
835                                      L58
836                                      ; **************************************************
837                                      ;   MANT = S->A2 & (1 << 15) ? 65536 - ((S->A2 >> 7) + 65024) :
838                                      ;                              65536 - (S->A2 >> 7);
839                                      ; **************************************************
840       P:0261 381300  [2 -     1534]            move              #19,n0
841       P:0262 3C0E00  [2 -     1536]            move              #14,n4
842       P:0263 44F400  [4 -     1540]            move              #>32768,x0
                 008000
843       P:0265 47EC00  [4 -     1544]            move              x:(r4+n4),y1
844       P:0266 476879  [4 -     1548]            tfr     y1,b      y1,x:(r0+n0)
845       P:0267 20004E  [2 -     1550]            and     x0,b
846       P:0268 21AF00  [2 -     1552]            move              b1,b
847       P:0269 20000B  [2 -     1554]            tst     b
848       P:026A 0AF0AA  [6 -     1560]            jeq     L61
                 000275
849       P:026C 56E800  [4 -     1564]            move              x:(r0+n0),a
850       P:026D 218E00  [2 -     1566]            move              a1,a
851       P:026E 0607A0  [4 -     1570]            rep     #7
852       P:026F 200022  [2 -     1572]            asr     a
853       P:0270 57F400  [4 -     1576]            move              #>512,b
                 000200
854       P:0272 218E00  [2 -     1578]            move              a1,a
855       P:0273 0AF080  [6 -     1584]            jmp     L118
                 00027D
856                                      L61
857       P:0275 3C0E00  [2 -     1586]            move              #14,n4
858       P:0276 56EC00  [4 -     1590]            move              x:(r4+n4),a
859       P:0277 218E00  [2 -     1592]            move              a1,a
860       P:0278 0607A0  [4 -     1596]            rep     #7
861       P:0279 200022  [2 -     1598]            asr     a
862       P:027A 57F400  [4 -     1602]            move              #>65536,b
                 010000
863       P:027C 218E00  [2 -     1604]            move              a1,a
864                                      L118
865                                      ; **************************************************
866                                      ;   EXP = (S->A2 + EXP + MANT) & 65535;
867                                      ; **************************************************
868                                      ; **************************************************
869                                      ; 
870                                      ;   /* LIMC */
871                                      ;   AP = 32768 <= EXP && EXP <= 53248 ? 53248 :
872                                      ;        12288 <= EXP && EXP <= 32767 ? 12288 : EXP;
873                                      ; **************************************************
874       P:027D 3C0E1C  [2 -     1606]            sub     a,b       #14,n4
875       P:027E 380F00  [2 -     1608]            move              #15,n0
876       P:027F 44F400  [4 -     1612]            move              #>65535,x0
                 00FFFF
877       P:0281 556800  [4 -     1616]            move              b1,x:(r0+n0)
878       P:0282 381400  [2 -     1618]            move              #20,n0
879       P:0283 47EC00  [4 -     1622]            move              x:(r4+n4),y1
880       P:0284 476800  [4 -     1626]            move              y1,x:(r0+n0)
881       P:0285 380E00  [2 -     1628]            move              #14,n0
882       P:0286 57E800  [4 -     1632]            move              x:(r0+n0),b
883       P:0287 380F78  [2 -     1634]            add     y1,b      #15,n0
884       P:0288 47E800  [4 -     1638]            move              x:(r0+n0),y1
885       P:0289 380E78  [2 -     1640]            add     y1,b      #14,n0
886       P:028A 47F44E  [4 -     1644]            and     x0,b      #>32767,y1
                 007FFF
887       P:028C 21AF00  [2 -     1646]            move              b1,b
888       P:028D 55687D  [4 -     1650]            cmp     y1,b      b1,x:(r0+n0)
889       P:028E 0AF0AF  [6 -     1656]            jle     L63
                 000298
890       P:0290 44F400  [4 -     1660]            move              #>53248,x0
                 00D000
891       P:0292 20004D  [2 -     1662]            cmp     x0,b
892       P:0293 0AF0A7  [6 -     1668]            jgt     L63
                 000298
893       P:0295 208500  [2 -     1670]            move              x0,x1
894       P:0296 0AF080  [6 -     1676]            jmp     L64
                 0002AA
895                                      L63
896       P:0298 380E00  [2 -     1678]            move              #14,n0
897       P:0299 47F400  [4 -     1682]            move              #>12287,y1
                 002FFF
898       P:029B 57E800  [4 -     1686]            move              x:(r0+n0),b
899       P:029C 20007D  [2 -     1688]            cmp     y1,b
900       P:029D 0AF0AF  [6 -     1694]            jle     L65
                 0002A8
901       P:029F 47F400  [4 -     1698]            move              #>32767,y1
                 007FFF
902       P:02A1 20007D  [2 -     1700]            cmp     y1,b
903       P:02A2 0AF0A7  [6 -     1706]            jgt     L65
                 0002A8
904       P:02A4 45F400  [4 -     1710]            move              #>12288,x1
                 003000
905       P:02A6 0AF080  [6 -     1716]            jmp     L64
                 0002AA
906                                      L65
907       P:02A8 380E00  [2 -     1718]            move              #14,n0
908       P:02A9 45E800  [4 -     1722]            move              x:(r0+n0),x1
909                                      L64
910                                      ; **************************************************
911                                      ;   
912                                      ;   /* TRIGB */
913                                      ;   A2R = S->T ? 0 : AP;
914                                      ; **************************************************
915       P:02AA 205C00  [2 -     1724]            move              (r4)+
916       P:02AB 56D400  [2 -     1726]            move              x:(r4)-,a
917       P:02AC 200003  [2 -     1728]            tst     a
918       P:02AD 0AF0AA  [6 -     1734]            jeq     L67
                 0002B2
919       P:02AF 260000  [2 -     1736]            move              #0,y0
920       P:02B0 0AF080  [6 -     1742]            jmp     L68
                 0002B3
921                                      L67
922       P:02B2 20A600  [2 -     1744]            move              x1,y0
923                                      L68
924                                      ; **************************************************
925                                      ;   
926                                      ;   /* UPA1 */
927                                      ;   MANT = A1S ? (65536 - ((S->A1 >> 8) + 65280)):
928                                      ;                (65536 - (S->A1 >> 8));
929                                      ; **************************************************
930       P:02B3 380B00  [2 -     1746]            move              #11,n0
931       P:02B4 57E800  [4 -     1750]            move              x:(r0+n0),b
932       P:02B5 20000B  [2 -     1752]            tst     b
933       P:02B6 0AF0AA  [6 -     1758]            jeq     L69
                 0002C2
934       P:02B8 3C0D00  [2 -     1760]            move              #13,n4
935       P:02B9 56EC00  [4 -     1764]            move              x:(r4+n4),a
936       P:02BA 218E00  [2 -     1766]            move              a1,a
937       P:02BB 0608A0  [4 -     1770]            rep     #8
938       P:02BC 200022  [2 -     1772]            asr     a
939       P:02BD 57F400  [4 -     1776]            move              #>256,b
                 000100
940       P:02BF 218E00  [2 -     1778]            move              a1,a
941       P:02C0 0AF080  [6 -     1784]            jmp     L119
                 0002CA
942                                      L69
943       P:02C2 3C0D00  [2 -     1786]            move              #13,n4
944       P:02C3 56EC00  [4 -     1790]            move              x:(r4+n4),a
945       P:02C4 218E00  [2 -     1792]            move              a1,a
946       P:02C5 0608A0  [4 -     1796]            rep     #8
947       P:02C6 200022  [2 -     1798]            asr     a
948       P:02C7 57F400  [4 -     1802]            move              #>65536,b
                 010000
949       P:02C9 218E00  [2 -     1804]            move              a1,a
950                                      L119
951                                      ; **************************************************
952                                      ;   EXP = (S->A1 + ((WA2 == 1 ? 0 : (WA1 ? 65344 : 192)) + MANT)) & 65535;
953                                      ; **************************************************
954       P:02CA 380F1C  [2 -     1806]            sub     a,b       #15,n0
955       P:02CB 47F400  [4 -     1810]            move              #>1,y1
                 000001
956       P:02CD 556800  [4 -     1814]            move              b1,x:(r0+n0)
957       P:02CE 44E800  [4 -     1818]            move              x:(r0+n0),x0
958       P:02CF 380D00  [2 -     1820]            move              #13,n0
959       P:02D0 57E800  [4 -     1824]            move              x:(r0+n0),b
960       P:02D1 20007D  [2 -     1826]            cmp     y1,b
961       P:02D2 0AF0AA  [6 -     1832]            jeq     L71
                 0002E4
962       P:02D4 380C00  [2 -     1834]            move              #12,n0
963       P:02D5 57E800  [4 -     1838]            move              x:(r0+n0),b
964       P:02D6 20000B  [2 -     1840]            tst     b
965       P:02D7 0AF0AA  [6 -     1846]            jeq     L72
                 0002DD
966       P:02D9 47F400  [4 -     1850]            move              #>65344,y1
                 00FF40
967       P:02DB 0AF080  [6 -     1856]            jmp     L120
                 0002DF
968                                      L72
969       P:02DD 47F400  [4 -     1860]            move              #>192,y1
                 0000C0
970                                      L120
971       P:02DF 381549  [2 -     1862]            tfr     x0,b      #21,n0
972       P:02E0 476800  [4 -     1866]            move              y1,x:(r0+n0)
973       P:02E1 47E800  [4 -     1870]            move              x:(r0+n0),y1
974       P:02E2 200078  [2 -     1872]            add     y1,b
975       P:02E3 21A400  [2 -     1874]            move              b1,x0
976                                      L71
977                                      ; **************************************************
978                                      ;   
979                                      ;   /* FMULT */
980                                      ;   WA2 = f_mult(A2R, S->SR2); 
981                                      ; **************************************************
982       P:02E4 380E49  [2 -     1876]            tfr     x0,b      #14,n0
983       P:02E5 3C0D00  [2 -     1878]            move              #13,n4
984       P:02E6 44F400  [4 -     1882]            move              #>65535,x0
                 00FFFF
985       P:02E8 47EC00  [4 -     1886]            move              x:(r4+n4),y1
986       P:02E9 3C0C78  [2 -     1888]            add     y1,b      #12,n4
987       P:02EA 20004E  [2 -     1890]            and     x0,b
988       P:02EB 21AF00  [2 -     1892]            move              b1,b
989       P:02EC 556800  [4 -     1896]            move              b1,x:(r0+n0)
990       P:02ED 381400  [2 -     1898]            move              #20,n0
991       P:02EE 47EC00  [4 -     1902]            move              x:(r4+n4),y1
992       P:02EF 476800  [4 -     1906]            move              y1,x:(r0+n0)
993       P:02F0 475E00  [2 -     1908]            move              y1,x:(r6)+
994       P:02F1 465E00  [2 -     1910]            move              y0,x:(r6)+
995       P:02F2 0BF080  [6 -     1916]            jsr     Ff_mult
                 000000
996                                      ; **************************************************
997                                      ;  
998                                      ;   /* LIMD */
999                                      ;   MAG = (15360 + 65536 - AP) & 65535;
1000                                     ; **************************************************
1001                                     ; **************************************************
1002                                     ;   S->A1 = (AP + 65536 - 15360) & 65535;
1003                                     ; **************************************************
1004                                     ; **************************************************
1005                                     ;   AP = 32768 <= EXP && EXP <=  S->A1 ? S->A1 :
1006                                     ;        MAG <= EXP && EXP <= 32767 ? MAG : EXP;
1007                                     ; **************************************************
1008      P:02F4 3C0D00  [2 -     1918]            move              #13,n4
1009      P:02F5 380D00  [2 -     1920]            move              #13,n0
1010      P:02F6 47F400  [4 -     1924]            move              #>50176,y1
                 00C400
1011      P:02F8 57F400  [4 -     1928]            move              #>80896,b
                 013C00
1012      P:02FA 54686C  [4 -     1932]            sub     x1,b      a1,x:(r0+n0)
1013      P:02FB 38134E  [2 -     1934]            and     x0,b      #19,n0
1014      P:02FC 21AF00  [2 -     1936]            move              b1,b
1015      P:02FD 556869  [4 -     1940]            tfr     x1,b      b1,x:(r0+n0)
1016      P:02FE 381278  [2 -     1942]            add     y1,b      #18,n0
1017      P:02FF 20564E  [2 -     1944]            and     x0,b      (r6)-
1018      P:0300 21AF00  [2 -     1946]            move              b1,b
1019      P:0301 21A700  [2 -     1948]            move              b1,y1
1020      P:0302 556800  [4 -     1952]            move              b1,x:(r0+n0)
1021      P:0303 380E00  [2 -     1954]            move              #14,n0
1022      P:0304 476C00  [4 -     1958]            move              y1,x:(r4+n4)
1023      P:0305 57E800  [4 -     1962]            move              x:(r0+n0),b
1024      P:0306 47F400  [4 -     1966]            move              #>32767,y1
                 007FFF
1025      P:0308 20567D  [2 -     1968]            cmp     y1,b      (r6)-
1026      P:0309 0AF0AF  [6 -     1974]            jle     L74
                 000313
1027      P:030B 381200  [2 -     1976]            move              #18,n0
1028      P:030C 47E800  [4 -     1980]            move              x:(r0+n0),y1
1029      P:030D 20007D  [2 -     1982]            cmp     y1,b
1030      P:030E 0AF0A7  [6 -     1988]            jgt     L74
                 000313
1031      P:0310 45E800  [4 -     1992]            move              x:(r0+n0),x1
1032      P:0311 0AF080  [6 -     1998]            jmp     L75
                 000326
1033                                     L74
1034      P:0313 381300  [2 -     2000]            move              #19,n0
1035      P:0314 57E800  [4 -     2004]            move              x:(r0+n0),b
1036      P:0315 380E00  [2 -     2006]            move              #14,n0
1037      P:0316 47E800  [4 -     2010]            move              x:(r0+n0),y1
1038      P:0317 20007D  [2 -     2012]            cmp     y1,b
1039      P:0318 0AF0A7  [6 -     2018]            jgt     L76
                 000324
1040      P:031A 47F400  [4 -     2022]            move              #>32767,y1
                 007FFF
1041      P:031C 57E800  [4 -     2026]            move              x:(r0+n0),b
1042      P:031D 20007D  [2 -     2028]            cmp     y1,b
1043      P:031E 0AF0A7  [6 -     2034]            jgt     L76
                 000324
1044      P:0320 381300  [2 -     2036]            move              #19,n0
1045      P:0321 45E800  [4 -     2040]            move              x:(r0+n0),x1
1046      P:0322 0AF080  [6 -     2046]            jmp     L75
                 000326
1047                                     L76
1048      P:0324 380E00  [2 -     2048]            move              #14,n0
1049      P:0325 45E800  [4 -     2052]            move              x:(r0+n0),x1
1050                                     L75
1051                                     ; **************************************************
1052                                     ;   
1053                                     ;   /* TRIGB */
1054                                     ;   S->A1 = S->T ? 0 : AP;
1055                                     ; **************************************************
1056      P:0326 205C00  [2 -     2054]            move              (r4)+
1057      P:0327 56D400  [2 -     2056]            move              x:(r4)-,a
1058      P:0328 200003  [2 -     2058]            tst     a
1059      P:0329 0AF0AA  [6 -     2064]            jeq     L78
                 00032E
1060      P:032B 240000  [2 -     2066]            move              #0,x0
1061      P:032C 0AF080  [6 -     2072]            jmp     L79
                 00032F
1062                                     L78
1063      P:032E 20A400  [2 -     2074]            move              x1,x0
1064                                     L79
1065                                     ; **************************************************
1066                                     ;   
1067                                     ;   /* FMULT */
1068                                     ;   WA1 = f_mult(S->A1, SR1);
1069                                     ; **************************************************
1070      P:032F 380A00  [2 -     2076]            move              #10,n0
1071      P:0330 3C0D00  [2 -     2078]            move              #13,n4
1072      P:0331 446C00  [4 -     2082]            move              x0,x:(r4+n4)
1073      P:0332 47E800  [4 -     2086]            move              x:(r0+n0),y1
1074      P:0333 475E00  [2 -     2088]            move              y1,x:(r6)+
1075      P:0334 445E00  [2 -     2090]            move              x0,x:(r6)+
1076      P:0335 0BF080  [6 -     2096]            jsr     Ff_mult
                 000000
1077                                     ; **************************************************
1078                                     ;   
1079                                     ;   /* FLOATA */
1080                                     ;   MAG = S->DQ & 16383;
1081                                     ; **************************************************
1082                                     ; **************************************************
1083                                     ;   {
1084                                     ;     register int mag = MAG << 1;
1085                                     ; **************************************************
1086                                     ; **************************************************
1087                                     ; 
1088                                     ;     for (EXP = 0; mag >>= 1; EXP++)
1089                                     ; **************************************************
1090      P:0337 380C00  [2 -     2098]            move              #12,n0
1091      P:0338 44F400  [4 -     2102]            move              #>16383,x0
                 003FFF
1092      P:033A 546800  [4 -     2106]            move              a1,x:(r0+n0)
1093      P:033B 381300  [2 -     2108]            move              #19,n0
1094      P:033C 47E400  [2 -     2110]            move              x:(r4),y1
1095      P:033D 205679  [2 -     2112]            tfr     y1,b      (r6)-
1096      P:033E 27004E  [2 -     2114]            and     x0,b      #0,y1
1097      P:033F 21AF00  [2 -     2116]            move              b1,b
1098      P:0340 55683A  [4 -     2120]            asl     b         b1,x:(r0+n0)
1099      P:0341 380E00  [2 -     2122]            move              #14,n0
1100      P:0342 21AF00  [2 -     2124]            move              b1,b
1101      P:0343 21AF00  [2 -     2126]            move              b1,b
1102      P:0344 47682A  [4 -     2130]            asr     b         y1,x:(r0+n0)
1103      P:0345 381400  [2 -     2132]            move              #20,n0
1104      P:0346 21AF00  [2 -     2134]            move              b1,b
1105      P:0347 55680B  [4 -     2138]            tst     b         b1,x:(r0+n0)
1106      P:0348 205600  [2 -     2140]            move              (r6)-
1107      P:0349 0AF0AA  [6 -     2146]            jeq     L111
                 000359
1108      P:034B 44F400  [4 -     2150]            move              #>1,x0
                 000001
1109                                     L82
1110      P:034D 380E00  [2 -     2152]            move              #14,n0
1111      P:034E 57E800  [4 -     2156]            move              x:(r0+n0),b
1112      P:034F 200048  [2 -     2158]            add     x0,b
1113      P:0350 556800  [4 -     2162]            move              b1,x:(r0+n0)
1114      P:0351 381400  [2 -     2164]            move              #20,n0
1115      P:0352 57E800  [4 -     2168]            move              x:(r0+n0),b
1116      P:0353 21AF00  [2 -     2170]            move              b1,b
1117      P:0354 20002A  [2 -     2172]            asr     b
1118      P:0355 21AF00  [2 -     2174]            move              b1,b
1119      P:0356 55680B  [4 -     2178]            tst     b         b1,x:(r0+n0)
1120      P:0357 0AF0A2  [6 -     2184]            jne     L82
                 00034D
1121                                     L111
1122                                     ; **************************************************
1123                                     ; #ifdef __LOOPCOUNT__ 
1124                                     ;       Loop3++;
1125                                     ; #else
1126                                     ;       ;
1127                                     ; #endif
1128                                     ;   }
1129                                     ;   MANT = MAG ? (MAG << 6) >> EXP : 1 << 5;
1130                                     ; **************************************************
1131      P:0359 381300  [2 -     2186]            move              #19,n0
1132      P:035A 57E800  [4 -     2190]            move              x:(r0+n0),b
1133      P:035B 20000B  [2 -     2192]            tst     b
1134      P:035C 0AF0AA  [6 -     2198]            jeq     L84
                 00036E
1135      P:035E 0606A0  [4 -     2202]            rep     #6
1136      P:035F 20003A  [2 -     2204]            asl     b
1137      P:0360 380E00  [2 -     2206]            move              #14,n0
1138      P:0361 21AF00  [2 -     2208]            move              b1,b
1139      P:0362 56E800  [4 -     2212]            move              x:(r0+n0),a
1140      P:0363 200003  [2 -     2214]            tst     a
1141      P:0364 0AF0AA  [6 -     2220]            jeq     L125
                 00036A
1142      P:0366 21AF00  [2 -     2222]            move              b1,b
1143      P:0367 06CE20  [4 -     2226]            rep     a
1144      P:0368 20002A  [2 -     2228]            asr     b
1145      P:0369 21AF00  [2 -     2230]            move              b1,b
1146                                     L125
1147      P:036A 380F00  [2 -     2232]            move              #15,n0
1148      P:036B 556800  [4 -     2236]            move              b1,x:(r0+n0)
1149      P:036C 0AF080  [6 -     2242]            jmp     L85
                 000372
1150                                     L84
1151      P:036E 380F00  [2 -     2244]            move              #15,n0
1152      P:036F 47F400  [4 -     2248]            move              #>32,y1
                 000020
1153      P:0371 476800  [4 -     2252]            move              y1,x:(r0+n0)
1154                                     L85
1155                                     ; **************************************************
1156                                     ;   DQSEZ = (DQS << 10) + (EXP << 6) + MANT;
1157                                     ; **************************************************
1158      P:0372 380600  [2 -     2254]            move              #6,n0
1159      P:0373 57E800  [4 -     2258]            move              x:(r0+n0),b
1160      P:0374 060AA0  [4 -     2262]            rep     #10
1161      P:0375 20003A  [2 -     2264]            asl     b
1162      P:0376 381400  [2 -     2266]            move              #20,n0
1163      P:0377 21AF00  [2 -     2268]            move              b1,b
1164      P:0378 556800  [4 -     2272]            move              b1,x:(r0+n0)
1165      P:0379 380E00  [2 -     2274]            move              #14,n0
1166      P:037A 57E800  [4 -     2278]            move              x:(r0+n0),b
1167      P:037B 0606A0  [4 -     2282]            rep     #6
1168      P:037C 20003A  [2 -     2284]            asl     b
1169                                     ; **************************************************
1170                                     ;   
1171                                     ;   /* XOR */
1172                                     ;   BP[0] = DQS ^ (S->DQ2 >> 10);
1173                                     ; **************************************************
1174      P:037D 3C0400  [2 -     2286]            move              #4,n4
1175      P:037E 381300  [2 -     2288]            move              #19,n0
1176      P:037F 21AF00  [2 -     2290]            move              b1,b
1177      P:0380 21A700  [2 -     2292]            move              b1,y1
1178      P:0381 556800  [4 -     2296]            move              b1,x:(r0+n0)
1179      P:0382 381400  [2 -     2298]            move              #20,n0
1180      P:0383 57E800  [4 -     2302]            move              x:(r0+n0),b
1181      P:0384 380F78  [2 -     2304]            add     y1,b      #15,n0
1182      P:0385 47E800  [4 -     2308]            move              x:(r0+n0),y1
1183      P:0386 380878  [2 -     2310]            add     y1,b      #8,n0
1184      P:0387 556800  [4 -     2314]            move              b1,x:(r0+n0)
1185      P:0388 47EC00  [4 -     2318]            move              x:(r4+n4),y1
1186      P:0389 200079  [2 -     2320]            tfr     y1,b
1187      P:038A 21AF00  [2 -     2322]            move              b1,b
1188      P:038B 060AA0  [4 -     2326]            rep     #10
1189      P:038C 20002A  [2 -     2328]            asr     b
1190                                     ; **************************************************
1191                                     ;   BP[1] = DQS ^ (S->DQ3 >> 10);
1192                                     ; **************************************************
1193      P:038D 3C0500  [2 -     2330]            move              #5,n4
1194      P:038E 380600  [2 -     2332]            move              #6,n0
1195      P:038F 21AF00  [2 -     2334]            move              b1,b
1196      P:0390 21A400  [2 -     2336]            move              b1,x0
1197      P:0391 57E800  [4 -     2340]            move              x:(r0+n0),b
1198      P:0392 20004B  [2 -     2342]            eor     x0,b
1199      P:0393 21AF00  [2 -     2344]            move              b1,b
1200      P:0394 21A700  [2 -     2346]            move              b1,y1
1201      P:0395 476000  [2 -     2348]            move              y1,x:(r0)
1202      P:0396 47EC00  [4 -     2352]            move              x:(r4+n4),y1
1203      P:0397 200079  [2 -     2354]            tfr     y1,b
1204      P:0398 21AF00  [2 -     2356]            move              b1,b
1205      P:0399 060AA0  [4 -     2360]            rep     #10
1206      P:039A 20002A  [2 -     2362]            asr     b
1207                                     ; **************************************************
1208                                     ;   BP[2] = DQS ^ (S->DQ4 >> 10);
1209                                     ; **************************************************
1210      P:039B 3C0600  [2 -     2364]            move              #6,n4
1211      P:039C 21AF00  [2 -     2366]            move              b1,b
1212      P:039D 21A400  [2 -     2368]            move              b1,x0
1213      P:039E 57E800  [4 -     2372]            move              x:(r0+n0),b
1214      P:039F 20584B  [2 -     2374]            eor     x0,b      (r0)+
1215      P:03A0 21AF00  [2 -     2376]            move              b1,b
1216      P:03A1 21A700  [2 -     2378]            move              b1,y1
1217      P:03A2 475000  [2 -     2380]            move              y1,x:(r0)-
1218      P:03A3 47EC00  [4 -     2384]            move              x:(r4+n4),y1
1219      P:03A4 200079  [2 -     2386]            tfr     y1,b
1220      P:03A5 21AF00  [2 -     2388]            move              b1,b
1221      P:03A6 060AA0  [4 -     2392]            rep     #10
1222      P:03A7 20002A  [2 -     2394]            asr     b
1223                                     ; **************************************************
1224                                     ;   BP[3] = DQS ^ (S->DQ5 >> 10);
1225                                     ; **************************************************
1226      P:03A8 3C0700  [2 -     2396]            move              #7,n4
1227      P:03A9 21AF00  [2 -     2398]            move              b1,b
1228      P:03AA 21A400  [2 -     2400]            move              b1,x0
1229      P:03AB 57E800  [4 -     2404]            move              x:(r0+n0),b
1230      P:03AC 38024B  [2 -     2406]            eor     x0,b      #2,n0
1231      P:03AD 21AF00  [2 -     2408]            move              b1,b
1232      P:03AE 21A700  [2 -     2410]            move              b1,y1
1233      P:03AF 476800  [4 -     2414]            move              y1,x:(r0+n0)
1234      P:03B0 47EC00  [4 -     2418]            move              x:(r4+n4),y1
1235      P:03B1 200079  [2 -     2420]            tfr     y1,b
1236      P:03B2 21AF00  [2 -     2422]            move              b1,b
1237      P:03B3 060AA0  [4 -     2426]            rep     #10
1238      P:03B4 20002A  [2 -     2428]            asr     b
1239                                     ; **************************************************
1240                                     ;   BP[4] = DQS ^ (S->DQ6 >> 10);
1241                                     ; **************************************************
1242      P:03B5 3C0800  [2 -     2430]            move              #8,n4
1243      P:03B6 380600  [2 -     2432]            move              #6,n0
1244      P:03B7 21AF00  [2 -     2434]            move              b1,b
1245      P:03B8 21A400  [2 -     2436]            move              b1,x0
1246      P:03B9 57E800  [4 -     2440]            move              x:(r0+n0),b
1247      P:03BA 38034B  [2 -     2442]            eor     x0,b      #3,n0
1248      P:03BB 21AF00  [2 -     2444]            move              b1,b
1249      P:03BC 21A700  [2 -     2446]            move              b1,y1
1250      P:03BD 476800  [4 -     2450]            move              y1,x:(r0+n0)
1251      P:03BE 47EC00  [4 -     2454]            move              x:(r4+n4),y1
1252      P:03BF 200079  [2 -     2456]            tfr     y1,b
1253      P:03C0 21AF00  [2 -     2458]            move              b1,b
1254      P:03C1 060AA0  [4 -     2462]            rep     #10
1255      P:03C2 20002A  [2 -     2464]            asr     b
1256                                     ; **************************************************
1257                                     ;   BP[5] = DQS ^ (S->DQ7 >> 10);
1258                                     ; **************************************************
1259      P:03C3 3C0900  [2 -     2466]            move              #9,n4
1260      P:03C4 380600  [2 -     2468]            move              #6,n0
1261      P:03C5 21AF00  [2 -     2470]            move              b1,b
1262      P:03C6 21A400  [2 -     2472]            move              b1,x0
1263      P:03C7 57E800  [4 -     2476]            move              x:(r0+n0),b
1264      P:03C8 38044B  [2 -     2478]            eor     x0,b      #4,n0
1265      P:03C9 21AF00  [2 -     2480]            move              b1,b
1266      P:03CA 21A700  [2 -     2482]            move              b1,y1
1267      P:03CB 476800  [4 -     2486]            move              y1,x:(r0+n0)
1268      P:03CC 47EC00  [4 -     2490]            move              x:(r4+n4),y1
1269      P:03CD 200079  [2 -     2492]            tfr     y1,b
1270      P:03CE 21AF00  [2 -     2494]            move              b1,b
1271      P:03CF 060AA0  [4 -     2498]            rep     #10
1272      P:03D0 20002A  [2 -     2500]            asr     b
1273                                     ; **************************************************
1274                                     ;   
1275                                     ;   /* UPB */
1276                                     ;   MANT = S->DQ & 16383;
1277                                     ; **************************************************
1278                                     ; **************************************************
1279                                     ;   for (EXP = 0; EXP < 6; EXP++)
1280                                     ; **************************************************
1281      P:03D1 3B0F00  [2 -     2502]            move              #15,n3
1282      P:03D2 380600  [2 -     2504]            move              #6,n0
1283      P:03D3 221200  [2 -     2506]            move              r0,r2
1284      P:03D4 229300  [2 -     2508]            move              r4,r3
1285      P:03D5 45F400  [4 -     2512]            move              #>65535,x1
                 00FFFF
1286      P:03D7 21AF00  [2 -     2514]            move              b1,b
1287      P:03D8 21A400  [2 -     2516]            move              b1,x0
1288      P:03D9 57E800  [4 -     2520]            move              x:(r0+n0),b
1289      P:03DA 38054B  [2 -     2522]            eor     x0,b      #5,n0
1290      P:03DB 21AF00  [2 -     2524]            move              b1,b
1291      P:03DC 21A700  [2 -     2526]            move              b1,y1
1292      P:03DD 44F400  [4 -     2530]            move              #>16383,x0
                 003FFF
1293      P:03DF 476800  [4 -     2534]            move              y1,x:(r0+n0)
1294      P:03E0 381400  [2 -     2536]            move              #20,n0
1295      P:03E1 47E400  [2 -     2538]            move              x:(r4),y1
1296      P:03E2 476879  [4 -     2542]            tfr     y1,b      y1,x:(r0+n0)
1297      P:03E3 380F4E  [2 -     2544]            and     x0,b      #15,n0
1298      P:03E4 21AF00  [2 -     2546]            move              b1,b
1299      P:03E5 44F400  [4 -     2550]            move              #>1,x0
                 000001
1300      P:03E7 270000  [2 -     2552]            move              #0,y1
1301      P:03E8 556800  [4 -     2556]            move              b1,x:(r0+n0)
1302      P:03E9 380E00  [2 -     2558]            move              #14,n0
1303      P:03EA 204B00  [2 -     2560]            move              (r3)+n3
1304      P:03EB 476800  [4 -     2564]            move              y1,x:(r0+n0)
1305      P:03EC 060680  [6 -     2570]            do      #6,L110
                 000442
1306                                     L95
1307                                     ; **************************************************
1308                                     ;   {
1309                                     ; #ifdef __LOOPCOUNT__ 
1310                                     ;     Loop4++;
1311                                     ; #endif
1312                                     ;     DQS = MANT ? (BP[EXP] ? 65408 : 128) : 0;
1313                                     ; **************************************************
1314      P:03EE 380F00  [2 -     2572]            move              #15,n0
1315      P:03EF 57E800  [4 -     2576]            move              x:(r0+n0),b
1316      P:03F0 20000B  [2 -     2578]            tst     b
1317      P:03F1 0AF0AA  [6 -     2584]            jeq     L89
                 000402
1318      P:03F3 56E200  [2 -     2586]            move              x:(r2),a
1319      P:03F4 200003  [2 -     2588]            tst     a
1320      P:03F5 0AF0AA  [6 -     2594]            jeq     L91
                 0003FB
1321      P:03F7 47F400  [4 -     2598]            move              #>65408,y1
                 00FF80
1322      P:03F9 0AF080  [6 -     2604]            jmp     L121
                 0003FD
1323                                     L91
1324      P:03FB 47F400  [4 -     2608]            move              #>128,y1
                 000080
1325                                     L121
1326      P:03FD 381400  [2 -     2610]            move              #20,n0
1327      P:03FE 476800  [4 -     2614]            move              y1,x:(r0+n0)
1328      P:03FF 47E800  [4 -     2618]            move              x:(r0+n0),y1
1329      P:0400 0AF080  [6 -     2624]            jmp     L122
                 000403
1330                                     L89
1331      P:0402 270000  [2 -     2626]            move              #0,y1
1332                                     L122
1333                                     ; **************************************************
1334                                     ;     DQS += S->B[EXP] & (1 << 15) ? (65536 - ((S->B[EXP] >> 8) + 65280)) :
1335                                     ;                                    (65536 - (S->B[EXP] >> 8));
1336                                     ; **************************************************
1337      P:0403 390F00  [2 -     2628]            move              #15,n1
1338      P:0404 381400  [2 -     2630]            move              #20,n0
1339      P:0405 228F00  [2 -     2632]            move              r4,b
1340      P:0406 476800  [4 -     2636]            move              y1,x:(r0+n0)
1341      P:0407 47E800  [4 -     2640]            move              x:(r0+n0),y1
1342      P:0408 380600  [2 -     2642]            move              #6,n0
1343      P:0409 476800  [4 -     2646]            move              y1,x:(r0+n0)
1344      P:040A 380E00  [2 -     2648]            move              #14,n0
1345      P:040B 47E800  [4 -     2652]            move              x:(r0+n0),y1
1346      P:040C 381378  [2 -     2654]            add     y1,b      #19,n0
1347      P:040D 21B100  [2 -     2656]            move              b1,r1
1348      P:040E 47E900  [4 -     2660]            move              x:(r1+n1),y1
1349      P:040F 476879  [4 -     2664]            tfr     y1,b      y1,x:(r0+n0)
1350      P:0410 47F400  [4 -     2668]            move              #>32768,y1
                 008000
1351      P:0412 20007E  [2 -     2670]            and     y1,b
1352      P:0413 21AF00  [2 -     2672]            move              b1,b
1353      P:0414 20000B  [2 -     2674]            tst     b
1354      P:0415 0AF0AA  [6 -     2680]            jeq     L93
                 000421
1355      P:0417 57E800  [4 -     2684]            move              x:(r0+n0),b
1356      P:0418 21AF00  [2 -     2686]            move              b1,b
1357      P:0419 0608A0  [4 -     2690]            rep     #8
1358      P:041A 20002A  [2 -     2692]            asr     b
1359      P:041B 21AF00  [2 -     2694]            move              b1,b
1360      P:041C 21A700  [2 -     2696]            move              b1,y1
1361      P:041D 57F400  [4 -     2700]            move              #>256,b
                 000100
1362      P:041F 0AF080  [6 -     2706]            jmp     L123
                 00042A
1363                                     L93
1364      P:0421 47E300  [2 -     2708]            move              x:(r3),y1
1365      P:0422 200079  [2 -     2710]            tfr     y1,b
1366      P:0423 21AF00  [2 -     2712]            move              b1,b
1367      P:0424 0608A0  [4 -     2716]            rep     #8
1368      P:0425 20002A  [2 -     2718]            asr     b
1369      P:0426 21AF00  [2 -     2720]            move              b1,b
1370      P:0427 21A700  [2 -     2722]            move              b1,y1
1371      P:0428 57F400  [4 -     2726]            move              #>65536,b
                 010000
1372                                     L123
1373                                     ; **************************************************
1374                                     ;     BP[EXP] = (S->B[EXP] + DQS) & 65535;
1375                                     ; **************************************************
1376                                     ; **************************************************
1377                                     ; **************************************************
1378      P:042A 38147C  [2 -     2728]            sub     y1,b      #20,n0
1379      P:042B 556800  [4 -     2732]            move              b1,x:(r0+n0)
1380      P:042C 380600  [2 -     2734]            move              #6,n0
1381      P:042D 57E800  [4 -     2738]            move              x:(r0+n0),b
1382      P:042E 381400  [2 -     2740]            move              #20,n0
1383      P:042F 47E800  [4 -     2744]            move              x:(r0+n0),y1
1384      P:0430 380678  [2 -     2746]            add     y1,b      #6,n0
1385      P:0431 556800  [4 -     2750]            move              b1,x:(r0+n0)
1386      P:0432 381400  [2 -     2752]            move              #20,n0
1387      P:0433 47E300  [2 -     2754]            move              x:(r3),y1
1388      P:0434 200078  [2 -     2756]            add     y1,b
1389      P:0435 20006E  [2 -     2758]            and     x1,b
1390      P:0436 21AF00  [2 -     2760]            move              b1,b
1391      P:0437 21A700  [2 -     2762]            move              b1,y1
1392      P:0438 556800  [4 -     2766]            move              b1,x:(r0+n0)
1393      P:0439 380E00  [2 -     2768]            move              #14,n0
1394      P:043A 226F00  [2 -     2770]            move              r3,b
1395      P:043B 476248  [2 -     2772]            add     x0,b      y1,x:(r2)
1396      P:043C 21B300  [2 -     2774]            move              b1,r3
1397      P:043D 224F00  [2 -     2776]            move              r2,b
1398      P:043E 200048  [2 -     2778]            add     x0,b
1399      P:043F 21B200  [2 -     2780]            move              b1,r2
1400      P:0440 57E800  [4 -     2784]            move              x:(r0+n0),b
1401      P:0441 200048  [2 -     2786]            add     x0,b
1402      P:0442 556800  [4 -     2790]            move              b1,x:(r0+n0)
1403                                     L110
1404                                     ; **************************************************
1405                                     ;   }
1406                                     ;   
1407                                     ;   /* TRIGB */
1408                                     ;   if (S->T)
1409                                     ; **************************************************
1410      P:0443 205C00  [2 -     2792]            move              (r4)+
1411      P:0444 56D400  [2 -     2794]            move              x:(r4)-,a
1412      P:0445 200003  [2 -     2796]            tst     a
1413      P:0446 0AF0AA  [6 -     2802]            jeq     L96
                 00044E
1414                                     ; **************************************************
1415                                     ;     for (EXP = 0; EXP < 6; EXP++)
1416                                     ; **************************************************
1417      P:0448 221100  [2 -     2804]            move              r0,r1
1418      P:0449 240000  [2 -     2806]            move              #0,x0
1419      P:044A 060680  [6 -     2812]            do      #6,L108
                 00044C
1420                                     L100
1421                                     ; **************************************************
1422                                     ; #ifdef __LOOPCOUNT__ 
1423                                     ;     {
1424                                     ;       Loop5++;
1425                                     ;       BP[EXP] = 0 ;
1426                                     ;     }
1427                                     ; #else
1428                                     ;       BP[EXP] = 0 ;
1429                                     ; **************************************************
1430                                     ; **************************************************
1431                                     ; **************************************************
1432      P:044C 445900  [2 -     2814]            move              x0,x:(r1)+
1433                                     L108
1434      P:044D 000000  [2 -     2816]            nop
1435                                     L96
1436                                     ; **************************************************
1437                                     ; #endif
1438                                     ;   
1439                                     ;   /* FMULT */
1440                                     ;   DQI  = f_mult(BP[0], DQSEZ);
1441                                     ; **************************************************
1442      P:044E 380800  [2 -     2818]            move              #8,n0
1443      P:044F 61F400  [4 -     2822]            move              #Ff_mult,r1
                 000000
1444      P:0451 47E800  [4 -     2826]            move              x:(r0+n0),y1
1445      P:0452 475E00  [2 -     2828]            move              y1,x:(r6)+
1446      P:0453 47E000  [2 -     2830]            move              x:(r0),y1
1447      P:0454 475E00  [2 -     2832]            move              y1,x:(r6)+
1448      P:0455 0BE180  [4 -     2836]            jsr     (r1)
1449                                     ; **************************************************
1450                                     ;   MAG  = f_mult(BP[1], S->DQ2);
1451                                     ; **************************************************
1452      P:0456 3C0400  [2 -     2838]            move              #4,n4
1453      P:0457 380700  [2 -     2840]            move              #7,n0
1454      P:0458 205600  [2 -     2842]            move              (r6)-
1455      P:0459 546800  [4 -     2846]            move              a1,x:(r0+n0)
1456      P:045A 57E800  [4 -     2850]            move              x:(r0+n0),b
1457      P:045B 47EC00  [4 -     2854]            move              x:(r4+n4),y1
1458      P:045C 205800  [2 -     2856]            move              (r0)+
1459      P:045D 205600  [2 -     2858]            move              (r6)-
1460      P:045E 475E00  [2 -     2860]            move              y1,x:(r6)+
1461      P:045F 47D000  [2 -     2862]            move              x:(r0)-,y1
1462      P:0460 475E00  [2 -     2864]            move              y1,x:(r6)+
1463      P:0461 0BE180  [4 -     2868]            jsr     (r1)
1464                                     ; **************************************************
1465                                     ;   MANT = f_mult(BP[2], S->DQ3);
1466                                     ; **************************************************
1467      P:0462 3C0500  [2 -     2870]            move              #5,n4
1468      P:0463 381300  [2 -     2872]            move              #19,n0
1469      P:0464 205600  [2 -     2874]            move              (r6)-
1470      P:0465 546800  [4 -     2878]            move              a1,x:(r0+n0)
1471      P:0466 380200  [2 -     2880]            move              #2,n0
1472      P:0467 47EC00  [4 -     2884]            move              x:(r4+n4),y1
1473      P:0468 205600  [2 -     2886]            move              (r6)-
1474      P:0469 475E00  [2 -     2888]            move              y1,x:(r6)+
1475      P:046A 47E800  [4 -     2892]            move              x:(r0+n0),y1
1476      P:046B 475E00  [2 -     2894]            move              y1,x:(r6)+
1477      P:046C 0BE180  [4 -     2898]            jsr     (r1)
1478                                     ; **************************************************
1479                                     ;   A1S  = f_mult(BP[3], S->DQ4);
1480                                     ; **************************************************
1481      P:046D 3C0600  [2 -     2900]            move              #6,n4
1482      P:046E 380F00  [2 -     2902]            move              #15,n0
1483      P:046F 205600  [2 -     2904]            move              (r6)-
1484      P:0470 546800  [4 -     2908]            move              a1,x:(r0+n0)
1485      P:0471 380300  [2 -     2910]            move              #3,n0
1486      P:0472 47EC00  [4 -     2914]            move              x:(r4+n4),y1
1487      P:0473 205600  [2 -     2916]            move              (r6)-
1488      P:0474 475E00  [2 -     2918]            move              y1,x:(r6)+
1489      P:0475 47E800  [4 -     2922]            move              x:(r0+n0),y1
1490      P:0476 475E00  [2 -     2924]            move              y1,x:(r6)+
1491      P:0477 0BE180  [4 -     2928]            jsr     (r1)
1492                                     ; **************************************************
1493                                     ;   AP   = f_mult(BP[4], S->DQ5);
1494                                     ; **************************************************
1495      P:0478 3C0700  [2 -     2930]            move              #7,n4
1496      P:0479 380B00  [2 -     2932]            move              #11,n0
1497      P:047A 205600  [2 -     2934]            move              (r6)-
1498      P:047B 546800  [4 -     2938]            move              a1,x:(r0+n0)
1499      P:047C 380400  [2 -     2940]            move              #4,n0
1500      P:047D 47EC00  [4 -     2944]            move              x:(r4+n4),y1
1501      P:047E 205600  [2 -     2946]            move              (r6)-
1502      P:047F 475E00  [2 -     2948]            move              y1,x:(r6)+
1503      P:0480 47E800  [4 -     2952]            move              x:(r0+n0),y1
1504      P:0481 475E00  [2 -     2954]            move              y1,x:(r6)+
1505      P:0482 0BE180  [4 -     2958]            jsr     (r1)
1506                                     ; **************************************************
1507                                     ;   EXP  = f_mult(BP[5], S->DQ6);
1508                                     ; **************************************************
1509      P:0483 380500  [2 -     2960]            move              #5,n0
1510      P:0484 3C0800  [2 -     2962]            move              #8,n4
1511      P:0485 218500  [2 -     2964]            move              a1,x1
1512      P:0486 47EC00  [4 -     2968]            move              x:(r4+n4),y1
1513      P:0487 205600  [2 -     2970]            move              (r6)-
1514      P:0488 205600  [2 -     2972]            move              (r6)-
1515      P:0489 475E00  [2 -     2974]            move              y1,x:(r6)+
1516      P:048A 47E800  [4 -     2978]            move              x:(r0+n0),y1
1517      P:048B 475E00  [2 -     2980]            move              y1,x:(r6)+
1518      P:048C 0BE180  [4 -     2984]            jsr     (r1)
1519                                     ; **************************************************
1520                                     ;   
1521                                     ;   /* ACCUM */
1522                                     ;   DQS = (DQI + MAG + MANT + A1S + AP + EXP) & 65535;
1523                                     ; **************************************************
1524                                     ; **************************************************
1525                                     ;   S->SEZ = DQS >> 1;
1526                                     ; **************************************************
1527                                     ; **************************************************
1528                                     ;   S_E = S->SE = ((DQS + WA2 + WA1) & 65535) >> 1;
1529                                     ; **************************************************
1530                                     ; **************************************************
1531                                     ;   
1532                                     ;   /* STATE update */
1533                                     ;   S->PK2 = S->PK1;
1534                                     ; **************************************************
1535      P:048D 3C1600  [2 -     2986]            move              #22,n4
1536      P:048E 380E00  [2 -     2988]            move              #14,n0
1537      P:048F 44F400  [4 -     2992]            move              #>65535,x0
                 00FFFF
1538      P:0491 546800  [4 -     2996]            move              a1,x:(r0+n0)
1539      P:0492 381300  [2 -     2998]            move              #19,n0
1540      P:0493 205600  [2 -     3000]            move              (r6)-
1541      P:0494 47E800  [4 -     3004]            move              x:(r0+n0),y1
1542      P:0495 380F78  [2 -     3006]            add     y1,b      #15,n0
1543      P:0496 205600  [2 -     3008]            move              (r6)-
1544      P:0497 47E800  [4 -     3012]            move              x:(r0+n0),y1
1545      P:0498 380B78  [2 -     3014]            add     y1,b      #11,n0
1546      P:0499 47E800  [4 -     3018]            move              x:(r0+n0),y1
1547      P:049A 380E78  [2 -     3020]            add     y1,b      #14,n0
1548      P:049B 200068  [2 -     3022]            add     x1,b
1549      P:049C 47E800  [4 -     3026]            move              x:(r0+n0),y1
1550      P:049D 380678  [2 -     3028]            add     y1,b      #6,n0
1551      P:049E 20004E  [2 -     3030]            and     x0,b
1552      P:049F 21AF00  [2 -     3032]            move              b1,b
1553      P:04A0 556800  [4 -     3036]            move              b1,x:(r0+n0)
1554      P:04A1 21AF00  [2 -     3038]            move              b1,b
1555      P:04A2 20002A  [2 -     3040]            asr     b
1556      P:04A3 21AF00  [2 -     3042]            move              b1,b
1557      P:04A4 21A700  [2 -     3044]            move              b1,y1
1558      P:04A5 476C00  [4 -     3048]            move              y1,x:(r4+n4)
1559      P:04A6 3C1500  [2 -     3050]            move              #21,n4
1560      P:04A7 57E800  [4 -     3054]            move              x:(r0+n0),b
1561      P:04A8 380D00  [2 -     3056]            move              #13,n0
1562      P:04A9 47E800  [4 -     3060]            move              x:(r0+n0),y1
1563      P:04AA 380C78  [2 -     3062]            add     y1,b      #12,n0
1564      P:04AB 47E800  [4 -     3066]            move              x:(r0+n0),y1
1565      P:04AC 381478  [2 -     3068]            add     y1,b      #20,n0
1566      P:04AD 20004E  [2 -     3070]            and     x0,b
1567      P:04AE 21AF00  [2 -     3072]            move              b1,b
1568      P:04AF 21AF00  [2 -     3074]            move              b1,b
1569      P:04B0 20002A  [2 -     3076]            asr     b
1570      P:04B1 21AF00  [2 -     3078]            move              b1,b
1571      P:04B2 21A700  [2 -     3080]            move              b1,y1
1572      P:04B3 476C00  [4 -     3084]            move              y1,x:(r4+n4)
1573      P:04B4 3C0A00  [2 -     3086]            move              #10,n4
1574      P:04B5 477000  [4 -     3090]            move              y1,x:FS_E
                 00006A
1575      P:04B7 47EC00  [4 -     3094]            move              x:(r4+n4),y1
1576      P:04B8 3C0B00  [2 -     3096]            move              #11,n4
1577      P:04B9 476800  [4 -     3100]            move              y1,x:(r0+n0)
1578      P:04BA 476C00  [4 -     3104]            move              y1,x:(r4+n4)
1579                                     ; **************************************************
1580                                     ;   S->PK1 = PK0;
1581                                     ; **************************************************
1582                                     ; **************************************************
1583                                     ;   S->SR2 = SR1;
1584                                     ; **************************************************
1585                                     ; **************************************************
1586                                     ;   A_2 = S->A2 = A2R;
1587                                     ; **************************************************
1588                                     ; **************************************************
1589                                     ; 
1590                                     ;   for (EXP = 0; EXP < 6; EXP++)
1591                                     ; **************************************************
1592      P:04BB 3A0F00  [2 -     3106]            move              #15,n2
1593      P:04BC 3C0A00  [2 -     3108]            move              #10,n4
1594      P:04BD 380900  [2 -     3110]            move              #9,n0
1595      P:04BE 221100  [2 -     3112]            move              r0,r1
1596      P:04BF 229200  [2 -     3114]            move              r4,r2
1597      P:04C0 47E800  [4 -     3118]            move              x:(r0+n0),y1
1598      P:04C1 380A00  [2 -     3120]            move              #10,n0
1599      P:04C2 44F400  [4 -     3124]            move              #>1,x0
                 000001
1600      P:04C4 476C00  [4 -     3128]            move              y1,x:(r4+n4)
1601      P:04C5 3C0C00  [2 -     3130]            move              #12,n4
1602      P:04C6 47E800  [4 -     3134]            move              x:(r0+n0),y1
1603      P:04C7 476C00  [4 -     3138]            move              y1,x:(r4+n4)
1604      P:04C8 3C0E00  [2 -     3140]            move              #14,n4
1605      P:04C9 204A00  [2 -     3142]            move              (r2)+n2
1606      P:04CA 466C00  [4 -     3146]            move              y0,x:(r4+n4)
1607      P:04CB 467000  [4 -     3150]            move              y0,x:FA_2
                 00006F
1608      P:04CD 060680  [6 -     3156]            do      #6,L106
                 0004D5
1609                                     L104
1610                                     ; **************************************************
1611                                     ; #ifdef __LOOPCOUNT__
1612                                     ;   {
1613                                     ;     Loop6++;
1614                                     ;     S->B[EXP] = BP[EXP];
1615                                     ;   }
1616                                     ; #else
1617                                     ;     S->B[EXP] = BP[EXP];
1618                                     ; **************************************************
1619                                     ; **************************************************
1620                                     ; **************************************************
1621      P:04CF 381400  [2 -     3158]            move              #20,n0
1622      P:04D0 224F00  [2 -     3160]            move              r2,b
1623      P:04D1 47D948  [2 -     3162]            add     x0,b      x:(r1)+,y1
1624      P:04D2 476800  [4 -     3166]            move              y1,x:(r0+n0)
1625      P:04D3 476200  [2 -     3168]            move              y1,x:(r2)
1626      P:04D4 21B200  [2 -     3170]            move              b1,r2
1627      P:04D5 000000  [2 -     3172]            nop
1628                                     L106
1629                                     ; **************************************************
1630                                     ; #endif
1631                                     ; 
1632                                     ;   S->DQ7 = S->DQ6;
1633                                     ; **************************************************
1634                                     ; **************************************************
1635                                     ;   S->DQ6 = S->DQ5;
1636                                     ; **************************************************
1637                                     ; **************************************************
1638                                     ;   S->DQ5 = S->DQ4;
1639                                     ; **************************************************
1640                                     ; **************************************************
1641                                     ;   S->DQ4 = S->DQ3;
1642                                     ; **************************************************
1643                                     ; **************************************************
1644                                     ;   S->DQ3 = S->DQ2;
1645                                     ; **************************************************
1646                                     ; **************************************************
1647                                     ;   S->DQ2 = DQSEZ;
1648                                     ; **************************************************
1649                                     ; **************************************************
1650                                     ; }
1651                                     ; **************************************************
1652      P:04D6 381400  [2 -     3174]            move              #20,n0
1653      P:04D7 3C0800  [2 -     3176]            move              #8,n4
1654      P:04D8 205600  [2 -     3178]            move              (r6)-
1655      P:04D9 47EC00  [4 -     3182]            move              x:(r4+n4),y1
1656      P:04DA 3C0900  [2 -     3184]            move              #9,n4
1657      P:04DB 476C00  [4 -     3188]            move              y1,x:(r4+n4)
1658      P:04DC 3C0700  [2 -     3190]            move              #7,n4
1659      P:04DD 47EC00  [4 -     3194]            move              x:(r4+n4),y1
1660      P:04DE 3C0800  [2 -     3196]            move              #8,n4
1661      P:04DF 476C00  [4 -     3200]            move              y1,x:(r4+n4)
1662      P:04E0 3C0600  [2 -     3202]            move              #6,n4
1663      P:04E1 47EC00  [4 -     3206]            move              x:(r4+n4),y1
1664      P:04E2 3C0700  [2 -     3208]            move              #7,n4
1665      P:04E3 476C00  [4 -     3212]            move              y1,x:(r4+n4)
1666      P:04E4 3C0500  [2 -     3214]            move              #5,n4
1667      P:04E5 47EC00  [4 -     3218]            move              x:(r4+n4),y1
1668      P:04E6 3C0600  [2 -     3220]            move              #6,n4
1669      P:04E7 476C00  [4 -     3224]            move              y1,x:(r4+n4)
1670      P:04E8 3C0400  [2 -     3226]            move              #4,n4
1671      P:04E9 47EC00  [4 -     3230]            move              x:(r4+n4),y1
1672      P:04EA 3C0500  [2 -     3232]            move              #5,n4
1673      P:04EB 476800  [4 -     3236]            move              y1,x:(r0+n0)
1674      P:04EC 380800  [2 -     3238]            move              #8,n0
1675      P:04ED 476C00  [4 -     3242]            move              y1,x:(r4+n4)
1676      P:04EE 3C0400  [2 -     3244]            move              #4,n4
1677      P:04EF 47E800  [4 -     3248]            move              x:(r0+n0),y1
1678      P:04F0 476C00  [4 -     3252]            move              y1,x:(r4+n4)
1679      P:04F1 64D600  [2 -     3254]            move              x:(r6)-,r4
1680      P:04F2 63D600  [2 -     3256]            move              x:(r6)-,r3
1681      P:04F3 62D600  [2 -     3258]            move              x:(r6)-,r2
1682      P:04F4 61D600  [2 -     3260]            move              x:(r6)-,r1
1683      P:04F5 47D600  [2 -     3262]            move              x:(r6)-,y1
1684      P:04F6 46D600  [2 -     3264]            move              x:(r6)-,y0
1685      P:04F7 45D600  [2 -     3266]            move              x:(r6)-,x1
1686      P:04F8 44D600  [2 -     3268]            move              x:(r6)-,x0
1687      P:04F9 57D600  [2 -     3270]            move              x:(r6)-,b
1688      P:04FA 51E600  [2 -     3272]            move              x:(r6),b0
1689      P:04FB 205000  [2 -     3274]            move              (r0)-
1690      P:04FC 05D03C  [2 -     3276]            move              x:(r0)-,ssh
1691      P:04FD 221600  [2 -     3278]            move              r0,r6
1692      P:04FE 60E000  [2 -     3280]            move              x:(r0),r0
1693      P:04FF 00000C  [4 -     3284]            rts
1694   
1695      X:003C                                   org     x:
1696                                     F___qtab0
1697      X:003C                                   dc      2048
1698      X:003D                                   dc      4
1699      X:003E                                   dc      135
1700      X:003F                                   dc      213
1701      X:0040                                   dc      273
1702      X:0041                                   dc      323
1703      X:0042                                   dc      373
1704      X:0043                                   dc      425
1705      X:0044                                   dc      425
1706      X:0045                                   dc      373
1707      X:0046                                   dc      323
1708      X:0047                                   dc      273
1709      X:0048                                   dc      213
1710      X:0049                                   dc      135
1711      X:004A                                   dc      4
1712      X:004B                                   dc      2048
1713      P:0500                                   org     p:
1714                                               global  Fiadpt_quant
1715                                     Fiadpt_quant
1716                                     ; **************************************************
1717                                     ; **************************************************
1718                                     ; **************************************************
1719                                     ; 
1720                                     ; void iadpt_quant(STATES* S)
1721                                     ; {
1722                                     ;   /*
1723                                     ;    * inverse adaptive quantizer
1724                                     ;    * 
1725                                     ;    * Input signals:  I, Y
1726                                     ;    * Output signals: DQ
1727                                     ;    */
1728                                     ;  
1729                                     ;   static int qtab[] =
1730                                     ;   {
1731                                     ;     2048, 4, 135, 213, 273, 323, 373, 425,
1732                                     ;     425, 373, 323, 273, 213, 135, 4, 2048,
1733                                     ;   } ;
1734                                     ;   register int DQL;
1735                                     ; 
1736                                     ;   /* RECONST and ADDA */
1737                                     ;   DQL = (qtab[I] + (S->Y >> 2)) & 4095;
1738                                     ; **************************************************
1739                                     ; **************************************************
1740                                     ; 
1741                                     ;   /* ANTILOG */
1742                                     ;   S->DQ = ((I & (1 << 3)) * (1 << 11)) +
1743                                     ;           (DQL & (1 << 11) ? 0 :
1744                                     ;           (((1 << 7) + (DQL & 127)) << 7) >>
1745                                     ;           (14 - ((DQL >> 7) & 15)));
1746                                     ; **************************************************
1747      P:0500 3A0200  [2 -     3286]            move              #2,n2
1748      P:0501 70F400  [4 -     3290]            move              #65533,n0
                 00FFFD
1749      P:0503 3E0300  [2 -     3292]            move              #3,n6
1750      P:0504 605E00  [2 -     3294]            move              r0,x:(r6)+
1751      P:0505 205E00  [2 -     3296]            move              (r6)+
1752      P:0506 22D000  [2 -     3298]            move              r6,r0
1753      P:0507 204E00  [2 -     3300]            move              (r6)+n6
1754      P:0508 515E00  [2 -     3302]            move              b0,x:(r6)+
1755      P:0509 555E00  [2 -     3304]            move              b1,x:(r6)+
1756      P:050A 445E00  [2 -     3306]            move              x0,x:(r6)+
1757      P:050B 455E00  [2 -     3308]            move              x1,x:(r6)+
1758      P:050C 615E00  [2 -     3310]            move              r1,x:(r6)+
1759      P:050D 61F400  [4 -     3314]            move              #F___qtab0,r1
                 00003C
1760      P:050F 625E00  [2 -     3316]            move              r2,x:(r6)+
1761      P:0510 62E800  [4 -     3320]            move              x:(r0+n0),r2
1762      P:0511 222F00  [2 -     3322]            move              r1,b
1763      P:0512 45EA00  [4 -     3326]            move              x:(r2+n2),x1
1764      P:0513 56F000  [4 -     3330]            move              x:FI,a
                 00006C
1765      P:0515 200018  [2 -     3332]            add     a,b
1766      P:0516 21B169  [2 -     3334]            tfr     x1,b      b1,r1
1767      P:0517 21AF00  [2 -     3336]            move              b1,b
1768      P:0518 44E12A  [2 -     3338]            asr     b         x:(r1),x0
1769      P:0519 20002A  [2 -     3340]            asr     b
1770      P:051A 21AF00  [2 -     3342]            move              b1,b
1771      P:051B 44F448  [4 -     3346]            add     x0,b      #>4095,x0
                 000FFF
1772      P:051D 44F44E  [4 -     3350]            and     x0,b      #>8,x0
                 000008
1773      P:051F 21AF46  [2 -     3352]            and     x0,a      b1,b
1774      P:0520 218E00  [2 -     3354]            move              a1,a
1775      P:0521 218500  [2 -     3356]            move              a1,x1
1776      P:0522 44F400  [4 -     3360]            move              #>2048,x0
                 000800
1777      P:0524 5560A8  [2 -     3362]            mpy     +x0,x1,b  b1,x:(r0)
1778      P:0525 20582A  [2 -     3364]            asr     b         (r0)+
1779      P:0526 212F00  [2 -     3366]            move              b0,b
1780      P:0527 555000  [2 -     3368]            move              b1,x:(r0)-
1781      P:0528 56E000  [2 -     3370]            move              x:(r0),a
1782      P:0529 200046  [2 -     3372]            and     x0,a
1783      P:052A 218E00  [2 -     3374]            move              a1,a
1784      P:052B 200003  [2 -     3376]            tst     a
1785      P:052C 0AF0A2  [6 -     3382]            jne     L127
                 000551
1786      P:052E 45F400  [4 -     3386]            move              #>128,x1
                 000080
1787      P:0530 56E000  [2 -     3388]            move              x:(r0),a
1788      P:0531 44F400  [4 -     3392]            move              #>127,x0
                 00007F
1789      P:0533 200046  [2 -     3394]            and     x0,a
1790      P:0534 218E00  [2 -     3396]            move              a1,a
1791      P:0535 200060  [2 -     3398]            add     x1,a
1792      P:0536 0607A0  [4 -     3402]            rep     #7
1793      P:0537 200032  [2 -     3404]            asl     a
1794      P:0538 57E000  [2 -     3406]            move              x:(r0),b
1795      P:0539 21AF00  [2 -     3408]            move              b1,b
1796      P:053A 218E00  [2 -     3410]            move              a1,a
1797      P:053B 0607A0  [4 -     3414]            rep     #7
1798      P:053C 20002A  [2 -     3416]            asr     b
1799      P:053D 44F400  [4 -     3420]            move              #>15,x0
                 00000F
1800      P:053F 21AF00  [2 -     3422]            move              b1,b
1801      P:0540 20004E  [2 -     3424]            and     x0,b
1802      P:0541 21AF00  [2 -     3426]            move              b1,b
1803      P:0542 21A500  [2 -     3428]            move              b1,x1
1804      P:0543 57F400  [4 -     3432]            move              #>14,b
                 00000E
1805      P:0545 20006C  [2 -     3434]            sub     x1,b
1806      P:0546 20000B  [2 -     3436]            tst     b
1807      P:0547 0AF0AA  [6 -     3442]            jeq     L128
                 00054D
1808      P:0549 218E00  [2 -     3444]            move              a1,a
1809      P:054A 06CF20  [4 -     3448]            rep     b
1810      P:054B 200022  [2 -     3450]            asr     a
1811      P:054C 218E00  [2 -     3452]            move              a1,a
1812                                     L128
1813      P:054D 205800  [2 -     3454]            move              (r0)+
1814      P:054E 57D000  [2 -     3456]            move              x:(r0)-,b
1815      P:054F 205818  [2 -     3458]            add     a,b       (r0)+
1816      P:0550 555000  [2 -     3460]            move              b1,x:(r0)-
1817                                     L127
1818                                     ; **************************************************
1819                                     ; }
1820                                     ; **************************************************
1821      P:0551 205600  [2 -     3462]            move              (r6)-
1822      P:0552 205800  [2 -     3464]            move              (r0)+
1823      P:0553 45D000  [2 -     3466]            move              x:(r0)-,x1
1824      P:0554 456200  [2 -     3468]            move              x1,x:(r2)
1825      P:0555 62D600  [2 -     3470]            move              x:(r6)-,r2
1826      P:0556 61D600  [2 -     3472]            move              x:(r6)-,r1
1827      P:0557 45D600  [2 -     3474]            move              x:(r6)-,x1
1828      P:0558 44D600  [2 -     3476]            move              x:(r6)-,x0
1829      P:0559 57D600  [2 -     3478]            move              x:(r6)-,b
1830      P:055A 51E600  [2 -     3480]            move              x:(r6),b0
1831      P:055B 205000  [2 -     3482]            move              (r0)-
1832      P:055C 205000  [2 -     3484]            move              (r0)-
1833      P:055D 221600  [2 -     3486]            move              r0,r6
1834      P:055E 60E000  [2 -     3488]            move              x:(r0),r0
1835      P:055F 00000C  [4 -     3492]            rts
1836   
1837                                               global  Ftone_detector
1838                                     Ftone_detector
1839                                     ; **************************************************
1840                                     ; **************************************************
1841                                     ; **************************************************
1842                                     ; 
1843                                     ; void tone_detector(STATES* S)
1844                                     ; {
1845                                     ;   /*
1846                                     ;    * tone detector
1847                                     ;    *
1848                                     ;    * Input signals:  DQ, A_2, YL
1849                                     ;    * Output signals: T, TDP;
1850                                     ;    */
1851                                     ; 
1852                                     ;   register int tmp; 
1853                                     ;   register int t_d; 
1854                                     ; 
1855                                     ;   /* partial band signal detection */
1856                                     ;   TDP = ((A_2 > 32769) && (A_2 < 53761)) ? 1 : 0 ; 
1857                                     ; **************************************************
1858      P:0560 70F400  [4 -     3496]            move              #65533,n0
                 00FFFD
1859      P:0562 3E0300  [2 -     3498]            move              #3,n6
1860      P:0563 56F400  [4 -     3502]            move              #>32769,a
                 008001
1861      P:0565 605E00  [2 -     3504]            move              r0,x:(r6)+
1862      P:0566 205E00  [2 -     3506]            move              (r6)+
1863      P:0567 22D000  [2 -     3508]            move              r6,r0
1864      P:0568 204E00  [2 -     3510]            move              (r6)+n6
1865      P:0569 515E00  [2 -     3512]            move              b0,x:(r6)+
1866      P:056A 555E00  [2 -     3514]            move              b1,x:(r6)+
1867      P:056B 445E00  [2 -     3516]            move              x0,x:(r6)+
1868      P:056C 455E00  [2 -     3518]            move              x1,x:(r6)+
1869      P:056D 615E00  [2 -     3520]            move              r1,x:(r6)+
1870      P:056E 61E800  [4 -     3524]            move              x:(r0+n0),r1
1871      P:056F 45F000  [4 -     3528]            move              x:FA_2,x1
                 00006F
1872      P:0571 200069  [2 -     3530]            tfr     x1,b
1873      P:0572 20000D  [2 -     3532]            cmp     a,b
1874      P:0573 0AF0AF  [6 -     3538]            jle     L130
                 00057E
1875      P:0575 56F400  [4 -     3542]            move              #>53760,a
                 00D200
1876      P:0577 20000D  [2 -     3544]            cmp     a,b
1877      P:0578 0AF0A7  [6 -     3550]            jgt     L130
                 00057E
1878      P:057A 56F400  [4 -     3554]            move              #>1,a
                 000001
1879      P:057C 0AF080  [6 -     3560]            jmp     L131
                 00057F
1880                                     L130
1881      P:057E 200013  [2 -     3562]            clr     a
1882                                     L131
1883                                     ; **************************************************
1884                                     ;   
1885                                     ;   /* take last (t_dr) */
1886                                     ;   t_d = (S->t_dr);
1887                                     ; **************************************************
1888                                     ; **************************************************
1889                                     ;   
1890                                     ;   /* calcutale new  (S->t_dr)  */
1891                                     ;   /* TRIGB Function */
1892                                     ;   S->t_dr = S->LAST_TR ? 0 : TDP; 
1893                                     ; **************************************************
1894      P:057F 391700  [2 -     3564]            move              #23,n1
1895      P:0580 547000  [4 -     3568]            move              a1,x:FTDP
                 000067
1896      P:0582 45E900  [4 -     3572]            move              x:(r1+n1),x1
1897      P:0583 391800  [2 -     3574]            move              #24,n1
1898      P:0584 205800  [2 -     3576]            move              (r0)+
1899      P:0585 455000  [2 -     3578]            move              x1,x:(r0)-
1900      P:0586 56E900  [4 -     3582]            move              x:(r1+n1),a
1901      P:0587 200003  [2 -     3584]            tst     a
1902      P:0588 0AF0AA  [6 -     3590]            jeq     L132
                 00058D
1903      P:058A 200013  [2 -     3592]            clr     a
1904      P:058B 0AF080  [6 -     3598]            jmp     L133
                 00058F
1905                                     L132
1906      P:058D 56F000  [4 -     3602]            move              x:FTDP,a
                 000067
1907                                     L133
1908                                     ; **************************************************
1909                                     ;   
1910                                     ;   S->LAST_TR = S->YL >> 15; /* (*LAST_TR)  is used here as a temporary variable */
1911                                     ; **************************************************
1912      P:058F 391700  [2 -     3604]            move              #23,n1
1913      P:0590 546900  [4 -     3608]            move              a1,x:(r1+n1)
1914      P:0591 390300  [2 -     3610]            move              #3,n1
1915      P:0592 56E900  [4 -     3614]            move              x:(r1+n1),a
1916      P:0593 218E00  [2 -     3616]            move              a1,a
1917      P:0594 060FA0  [4 -     3620]            rep     #15
1918      P:0595 200022  [2 -     3622]            asr     a
1919                                     ; **************************************************
1920                                     ;   
1921                                     ;   tmp = ((S->LAST_TR) > 8) ? 31 << 9 :
1922                                     ;         (32 + ((S->LAST_TR << 5) & 31)) << S->LAST_TR; 
1923                                     ; **************************************************
1924      P:0596 391800  [2 -     3624]            move              #24,n1
1925      P:0597 57F400  [4 -     3628]            move              #>8,b
                 000008
1926      P:0599 218E00  [2 -     3630]            move              a1,a
1927      P:059A 546905  [4 -     3634]            cmp     b,a       a1,x:(r1+n1)
1928      P:059B 0AF0AF  [6 -     3640]            jle     L134
                 0005A2
1929      P:059D 45F400  [4 -     3644]            move              #>15872,x1
                 003E00
1930      P:059F 456000  [2 -     3646]            move              x1,x:(r0)
1931      P:05A0 0AF080  [6 -     3652]            jmp     L135
                 0005B6
1932                                     L134
1933      P:05A2 391800  [2 -     3654]            move              #24,n1
1934      P:05A3 56E900  [4 -     3658]            move              x:(r1+n1),a
1935      P:05A4 0605A0  [4 -     3662]            rep     #5
1936      P:05A5 200032  [2 -     3664]            asl     a
1937      P:05A6 57E900  [4 -     3668]            move              x:(r1+n1),b
1938      P:05A7 45F400  [4 -     3672]            move              #>32,x1
                 000020
1939      P:05A9 44F400  [4 -     3676]            move              #>31,x0
                 00001F
1940      P:05AB 218E00  [2 -     3678]            move              a1,a
1941      P:05AC 200046  [2 -     3680]            and     x0,a
1942      P:05AD 218E00  [2 -     3682]            move              a1,a
1943      P:05AE 200060  [2 -     3684]            add     x1,a
1944      P:05AF 20000B  [2 -     3686]            tst     b
1945      P:05B0 0AF0AA  [6 -     3692]            jeq     L138
                 0005B5
1946      P:05B2 06CF20  [4 -     3696]            rep     b
1947      P:05B3 200032  [2 -     3698]            asl     a
1948      P:05B4 218E00  [2 -     3700]            move              a1,a
1949                                     L138
1950      P:05B5 546000  [2 -     3702]            move              a1,x:(r0)
1951                                     L135
1952                                     ; **************************************************
1953                                     ;   
1954                                     ;   S->LAST_TR = S->T = (((S->DQ & 16383) > (tmp + (tmp >> 1)) >> 1) 
1955                                     ;                     && (t_d == 1)) ? 1 : 0;
1956                                     ; **************************************************
1957      P:05B6 57E000  [2 -     3704]            move              x:(r0),b
1958      P:05B7 21AF00  [2 -     3706]            move              b1,b
1959      P:05B8 44F42A  [4 -     3710]            asr     b         #>16383,x0
                 003FFF
1960      P:05BA 21AF00  [2 -     3712]            move              b1,b
1961      P:05BB 21A500  [2 -     3714]            move              b1,x1
1962      P:05BC 57E000  [2 -     3716]            move              x:(r0),b
1963      P:05BD 56E168  [2 -     3718]            add     x1,b      x:(r1),a
1964      P:05BE 21AF46  [2 -     3720]            and     x0,a      b1,b
1965      P:05BF 218E2A  [2 -     3722]            asr     b         a1,a
1966      P:05C0 21AF00  [2 -     3724]            move              b1,b
1967      P:05C1 21A500  [2 -     3726]            move              b1,x1
1968      P:05C2 200065  [2 -     3728]            cmp     x1,a
1969      P:05C3 0AF0AF  [6 -     3734]            jle     L136
                 0005CC
1970      P:05C5 56F400  [4 -     3738]            move              #>1,a
                 000001
1971      P:05C7 205800  [2 -     3740]            move              (r0)+
1972      P:05C8 57D000  [2 -     3742]            move              x:(r0)-,b
1973      P:05C9 20000D  [2 -     3744]            cmp     a,b
1974      P:05CA 0AF0AA  [6 -     3750]            jeq     L137
                 0005CD
1975                                     L136
1976      P:05CC 200013  [2 -     3752]            clr     a
1977                                     L137
1978                                     ; **************************************************
1979                                     ; }
1980                                     ; **************************************************
1981      P:05CD 391800  [2 -     3754]            move              #24,n1
1982      P:05CE 205000  [2 -     3756]            move              (r0)-
1983      P:05CF 205000  [2 -     3758]            move              (r0)-
1984      P:05D0 205600  [2 -     3760]            move              (r6)-
1985      P:05D1 205900  [2 -     3762]            move              (r1)+
1986      P:05D2 545100  [2 -     3764]            move              a1,x:(r1)-
1987      P:05D3 546900  [4 -     3768]            move              a1,x:(r1+n1)
1988      P:05D4 61D600  [2 -     3770]            move              x:(r6)-,r1
1989      P:05D5 45D600  [2 -     3772]            move              x:(r6)-,x1
1990      P:05D6 44D600  [2 -     3774]            move              x:(r6)-,x0
1991      P:05D7 57D600  [2 -     3776]            move              x:(r6)-,b
1992      P:05D8 51E600  [2 -     3778]            move              x:(r6),b0
1993      P:05D9 221600  [2 -     3780]            move              r0,r6
1994      P:05DA 60E000  [2 -     3782]            move              x:(r0),r0
1995      P:05DB 00000C  [4 -     3786]            rts
1996   
1997      X:004C                                   org     x:
1998                                     F___F1
1999      X:004C                                   dc      0
2000      X:004D                                   dc      0
2001      X:004E                                   dc      0
2002      X:004F                                   dc      1
2003      X:0050                                   dc      1
2004      X:0051                                   dc      1
2005      X:0052                                   dc      3
2006      X:0053                                   dc      7
2007      P:05DC                                   org     p:
2008                                               global  Fspeed_control
2009                                     Fspeed_control
2010                                     ; **************************************************
2011                                     ; **************************************************
2012                                     ; **************************************************
2013                                     ; 
2014                                     ; void speed_control(STATES* S)
2015                                     ; {
2016                                     ;   /*
2017                                     ;    * speed control
2018                                     ;    *
2019                                     ;    * Input signals:  T, TDP, I, Y
2020                                     ;    * Output signals: AL
2021                                     ;    */
2022                                     ; 
2023                                     ;   static int F[] = { 0, 0, 0, 1, 1, 1, 3, 7 };
2024                                     ;   register int FI, tmp ; 
2025                                     ; 
2026                                     ;   /* FUNTCF */
2027                                     ;   FI = F[(I >> 3 ? (15 - I) : I) & 7] ; 
2028                                     ; **************************************************
2029      P:05DC 70F400  [4 -     3790]            move              #65533,n0
                 00FFFD
2030      P:05DE 3E0300  [2 -     3792]            move              #3,n6
2031      P:05DF 605E00  [2 -     3794]            move              r0,x:(r6)+
2032      P:05E0 205E00  [2 -     3796]            move              (r6)+
2033      P:05E1 22D000  [2 -     3798]            move              r6,r0
2034      P:05E2 204E00  [2 -     3800]            move              (r6)+n6
2035      P:05E3 515E00  [2 -     3802]            move              b0,x:(r6)+
2036      P:05E4 555E00  [2 -     3804]            move              b1,x:(r6)+
2037      P:05E5 445E00  [2 -     3806]            move              x0,x:(r6)+
2038      P:05E6 455E00  [2 -     3808]            move              x1,x:(r6)+
2039      P:05E7 465E00  [2 -     3810]            move              y0,x:(r6)+
2040      P:05E8 615E00  [2 -     3812]            move              r1,x:(r6)+
2041      P:05E9 625E00  [2 -     3814]            move              r2,x:(r6)+
2042      P:05EA 62E800  [4 -     3818]            move              x:(r0+n0),r2
2043      P:05EB 380200  [2 -     3820]            move              #2,n0
2044      P:05EC 46F000  [4 -     3824]            move              x:FI,y0
                 00006C
2045      P:05EE 466851  [4 -     3828]            tfr     y0,a      y0,x:(r0+n0)
2046      P:05EF 218E00  [2 -     3830]            move              a1,a
2047      P:05F0 0603A0  [4 -     3834]            rep     #3
2048      P:05F1 200022  [2 -     3836]            asr     a
2049      P:05F2 218E00  [2 -     3838]            move              a1,a
2050      P:05F3 200003  [2 -     3840]            tst     a
2051      P:05F4 0AF0AA  [6 -     3846]            jeq     L140
                 0005FB
2052      P:05F6 56F400  [4 -     3850]            move              #>15,a
                 00000F
2053      P:05F8 200054  [2 -     3852]            sub     y0,a
2054      P:05F9 0AF080  [6 -     3858]            jmp     L141
                 0005FD
2055                                     L140
2056      P:05FB 56F000  [4 -     3862]            move              x:FI,a
                 00006C
2057                                     L141
2058                                     ; **************************************************
2059                                     ; 
2060                                     ;   /* FILTA */
2061                                     ;   tmp = ((FI << 9) + 8192 - S->DMS) & 8191;              /* tmp => DIF */
2062                                     ; **************************************************
2063      P:05FD 61F400  [4 -     3866]            move              #F___F1,r1
                 00004C
2064      P:05FF 44F400  [4 -     3870]            move              #>7,x0
                 000007
2065      P:0601 222F46  [2 -     3872]            and     x0,a      r1,b
2066      P:0602 218E00  [2 -     3874]            move              a1,a
2067      P:0603 200018  [2 -     3876]            add     a,b
2068      P:0604 21B100  [2 -     3878]            move              b1,r1
2069      P:0605 46E100  [2 -     3880]            move              x:(r1),y0
2070      P:0606 466059  [2 -     3882]            tfr     y0,b      y0,x:(r0)
2071      P:0607 0609A0  [4 -     3886]            rep     #9
2072      P:0608 20003A  [2 -     3888]            asl     b
2073                                     ; **************************************************
2074                                     ;   tmp >>= 5;
2075                                     ; **************************************************
2076      P:0609 3A1900  [2 -     3890]            move              #25,n2
2077      P:060A 44F400  [4 -     3894]            move              #>16769024,x0
                 FFE000
2078      P:060C 56EA00  [4 -     3898]            move              x:(r2+n2),a
2079      P:060D 21AF40  [2 -     3900]            add     x0,a      b1,b
2080      P:060E 44F41C  [4 -     3904]            sub     a,b       #>8191,x0
                 001FFF
2081      P:0610 20004E  [2 -     3906]            and     x0,b
2082      P:0611 21AF00  [2 -     3908]            move              b1,b
2083      P:0612 21AF00  [2 -     3910]            move              b1,b
2084      P:0613 0605A0  [4 -     3914]            rep     #5
2085      P:0614 20002A  [2 -     3916]            asr     b
2086                                     ; **************************************************
2087                                     ;   if (tmp & (1 << 7))
2088                                     ; **************************************************
2089      P:0615 44F400  [4 -     3920]            move              #>128,x0
                 000080
2090      P:0617 21AF00  [2 -     3922]            move              b1,b
2091      P:0618 205801  [2 -     3924]            tfr     b,a       (r0)+
2092      P:0619 555046  [2 -     3926]            and     x0,a      b1,x:(r0)-
2093      P:061A 218E00  [2 -     3928]            move              a1,a
2094      P:061B 200003  [2 -     3930]            tst     a
2095      P:061C 0AF0AA  [6 -     3936]            jeq     L142
                 000622
2096                                     ; **************************************************
2097                                     ;     tmp = tmp + 3840;                                    /* tmp => DIFSX */
2098                                     ; **************************************************
2099      P:061E 56F400  [4 -     3940]            move              #>3840,a
                 000F00
2100      P:0620 205818  [2 -     3942]            add     a,b       (r0)+
2101      P:0621 555000  [2 -     3944]            move              b1,x:(r0)-
2102                                     L142
2103                                     ; **************************************************
2104                                     ;   S->DMS = (tmp + S->DMS) & 4095;
2105                                     ; **************************************************
2106                                     ; **************************************************
2107                                     ; 
2108                                     ;   /* FILTB */
2109                                     ;   tmp = ((FI << 11) + 32768 - S->DML) & 32767;           /* tmp => DIF */
2110                                     ; **************************************************
2111      P:0622 3A1900  [2 -     3946]            move              #25,n2
2112      P:0623 44F400  [4 -     3950]            move              #>4095,x0
                 000FFF
2113      P:0625 56EA00  [4 -     3954]            move              x:(r2+n2),a
2114      P:0626 205800  [2 -     3956]            move              (r0)+
2115      P:0627 57D000  [2 -     3958]            move              x:(r0)-,b
2116      P:0628 200018  [2 -     3960]            add     a,b
2117      P:0629 200001  [2 -     3962]            tfr     b,a
2118      P:062A 200046  [2 -     3964]            and     x0,a
2119      P:062B 218E00  [2 -     3966]            move              a1,a
2120      P:062C 546A00  [4 -     3970]            move              a1,x:(r2+n2)
2121      P:062D 57E000  [2 -     3972]            move              x:(r0),b
2122      P:062E 060BA0  [4 -     3976]            rep     #11
2123      P:062F 20003A  [2 -     3978]            asl     b
2124                                     ; **************************************************
2125                                     ;   tmp >>= 7;
2126                                     ; **************************************************
2127      P:0630 3A1A00  [2 -     3980]            move              #26,n2
2128      P:0631 44F400  [4 -     3984]            move              #>16744448,x0
                 FF8000
2129      P:0633 56EA00  [4 -     3988]            move              x:(r2+n2),a
2130      P:0634 21AF40  [2 -     3990]            add     x0,a      b1,b
2131      P:0635 44F41C  [4 -     3994]            sub     a,b       #>32767,x0
                 007FFF
2132      P:0637 20004E  [2 -     3996]            and     x0,b
2133      P:0638 21AF00  [2 -     3998]            move              b1,b
2134      P:0639 21AF00  [2 -     4000]            move              b1,b
2135      P:063A 0607A0  [4 -     4004]            rep     #7
2136      P:063B 20002A  [2 -     4006]            asr     b
2137                                     ; **************************************************
2138                                     ;   if (tmp & (1 << 7))
2139                                     ; **************************************************
2140      P:063C 44F400  [4 -     4010]            move              #>128,x0
                 000080
2141      P:063E 21AF00  [2 -     4012]            move              b1,b
2142      P:063F 205801  [2 -     4014]            tfr     b,a       (r0)+
2143      P:0640 555046  [2 -     4016]            and     x0,a      b1,x:(r0)-
2144      P:0641 218E00  [2 -     4018]            move              a1,a
2145      P:0642 200003  [2 -     4020]            tst     a
2146      P:0643 0AF0AA  [6 -     4026]            jeq     L143
                 000649
2147                                     ; **************************************************
2148                                     ;     tmp = tmp + 16128;                                   /* tmp => DIFSX */
2149                                     ; **************************************************
2150      P:0645 56F400  [4 -     4030]            move              #>16128,a
                 003F00
2151      P:0647 205818  [2 -     4032]            add     a,b       (r0)+
2152      P:0648 555000  [2 -     4034]            move              b1,x:(r0)-
2153                                     L143
2154                                     ; **************************************************
2155                                     ;   S->DML = (tmp + S->DML) & 16383;
2156                                     ; **************************************************
2157                                     ; **************************************************
2158                                     ; 
2159                                     ;   /* SUBTC */
2160                                     ;   tmp = ((S->DMS << 2) + 32768 - S->DML) & 32767;        /* tmp => DIF */
2161                                     ; **************************************************
2162                                     ; **************************************************
2163                                     ;   if (tmp & (1 << 14))
2164                                     ; **************************************************
2165      P:0649 380200  [2 -     4036]            move              #2,n0
2166      P:064A 3A1A00  [2 -     4038]            move              #26,n2
2167      P:064B 44F400  [4 -     4042]            move              #>16744448,x0
                 FF8000
2168      P:064D 56EA00  [4 -     4046]            move              x:(r2+n2),a
2169      P:064E 45F400  [4 -     4050]            move              #>16383,x1
                 003FFF
2170      P:0650 205800  [2 -     4052]            move              (r0)+
2171      P:0651 57D000  [2 -     4054]            move              x:(r0)-,b
2172      P:0652 200018  [2 -     4056]            add     a,b
2173      P:0653 200001  [2 -     4058]            tfr     b,a
2174      P:0654 200066  [2 -     4060]            and     x1,a
2175      P:0655 218E00  [2 -     4062]            move              a1,a
2176      P:0656 546A40  [4 -     4066]            add     x0,a      a1,x:(r2+n2)
2177      P:0657 3A1900  [2 -     4068]            move              #25,n2
2178      P:0658 44F400  [4 -     4072]            move              #>32767,x0
                 007FFF
2179      P:065A 46EA00  [4 -     4076]            move              x:(r2+n2),y0
2180      P:065B 466859  [4 -     4080]            tfr     y0,b      y0,x:(r0+n0)
2181      P:065C 20583A  [2 -     4082]            asl     b         (r0)+
2182      P:065D 20003A  [2 -     4084]            asl     b
2183      P:065E 21AF00  [2 -     4086]            move              b1,b
2184      P:065F 20001C  [2 -     4088]            sub     a,b
2185      P:0660 44F44E  [4 -     4092]            and     x0,b      #>16384,x0
                 004000
2186      P:0662 21AF00  [2 -     4094]            move              b1,b
2187      P:0663 555001  [2 -     4096]            tfr     b,a       b1,x:(r0)-
2188      P:0664 200046  [2 -     4098]            and     x0,a
2189      P:0665 218E00  [2 -     4100]            move              a1,a
2190      P:0666 200003  [2 -     4102]            tst     a
2191      P:0667 0AF0AA  [6 -     4108]            jeq     L144
                 000672
2192                                     ; **************************************************
2193                                     ;     tmp = (32768 - tmp) & 16383;                         /* tmp => DIFM */
2194                                     ; **************************************************
2195      P:0669 56F400  [4 -     4112]            move              #>32768,a
                 008000
2196      P:066B 205800  [2 -     4114]            move              (r0)+
2197      P:066C 46D000  [2 -     4116]            move              x:(r0)-,y0
2198      P:066D 205854  [2 -     4118]            sub     y0,a      (r0)+
2199      P:066E 545009  [2 -     4120]            tfr     a,b       a1,x:(r0)-
2200      P:066F 20586E  [2 -     4122]            and     x1,b      (r0)+
2201      P:0670 21AF00  [2 -     4124]            move              b1,b
2202      P:0671 555000  [2 -     4126]            move              b1,x:(r0)-
2203                                     L144
2204                                     ; **************************************************
2205                                     ;   FI = ((S->Y > 1535) && (tmp < (S->DML >> 3)) && (TDP == 0)) ? 0 : 1;
2206                                     ; **************************************************
2207      P:0672 3A0200  [2 -     4128]            move              #2,n2
2208      P:0673 57F400  [4 -     4132]            move              #>1535,b
                 0005FF
2209      P:0675 56EA00  [4 -     4136]            move              x:(r2+n2),a
2210      P:0676 200005  [2 -     4138]            cmp     b,a
2211      P:0677 0AF0AF  [6 -     4144]            jle     L145
                 00068C
2212      P:0679 3A1A00  [2 -     4146]            move              #26,n2
2213      P:067A 56EA00  [4 -     4150]            move              x:(r2+n2),a
2214      P:067B 218E00  [2 -     4152]            move              a1,a
2215      P:067C 0603A0  [4 -     4156]            rep     #3
2216      P:067D 200022  [2 -     4158]            asr     a
2217      P:067E 218E00  [2 -     4160]            move              a1,a
2218      P:067F 205800  [2 -     4162]            move              (r0)+
2219      P:0680 57D000  [2 -     4164]            move              x:(r0)-,b
2220      P:0681 20000D  [2 -     4166]            cmp     a,b
2221      P:0682 0AF0A1  [6 -     4172]            jge     L145
                 00068C
2222      P:0684 56F000  [4 -     4176]            move              x:FTDP,a
                 000067
2223      P:0686 200003  [2 -     4178]            tst     a
2224      P:0687 0AF0A2  [6 -     4184]            jne     L145
                 00068C
2225      P:0689 260000  [2 -     4186]            move              #0,y0
2226      P:068A 0AF080  [6 -     4192]            jmp     L152
                 00068E
2227                                     L145
2228      P:068C 46F400  [4 -     4196]            move              #>1,y0
                 000001
2229                                     L152
2230                                     ; **************************************************
2231                                     ; 
2232                                     ;   /* FILTC */
2233                                     ;   tmp = ((FI << 9) + 2048 - S->AP) & 2047;               /* tmp => DIF */ 
2234                                     ; **************************************************
2235      P:068E 466000  [2 -     4198]            move              y0,x:(r0)
2236      P:068F 57E000  [2 -     4200]            move              x:(r0),b
2237      P:0690 0609A0  [4 -     4204]            rep     #9
2238      P:0691 20003A  [2 -     4206]            asl     b
2239                                     ; **************************************************
2240                                     ;   tmp = (tmp >> 4) + (tmp >> 10 ? 896 : 0);              /* tmp => DIFSX */
2241                                     ; **************************************************
2242      P:0692 3A1B00  [2 -     4208]            move              #27,n2
2243      P:0693 44F400  [4 -     4212]            move              #>16775168,x0
                 FFF800
2244      P:0695 56EA00  [4 -     4216]            move              x:(r2+n2),a
2245      P:0696 21AF40  [2 -     4218]            add     x0,a      b1,b
2246      P:0697 44F41C  [4 -     4222]            sub     a,b       #>2047,x0
                 0007FF
2247      P:0699 20584E  [2 -     4224]            and     x0,b      (r0)+
2248      P:069A 21AF00  [2 -     4226]            move              b1,b
2249      P:069B 555001  [2 -     4228]            tfr     b,a       b1,x:(r0)-
2250      P:069C 21AF00  [2 -     4230]            move              b1,b
2251      P:069D 0604A0  [4 -     4234]            rep     #4
2252      P:069E 20002A  [2 -     4236]            asr     b
2253      P:069F 380200  [2 -     4238]            move              #2,n0
2254      P:06A0 218E00  [2 -     4240]            move              a1,a
2255      P:06A1 21AF00  [2 -     4242]            move              b1,b
2256      P:06A2 556800  [4 -     4246]            move              b1,x:(r0+n0)
2257      P:06A3 060AA0  [4 -     4250]            rep     #10
2258      P:06A4 200022  [2 -     4252]            asr     a
2259      P:06A5 218E00  [2 -     4254]            move              a1,a
2260      P:06A6 200003  [2 -     4256]            tst     a
2261      P:06A7 0AF0AA  [6 -     4262]            jeq     L147
                 0006AD
2262      P:06A9 56F400  [4 -     4266]            move              #>896,a
                 000380
2263      P:06AB 200018  [2 -     4268]            add     a,b
2264      P:06AC 556800  [4 -     4272]            move              b1,x:(r0+n0)
2265                                     L147
2266                                     ; **************************************************
2267                                     ;   tmp = (tmp + S->AP) & 1023;                            /* tmp => APP */
2268                                     ; **************************************************
2269                                     ; **************************************************
2270                                     ; 
2271                                     ;   /* TRIGA */
2272                                     ;   S->AP = S->T ? 256 : tmp; 
2273                                     ; **************************************************
2274      P:06AD 3A1B00  [2 -     4274]            move              #27,n2
2275      P:06AE 380200  [2 -     4276]            move              #2,n0
2276      P:06AF 56EA00  [4 -     4280]            move              x:(r2+n2),a
2277      P:06B0 46E800  [4 -     4284]            move              x:(r0+n0),y0
2278      P:06B1 44F459  [4 -     4288]            tfr     y0,b      #>1023,x0
                 0003FF
2279      P:06B3 205818  [2 -     4290]            add     a,b       (r0)+
2280      P:06B4 205A4E  [2 -     4292]            and     x0,b      (r2)+
2281      P:06B5 21AF00  [2 -     4294]            move              b1,b
2282      P:06B6 555000  [2 -     4296]            move              b1,x:(r0)-
2283      P:06B7 56D200  [2 -     4298]            move              x:(r2)-,a
2284      P:06B8 200003  [2 -     4300]            tst     a
2285      P:06B9 0AF0AA  [6 -     4306]            jeq     L148
                 0006BF
2286      P:06BB 46F400  [4 -     4310]            move              #>256,y0
                 000100
2287      P:06BD 0AF080  [6 -     4316]            jmp     L153
                 0006C1
2288                                     L148
2289      P:06BF 205800  [2 -     4318]            move              (r0)+
2290      P:06C0 46D000  [2 -     4320]            move              x:(r0)-,y0
2291                                     L153
2292                                     ; **************************************************
2293                                     ; 
2294                                     ;   /* LIMA */
2295                                     ;   AL = (S->AP > 255) ? 64 : S->AP >> 2; 
2296                                     ; **************************************************
2297      P:06C1 3A1B00  [2 -     4322]            move              #27,n2
2298      P:06C2 380200  [2 -     4324]            move              #2,n0
2299      P:06C3 56F400  [4 -     4328]            move              #>255,a
                 0000FF
2300      P:06C5 466800  [4 -     4332]            move              y0,x:(r0+n0)
2301      P:06C6 46E800  [4 -     4336]            move              x:(r0+n0),y0
2302      P:06C7 466A59  [4 -     4340]            tfr     y0,b      y0,x:(r2+n2)
2303      P:06C8 20000D  [2 -     4342]            cmp     a,b
2304      P:06C9 0AF0AF  [6 -     4348]            jle     L150
                 0006CF
2305      P:06CB 56F400  [4 -     4352]            move              #>64,a
                 000040
2306      P:06CD 0AF080  [6 -     4358]            jmp     L151
                 0006D5
2307                                     L150
2308      P:06CF 3A1B00  [2 -     4360]            move              #27,n2
2309      P:06D0 56EA00  [4 -     4364]            move              x:(r2+n2),a
2310      P:06D1 218E00  [2 -     4366]            move              a1,a
2311      P:06D2 200022  [2 -     4368]            asr     a
2312      P:06D3 200022  [2 -     4370]            asr     a
2313      P:06D4 218E00  [2 -     4372]            move              a1,a
2314                                     L151
2315                                     ; **************************************************
2316                                     ; }
2317                                     ; **************************************************
2318      P:06D5 205000  [2 -     4374]            move              (r0)-
2319      P:06D6 205000  [2 -     4376]            move              (r0)-
2320      P:06D7 205600  [2 -     4378]            move              (r6)-
2321      P:06D8 547000  [4 -     4382]            move              a1,x:FAL
                 00006E
2322      P:06DA 62D600  [2 -     4384]            move              x:(r6)-,r2
2323      P:06DB 61D600  [2 -     4386]            move              x:(r6)-,r1
2324      P:06DC 46D600  [2 -     4388]            move              x:(r6)-,y0
2325      P:06DD 45D600  [2 -     4390]            move              x:(r6)-,x1
2326      P:06DE 44D600  [2 -     4392]            move              x:(r6)-,x0
2327      P:06DF 57D600  [2 -     4394]            move              x:(r6)-,b
2328      P:06E0 51E600  [2 -     4396]            move              x:(r6),b0
2329      P:06E1 221600  [2 -     4398]            move              r0,r6
2330      P:06E2 60E000  [2 -     4400]            move              x:(r0),r0
2331      P:06E3 00000C  [4 -     4404]            rts
2332   
2333      X:0054                                   org     x:
2334                                     F___W2
2335      X:0054                                   dc      4084
2336      X:0055                                   dc      18
2337      X:0056                                   dc      41
2338      X:0057                                   dc      64
2339      X:0058                                   dc      112
2340      X:0059                                   dc      198
2341      X:005A                                   dc      255
2342      X:005B                                   dc      1122
2343      P:06E4                                   org     p:
2344                                               global  Fscale_factor
2345                                     Fscale_factor
2346                                     ; **************************************************
2347                                     ; **************************************************
2348                                     ; **************************************************
2349                                     ; 
2350                                     ; void scale_factor(STATES* S)
2351                                     ; {
2352                                     ;   /*
2353                                     ;    * scale factor adaptation
2354                                     ;    *
2355                                     ;    * Input signals:  AL, I
2356                                     ;    * Output signals: YL, Y
2357                                     ;    */
2358                                     ; 
2359                                     ;   static int W[] = 
2360                                     ;   {
2361                                     ;     4084, 18, 41, 64, 112, 198, 255, 1122
2362                                     ;   } ; 
2363                                     ;   register int TMP, YUP, YLP;
2364                                     ;  
2365                                     ;   /* FUNCTW */
2366                                     ;   TMP = W[(I >> 3) ? (15 - I) & 7 : I & 7];
2367                                     ; **************************************************
2368      P:06E4 70F400  [4 -     4408]            move              #65533,n0
                 00FFFD
2369      P:06E6 3E0300  [2 -     4410]            move              #3,n6
2370      P:06E7 605E00  [2 -     4412]            move              r0,x:(r6)+
2371      P:06E8 205E00  [2 -     4414]            move              (r6)+
2372      P:06E9 22D000  [2 -     4416]            move              r6,r0
2373      P:06EA 204E00  [2 -     4418]            move              (r6)+n6
2374      P:06EB 515E00  [2 -     4420]            move              b0,x:(r6)+
2375      P:06EC 555E00  [2 -     4422]            move              b1,x:(r6)+
2376      P:06ED 445E00  [2 -     4424]            move              x0,x:(r6)+
2377      P:06EE 455E00  [2 -     4426]            move              x1,x:(r6)+
2378      P:06EF 615E00  [2 -     4428]            move              r1,x:(r6)+
2379      P:06F0 625E00  [2 -     4430]            move              r2,x:(r6)+
2380      P:06F1 62E800  [4 -     4434]            move              x:(r0+n0),r2
2381      P:06F2 380200  [2 -     4436]            move              #2,n0
2382      P:06F3 45F000  [4 -     4440]            move              x:FI,x1
                 00006C
2383      P:06F5 456861  [4 -     4444]            tfr     x1,a      x1,x:(r0+n0)
2384      P:06F6 218E00  [2 -     4446]            move              a1,a
2385      P:06F7 0603A0  [4 -     4450]            rep     #3
2386      P:06F8 200022  [2 -     4452]            asr     a
2387      P:06F9 218E00  [2 -     4454]            move              a1,a
2388      P:06FA 200003  [2 -     4456]            tst     a
2389      P:06FB 0AF0AA  [6 -     4462]            jeq     L155
                 000702
2390      P:06FD 56F400  [4 -     4466]            move              #>15,a
                 00000F
2391      P:06FF 200064  [2 -     4468]            sub     x1,a
2392      P:0700 0AF080  [6 -     4474]            jmp     L166
                 000704
2393                                     L155
2394      P:0702 56F000  [4 -     4478]            move              x:FI,a
                 00006C
2395                                     L166
2396                                     ; **************************************************
2397                                     ;   
2398                                     ;   /* FILTD */
2399                                     ;   TMP = ((TMP << 5) + 131072 - S->LAST_Y) & 131071;
2400                                     ; **************************************************
2401      P:0704 61F400  [4 -     4482]            move              #F___W2,r1
                 000054
2402      P:0706 44F400  [4 -     4486]            move              #>7,x0
                 000007
2403      P:0708 222F46  [2 -     4488]            and     x0,a      r1,b
2404      P:0709 218E00  [2 -     4490]            move              a1,a
2405      P:070A 200018  [2 -     4492]            add     a,b
2406      P:070B 21B100  [2 -     4494]            move              b1,r1
2407      P:070C 45E100  [2 -     4496]            move              x:(r1),x1
2408      P:070D 200069  [2 -     4498]            tfr     x1,b
2409      P:070E 0605A0  [4 -     4502]            rep     #5
2410      P:070F 20003A  [2 -     4504]            asl     b
2411                                     ; **************************************************
2412                                     ;   TMP >>= 5;
2413                                     ; **************************************************
2414      P:0710 3A1D00  [2 -     4506]            move              #29,n2
2415      P:0711 44F400  [4 -     4510]            move              #>16646144,x0
                 FE0000
2416      P:0713 56EA00  [4 -     4514]            move              x:(r2+n2),a
2417      P:0714 21AF40  [2 -     4516]            add     x0,a      b1,b
2418      P:0715 44F41C  [4 -     4520]            sub     a,b       #>131071,x0
                 01FFFF
2419      P:0717 20004E  [2 -     4522]            and     x0,b
2420      P:0718 21AF00  [2 -     4524]            move              b1,b
2421      P:0719 21AF00  [2 -     4526]            move              b1,b
2422      P:071A 0605A0  [4 -     4530]            rep     #5
2423      P:071B 20002A  [2 -     4532]            asr     b
2424                                     ; **************************************************
2425                                     ;   YUP = (TMP >> 11) ? TMP + 4096 : TMP;
2426                                     ; **************************************************
2427      P:071C 380200  [2 -     4534]            move              #2,n0
2428      P:071D 21AF00  [2 -     4536]            move              b1,b
2429      P:071E 556801  [4 -     4540]            tfr     b,a       b1,x:(r0+n0)
2430      P:071F 218E00  [2 -     4542]            move              a1,a
2431      P:0720 060BA0  [4 -     4546]            rep     #11
2432      P:0721 200022  [2 -     4548]            asr     a
2433      P:0722 218E00  [2 -     4550]            move              a1,a
2434      P:0723 200003  [2 -     4552]            tst     a
2435      P:0724 0AF0AA  [6 -     4558]            jeq     L157
                 00072C
2436      P:0726 56F400  [4 -     4562]            move              #>4096,a
                 001000
2437      P:0728 200018  [2 -     4564]            add     a,b
2438      P:0729 556000  [2 -     4566]            move              b1,x:(r0)
2439      P:072A 0AF080  [6 -     4572]            jmp     L158
                 00072F
2440                                     L157
2441      P:072C 380200  [2 -     4574]            move              #2,n0
2442      P:072D 45E800  [4 -     4578]            move              x:(r0+n0),x1
2443      P:072E 456000  [2 -     4580]            move              x1,x:(r0)
2444                                     L158
2445                                     ; **************************************************
2446                                     ;   YUP = (YUP + S->LAST_Y) & 8191;
2447                                     ; **************************************************
2448                                     ; **************************************************
2449                                     ;   
2450                                     ;   /* LIMB */
2451                                     ;   if ((((YUP + 11264) & 16383) >> 13) == 0)
2452                                     ; **************************************************
2453      P:072F 3A1D00  [2 -     4582]            move              #29,n2
2454      P:0730 57E000  [2 -     4584]            move              x:(r0),b
2455      P:0731 56EA00  [4 -     4588]            move              x:(r2+n2),a
2456      P:0732 44F418  [4 -     4592]            add     a,b       #>8191,x0
                 001FFF
2457      P:0734 56F44E  [4 -     4596]            and     x0,b      #>11264,a
                 002C00
2458      P:0736 21AF00  [2 -     4598]            move              b1,b
2459      P:0737 44F400  [4 -     4602]            move              #>16383,x0
                 003FFF
2460      P:0739 556018  [2 -     4604]            add     a,b       b1,x:(r0)
2461      P:073A 200001  [2 -     4606]            tfr     b,a
2462      P:073B 200046  [2 -     4608]            and     x0,a
2463      P:073C 218E00  [2 -     4610]            move              a1,a
2464      P:073D 218E00  [2 -     4612]            move              a1,a
2465      P:073E 060DA0  [4 -     4616]            rep     #13
2466      P:073F 200022  [2 -     4618]            asr     a
2467      P:0740 218E00  [2 -     4620]            move              a1,a
2468      P:0741 200003  [2 -     4622]            tst     a
2469      P:0742 0AF0A2  [6 -     4628]            jne     L159
                 000747
2470                                     ; **************************************************
2471                                     ;     YUP = 5120;
2472                                     ; **************************************************
2473      P:0744 45F400  [4 -     4632]            move              #>5120,x1
                 001400
2474      P:0746 456000  [2 -     4634]            move              x1,x:(r0)
2475                                     L159
2476                                     ; **************************************************
2477                                     ;   if ((((YUP + 15840) & 16383) >> 13))
2478                                     ; **************************************************
2479      P:0747 44F400  [4 -     4638]            move              #>16383,x0
                 003FFF
2480      P:0749 57E000  [2 -     4640]            move              x:(r0),b
2481      P:074A 56F400  [4 -     4644]            move              #>15840,a
                 003DE0
2482      P:074C 200018  [2 -     4646]            add     a,b
2483      P:074D 200001  [2 -     4648]            tfr     b,a
2484      P:074E 200046  [2 -     4650]            and     x0,a
2485      P:074F 218E00  [2 -     4652]            move              a1,a
2486      P:0750 218E00  [2 -     4654]            move              a1,a
2487      P:0751 060DA0  [4 -     4658]            rep     #13
2488      P:0752 200022  [2 -     4660]            asr     a
2489      P:0753 218E00  [2 -     4662]            move              a1,a
2490      P:0754 200003  [2 -     4664]            tst     a
2491      P:0755 0AF0AA  [6 -     4670]            jeq     L160
                 00075A
2492                                     ; **************************************************
2493                                     ;     YUP = 544;
2494                                     ; **************************************************
2495      P:0757 45F400  [4 -     4674]            move              #>544,x1
                 000220
2496      P:0759 456000  [2 -     4676]            move              x1,x:(r0)
2497                                     L160
2498                                     ; **************************************************
2499                                     ;   
2500                                     ;   /* FILTE */
2501                                     ;   TMP = (YUP + ((1048576 - S->Y_L) >> 6)) & 16383;
2502                                     ; **************************************************
2503      P:075A 3A1C00  [2 -     4678]            move              #28,n2
2504      P:075B 56F400  [4 -     4682]            move              #>1048576,a
                 100000
2505      P:075D 45EA00  [4 -     4686]            move              x:(r2+n2),x1
2506      P:075E 200064  [2 -     4688]            sub     x1,a
2507      P:075F 218E00  [2 -     4690]            move              a1,a
2508      P:0760 0606A0  [4 -     4694]            rep     #6
2509      P:0761 200022  [2 -     4696]            asr     a
2510                                     ; **************************************************
2511                                     ;   if (TMP & (1 << 13))
2512                                     ; **************************************************
2513      P:0762 380200  [2 -     4698]            move              #2,n0
2514      P:0763 57E000  [2 -     4700]            move              x:(r0),b
2515      P:0764 44F400  [4 -     4704]            move              #>16383,x0
                 003FFF
2516      P:0766 218E00  [2 -     4706]            move              a1,a
2517      P:0767 200018  [2 -     4708]            add     a,b
2518      P:0768 44F44E  [4 -     4712]            and     x0,b      #>8192,x0
                 002000
2519      P:076A 21AF00  [2 -     4714]            move              b1,b
2520      P:076B 556801  [4 -     4718]            tfr     b,a       b1,x:(r0+n0)
2521      P:076C 200046  [2 -     4720]            and     x0,a
2522      P:076D 218E00  [2 -     4722]            move              a1,a
2523      P:076E 200003  [2 -     4724]            tst     a
2524      P:076F 0AF0AA  [6 -     4730]            jeq     L161
                 000775
2525                                     ; **************************************************
2526                                     ;     TMP = TMP + 507904;
2527                                     ; **************************************************
2528      P:0771 56F400  [4 -     4734]            move              #>507904,a
                 07C000
2529      P:0773 200018  [2 -     4736]            add     a,b
2530      P:0774 556800  [4 -     4740]            move              b1,x:(r0+n0)
2531                                     L161
2532                                     ; **************************************************
2533                                     ;   YLP = (TMP + S->Y_L) & 524287;
2534                                     ; **************************************************
2535                                     ; **************************************************
2536                                     ;   
2537                                     ;   /* MIX */
2538                                     ;   TMP = (YUP + 16384 - (S->Y_L >> 6)) & 16383;
2539                                     ; **************************************************
2540      P:0775 380200  [2 -     4742]            move              #2,n0
2541      P:0776 3A1C00  [2 -     4744]            move              #28,n2
2542      P:0777 57E800  [4 -     4748]            move              x:(r0+n0),b
2543      P:0778 56EA00  [4 -     4752]            move              x:(r2+n2),a
2544      P:0779 44F418  [4 -     4756]            add     a,b       #>524287,x0
                 07FFFF
2545      P:077B 218E4E  [2 -     4758]            and     x0,b      a1,a
2546      P:077C 21AF00  [2 -     4760]            move              b1,b
2547      P:077D 205800  [2 -     4762]            move              (r0)+
2548      P:077E 555000  [2 -     4764]            move              b1,x:(r0)-
2549      P:077F 0606A0  [4 -     4768]            rep     #6
2550      P:0780 200022  [2 -     4770]            asr     a
2551                                     ; **************************************************
2552                                     ;   S->LAST_Y = TMP & (1 << 13) ? 1 : 0;
2553                                     ; **************************************************
2554      P:0781 57E000  [2 -     4772]            move              x:(r0),b
2555      P:0782 44F400  [4 -     4776]            move              #>16383,x0
                 003FFF
2556      P:0784 45F400  [4 -     4780]            move              #>16760832,x1
                 FFC000
2557      P:0786 218E00  [2 -     4782]            move              a1,a
2558      P:0787 200060  [2 -     4784]            add     x1,a
2559      P:0788 20001C  [2 -     4786]            sub     a,b
2560      P:0789 44F44E  [4 -     4790]            and     x0,b      #>8192,x0
                 002000
2561      P:078B 21AF00  [2 -     4792]            move              b1,b
2562      P:078C 556801  [4 -     4796]            tfr     b,a       b1,x:(r0+n0)
2563      P:078D 200046  [2 -     4798]            and     x0,a
2564      P:078E 218E00  [2 -     4800]            move              a1,a
2565      P:078F 200003  [2 -     4802]            tst     a
2566      P:0790 0AF0AA  [6 -     4808]            jeq     L162
                 000796
2567      P:0792 56F400  [4 -     4812]            move              #>1,a
                 000001
2568      P:0794 0AF080  [6 -     4818]            jmp     L163
                 000797
2569                                     L162
2570      P:0796 200013  [2 -     4820]            clr     a
2571                                     L163
2572                                     ; **************************************************
2573                                     ;   if (S->LAST_Y)
2574                                     ; **************************************************
2575      P:0797 3A1D03  [2 -     4822]            tst     a         #29,n2
2576      P:0798 546A00  [4 -     4826]            move              a1,x:(r2+n2)
2577      P:0799 0AF0AA  [6 -     4832]            jeq     L164
                 0007A6
2578                                     ; **************************************************
2579                                     ;     TMP = (16384 - TMP) & 8191; 
2580                                     ; **************************************************
2581      P:079B 380200  [2 -     4834]            move              #2,n0
2582      P:079C 44F400  [4 -     4838]            move              #>8191,x0
                 001FFF
2583      P:079E 45E800  [4 -     4842]            move              x:(r0+n0),x1
2584      P:079F 56F400  [4 -     4846]            move              #>16384,a
                 004000
2585      P:07A1 200064  [2 -     4848]            sub     x1,a
2586      P:07A2 546809  [4 -     4852]            tfr     a,b       a1,x:(r0+n0)
2587      P:07A3 20004E  [2 -     4854]            and     x0,b
2588      P:07A4 21AF00  [2 -     4856]            move              b1,b
2589      P:07A5 556800  [4 -     4860]            move              b1,x:(r0+n0)
2590                                     L164
2591                                     ; **************************************************
2592                                     ;   TMP = (TMP * AL) >> 6;
2593                                     ; **************************************************
2594      P:07A6 380200  [2 -     4862]            move              #2,n0
2595      P:07A7 44F000  [4 -     4866]            move              x:FAL,x0
                 00006E
2596      P:07A9 45E800  [4 -     4870]            move              x:(r0+n0),x1
2597      P:07AA 2000A8  [2 -     4872]            mpy     +x0,x1,b
2598      P:07AB 20002A  [2 -     4874]            asr     b
2599      P:07AC 212F00  [2 -     4876]            move              b0,b
2600      P:07AD 21AF00  [2 -     4878]            move              b1,b
2601      P:07AE 0606A0  [4 -     4882]            rep     #6
2602      P:07AF 20002A  [2 -     4884]            asr     b
2603                                     ; **************************************************
2604                                     ;   if (S->LAST_Y)
2605                                     ; **************************************************
2606      P:07B0 3A1D00  [2 -     4886]            move              #29,n2
2607      P:07B1 21AF00  [2 -     4888]            move              b1,b
2608      P:07B2 556800  [4 -     4892]            move              b1,x:(r0+n0)
2609      P:07B3 56EA00  [4 -     4896]            move              x:(r2+n2),a
2610      P:07B4 200003  [2 -     4898]            tst     a
2611      P:07B5 0AF0AA  [6 -     4904]            jeq     L165
                 0007C1
2612                                     ; **************************************************
2613                                     ;     TMP = (16384 - TMP) & 16383;
2614                                     ; **************************************************
2615      P:07B7 45E800  [4 -     4908]            move              x:(r0+n0),x1
2616      P:07B8 44F400  [4 -     4912]            move              #>16383,x0
                 003FFF
2617      P:07BA 56F400  [4 -     4916]            move              #>16384,a
                 004000
2618      P:07BC 200064  [2 -     4918]            sub     x1,a
2619      P:07BD 546809  [4 -     4922]            tfr     a,b       a1,x:(r0+n0)
2620      P:07BE 20004E  [2 -     4924]            and     x0,b
2621      P:07BF 21AF00  [2 -     4926]            move              b1,b
2622      P:07C0 556800  [4 -     4930]            move              b1,x:(r0+n0)
2623                                     L165
2624                                     ; **************************************************
2625                                     ;   
2626                                     ;   S->LAST_Y = S->Y = ((S->Y_L >> 6) + TMP) & 8191; 
2627                                     ; **************************************************
2628      P:07C1 3A1C00  [2 -     4932]            move              #28,n2
2629      P:07C2 56EA00  [4 -     4936]            move              x:(r2+n2),a
2630      P:07C3 218E00  [2 -     4938]            move              a1,a
2631      P:07C4 0606A0  [4 -     4942]            rep     #6
2632      P:07C5 200022  [2 -     4944]            asr     a
2633                                     ; **************************************************
2634                                     ;   S->YL = S->Y_L; 
2635                                     ; **************************************************
2636                                     ; **************************************************
2637                                     ;   S->Y_L = YLP;
2638                                     ; **************************************************
2639                                     ; **************************************************
2640                                     ; }
2641                                     ; **************************************************
2642      P:07C6 3A0200  [2 -     4946]            move              #2,n2
2643      P:07C7 380200  [2 -     4948]            move              #2,n0
2644      P:07C8 44F400  [4 -     4952]            move              #>8191,x0
                 001FFF
2645      P:07CA 45E800  [4 -     4956]            move              x:(r0+n0),x1
2646      P:07CB 218E00  [2 -     4958]            move              a1,a
2647      P:07CC 205860  [2 -     4960]            add     x1,a      (r0)+
2648      P:07CD 205646  [2 -     4962]            and     x0,a      (r6)-
2649      P:07CE 218E00  [2 -     4964]            move              a1,a
2650      P:07CF 546A00  [4 -     4968]            move              a1,x:(r2+n2)
2651      P:07D0 3A1D00  [2 -     4970]            move              #29,n2
2652      P:07D1 546A00  [4 -     4974]            move              a1,x:(r2+n2)
2653      P:07D2 3A1C00  [2 -     4976]            move              #28,n2
2654      P:07D3 56EA00  [4 -     4980]            move              x:(r2+n2),a
2655      P:07D4 3A0300  [2 -     4982]            move              #3,n2
2656      P:07D5 546A00  [4 -     4986]            move              a1,x:(r2+n2)
2657      P:07D6 3A1C00  [2 -     4988]            move              #28,n2
2658      P:07D7 45D000  [2 -     4990]            move              x:(r0)-,x1
2659      P:07D8 456A00  [4 -     4994]            move              x1,x:(r2+n2)
2660      P:07D9 62D600  [2 -     4996]            move              x:(r6)-,r2
2661      P:07DA 61D600  [2 -     4998]            move              x:(r6)-,r1
2662      P:07DB 45D600  [2 -     5000]            move              x:(r6)-,x1
2663      P:07DC 44D600  [2 -     5002]            move              x:(r6)-,x0
2664      P:07DD 57D600  [2 -     5004]            move              x:(r6)-,b
2665      P:07DE 51E600  [2 -     5006]            move              x:(r6),b0
2666      P:07DF 205000  [2 -     5008]            move              (r0)-
2667      P:07E0 205000  [2 -     5010]            move              (r0)-
2668      P:07E1 221600  [2 -     5012]            move              r0,r6
2669      P:07E2 60E000  [2 -     5014]            move              x:(r0),r0
2670      P:07E3 00000C  [4 -     5018]            rts
2671   
2672                                               global  Finit_disk_play
2673                                     Finit_disk_play
2674                                     ; **************************************************
2675                                     ; **************************************************
2676                                     ; **************************************************
2677                                     ; 
2678                                     ; #ifndef __MNECOUNT__
2679                                     ; 
2680                                     ; #ifdef __DSP56K__
2681                                     ; 
2682                                     ; void init_disk_play()
2683                                     ; {
2684                                     ; }
2685                                     ; **************************************************
2686      P:07E4 00000C  [4 -     5022]            rts
2687   
2688                                               global  FData_in
2689      X:005C                                   org     x:
2690                                     FData_in
2691      X:005C                                   dc      122
2692      X:005D                                   dc      121
2693      X:005E                                   dc      123
2694      X:005F                                   dc      119
2695      X:0060                                   dc      116
2696      X:0061                                   dc      115
2697      X:0062                                   dc      118
2698      X:0063                                   dc      116
2699      X:0064                                   dc      114
2700      X:0065                                   dc      115
2701                                     F___i3
2702      X:0066                                   dc      0
2703      P:07E5                                   org     p:
2704                                               global  Fdisk_play
2705                                     Fdisk_play
2706                                     ; **************************************************
2707                                     ; **************************************************
2708                                     ; **************************************************
2709                                     ; 
2710                                     ; #ifdef __SIMULATION__
2711                                     ; #include "data_in.c"
2712                                     ; #endif
2713                                     ; 
2714                                     ; void disk_play()
2715                                     ; {
2716                                     ; #ifdef __SIMULATION__
2717                                     ; 
2718                                     ;   static int i = 0;
2719                                     ; 
2720                                     ;   if (i >= sizeof(Data_in) / sizeof(int))
2721                                     ; **************************************************
2722      P:07E5 605E00  [2 -     5024]            move              r0,x:(r6)+
2723      P:07E6 22D000  [2 -     5026]            move              r6,r0
2724      P:07E7 205E00  [2 -     5028]            move              (r6)+
2725      P:07E8 515E00  [2 -     5030]            move              b0,x:(r6)+
2726      P:07E9 555E00  [2 -     5032]            move              b1,x:(r6)+
2727      P:07EA 57F400  [4 -     5036]            move              #>9,b
                 000009
2728      P:07EC 445E00  [2 -     5038]            move              x0,x:(r6)+
2729      P:07ED 455E00  [2 -     5040]            move              x1,x:(r6)+
2730      P:07EE 615E00  [2 -     5042]            move              r1,x:(r6)+
2731      P:07EF 56F000  [4 -     5046]            move              x:F___i3,a
                 000066
2732      P:07F1 200005  [2 -     5048]            cmp     b,a
2733      P:07F2 0AF0AF  [6 -     5054]            jle     L169
                 0007F8
2734                                     ; **************************************************
2735                                     ;     ExitFlag = TRUE;
2736                                     ; **************************************************
2737      P:07F4 56F400  [4 -     5058]            move              #>1,a
                 000001
2738      P:07F6 547000  [4 -     5062]            move              a1,x:FExitFlag
                 000070
2739                                     L169
2740                                     ; **************************************************
2741                                     ; 
2742                                     ;   SL = Data_in[i++] & 0x3FFF;
2743                                     ; **************************************************
2744                                     ; **************************************************
2745                                     ; 
2746                                     ; #else
2747                                     ; 
2748                                     ;   ExitFlag = TRUE;
2749                                     ;   SL = 0;
2750                                     ; 
2751                                     ; #endif
2752                                     ; }
2753                                     ; **************************************************
2754      P:07F8 61F400  [4 -     5066]            move              #FData_in,r1
                 00005C
2755      P:07FA 56F000  [4 -     5070]            move              x:F___i3,a
                 000066
2756      P:07FC 44F409  [4 -     5074]            tfr     a,b       #>16383,x0
                 003FFF
2757      P:07FE 45F400  [4 -     5078]            move              #>1,x1
                 000001
2758      P:0800 205068  [2 -     5080]            add     x1,b      (r0)-
2759      P:0801 21A500  [2 -     5082]            move              b1,x1
2760      P:0802 222F00  [2 -     5084]            move              r1,b
2761      P:0803 457018  [4 -     5088]            add     a,b       x1,x:F___i3
                 000066
2762      P:0805 21B100  [2 -     5090]            move              b1,r1
2763      P:0806 205600  [2 -     5092]            move              (r6)-
2764      P:0807 56E100  [2 -     5094]            move              x:(r1),a
2765      P:0808 200046  [2 -     5096]            and     x0,a
2766      P:0809 218E00  [2 -     5098]            move              a1,a
2767      P:080A 547000  [4 -     5102]            move              a1,x:FSL
                 000069
2768      P:080C 61D600  [2 -     5104]            move              x:(r6)-,r1
2769      P:080D 45D600  [2 -     5106]            move              x:(r6)-,x1
2770      P:080E 44D600  [2 -     5108]            move              x:(r6)-,x0
2771      P:080F 57D600  [2 -     5110]            move              x:(r6)-,b
2772      P:0810 51E600  [2 -     5112]            move              x:(r6),b0
2773      P:0811 221600  [2 -     5114]            move              r0,r6
2774      P:0812 60E000  [2 -     5116]            move              x:(r0),r0
2775      P:0813 00000C  [4 -     5120]            rts
2776   
2777                                               global  Fpost_disk_play
2778                                     Fpost_disk_play
2779                                     ; **************************************************
2780                                     ; **************************************************
2781                                     ; **************************************************
2782                                     ; 
2783                                     ; void post_disk_play()
2784                                     ; {
2785                                     ; }
2786                                     ; **************************************************
2787      P:0814 00000C  [4 -     5124]            rts
2788   
2789                                               global  Finit_disk_record
2790                                     Finit_disk_record
2791                                     ; **************************************************
2792                                     ; **************************************************
2793                                     ; **************************************************
2794                                     ; 
2795                                     ; void init_disk_record()
2796                                     ; {
2797                                     ; }
2798                                     ; **************************************************
2799      P:0815 00000C  [4 -     5128]            rts
2800   
2801                                               global  Fdisk_record
2802                                     Fdisk_record
2803                                     ; **************************************************
2804                                     ; **************************************************
2805                                     ; **************************************************
2806                                     ; 
2807                                     ; void disk_record()
2808                                     ; {
2809                                     ; }
2810                                     ; **************************************************
2811      P:0816 00000C  [4 -     5132]            rts
2812   
2813                                               global  Fpost_disk_record
2814                                     Fpost_disk_record
2815                                     ; **************************************************
2816                                     ; **************************************************
2817                                     ; **************************************************
2818                                     ; 
2819                                     ; void post_disk_record()
2820                                     ; {
2821                                     ; }
2822                                     ; **************************************************
2823      P:0817 00000C  [4 -     5136]            rts
2824   
2825                                               global  Fmain
2826                                     Fmain
2827      P:0818 605E00  [2 -     5138]            move              r0,x:(r6)+
2828      P:0819 055E3C  [2 -     5140]            move              ssh,x:(r6)+
2829                                     ; **************************************************
2830                                     ; **************************************************
2831                                     ; **************************************************
2832                                     ; 
2833                                     ; #else
2834                                     ; 
2835                                     ; void init_disk_play()
2836                                     ; {
2837                                     ;   istrm = fopen("data.in", "rb");
2838                                     ; }
2839                                     ; 
2840                                     ; void disk_play()
2841                                     ; {
2842                                     ;   int d;
2843                                     ; 
2844                                     ;   if (istrm != NULL && !feof(istrm))
2845                                     ;   {
2846                                     ;     fread((char*) &d, sizeof(int), 1, istrm);
2847                                     ;     SL = (d & 0x3FFF0000) >> 16;
2848                                     ;   }
2849                                     ;   if (feof(istrm))
2850                                     ;     ExitFlag = TRUE;
2851                                     ; }
2852                                     ; 
2853                                     ; void post_disk_play()
2854                                     ; {
2855                                     ;   if (istrm != NULL)
2856                                     ;     fclose(istrm);
2857                                     ; }
2858                                     ; 
2859                                     ; void init_disk_record()
2860                                     ; {
2861                                     ;   ostrm = fopen("data.out", "wb");
2862                                     ; }
2863                                     ; 
2864                                     ; void disk_record()
2865                                     ; {
2866                                     ;   int d;
2867                                     ; 
2868                                     ;   if (ostrm != NULL)
2869                                     ;   {
2870                                     ;     d = (SD & 0x0000FFFF) << 16;
2871                                     ;     fwrite((char*) &d, 4, 1, ostrm);
2872                                     ;   }
2873                                     ; }
2874                                     ; 
2875                                     ; void post_disk_record()
2876                                     ; {
2877                                     ;   if (ostrm != NULL)
2878                                     ;     fclose(ostrm);
2879                                     ; }
2880                                     ; 
2881                                     ; #endif
2882                                     ; #endif
2883                                     ; 
2884                                     ; main()
2885                                     ; {
2886                                     ; #ifndef __MNECOUNT__
2887                                     ; #ifdef __DOWNLOAD__
2888                                     ;   run56k_start();
2889                                     ; #endif
2890                                     ; 
2891                                     ;   init_disk_play();
2892                                     ; **************************************************
2893      P:081A 3E0300  [2 -     5142]            move              #3,n6
2894      P:081B 22D000  [2 -     5144]            move              r6,r0
2895      P:081C 204E00  [2 -     5146]            move              (r6)+n6
2896      P:081D 515E00  [2 -     5148]            move              b0,x:(r6)+
2897      P:081E 555E00  [2 -     5150]            move              b1,x:(r6)+
2898      P:081F 445E00  [2 -     5152]            move              x0,x:(r6)+
2899      P:0820 455E00  [2 -     5154]            move              x1,x:(r6)+
2900      P:0821 465E00  [2 -     5156]            move              y0,x:(r6)+
2901      P:0822 475E00  [2 -     5158]            move              y1,x:(r6)+
2902      P:0823 615E00  [2 -     5160]            move              r1,x:(r6)+
2903      P:0824 625E00  [2 -     5162]            move              r2,x:(r6)+
2904      P:0825 635E00  [2 -     5164]            move              r3,x:(r6)+
2905      P:0826 0BF080  [6 -     5170]            jsr     Finit_disk_play
                 0007E4
2906                                     ; **************************************************
2907                                     ;   init_disk_record();
2908                                     ; **************************************************
2909      P:0828 0BF080  [6 -     5176]            jsr     Finit_disk_record
                 000815
2910                                     ; **************************************************
2911                                     ; 
2912                                     ;   ExitFlag = FALSE;
2913                                     ; **************************************************
2914                                     ; **************************************************
2915                                     ;   while (!ExitFlag)
2916                                     ; **************************************************
2917      P:082A 61F413  [4 -     5180]            clr     a         #FD_STATES,r1
                 00001E
2918      P:082C 63F400  [4 -     5184]            move              #Fiadpt_quant,r3
                 000500
2919      P:082E 62F400  [4 -     5188]            move              #FE_STATES,r2
                 000000
2920      P:0830 547000  [4 -     5192]            move              a1,x:FExitFlag
                 000070
2921                                     L226
2922                                     ; **************************************************
2923                                     ;   {
2924                                     ; #endif
2925                                     ;     disk_play();
2926                                     ; **************************************************
2927      P:0832 0BF080  [6 -     5198]            jsr     Fdisk_play
                 0007E5
2928                                     ; **************************************************
2929                                     ;     if (ExitFlag)
2930                                     ; **************************************************
2931      P:0834 56F000  [4 -     5202]            move              x:FExitFlag,a
                 000070
2932      P:0836 200003  [2 -     5204]            tst     a
2933      P:0837 0AF0A2  [6 -     5210]            jne     L176
                 0009BE
2934                                     ; **************************************************
2935                                     ;       break;
2936                                     ; **************************************************
2937                                     ; **************************************************
2938                                     ; 
2939                                     ;     /*
2940                                     ;      * ENCODER
2941                                     ;      */
2942                                     ;     adpt_predict(&E_STATES);
2943                                     ; **************************************************
2944      P:0839 625E00  [2 -     5212]            move              r2,x:(r6)+
2945      P:083A 0BF080  [6 -     5218]            jsr     Fadpt_predict
                 0000D8
2946                                     ; **************************************************
2947                                     ;     {
2948                                     ;       /* SUBTA (inlined) */
2949                                     ;       D = ((SL & (1 << 13) ? 49152 | SL : SL) + 65536 -
2950                                     ;           (S_E & (1 << 14) ? 32768 | S_E : S_E)) & 65535;
2951                                     ; **************************************************
2952      P:083C 380200  [2 -     5220]            move              #2,n0
2953      P:083D 47F000  [4 -     5224]            move              x:FSL,y1
                 000069
2954      P:083F 44F471  [4 -     5228]            tfr     y1,a      #>8192,x0
                 002000
2955      P:0841 476846  [4 -     5232]            and     x0,a      y1,x:(r0+n0)
2956      P:0842 218E00  [2 -     5234]            move              a1,a
2957      P:0843 205603  [2 -     5236]            tst     a         (r6)-
2958      P:0844 0AF0AA  [6 -     5242]            jeq     L178
                 00084E
2959      P:0846 57E800  [4 -     5246]            move              x:(r0+n0),b
2960      P:0847 44F400  [4 -     5250]            move              #>49152,x0
                 00C000
2961      P:0849 20004A  [2 -     5252]            or      x0,b
2962      P:084A 21AF00  [2 -     5254]            move              b1,b
2963      P:084B 556000  [2 -     5256]            move              b1,x:(r0)
2964      P:084C 0AF080  [6 -     5262]            jmp     L179
                 000851
2965                                     L178
2966      P:084E 47F000  [4 -     5266]            move              x:FSL,y1
                 000069
2967      P:0850 476000  [2 -     5268]            move              y1,x:(r0)
2968                                     L179
2969      P:0851 380200  [2 -     5270]            move              #2,n0
2970      P:0852 47F000  [4 -     5274]            move              x:FS_E,y1
                 00006A
2971      P:0854 476871  [4 -     5278]            tfr     y1,a      y1,x:(r0+n0)
2972      P:0855 47F400  [4 -     5282]            move              #>16384,y1
                 004000
2973      P:0857 200076  [2 -     5284]            and     y1,a
2974      P:0858 218E00  [2 -     5286]            move              a1,a
2975      P:0859 200003  [2 -     5288]            tst     a
2976      P:085A 0AF0AA  [6 -     5294]            jeq     L180
                 000864
2977      P:085C 57E800  [4 -     5298]            move              x:(r0+n0),b
2978      P:085D 47F400  [4 -     5302]            move              #>32768,y1
                 008000
2979      P:085F 20007A  [2 -     5304]            or      y1,b
2980      P:0860 21AF00  [2 -     5306]            move              b1,b
2981      P:0861 556800  [4 -     5310]            move              b1,x:(r0+n0)
2982      P:0862 0AF080  [6 -     5316]            jmp     L181
                 000868
2983                                     L180
2984      P:0864 380200  [2 -     5318]            move              #2,n0
2985      P:0865 47F000  [4 -     5322]            move              x:FS_E,y1
                 00006A
2986      P:0867 476800  [4 -     5326]            move              y1,x:(r0+n0)
2987                                     L181
2988                                     ; **************************************************
2989                                     ;     }
2990                                     ;     {
2991                                     ;       /* adaptive predictor (inlined) */
2992                                     ;       register int DS, DQM, DL, DLN, EXP;
2993                                     ; 
2994                                     ;       /* LOG */
2995                                     ;       DS = D & (1 << 15);
2996                                     ; **************************************************
2997                                     ; **************************************************
2998                                     ;       DQM = DS ? (65536 - D) & 32767 : D;
2999                                     ; **************************************************
3000      P:0868 380200  [2 -     5328]            move              #2,n0
3001      P:0869 44F400  [4 -     5332]            move              #>65535,x0
                 00FFFF
3002      P:086B 57E800  [4 -     5336]            move              x:(r0+n0),b
3003      P:086C 56F400  [4 -     5340]            move              #>16711680,a
                 FF0000
3004      P:086E 200018  [2 -     5342]            add     a,b
3005      P:086F 57E001  [2 -     5344]            tfr     b,a       x:(r0),b
3006      P:0870 20001C  [2 -     5346]            sub     a,b
3007      P:0871 200001  [2 -     5348]            tfr     b,a
3008      P:0872 200046  [2 -     5350]            and     x0,a
3009      P:0873 218E00  [2 -     5352]            move              a1,a
3010      P:0874 218709  [2 -     5354]            tfr     a,b       a1,y1
3011      P:0875 546800  [4 -     5358]            move              a1,x:(r0+n0)
3012      P:0876 477000  [4 -     5362]            move              y1,x:FD
                 00006D
3013      P:0878 47F400  [4 -     5366]            move              #>32768,y1
                 008000
3014      P:087A 20587E  [2 -     5368]            and     y1,b      (r0)+
3015      P:087B 21AF00  [2 -     5370]            move              b1,b
3016      P:087C 55500B  [2 -     5372]            tst     b         b1,x:(r0)-
3017      P:087D 0AF0AA  [6 -     5378]            jeq     L182
                 000889
3018      P:087F 44F400  [4 -     5382]            move              #>32767,x0
                 007FFF
3019      P:0881 47E800  [4 -     5386]            move              x:(r0+n0),y1
3020      P:0882 56F400  [4 -     5390]            move              #>65536,a
                 010000
3021      P:0884 200074  [2 -     5392]            sub     y1,a
3022      P:0885 200046  [2 -     5394]            and     x0,a
3023      P:0886 218E00  [2 -     5396]            move              a1,a
3024      P:0887 0AF080  [6 -     5402]            jmp     L183
                 00088B
3025                                     L182
3026      P:0889 56F000  [4 -     5406]            move              x:FD,a
                 00006D
3027                                     L183
3028                                     ; **************************************************
3029                                     ;       {
3030                                     ;       register int dqm = DQM;
3031                                     ; **************************************************
3032                                     ; **************************************************
3033                                     ; 
3034                                     ;       for (EXP = 1; dqm >>= 1; EXP++)
3035                                     ; **************************************************
3036      P:088B 46F400  [4 -     5410]            move              #>1,y0
                 000001
3037      P:088D 218500  [2 -     5412]            move              a1,x1
3038      P:088E 0AF080  [6 -     5418]            jmp     L229
                 000894
3039                                     L186
3040      P:0890 47F459  [4 -     5422]            tfr     y0,b      #>1,y1
                 000001
3041      P:0892 200078  [2 -     5424]            add     y1,b
3042      P:0893 21A600  [2 -     5426]            move              b1,y0
3043                                     L229
3044      P:0894 218E00  [2 -     5428]            move              a1,a
3045      P:0895 200022  [2 -     5430]            asr     a
3046      P:0896 218E00  [2 -     5432]            move              a1,a
3047      P:0897 200003  [2 -     5434]            tst     a
3048      P:0898 0AF0A2  [6 -     5440]            jne     L186
                 000890
3049                                     ; **************************************************
3050                                     ; #ifdef __LOOPCOUNT__
3051                                     ;         Loop7++;
3052                                     ; #else
3053                                     ;         ;
3054                                     ; #endif
3055                                     ;       }
3056                                     ;       EXP--;
3057                                     ; **************************************************
3058                                     ; **************************************************
3059                                     ;       DL = (EXP * (1 << 7)) + (((DQM * (1 << 7)) >> EXP) & 127);
3060                                     ; **************************************************
3061      P:089A 44F459  [4 -     5444]            tfr     y0,b      #>128,x0
                 000080
3062      P:089C 56F400  [4 -     5448]            move              #>16777215,a
                 FFFFFF
3063      P:089E 200018  [2 -     5450]            add     a,b
3064      P:089F 21A6A0  [2 -     5452]            mpy     +x0,x1,a  b1,y0
3065      P:08A0 200022  [2 -     5454]            asr     a
3066      P:08A1 210E0B  [2 -     5456]            tst     b         a0,a
3067      P:08A2 0AF0AA  [6 -     5462]            jeq     L231
                 0008A8
3068      P:08A4 218E00  [2 -     5464]            move              a1,a
3069      P:08A5 06CF20  [4 -     5468]            rep     b
3070      P:08A6 200022  [2 -     5470]            asr     a
3071      P:08A7 218E00  [2 -     5472]            move              a1,a
3072                                     L231
3073                                     ; **************************************************
3074                                     ; 
3075                                     ;       /* SUBTB */
3076                                     ;       DLN = (DL + 4096 - (E_STATES.Y >> 2)) & 4095;
3077                                     ; **************************************************
3078                                     ; **************************************************
3079                                     ; 
3080                                     ;       /* QUAN */
3081                                     ;       if (DLN > 3971)
3082                                     ; **************************************************
3083      P:08A8 380200  [2 -     5474]            move              #2,n0
3084      P:08A9 47F000  [4 -     5478]            move              x:(FE_STATES+2),y1
                 000002
3085      P:08AB 45F479  [4 -     5482]            tfr     y1,b      #>127,x1
                 00007F
3086      P:08AD 21AF66  [2 -     5484]            and     x1,a      b1,b
3087      P:08AE 218E2A  [2 -     5486]            asr     b         a1,a
3088      P:08AF 21C82A  [2 -     5488]            asr     b         a,a0
3089      P:08B0 21AF32  [2 -     5490]            asl     a         b1,b
3090      P:08B1 44F4D2  [4 -     5494]            mac     +y0,x0,a  #>16773120,x0
                 FFF000
3091      P:08B3 44F448  [4 -     5498]            add     x0,b      #>4095,x0
                 000FFF
3092      P:08B5 21A722  [2 -     5500]            asr     a         b1,y1
3093      P:08B6 210E00  [2 -     5502]            move              a0,a
3094      P:08B7 200074  [2 -     5504]            sub     y1,a
3095      P:08B8 200046  [2 -     5506]            and     x0,a
3096      P:08B9 218E00  [2 -     5508]            move              a1,a
3097      P:08BA 546809  [4 -     5512]            tfr     a,b       a1,x:(r0+n0)
3098      P:08BB 56F400  [4 -     5516]            move              #>3971,a
                 000F83
3099      P:08BD 20000D  [2 -     5518]            cmp     a,b
3100      P:08BE 0AF0AF  [6 -     5524]            jle     L188
                 0008C7
3101                                     ; **************************************************
3102                                     ;       I = DS ? 0xE : 0x1;
3103                                     ; **************************************************
3104      P:08C0 205800  [2 -     5526]            move              (r0)+
3105      P:08C1 57D000  [2 -     5528]            move              x:(r0)-,b
3106      P:08C2 20000B  [2 -     5530]            tst     b
3107      P:08C3 0AF0A2  [6 -     5536]            jne     L230
                 00094F
3108      P:08C5 0AF080  [6 -     5542]            jmp     L218
                 000953
3109                                     L188
3110                                     ; **************************************************
3111                                     ;       else if (DLN > 2047)
3112                                     ; **************************************************
3113      P:08C7 380200  [2 -     5544]            move              #2,n0
3114      P:08C8 56F400  [4 -     5548]            move              #>2047,a
                 0007FF
3115      P:08CA 57E800  [4 -     5552]            move              x:(r0+n0),b
3116      P:08CB 20000D  [2 -     5554]            cmp     a,b
3117      P:08CC 0AF0AF  [6 -     5560]            jle     L192
                 0008D2
3118                                     ; **************************************************
3119                                     ;       I = 0xF;
3120                                     ; **************************************************
3121      P:08CE 56F400  [4 -     5564]            move              #>15,a
                 00000F
3122      P:08D0 0AF080  [6 -     5570]            jmp     L219
                 000955
3123                                     L192
3124                                     ; **************************************************
3125                                     ;       else if (DLN > 399)
3126                                     ; **************************************************
3127      P:08D2 380200  [2 -     5572]            move              #2,n0
3128      P:08D3 56F400  [4 -     5576]            move              #>399,a
                 00018F
3129      P:08D5 57E800  [4 -     5580]            move              x:(r0+n0),b
3130      P:08D6 20000D  [2 -     5582]            cmp     a,b
3131      P:08D7 0AF0AF  [6 -     5588]            jle     L194
                 0008E6
3132                                     ; **************************************************
3133                                     ;       I = DS ? 0x8 : 0x7;
3134                                     ; **************************************************
3135      P:08D9 205800  [2 -     5590]            move              (r0)+
3136      P:08DA 57D000  [2 -     5592]            move              x:(r0)-,b
3137      P:08DB 20000B  [2 -     5594]            tst     b
3138      P:08DC 0AF0AA  [6 -     5600]            jeq     L195
                 0008E2
3139      P:08DE 56F400  [4 -     5604]            move              #>8,a
                 000008
3140      P:08E0 0AF080  [6 -     5610]            jmp     L219
                 000955
3141                                     L195
3142      P:08E2 56F400  [4 -     5614]            move              #>7,a
                 000007
3143      P:08E4 0AF080  [6 -     5620]            jmp     L219
                 000955
3144                                     L194
3145                                     ; **************************************************
3146                                     ;       else if (DLN > 348)
3147                                     ; **************************************************
3148      P:08E6 380200  [2 -     5622]            move              #2,n0
3149      P:08E7 56F400  [4 -     5626]            move              #>348,a
                 00015C
3150      P:08E9 57E800  [4 -     5630]            move              x:(r0+n0),b
3151      P:08EA 20000D  [2 -     5632]            cmp     a,b
3152      P:08EB 0AF0AF  [6 -     5638]            jle     L198
                 0008FA
3153                                     ; **************************************************
3154                                     ;       I = DS ? 0x9 : 0x6;
3155                                     ; **************************************************
3156      P:08ED 205800  [2 -     5640]            move              (r0)+
3157      P:08EE 57D000  [2 -     5642]            move              x:(r0)-,b
3158      P:08EF 20000B  [2 -     5644]            tst     b
3159      P:08F0 0AF0AA  [6 -     5650]            jeq     L199
                 0008F6
3160      P:08F2 56F400  [4 -     5654]            move              #>9,a
                 000009
3161      P:08F4 0AF080  [6 -     5660]            jmp     L219
                 000955
3162                                     L199
3163      P:08F6 56F400  [4 -     5664]            move              #>6,a
                 000006
3164      P:08F8 0AF080  [6 -     5670]            jmp     L219
                 000955
3165                                     L198
3166                                     ; **************************************************
3167                                     ;       else if (DLN > 299)
3168                                     ; **************************************************
3169      P:08FA 380200  [2 -     5672]            move              #2,n0
3170      P:08FB 56F400  [4 -     5676]            move              #>299,a
                 00012B
3171      P:08FD 57E800  [4 -     5680]            move              x:(r0+n0),b
3172      P:08FE 20000D  [2 -     5682]            cmp     a,b
3173      P:08FF 0AF0AF  [6 -     5688]            jle     L202
                 00090E
3174                                     ; **************************************************
3175                                     ;       I = DS ? 0xA : 0x5;    
3176                                     ; **************************************************
3177      P:0901 205800  [2 -     5690]            move              (r0)+
3178      P:0902 57D000  [2 -     5692]            move              x:(r0)-,b
3179      P:0903 20000B  [2 -     5694]            tst     b
3180      P:0904 0AF0AA  [6 -     5700]            jeq     L203
                 00090A
3181      P:0906 56F400  [4 -     5704]            move              #>10,a
                 00000A
3182      P:0908 0AF080  [6 -     5710]            jmp     L219
                 000955
3183                                     L203
3184      P:090A 56F400  [4 -     5714]            move              #>5,a
                 000005
3185      P:090C 0AF080  [6 -     5720]            jmp     L219
                 000955
3186                                     L202
3187                                     ; **************************************************
3188                                     ;       else if (DLN > 245)
3189                                     ; **************************************************
3190      P:090E 380200  [2 -     5722]            move              #2,n0
3191      P:090F 56F400  [4 -     5726]            move              #>245,a
                 0000F5
3192      P:0911 57E800  [4 -     5730]            move              x:(r0+n0),b
3193      P:0912 20000D  [2 -     5732]            cmp     a,b
3194      P:0913 0AF0AF  [6 -     5738]            jle     L206
                 000922
3195                                     ; **************************************************
3196                                     ;       I = DS ? 0xB : 0x4;
3197                                     ; **************************************************
3198      P:0915 205800  [2 -     5740]            move              (r0)+
3199      P:0916 57D000  [2 -     5742]            move              x:(r0)-,b
3200      P:0917 20000B  [2 -     5744]            tst     b
3201      P:0918 0AF0AA  [6 -     5750]            jeq     L207
                 00091E
3202      P:091A 56F400  [4 -     5754]            move              #>11,a
                 00000B
3203      P:091C 0AF080  [6 -     5760]            jmp     L219
                 000955
3204                                     L207
3205      P:091E 56F400  [4 -     5764]            move              #>4,a
                 000004
3206      P:0920 0AF080  [6 -     5770]            jmp     L219
                 000955
3207                                     L206
3208                                     ; **************************************************
3209                                     ;       else if (DLN > 177)
3210                                     ; **************************************************
3211      P:0922 380200  [2 -     5772]            move              #2,n0
3212      P:0923 56F400  [4 -     5776]            move              #>177,a
                 0000B1
3213      P:0925 57E800  [4 -     5780]            move              x:(r0+n0),b
3214      P:0926 20000D  [2 -     5782]            cmp     a,b
3215      P:0927 0AF0AF  [6 -     5788]            jle     L210
                 000936
3216                                     ; **************************************************
3217                                     ;       I = DS ? 0xC : 0x3;
3218                                     ; **************************************************
3219      P:0929 205800  [2 -     5790]            move              (r0)+
3220      P:092A 57D000  [2 -     5792]            move              x:(r0)-,b
3221      P:092B 20000B  [2 -     5794]            tst     b
3222      P:092C 0AF0AA  [6 -     5800]            jeq     L211
                 000932
3223      P:092E 56F400  [4 -     5804]            move              #>12,a
                 00000C
3224      P:0930 0AF080  [6 -     5810]            jmp     L219
                 000955
3225                                     L211
3226      P:0932 56F400  [4 -     5814]            move              #>3,a
                 000003
3227      P:0934 0AF080  [6 -     5820]            jmp     L219
                 000955
3228                                     L210
3229                                     ; **************************************************
3230                                     ;       else if (DLN > 79)
3231                                     ; **************************************************
3232      P:0936 380200  [2 -     5822]            move              #2,n0
3233      P:0937 56F400  [4 -     5826]            move              #>79,a
                 00004F
3234      P:0939 57E800  [4 -     5830]            move              x:(r0+n0),b
3235      P:093A 20000D  [2 -     5832]            cmp     a,b
3236      P:093B 0AF0AF  [6 -     5838]            jle     L214
                 00094A
3237                                     ; **************************************************
3238                                     ;       I = DS ? 0xD : 0x2;
3239                                     ; **************************************************
3240      P:093D 205800  [2 -     5840]            move              (r0)+
3241      P:093E 57D000  [2 -     5842]            move              x:(r0)-,b
3242      P:093F 20000B  [2 -     5844]            tst     b
3243      P:0940 0AF0AA  [6 -     5850]            jeq     L215
                 000946
3244      P:0942 56F400  [4 -     5854]            move              #>13,a
                 00000D
3245      P:0944 0AF080  [6 -     5860]            jmp     L219
                 000955
3246                                     L215
3247      P:0946 56F400  [4 -     5864]            move              #>2,a
                 000002
3248      P:0948 0AF080  [6 -     5870]            jmp     L219
                 000955
3249                                     L214
3250                                     ; **************************************************
3251                                     ;       else
3252                                     ;       I = DS ? 0xE : 0x1;
3253                                     ; **************************************************
3254      P:094A 205800  [2 -     5872]            move              (r0)+
3255      P:094B 57D000  [2 -     5874]            move              x:(r0)-,b
3256      P:094C 20000B  [2 -     5876]            tst     b
3257      P:094D 0AF0AA  [6 -     5882]            jeq     L218
                 000953
3258                                     L230
3259      P:094F 56F400  [4 -     5886]            move              #>14,a
                 00000E
3260      P:0951 0AF080  [6 -     5892]            jmp     L219
                 000955
3261                                     L218
3262      P:0953 56F400  [4 -     5896]            move              #>1,a
                 000001
3263                                     L219
3264                                     ; **************************************************
3265                                     ;     }
3266                                     ;     iadpt_quant(&E_STATES);
3267                                     ; **************************************************
3268      P:0955 547000  [4 -     5900]            move              a1,x:FI
                 00006C
3269      P:0957 625E00  [2 -     5902]            move              r2,x:(r6)+
3270      P:0958 0BE380  [4 -     5906]            jsr     (r3)
3271                                     ; **************************************************
3272                                     ;     tone_detector(&E_STATES);
3273                                     ; **************************************************
3274      P:0959 205600  [2 -     5908]            move              (r6)-
3275      P:095A 625E00  [2 -     5910]            move              r2,x:(r6)+
3276      P:095B 0BF080  [6 -     5916]            jsr     Ftone_detector
                 000560
3277                                     ; **************************************************
3278                                     ;     speed_control(&E_STATES);
3279                                     ; **************************************************
3280      P:095D 205600  [2 -     5918]            move              (r6)-
3281      P:095E 625E00  [2 -     5920]            move              r2,x:(r6)+
3282      P:095F 0BF080  [6 -     5926]            jsr     Fspeed_control
                 0005DC
3283                                     ; **************************************************
3284                                     ;     scale_factor(&E_STATES);
3285                                     ; **************************************************
3286      P:0961 205600  [2 -     5928]            move              (r6)-
3287      P:0962 625E00  [2 -     5930]            move              r2,x:(r6)+
3288      P:0963 0BF080  [6 -     5936]            jsr     Fscale_factor
                 0006E4
3289                                     ; **************************************************
3290                                     ; 
3291                                     ;     /*
3292                                     ;      * DECODER
3293                                     ;      */
3294                                     ;     adpt_predict(&D_STATES);
3295                                     ; **************************************************
3296      P:0965 205600  [2 -     5938]            move              (r6)-
3297      P:0966 615E00  [2 -     5940]            move              r1,x:(r6)+
3298      P:0967 0BF080  [6 -     5946]            jsr     Fadpt_predict
                 0000D8
3299                                     ; **************************************************
3300                                     ;     iadpt_quant(&D_STATES);
3301                                     ; **************************************************
3302      P:0969 205600  [2 -     5948]            move              (r6)-
3303      P:096A 615E00  [2 -     5950]            move              r1,x:(r6)+
3304      P:096B 0BE380  [4 -     5954]            jsr     (r3)
3305                                     ; **************************************************
3306                                     ;     {
3307                                     ;       /* ADD (inlined) */
3308                                     ;       register int dq, se;
3309                                     ; 
3310                                     ;       /* 15 SM auf 16 TC */
3311                                     ;       dq = (D_STATES.DQ & (1 << 14)) ? D_STATES.DQ == (1 << 14) ? 0: 
3312                                     ;            (((D_STATES.DQ ^ 0x3FFF) + 0x1) & 0x3FFF) + 0xC000 : D_STATES.DQ ; 
3313                                     ; **************************************************
3314      P:096C 380200  [2 -     5956]            move              #2,n0
3315      P:096D 47E100  [2 -     5958]            move              x:(r1),y1
3316      P:096E 476871  [4 -     5962]            tfr     y1,a      y1,x:(r0+n0)
3317      P:096F 47F400  [4 -     5966]            move              #>16384,y1
                 004000
3318      P:0971 205676  [2 -     5968]            and     y1,a      (r6)-
3319      P:0972 218E00  [2 -     5970]            move              a1,a
3320      P:0973 200003  [2 -     5972]            tst     a
3321      P:0974 0AF0AA  [6 -     5978]            jeq     L220
                 00098B
3322      P:0976 57E800  [4 -     5982]            move              x:(r0+n0),b
3323      P:0977 20007D  [2 -     5984]            cmp     y1,b
3324      P:0978 0AF0A2  [6 -     5990]            jne     L222
                 00097D
3325      P:097A 200013  [2 -     5992]            clr     a
3326      P:097B 0AF080  [6 -     5998]            jmp     L221
                 00098C
3327                                     L222
3328      P:097D 47F400  [4 -     6002]            move              #>1,y1
                 000001
3329      P:097F 44F400  [4 -     6006]            move              #>16383,x0
                 003FFF
3330      P:0981 56E100  [2 -     6008]            move              x:(r1),a
3331      P:0982 200043  [2 -     6010]            eor     x0,a
3332      P:0983 218E00  [2 -     6012]            move              a1,a
3333      P:0984 47F470  [4 -     6016]            add     y1,a      #>49152,y1
                 00C000
3334      P:0986 200046  [2 -     6018]            and     x0,a
3335      P:0987 218E00  [2 -     6020]            move              a1,a
3336      P:0988 200070  [2 -     6022]            add     y1,a
3337      P:0989 0AF080  [6 -     6028]            jmp     L221
                 00098C
3338                                     L220
3339      P:098B 56E100  [2 -     6030]            move              x:(r1),a
3340                                     L221
3341                                     ; **************************************************
3342                                     ; 
3343                                     ;       /* 15 TC auf 16 TC */
3344                                     ;       se = S_E & (1 << 14) ? 0x8000 | S_E : S_E ; 
3345                                     ; **************************************************
3346      P:098C 380200  [2 -     6032]            move              #2,n0
3347      P:098D 47F000  [4 -     6036]            move              x:FS_E,y1
                 00006A
3348      P:098F 218471  [2 -     6038]            tfr     y1,a      a1,x0
3349      P:0990 476800  [4 -     6042]            move              y1,x:(r0+n0)
3350      P:0991 47F400  [4 -     6046]            move              #>16384,y1
                 004000
3351      P:0993 200076  [2 -     6048]            and     y1,a
3352      P:0994 218E00  [2 -     6050]            move              a1,a
3353      P:0995 200003  [2 -     6052]            tst     a
3354      P:0996 0AF0AA  [6 -     6058]            jeq     L224
                 00099F
3355      P:0998 47F400  [4 -     6062]            move              #>32768,y1
                 008000
3356      P:099A 56E800  [4 -     6066]            move              x:(r0+n0),a
3357      P:099B 200072  [2 -     6068]            or      y1,a
3358      P:099C 218E00  [2 -     6070]            move              a1,a
3359      P:099D 0AF080  [6 -     6076]            jmp     L225
                 0009A1
3360                                     L224
3361      P:099F 56F000  [4 -     6080]            move              x:FS_E,a
                 00006A
3362                                     L225
3363                                     ; **************************************************
3364                                     ;   
3365                                     ;       /* perform add operation at 16 TC */
3366                                     ;       SP  = (dq + se) & 0xFFFF;
3367                                     ; **************************************************
3368                                     ; **************************************************
3369                                     ;     }
3370                                     ;     {
3371                                     ;       /* coding_adjector (inlined) */
3372                                     ;       /* Just passing a SP (16TC) through */
3373                                     ;       /* rest of the signals is ignored */
3374                                     ;       SD = SP;
3375                                     ; **************************************************
3376                                     ; **************************************************
3377                                     ;     }
3378                                     ;     tone_detector(&D_STATES);
3379                                     ; **************************************************
3380      P:09A1 44F449  [4 -     6084]            tfr     x0,b      #>65535,x0
                 00FFFF
3381      P:09A3 200018  [2 -     6086]            add     a,b
3382      P:09A4 200001  [2 -     6088]            tfr     b,a
3383      P:09A5 200046  [2 -     6090]            and     x0,a
3384      P:09A6 218E00  [2 -     6092]            move              a1,a
3385      P:09A7 547000  [4 -     6096]            move              a1,x:FSP
                 000068
3386      P:09A9 547000  [4 -     6100]            move              a1,x:FSD
                 00006B
3387      P:09AB 615E00  [2 -     6102]            move              r1,x:(r6)+
3388      P:09AC 0BF080  [6 -     6108]            jsr     Ftone_detector
                 000560
3389                                     ; **************************************************
3390                                     ;     speed_control(&D_STATES);
3391                                     ; **************************************************
3392      P:09AE 205600  [2 -     6110]            move              (r6)-
3393      P:09AF 615E00  [2 -     6112]            move              r1,x:(r6)+
3394      P:09B0 0BF080  [6 -     6118]            jsr     Fspeed_control
                 0005DC
3395                                     ; **************************************************
3396                                     ;     scale_factor(&D_STATES);
3397                                     ; **************************************************
3398      P:09B2 205600  [2 -     6120]            move              (r6)-
3399      P:09B3 615E00  [2 -     6122]            move              r1,x:(r6)+
3400      P:09B4 0BF080  [6 -     6128]            jsr     Fscale_factor
                 0006E4
3401                                     ; **************************************************
3402                                     ; #ifndef __MNECOUNT__
3403                                     ;     disk_record();
3404                                     ; **************************************************
3405      P:09B6 205600  [2 -     6130]            move              (r6)-
3406      P:09B7 0BF080  [6 -     6136]            jsr     Fdisk_record
                 000816
3407      P:09B9 56F000  [4 -     6140]            move              x:FExitFlag,a
                 000070
3408      P:09BB 200003  [2 -     6142]            tst     a
3409      P:09BC 0AF0AA  [6 -     6148]            jeq     L226
                 000832
3410                                     L176
3411                                     ; **************************************************
3412                                     ;   }
3413                                     ; 
3414                                     ;   post_disk_play();
3415                                     ; **************************************************
3416      P:09BE 0BF080  [6 -     6154]            jsr     Fpost_disk_play
                 000814
3417                                     ; **************************************************
3418                                     ;   post_disk_record();
3419                                     ; **************************************************
3420      P:09C0 0BF080  [6 -     6160]            jsr     Fpost_disk_record
                 000817
3421                                     ; **************************************************
3422                                     ; 
3423                                     ; #ifdef __LOOPCOUNT__
3424                                     ;   printf("\nLoop1: %d", Loop1);
3425                                     ;   printf("\nLoop2: %d", Loop2);
3426                                     ;   printf("\nLoop3: %d", Loop3);
3427                                     ;   printf("\nLoop4: %d", Loop4);
3428                                     ;   printf("\nLoop5: %d", Loop5);
3429                                     ;   printf("\nLoop6: %d", Loop6);
3430                                     ;   printf("\nLoop7: %d", Loop7);
3431                                     ; #endif
3432                                     ; 
3433                                     ; #ifdef __DOWNLOAD__
3434                                     ;   run56k_end();
3435                                     ; #endif
3436                                     ;   return (0);
3437                                     ; **************************************************
3438                                     ; **************************************************
3439                                     ; #endif
3440                                     ; } 
3441                                     ; **************************************************
3442      P:09C2 205013  [2 -     6162]            clr     a         (r0)-
3443      P:09C3 205600  [2 -     6164]            move              (r6)-
3444      P:09C4 63D600  [2 -     6166]            move              x:(r6)-,r3
3445      P:09C5 62D600  [2 -     6168]            move              x:(r6)-,r2
3446      P:09C6 61D600  [2 -     6170]            move              x:(r6)-,r1
3447      P:09C7 47D600  [2 -     6172]            move              x:(r6)-,y1
3448      P:09C8 46D600  [2 -     6174]            move              x:(r6)-,y0
3449      P:09C9 45D600  [2 -     6176]            move              x:(r6)-,x1
3450      P:09CA 44D600  [2 -     6178]            move              x:(r6)-,x0
3451      P:09CB 57D600  [2 -     6180]            move              x:(r6)-,b
3452      P:09CC 51E600  [2 -     6182]            move              x:(r6),b0
3453      P:09CD 05D03C  [2 -     6184]            move              x:(r0)-,ssh
3454      P:09CE 221603  [2 -     6186]            tst     a         r0,r6
3455      P:09CF 60E000  [2 -     6188]            move              x:(r0),r0
3456      P:09D0 00000C  [4 -     6192]            rts
3457   
3458      X:0067                                   org     x:
3459                                               global  FTDP
3460      X:0067 000000                  FTDP      bsc     1
3461                                               global  FSP
3462      X:0068 000000                  FSP       bsc     1
3463                                               global  FSL
3464      X:0069 000000                  FSL       bsc     1
3465                                               global  FS_E
3466      X:006A 000000                  FS_E      bsc     1
3467                                               global  FSD
3468      X:006B 000000                  FSD       bsc     1
3469                                               global  FI
3470      X:006C 000000                  FI        bsc     1
3471                                               global  FD
3472      X:006D 000000                  FD        bsc     1
3473                                               global  FAL
3474      X:006E 000000                  FAL       bsc     1
3475                                               global  FA_2
3476      X:006F 000000                  FA_2      bsc     1
3477                                               global  FExitFlag
3478      X:0070 000000                  FExitFlag bsc     1
3479                                               global  Fostrm
3480      X:0071